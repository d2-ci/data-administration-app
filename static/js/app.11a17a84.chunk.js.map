{"version":3,"sources":["D2App/pages/lock-exception/LockException.module.css","D2App/App.module.css","D2App/components/PageHeader/PageHeader.module.css","D2App/pages/analytics/Analytics.module.css","D2App/pages/data-integrity/Issues/IssueCard.module.css","D2App/pages/data-integrity/Issues/Issues.module.css","D2App/pages/data-statistics/DataStatistics.module.css","D2App/pages/maintenance/Checkboxes.module.css","D2App/pages/maintenance/Maintenance.module.css","D2App/pages/min-max-value-generation/MinMaxValueGeneration.module.css","D2App/pages/resource-tables/ResourceTables.module.css","D2App/pages/home/grid-section/GridSection.module.css","D2App/pages/home/Home.module.css","D2App/pages/lock-exception/AddLockExceptionForm.module.css","D2App/components/Sidebar/Sidebar.module.css","D2App/i18n-keys.js","D2App/components/notifications-table/notifications-table.conf.js","D2App/components/notifications-table/NotificationsTable.js","D2App/locales/index.js","D2App/components/DocsLink/DocsLink.js","D2App/components/PageHeader/PageHeader.js","D2App/get-updated-notifications.js","D2App/pages/analytics/analytics.conf.js","D2App/hooks/use-poll.js","D2App/pages/analytics/use-analytics-poll.js","D2App/pages/analytics/Analytics.js","D2App/pages/analytics/use-checkboxes.js","D2App/pages/data-integrity/Issues/IssueCard.js","D2App/pages/data-integrity/Issues/Issues.js","D2App/pages/data-integrity/use-data-integrity-poll.js","D2App/pages/data-integrity/DataIntegrity.js","D2App/components/FormattedNumber/FormattedNumber.js","D2App/pages/data-statistics/DataStatisticsTable.js","D2App/pages/data-statistics/table-keys.js","D2App/pages/data-statistics/parse-tables.js","D2App/pages/data-statistics/DataStatistics.js","D2App/pages/lock-exception/LockExceptionsTable.js","D2App/pages/lock-exception/parse-lock-exceptions.js","D2App/pages/lock-exception/RemoveLockExceptionModal.js","D2App/pages/lock-exception/LockException.js","D2App/pages/maintenance/Checkboxes.js","D2App/pages/maintenance/use-checkboxes.js","D2App/pages/maintenance/Maintenance.js","D2App/pages/min-max-value-generation/MinMaxValueGeneration.js","D2App/pages/resource-tables/use-resource-tables-poll.js","D2App/pages/resource-tables/ResourceTables.js","D2App/pages/sections.conf.js","D2App/pages/home/grid-section/GridSection.js","D2App/pages/home/Home.js","D2App/pages/lock-exception/OrgUnitSelect/common.js","D2App/pages/lock-exception/OrgUnitSelect/style.js","D2App/pages/lock-exception/OrgUnitSelect/OrgUnitSelectAll.js","D2App/pages/lock-exception/OrgUnitSelect/Dropdown/Controls.js","D2App/pages/lock-exception/OrgUnitSelect/Dropdown/D2UiDropdown.js","D2App/pages/lock-exception/OrgUnitSelect/Dropdown/Dropdown.js","D2App/pages/lock-exception/OrgUnitSelect/OrgUnitSelectByGroup.js","D2App/pages/lock-exception/OrgUnitSelect/OrgUnitSelectByLevel.js","D2App/pages/lock-exception/OrgUnitTree/TreeView.component.js","D2App/pages/lock-exception/OrgUnitTree/index.js","D2App/pages/lock-exception/PeriodPicker.js","D2App/pages/lock-exception/AddLockExceptionForm.js","D2App/pages/lock-exception/AddLockException.js","D2App/pages/lock-exception/BatchDeleteLockExceptions.js","D2App/components/Routes/Routes.js","D2App/components/Sidebar/Sidebar.js","D2App/theme.js","D2App/App.js"],"names":["module","exports","i18nKeys","dataIntegrity","title","i18n","t","label","description","actionText","unexpectedError","maintenance","checkboxes","analyticsTableClear","analyticsTableAnalyze","zeroDataValueRemoval","softDeletedDataValueRemoval","softDeletedEventRemoval","softDeletedEnrollmentRemoval","softDeletedTrackedEntityInstanceRemoval","periodPruning","expiredInvitationsClear","sqlViewsDrop","sqlViewsCreate","categoryOptionComboUpdate","ouPathsUpdate","cacheClear","appReload","resourceTables","tables","organisationUnitStructure","organistionUnitCategoryOptionCombo","categoryOptionGroupSetStructure","dataElementGroupSetStructure","indicatorGroupSetStructure","organisationUnitGroupSetStructure","categoryStructure","dataElementCategoryOptionComboName","dataElementStructure","periodStructure","dataPeriodStructure","dataElementCategoryOptionCombinations","analytics","skipAggregate","skipResourceTables","skipEvents","skipEnrollment","dataStatistics","lockException","minMaxValueGeneration","SUCCESS_COLOR","INFO_COLOR","ERROR_COLOR","SUCCESS_NOTIFICATION_ICON","notificationsTableStyles","iconStyle","fontSize","rowStyle","height","evenRowStyle","backgroundColor","timeColumnStyle","width","messageColumnStyle","successStyle","color","iconColor","fontWeight","errorStyle","infoStyle","notificationStyles","icon","row","Object","assign","notificationStylesInfo","NotificationsTable","notifications","animateIncomplete","done","some","n","completed","renderNotificationRow","notification","index","React","createElement","TableRow","key","displayBorder","style","level","TableRowColumn","dateFromServer","time","concat","slice","message","notificationIconInfo","FontIcon","className","renderNotificationIcon","length","Table","selectable","TableBody","displayRowCheckbox","map","namespace","addResources","arTranslations","ar_EGTranslations","ar_IQTranslations","ar_SDTranslations","bnTranslations","ckbTranslations","csTranslations","daTranslations","enTranslations","esTranslations","frTranslations","idTranslations","kmTranslations","loTranslations","mnTranslations","myTranslations","nbTranslations","neTranslations","prsTranslations","psTranslations","ptTranslations","pt_BRTranslations","ruTranslations","rwTranslations","svTranslations","tetTranslations","tgTranslations","ukTranslations","urTranslations","uzTranslations","uz_CyrlTranslations","uz_LatnTranslations","viTranslations","zhTranslations","zh_CNTranslations","DocsLink","sectionKey","serverVersion","useConfig","docsVersion","major","minor","tag","getDocsVersion","docsKey","getDocsKeyForSection","IconButton","href","target","rel","tooltip","tooltipPosition","iconClassName","PageHeader","styles","header","headerTitle","getUpdatedNotifications","taskNotifications","lastIndex","reverse","x","i","DEFAULT_LAST_YEARS","lastYearValues","value","displayName","push","String","lastYearElements","analyticsCheckboxes","usePoll","fn","pollInterval","intervalId","useRef","cancel","current","clearInterval","useEffect","start","args","setInterval","pollQuery","poll","resource","id","jobId","startAnalyticsTablesGenerationMutation","type","params","Analytics","toggleCheckbox","setCheckboxes","useState","forEach","checkbox","checked","useCheckboxes","lastYears","setLastYears","startAnalyticsTablesGeneration","loading","error","data","useDataMutation","refetch","useDataQuery","lazy","useAnalyticsPoll","isPolling","response","Fragment","Card","card","NoticeBox","noticeBox","form","entries","Checkbox","onChange","disabled","SingleSelectField","lastYearsSelect","selected","item","SingleSelectOption","Button","primary","onClick","CircularLoader","small","notificationsTable","Content","content","renderValue","Array","isArray","join","element","jsStyles","titleStyle","errorStyles","titleColor","colors","red600","openIcon","closeIcon","noErrorStyles","green600","cursor","countElements","sum","arr","reduce","acc","values","IssueCard","elementsCount","expandable","openFontIcon","closeFontIcon","CardHeader","issueTitle","issueElementsCount","actAsExpander","showExpandableButton","CardText","cardText","defaultProps","controls","dataElementsWithoutDataSet","dataElementsWithoutGroups","dataElementsViolatingExclusiveGroupSets","dataElementsAssignedToDataSetsWithDifferentPeriodTypes","dataSetsNotAssignedToOrganisationUnits","indicatorsWithIdenticalFormulas","indicatorsWithoutGroups","invalidIndicatorNumerators","invalidIndicatorDenominators","indicatorsViolatingExclusiveGroupSets","organisationUnitsWithCyclicReferences","orphanedOrganisationUnits","organisationUnitsWithoutGroups","organisationUnitsViolatingExclusiveGroupSets","organisationUnitGroupsWithoutGroupSets","validationRulesWithoutGroups","invalidValidationRuleLeftSideExpressions","invalidValidationRuleRightSideExpressions","invalidProgramIndicatorExpressions","invalidProgramIndicatorFilters","dataElementsInDataSetNotInForm","invalidCategoryCombos","duplicatePeriods","programRulesWithNoCondition","programRulesWithNoAction","programRulesWithNoPriority","programRuleVariablesWithNoDataElement","programRuleVariablesWithNoAttribute","programRuleActionsWithNoDataObject","programRuleActionsWithNoNotification","programRuleActionsWithNoSectionId","programRuleActionsWithNoStageId","programIndicatorsWithNoExpression","Issues","issues","errorElementskeys","keys","filter","includes","startDataIntegrityCheckMutation","DataIntegrity","_poll$error","handleStartDataIntegrityCheck","useDataIntegrityPoll","FormattedNumber","props","Intl","NumberFormat","language","format","DataStatisticsTable","elements","suppressZebraStriping","TableHead","TableRowHead","TableCellHead","TableCell","count","OBJECT_COUNTS_KEY","ACTIVE_USERS_KEY","USER_INVITATIONS_KEY","DATA_VALUE_COUNT_KEY","EVENT_COUNT_KEY","EXPIRED_INVITATION_KEY","objectLabels","indicator","period","visualization","programStageInstance","organisationUnit","validationRule","dataValue","program","dataElement","organisationUnitGroup","trackedEntityInstance","reportTable","programInstance","indicatorType","dataSet","userGroup","user","indicatorGroup","chart","dataElementGroup","dashboard","translatedTimeLabelFromIntProperty","intProperty","parseInt","days","userInvitationsTableFromResponse","userInvitationsResponse","userInvitationsTable","hasOwnProperty","call","TableCard","query","dataSummary","DataStatistics","CenteredContent","objectCountsResponse","activeUsersResponse","dataValueCountsResponse","eventCountsResponse","parseTables","renderTable","columnLabels","LockExceptionsTable","columns","rows","atBatchDeletionPage","onRemoveLockException","column","secondary","parseLockExceptions","lockExceptionResponse","periodId","dataSetId","organisationUnitId","mutation","RemoveLockExceptionModal","onRemove","onClose","successAlert","useAlert","success","errorAlert","nsSeparator","critical","mutate","onComplete","show","onError","Modal","ModalTitle","ModalContent","ModalActions","ButtonStrip","destructive","pe","ds","ou","lockExceptions","fields","order","LockException","page","setPage","pageSize","setPageSize","called","removeLockExceptionModal","setRemoveLockExceptionModal","visible","renderPagination","total","pageCount","pager","pagination","Pagination","onPageSizeChange","onPageChange","classnames","headerContainer","flexSpaceBetween","Link","to","tabIndex","Checkboxes","Maintenance","async","MIN_MAX_VALUE_ENDPOINT","organisationIdFromPath","path","array","split","organisationUnits","paging","dataSets","generateMinMaxValueMutation","removeMinMaxValueMutation","MinMaxValueGeneration","generateMinMaxValue","removeMinMaxValue","selectedOrganisationUnit","setSelectedOrganisationUnit","selectedDataSets","setSelectedDataSets","dataSetsSelectRef","formValid","container","left","multiple","from","selectedOptions","select","ref","options","right","tree","OrganisationUnitTree","roots","r","singleSelection","name","startResourceTablesGenerationMutation","ResourceTable","handleStartResourceTablesGeneration","useResourceTablesPoll","table","tableName","sections","component","info","docs","ResourceTables","_sections$find","find","section","obj","GridSection","PureComponent","render","this","GridTile","classNames","gridElement","gridTitleBar","gridTitleDescription","gridIcon","gridDescription","gridActionText","PropTypes","shape","string","isRequired","defineProperty","enumerable","configurable","writable","Home","gridElements","gridContainer","addToSelection","orgUnits","addedOus","toArray","onUpdateSelection","removeFromSelection","removed","selectedOus","handleChangeSelection","event","setState","selection","button","position","top","marginLeft","progress","button1","_defineProperty","OrgUnitSelectAll","Component","constructor","super","currentRoot","getDescendantOrgUnits","then","state","cache","d2","models","list","ous","catch","err","console","bind","root","includeDescendants","RaisedButton","handleSelectAll","handleDeselectAll","Controls","onSelect","onDeselect","display","LinearProgress","size","sharedStyles","_extends","arguments","source","prototype","apply","renderMenuItems","menuItems","MenuItem","primaryText","renderMenuItem","D2UiDropdown","other","menuItemArray","hasOptions","SelectField","fullWidth","callback","Dropdown","minHeight","floatingLabelText","OrgUnitSelectByGroup","undefined","groupCache","Map","getOrgUnitsForGroup","handleSelect","handleDeselect","groupId","ignoreCache","Promise","resolve","has","get","organisationUnitGroups","orgUnitGroups","set","groups","OrgUnitSelectByLevel","levelCache","getOrgUnitsForLevel","rootLevel","match","NaN","relativeLevel","isNaN","orgUnitArray","currentRootLevel","levels","TreeView","e","stopPropagation","collapsed","initiallyExpanded","hasBeenExpanded","toggleCollapsed","onExpand","UNSAFE_componentWillReceiveProps","newProps","whiteSpace","itemLabel","arrow","paddingLeft","textAlign","arrowSymbol","transition","transform","clickTarget","children","handleClick","persistent","progressBar","spacer","outline","ouContainer","borderColor","borderStyle","borderWidth","borderRightWidth","borderRadius","background","currentOuContainer","memberCount","OrgUnitTree","hasUnloadedData","sort","a","b","localeCompare","loadChildren","handleSelectClick","componentDidMount","idsThatShouldBeReloaded","setChildState","onChildrenLoaded","indexOf","load","forceReloadChildren","onSelectClick","shouldIncludeOrgUnit","orgUnit","orgUnitsPathsToInclude","renderChild","expandedProp","onChangeCurrentRoot","labelStyle","selectedLabelStyle","hideCheckboxes","hideMemberCount","renderChildren","currentOu","hasChildren","isSelectable","pathRegEx","RegExp","memberRegEx","isSelected","test","isCurrentRoot","isInitiallyExpanded","canBecomeCurrentRoot","ouContainerStyle","role","readOnly","datePicker","year","marginRight","month","week","biWeek","biMonth","quarter","sixMonth","line","marginTop","getYear","date","Date","getFullYear","toString","getTwoDigitMonth","getMonth","formattedDate","day","getDate","getTwoDigitDay","getWeekYear","setDate","getDay","isWeekValid","is53WeekISOYear","Number","biWeekToWeek","biWeekStr","PeriodPicker","context","getTranslation","componentDidUpdate","prevProps","periodType","handleChange","getPeriod","getFirstDateOfWeek","invalidWeek","invalidBiWeek","onPickPeriod","renderOptionPicker","isInvalid","floatingLabelStyle","renderYearPicker","years","currentYear","renderMonthPicker","10","11","12","renderWeekPicker","weeks","substr","renderBiWeekPicker","biWeeks","prefix","renderBiMonthPicker","1","2","3","4","5","6","renderQuarterPicker","setDateState","nothing","DatePicker","autoOk","d2UiSelectStyleOverride","minWidth","AddLockExceptionForm","updateSelectedDataSetId","rootWithMembers","rootWithDataSetMembers","dataSetMembers","all","memberCollection","memberObject","orgUnitPaths","updateSelectedPeriodId","newSelection","updateSelectedOrgUnits","splice","fixD2Translations","getChildContext","translations","data_set","organisation_unit","remove","actions","jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec","Q1","Q2","Q3","Q4","renderOrganisationUnitSelectionCard","organisationUnitSelectionCard","organisationUnitTree","handleOrgUnitClick","handleChangeRoot","organisationUnitName","handleSelectionUpdate","dataSetItems","dataSetSelectLabel","dataSetSelectValue","selectsContainer","items","handleDataSetChange","handlePeriodChange","object","oneOfType","func","AddLockException","history","useHistory","dataQuery","dataMutation","selectedOrgUnits","setSelectedOrgUnits","selectedDataSetId","setSelectedDataSetId","selectedPeriodId","setSelectedPeriodId","useD2","isAddActionDisabled","organisationUnitLevels","backArrowIcon","headerDivider","subHeader","addLockExceptionButton","orgUnitIds","orgUnitPath","splitOrgUnitPath","batchedLockExceptions","BatchDeleteLockExceptions","Routes","Switch","Route","exact","Redirect","SidebarItem","isActive","useRouteMatch","sidebarItem","active","Sidebar","Menu","theme","spacing","Spacing","fontFamily","palette","primary1Color","primary2Color","blue700","primary3Color","blue100","accent1Color","orange500","accent2Color","grey100","accent3Color","orangeA200","textColor","darkBlack","alternateTextColor","white","canvasColor","grey400","disabledColor","fade","muiTheme","getMuiTheme","App","HashRouter","CssVariables","spacers","MuiThemeProvider","sidebar","contentWrapper"],"mappings":"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","file":"static/js/app.11a17a84.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"pagination\":\"LockException_pagination__386cw\",\"headerContainer\":\"LockException_headerContainer__3IVXu\",\"header\":\"LockException_header__3DHeL\",\"flexSpaceBetween\":\"LockException_flexSpaceBetween__1gFwr\",\"lockExceptions\":\"LockException_lockExceptions__31sPL\",\"lockExceptionsHeader\":\"LockException_lockExceptionsHeader__2K7Nm\",\"lockExceptionDialog\":\"LockException_lockExceptionDialog__3Facz\",\"marginForAddButton\":\"LockException_marginForAddButton__3L837\",\"backArrowIcon\":\"LockException_backArrowIcon__3o-BP\",\"headerDivider\":\"LockException_headerDivider__98yTN\",\"subHeader\":\"LockException_subHeader__3h-v4\",\"card\":\"LockException_card__1SDdg\",\"addLockExceptionButton\":\"LockException_addLockExceptionButton__2hqyW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"App_container__2zgzu\",\"sidebar\":\"App_sidebar__10tAV\",\"content\":\"App_content__3I8HS\",\"contentWrapper\":\"App_contentWrapper__28dVZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"PageHeader_header__1jM0V\",\"headerTitle\":\"PageHeader_headerTitle__1KEEp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"Analytics_card__yDnHd\",\"form\":\"Analytics_form__1kWco\",\"checkboxes\":\"Analytics_checkboxes__3x3kH\",\"noticeBox\":\"Analytics_noticeBox__33LKk\",\"checkbox\":\"Analytics_checkbox__iwSjP\",\"lastYearsSelect\":\"Analytics_lastYearsSelect__1u-Al\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"IssueCard_card__3_lBo\",\"cardText\":\"IssueCard_cardText__2KnBC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"issues\":\"Issues_issues__24Dvb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"DataStatistics_card__-usL2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"checkboxes\":\"Checkboxes_checkboxes__37c7z\",\"checkbox\":\"Checkboxes_checkbox__1sczJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"Maintenance_card__1RUV7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"MinMaxValueGeneration_card__3HhUq\",\"header\":\"MinMaxValueGeneration_header__3aa-o\",\"container\":\"MinMaxValueGeneration_container__1KXr1\",\"label\":\"MinMaxValueGeneration_label__Zpg4R\",\"left\":\"MinMaxValueGeneration_left___Z-17\",\"right\":\"MinMaxValueGeneration_right__3Nvgn\",\"tree\":\"MinMaxValueGeneration_tree__1LuaX\",\"select\":\"MinMaxValueGeneration_select__3RB4a\",\"options\":\"MinMaxValueGeneration_options__XH-P_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"ResourceTables_card__1Xjck\",\"description\":\"ResourceTables_description__3ojib\",\"tableName\":\"ResourceTables_tableName__3eEPw\",\"noticeBox\":\"ResourceTables_noticeBox__2-ZOw\",\"notificationsTable\":\"ResourceTables_notificationsTable__3uSsd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gridElement\":\"GridSection_gridElement__dFN30\",\"gridTitleBar\":\"GridSection_gridTitleBar__iuWB9\",\"gridTitleDescription\":\"GridSection_gridTitleDescription__OBU6O\",\"gridIcon\":\"GridSection_gridIcon__1BcuZ\",\"gridDescription\":\"GridSection_gridDescription__3BQ6R\",\"gridActionText\":\"GridSection_gridActionText__2cTCc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gridContainer\":\"Home_gridContainer__3mcNn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"selectsContainer\":\"AddLockExceptionForm_selectsContainer__1FfO9\",\"organisationUnitTree\":\"AddLockExceptionForm_organisationUnitTree__2Vu3S\",\"right\":\"AddLockExceptionForm_right__3MHtt\",\"organisationUnitSelectionCard\":\"AddLockExceptionForm_organisationUnitSelectionCard__13mBr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sidebarItem\":\"Sidebar_sidebarItem__3GXPY\"};","import i18n from '@dhis2/d2-i18n';\nexport const i18nKeys = {\n  dataIntegrity: {\n    title: i18n.t('Data Integrity'),\n    label: i18n.t('Data Integrity'),\n    description: i18n.t('Run data integrity checks and unveil anomalies and problems in the metadata setup.'),\n    actionText: i18n.t('Check data integrity'),\n    unexpectedError: i18n.t('An unexpected error happened during data integrity checks')\n  },\n  maintenance: {\n    title: i18n.t('Maintenance'),\n    label: i18n.t('Maintenance'),\n    description: i18n.t('Perform maintenance tasks and generate resource database tables for the organisation unit hierarchy and group set structure.'),\n    actionText: i18n.t('Perform maintenance'),\n    checkboxes: {\n      analyticsTableClear: i18n.t('Clear analytics tables'),\n      analyticsTableAnalyze: i18n.t('Analyze analytics tables'),\n      zeroDataValueRemoval: i18n.t('Remove zero data values'),\n      softDeletedDataValueRemoval: i18n.t('Permanently remove soft deleted data values'),\n      softDeletedEventRemoval: i18n.t('Permanently remove soft deleted events'),\n      softDeletedEnrollmentRemoval: i18n.t('Permanently remove soft deleted enrollments'),\n      softDeletedTrackedEntityInstanceRemoval: i18n.t('Permanently remove soft deleted tracked entity instances'),\n      periodPruning: i18n.t('Prune periods'),\n      expiredInvitationsClear: i18n.t('Remove expired invitations'),\n      sqlViewsDrop: i18n.t('Drop SQL views'),\n      sqlViewsCreate: i18n.t('Create SQL views'),\n      categoryOptionComboUpdate: i18n.t('Update category option combinations'),\n      ouPathsUpdate: i18n.t('Update organisation unit paths'),\n      cacheClear: i18n.t('Clear application cache'),\n      appReload: i18n.t('Reload apps')\n    }\n  },\n  resourceTables: {\n    title: i18n.t('Resource Tables'),\n    label: i18n.t('Resource Tables'),\n    description: i18n.t('Generate resource database tables for the organisation unit hierarchy and group set structure among others.'),\n    actionText: i18n.t('Generate Resource Tables'),\n    unexpectedError: i18n.t('An unexpected error happened during operation'),\n    tables: {\n      organisationUnitStructure: i18n.t('Organisation unit structure'),\n      organistionUnitCategoryOptionCombo: i18n.t('Organisation unit category option combo'),\n      categoryOptionGroupSetStructure: i18n.t('Category option group set structure'),\n      dataElementGroupSetStructure: i18n.t('Data element group set structure'),\n      indicatorGroupSetStructure: i18n.t('Indicator group set structure'),\n      organisationUnitGroupSetStructure: i18n.t('Organisation unit group set structure'),\n      categoryStructure: i18n.t('Category structure'),\n      dataElementCategoryOptionComboName: i18n.t('Data element category option combo name'),\n      dataElementStructure: i18n.t('Data element structure'),\n      periodStructure: i18n.t('Period structure'),\n      dataPeriodStructure: i18n.t('Date period structure'),\n      dataElementCategoryOptionCombinations: i18n.t('Data element category option combinations')\n    }\n  },\n  analytics: {\n    title: i18n.t('Analytics tables management'),\n    label: i18n.t('Analytics Tables'),\n    description: i18n.t('The data mart is a set of tables in the DHIS database which is used by all reporting and analysis tools to retrieve data from.'),\n    actionText: i18n.t('Analytics tables update'),\n    unexpectedError: i18n.t('An unexpected error happened during maintenance'),\n    checkboxes: {\n      skipAggregate: i18n.t('Skip generation of aggregate data and completeness data'),\n      skipResourceTables: i18n.t('Skip generation of resource tables'),\n      skipEvents: i18n.t('Skip generation of event data'),\n      skipEnrollment: i18n.t('Skip generation of enrollment data')\n    }\n  },\n  dataStatistics: {\n    title: i18n.t('Data Statistics'),\n    label: i18n.t('Data Statistics'),\n    description: i18n.t('Browse the number of objects in the database, like data elements, indicators, data sets and data values.'),\n    actionText: i18n.t('Overview Data Statistics')\n  },\n  lockException: {\n    title: i18n.t('Lock Exception Management'),\n    label: i18n.t('Lock Exception'),\n    description: i18n.t('Add or remove exceptions to the the standard rules for locking of data entry forms.'),\n    actionText: i18n.t('Lock Exception Management')\n  },\n  minMaxValueGeneration: {\n    title: i18n.t('Min-Max Value Generation'),\n    label: i18n.t('Min-Max Value Generation'),\n    description: i18n.t('Generate min-max values which can be used for data validation during data entry and validation processes.'),\n    actionText: i18n.t('Generate Min-Max Values')\n  }\n};\nexport default i18nKeys;","/* Notification Table Styles */\nexport const INFO_LEVEL = 'INFO';\nexport const ERROR_LEVEL = 'ERROR';\nexport const SUCCESS_LEVEL = 'SUCCESS';\nexport const SUCCESS_COLOR = '#8ac542';\nexport const INFO_COLOR = '#000000';\nexport const ERROR_COLOR = '#ff0000';\nexport const ERROR_NOTIFICATION_ICON = 'error';\nexport const SUCCESS_NOTIFICATION_ICON = 'check';\nconst FONT_SIZE = 14;\nexport const notificationsTableStyles = {\n  iconStyle: {\n    fontSize: FONT_SIZE\n  },\n  rowStyle: {\n    fontSize: FONT_SIZE,\n    height: 48\n  },\n  evenRowStyle: {\n    backgroundColor: '#fafafa'\n  },\n  timeColumnStyle: {\n    width: '20%'\n  },\n  messageColumnStyle: {\n    width: '80%'\n  },\n  successStyle: {\n    color: SUCCESS_COLOR,\n    iconColor: SUCCESS_COLOR,\n    fontWeight: 'bold'\n  },\n  errorStyle: {\n    color: ERROR_COLOR,\n    iconColor: ERROR_COLOR,\n    fontWeight: 'bold'\n  },\n  infoStyle: {\n    color: INFO_COLOR,\n    iconColor: SUCCESS_COLOR\n  }\n};\nconst notificationStyles = {};\nnotificationStyles[SUCCESS_LEVEL] = {\n  color: SUCCESS_COLOR,\n  icon: SUCCESS_NOTIFICATION_ICON,\n  row: Object.assign({}, notificationsTableStyles.rowStyle, notificationsTableStyles.successStyle)\n};\nnotificationStyles[ERROR_LEVEL] = {\n  color: ERROR_COLOR,\n  icon: ERROR_NOTIFICATION_ICON,\n  row: Object.assign({}, notificationsTableStyles.rowStyle, notificationsTableStyles.errorStyle)\n};\nnotificationStyles[INFO_LEVEL] = {\n  color: INFO_COLOR,\n  icon: SUCCESS_NOTIFICATION_ICON,\n  iconColor: SUCCESS_COLOR,\n  row: Object.assign({}, notificationsTableStyles.rowStyle, notificationsTableStyles.infoStyle)\n};\nexport const notificationStylesInfo = notificationStyles;\n/* helper methods */\n\n/* FIXME think of using an third party library for that, converting for a standard time format defined by design team */\n\nexport const formatDateFromServer = dateFromServer => {\n  if (dateFromServer) {\n    return \"\".concat(dateFromServer.slice(0, 10), \" \").concat(dateFromServer.slice(11, 19));\n  }\n\n  return '';\n};","import { Table, TableBody, TableRow, TableRowColumn, FontIcon } from 'material-ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { notificationsTableStyles, notificationStylesInfo, formatDateFromServer } from './notifications-table.conf';\nimport './style.css';\n\nconst NotificationsTable = ({\n  notifications,\n  animateIncomplete\n}) => {\n  const done = notifications.some(n => n.completed);\n\n  const renderNotificationIcon = notification => {\n    const notificationIconInfo = notificationStylesInfo[notification.level];\n\n    if (notificationIconInfo && notificationIconInfo.icon && notification.completed) {\n      return /*#__PURE__*/React.createElement(FontIcon, {\n        className: \"material-icons\",\n        style: notificationsTableStyles.iconStyle,\n        color: notificationIconInfo.iconColor\n      }, notificationIconInfo.icon);\n    } else if (animateIncomplete && !notification.completed && !done) {\n      return /*#__PURE__*/React.createElement(\"span\", {\n        className: \"notification-icon-busy\"\n      }, \"...\");\n    }\n\n    return null;\n  };\n\n  const renderNotificationRow = (notification, index) => /*#__PURE__*/React.createElement(TableRow, {\n    key: index,\n    displayBorder: false,\n    style: Object.assign({}, notificationStylesInfo[notification.level].row, (index + 1) % 2 === 0 ? notificationsTableStyles.evenRowStyle : {})\n  }, /*#__PURE__*/React.createElement(TableRowColumn, {\n    style: notificationsTableStyles.timeColumnStyle\n  }, formatDateFromServer(notification.time)), /*#__PURE__*/React.createElement(TableRowColumn, {\n    style: notificationsTableStyles.messageColumnStyle\n  }, notification.message, \" \", renderNotificationIcon(notification)));\n\n  if (notifications && notifications.length > 0) {\n    return /*#__PURE__*/React.createElement(Table, {\n      selectable: false\n    }, /*#__PURE__*/React.createElement(TableBody, {\n      displayRowCheckbox: false\n    }, notifications.map(renderNotificationRow)));\n  }\n\n  return null;\n};\n\nNotificationsTable.propTypes = {\n  notifications: PropTypes.arrayOf(PropTypes.shape({\n    completed: PropTypes.bool,\n    level: PropTypes.string,\n    message: PropTypes.string,\n    time: PropTypes.string,\n    uid: PropTypes.string\n  })).isRequired,\n  animateIncomplete: PropTypes.bool\n};\nexport default NotificationsTable;","//------------------------------------------------------------------------------\n// <auto-generated>\n// This code was generated by d2-i18n-generate.\n//\n// Changes to this file may cause incorrect behavior and will be lost if\n// the code is regenerated.\n// </auto-generated>\n//------------------------------------------------------------------------------\nimport i18n from '@dhis2/d2-i18n';\nimport arTranslations from './ar/translations.json';\nimport ar_EGTranslations from './ar_EG/translations.json';\nimport ar_IQTranslations from './ar_IQ/translations.json';\nimport ar_SDTranslations from './ar_SD/translations.json';\nimport bnTranslations from './bn/translations.json';\nimport ckbTranslations from './ckb/translations.json';\nimport csTranslations from './cs/translations.json';\nimport daTranslations from './da/translations.json';\nimport enTranslations from './en/translations.json';\nimport esTranslations from './es/translations.json';\nimport frTranslations from './fr/translations.json';\nimport idTranslations from './id/translations.json';\nimport kmTranslations from './km/translations.json';\nimport loTranslations from './lo/translations.json';\nimport mnTranslations from './mn/translations.json';\nimport myTranslations from './my/translations.json';\nimport nbTranslations from './nb/translations.json';\nimport neTranslations from './ne/translations.json';\nimport prsTranslations from './prs/translations.json';\nimport psTranslations from './ps/translations.json';\nimport ptTranslations from './pt/translations.json';\nimport pt_BRTranslations from './pt_BR/translations.json';\nimport ruTranslations from './ru/translations.json';\nimport rwTranslations from './rw/translations.json';\nimport svTranslations from './sv/translations.json';\nimport tetTranslations from './tet/translations.json';\nimport tgTranslations from './tg/translations.json';\nimport ukTranslations from './uk/translations.json';\nimport urTranslations from './ur/translations.json';\nimport uzTranslations from './uz/translations.json';\nimport uz_CyrlTranslations from './uz_Cyrl/translations.json';\nimport uz_LatnTranslations from './uz_Latn/translations.json';\nimport viTranslations from './vi/translations.json';\nimport zhTranslations from './zh/translations.json';\nimport zh_CNTranslations from './zh_CN/translations.json';\nconst namespace = 'default';\ni18n.addResources('ar', namespace, arTranslations);\ni18n.addResources('ar_EG', namespace, ar_EGTranslations);\ni18n.addResources('ar_IQ', namespace, ar_IQTranslations);\ni18n.addResources('ar_SD', namespace, ar_SDTranslations);\ni18n.addResources('bn', namespace, bnTranslations);\ni18n.addResources('ckb', namespace, ckbTranslations);\ni18n.addResources('cs', namespace, csTranslations);\ni18n.addResources('da', namespace, daTranslations);\ni18n.addResources('en', namespace, enTranslations);\ni18n.addResources('es', namespace, esTranslations);\ni18n.addResources('fr', namespace, frTranslations);\ni18n.addResources('id', namespace, idTranslations);\ni18n.addResources('km', namespace, kmTranslations);\ni18n.addResources('lo', namespace, loTranslations);\ni18n.addResources('mn', namespace, mnTranslations);\ni18n.addResources('my', namespace, myTranslations);\ni18n.addResources('nb', namespace, nbTranslations);\ni18n.addResources('ne', namespace, neTranslations);\ni18n.addResources('prs', namespace, prsTranslations);\ni18n.addResources('ps', namespace, psTranslations);\ni18n.addResources('pt', namespace, ptTranslations);\ni18n.addResources('pt_BR', namespace, pt_BRTranslations);\ni18n.addResources('ru', namespace, ruTranslations);\ni18n.addResources('rw', namespace, rwTranslations);\ni18n.addResources('sv', namespace, svTranslations);\ni18n.addResources('tet', namespace, tetTranslations);\ni18n.addResources('tg', namespace, tgTranslations);\ni18n.addResources('uk', namespace, ukTranslations);\ni18n.addResources('ur', namespace, urTranslations);\ni18n.addResources('uz', namespace, uzTranslations);\ni18n.addResources('uz_Cyrl', namespace, uz_CyrlTranslations);\ni18n.addResources('uz_Latn', namespace, uz_LatnTranslations);\ni18n.addResources('vi', namespace, viTranslations);\ni18n.addResources('zh', namespace, zhTranslations);\ni18n.addResources('zh_CN', namespace, zh_CNTranslations);\nexport default i18n;","import { useConfig } from '@dhis2/app-runtime';\nimport { IconButton } from 'material-ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport i18n from '../../locales';\nimport { getDocsKeyForSection } from '../../pages/sections.conf';\n\nconst getDocsVersion = ({\n  major,\n  minor,\n  tag\n}) => {\n  if (tag === 'SNAPSHOT') {\n    return 'master';\n  }\n\n  return \"\".concat(major).concat(minor);\n};\n\nconst DocsLink = ({\n  sectionKey\n}) => {\n  const {\n    serverVersion\n  } = useConfig();\n  const docsVersion = getDocsVersion(serverVersion);\n  const docsKey = getDocsKeyForSection(sectionKey);\n  return /*#__PURE__*/React.createElement(IconButton, {\n    className: \"helper-icon\",\n    iconStyle: {\n      color: '#276696'\n    },\n    href: \"https://docs.dhis2.org/en/use/user-guides/dhis-core-version-\".concat(docsVersion, \"/maintaining-the-system/data-administration.html#\").concat(docsKey),\n    target: \"_blank\",\n    rel: \"noopener noreferrer\",\n    tooltip: i18n.t('Open user guide'),\n    tooltipPosition: \"bottom-center\",\n    iconClassName: \"material-icons\"\n  }, \"help\");\n};\n\nDocsLink.propTypes = {\n  sectionKey: PropTypes.string.isRequired\n};\nexport default DocsLink;","import PropTypes from 'prop-types';\nimport React from 'react';\nimport DocsLink from '../DocsLink/DocsLink';\nimport styles from './PageHeader.module.css';\n\nconst PageHeader = ({\n  title,\n  sectionKey\n}) => /*#__PURE__*/React.createElement(\"header\", {\n  className: styles.header\n}, /*#__PURE__*/React.createElement(\"h1\", {\n  className: styles.headerTitle\n}, title), /*#__PURE__*/React.createElement(DocsLink, {\n  sectionKey: sectionKey\n}));\n\nPageHeader.propTypes = {\n  sectionKey: PropTypes.string.isRequired,\n  title: PropTypes.string.isRequired\n};\nexport default PageHeader;","export const getUpdatedNotifications = taskNotifications => {\n  const lastIndex = taskNotifications.length - 1; // Reverse to sort oldest-newest\n  // Assumption: all tasks are completed, apart from the last one,\n  // which is the in-progress task.\n  // Exception is when the most recent task comes back as completed\n  // this indicates the entire process is done, so we respect that completed status.\n\n  return [...taskNotifications].reverse().map((x, i) => ({ ...x,\n    completed: x.completed || i < lastIndex\n  }));\n};","import i18n from '@dhis2/d2-i18n';\nimport { i18nKeys } from '../../i18n-keys';\nexport const DEFAULT_LAST_YEARS = '-1';\nexport const LAST_YEARS_INPUT_KEY = 'lastYears';\nconst LAST_YEAR = 10;\nconst FIRST_YEAR = 1;\nconst lastYearValues = [{\n  key: DEFAULT_LAST_YEARS,\n  value: DEFAULT_LAST_YEARS,\n  displayName: i18n.t('All')\n}];\n/* Last years dropdown options */\n\nfor (let i = FIRST_YEAR; i <= LAST_YEAR; i++) {\n  lastYearValues.push({\n    key: String(i),\n    value: String(i),\n    displayName: String(i)\n  });\n}\n\nexport const lastYearElements = lastYearValues;\n/* Form checkboxes */\n\nexport const analyticsCheckboxes = ['skipAggregate', 'skipResourceTables', 'skipEvents', 'skipEnrollment'].map(key => ({\n  key,\n  label: i18nKeys.analytics.checkboxes[key]\n}));","import { useRef, useEffect } from 'react';\nexport const usePoll = (fn, pollInterval) => {\n  const intervalId = useRef(null);\n\n  const cancel = () => {\n    if (intervalId.current) {\n      clearInterval(intervalId.current);\n    }\n  };\n\n  const start = (...args) => {\n    cancel();\n    intervalId.current = setInterval(() => fn(...args), pollInterval);\n  };\n\n  useEffect(() => {\n    return cancel;\n  }, []);\n  return {\n    start,\n    cancel\n  };\n};","import { useDataQuery } from '@dhis2/app-runtime';\nimport { useEffect } from 'react';\nimport { usePoll } from '../../hooks/use-poll';\nconst pollQuery = {\n  poll: {\n    resource: 'system/tasks/ANALYTICS_TABLE',\n    id: ({\n      jobId\n    }) => jobId\n  }\n};\nexport const useAnalyticsPoll = () => {\n  const {\n    refetch,\n    error,\n    data\n  } = useDataQuery(pollQuery, {\n    lazy: true\n  });\n  const PULL_INTERVAL = 3000;\n  const poll = usePoll(jobId => {\n    refetch({\n      jobId\n    });\n  }, PULL_INTERVAL);\n  useEffect(() => {\n    if (data !== null && data !== void 0 && data.poll.some(t => t.completed)) {\n      poll.cancel();\n    }\n  }, [data]);\n  return { ...poll,\n    error,\n    data: data === null || data === void 0 ? void 0 : data.poll\n  };\n};","import { useDataMutation } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Button, Card, Checkbox, SingleSelectField, SingleSelectOption, NoticeBox, CircularLoader } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useEffect, useState } from 'react';\nimport NotificationsTable from '../../components/notifications-table/NotificationsTable';\nimport PageHeader from '../../components/PageHeader/PageHeader';\nimport { getUpdatedNotifications } from '../../get-updated-notifications';\nimport { i18nKeys } from '../../i18n-keys';\nimport { DEFAULT_LAST_YEARS, LAST_YEARS_INPUT_KEY, lastYearElements } from './analytics.conf';\nimport styles from './Analytics.module.css';\nimport { useAnalyticsPoll } from './use-analytics-poll';\nimport { useCheckboxes } from './use-checkboxes';\nconst startAnalyticsTablesGenerationMutation = {\n  resource: 'resourceTables/analytics',\n  type: 'create',\n  params: params => params\n};\n\nconst Analytics = ({\n  sectionKey\n}) => {\n  const {\n    checkboxes,\n    toggleCheckbox\n  } = useCheckboxes();\n  const [lastYears, setLastYears] = useState(DEFAULT_LAST_YEARS);\n  const [startAnalyticsTablesGeneration, {\n    loading,\n    error,\n    data\n  }] = useDataMutation(startAnalyticsTablesGenerationMutation);\n  const poll = useAnalyticsPoll();\n  const notifications = poll.data ? getUpdatedNotifications(poll.data) : [];\n  const isPolling = data && (!poll.data || !notifications.some(n => n.completed));\n  useEffect(() => {\n    if (loading || !data) {\n      return;\n    }\n\n    const {\n      id: jobId\n    } = data.response;\n    poll.start(jobId);\n  }, [loading, data]);\n\n  const handleStartAnalyticsTablesGeneration = () => {\n    const params = {};\n\n    for (const [key, checked] of Object.entries(checkboxes)) {\n      if (checked) {\n        params[key] = true;\n      }\n    }\n\n    if (lastYears !== DEFAULT_LAST_YEARS) {\n      params[LAST_YEARS_INPUT_KEY] = lastYears;\n    }\n\n    startAnalyticsTablesGeneration(params);\n  };\n\n  const handleLastYearsChange = ({\n    selected\n  }) => {\n    setLastYears(selected);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(PageHeader, {\n    title: i18nKeys.analytics.title,\n    sectionKey: sectionKey\n  }), /*#__PURE__*/React.createElement(Card, {\n    className: styles.card\n  }, (error || poll.error) && /*#__PURE__*/React.createElement(NoticeBox, {\n    className: styles.noticeBox,\n    error: true\n  }, (error === null || error === void 0 ? void 0 : error.message) || poll.error.message), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.form\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.checkboxes\n  }, Object.entries(checkboxes).map(([key, {\n    label,\n    checked\n  }]) => /*#__PURE__*/React.createElement(Checkbox, {\n    key: key,\n    className: styles.checkbox,\n    label: label,\n    checked: checked,\n    onChange: () => {\n      toggleCheckbox(key);\n    },\n    disabled: loading || isPolling\n  }))), /*#__PURE__*/React.createElement(SingleSelectField, {\n    className: styles.lastYearsSelect,\n    label: i18n.t('Number of last years of data to include'),\n    selected: lastYears,\n    onChange: handleLastYearsChange,\n    disabled: loading || isPolling\n  }, lastYearElements.map(item => /*#__PURE__*/React.createElement(SingleSelectOption, {\n    key: item.key,\n    label: item.displayName,\n    value: item.value\n  })))), /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    onClick: handleStartAnalyticsTablesGeneration,\n    disabled: loading || isPolling\n  }, loading || isPolling ? /*#__PURE__*/React.createElement(React.Fragment, null, i18n.t('Exporting...'), /*#__PURE__*/React.createElement(CircularLoader, {\n    small: true\n  })) : i18n.t('Start export')), notifications.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.notificationsTable\n  }, /*#__PURE__*/React.createElement(NotificationsTable, {\n    notifications: notifications,\n    animateIncomplete: true\n  }))));\n};\n\nAnalytics.propTypes = {\n  sectionKey: PropTypes.string.isRequired\n};\nexport default Analytics;","import { useState } from 'react';\nimport { analyticsCheckboxes } from './analytics.conf';\nexport const useCheckboxes = () => {\n  const [checkboxes, setCheckboxes] = useState(() => {\n    const checkboxes = {};\n    analyticsCheckboxes.forEach(checkbox => {\n      checkboxes[checkbox.key] = {\n        checked: false,\n        label: checkbox.label\n      };\n    });\n    return checkboxes;\n  });\n\n  const toggleCheckbox = key => {\n    setCheckboxes({ ...checkboxes,\n      [key]: { ...checkboxes[key],\n        checked: !checkboxes[key].checked\n      }\n    });\n  };\n\n  return {\n    checkboxes,\n    toggleCheckbox\n  };\n};","import i18n from '@dhis2/d2-i18n';\nimport { colors } from '@dhis2/ui';\nimport { FontIcon } from 'material-ui';\nimport { Card, CardText, CardHeader } from 'material-ui/Card';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './IssueCard.module.css';\n\nconst Content = ({\n  content\n}) => {\n  const renderValue = value => Array.isArray(value) ? value.join(', ') : value;\n\n  if (Array.isArray(content)) {\n    return content.map(element => /*#__PURE__*/React.createElement(\"p\", {\n      key: element\n    }, renderValue(element)));\n  } else {\n    return Object.entries(content).map(([element, value]) => /*#__PURE__*/React.createElement(\"div\", {\n      key: element\n    }, /*#__PURE__*/React.createElement(\"h4\", null, element), /*#__PURE__*/React.createElement(\"p\", null, renderValue(value))));\n  }\n};\n\nconst jsStyles = {\n  titleStyle: {\n    fontSize: 16,\n    fontWeight: 'normal'\n  }\n};\nconst errorStyles = {\n  titleColor: colors.red600,\n  openIcon: 'keyboard_arrow_up',\n  closeIcon: 'keyboard_arrow_down',\n  iconStyle: {}\n};\nconst noErrorStyles = {\n  titleColor: colors.green600,\n  openIcon: 'done',\n  closeIcon: 'done',\n  iconStyle: {\n    color: colors.green600,\n    cursor: 'auto'\n  }\n};\n\nconst countElements = content => {\n  const sum = arr => arr.reduce((acc, element) => {\n    return acc + countElements(element);\n  }, 0);\n\n  if (Array.isArray(content)) {\n    return sum(content);\n  } else if (typeof content === 'object') {\n    return sum(Object.values(content));\n  } else {\n    return 1;\n  }\n};\n\nconst IssueCard = ({\n  title,\n  content\n}) => {\n  const elementsCount = countElements(content);\n  const expandable = elementsCount > 0;\n  const {\n    titleColor,\n    openIcon,\n    closeIcon,\n    iconStyle\n  } = elementsCount > 0 ? errorStyles : noErrorStyles;\n  const openFontIcon = /*#__PURE__*/React.createElement(FontIcon, {\n    className: \"material-icons\"\n  }, openIcon);\n  const closeFontIcon = /*#__PURE__*/React.createElement(FontIcon, {\n    className: \"material-icons\"\n  }, closeIcon);\n  return /*#__PURE__*/React.createElement(Card, {\n    className: styles.card\n  }, /*#__PURE__*/React.createElement(CardHeader, {\n    title: /*#__PURE__*/React.createElement(\"div\", {\n      \"data-test\": \"issue-card-title\"\n    }, elementsCount > 0 ? i18n.t('{{issueTitle}} ({{issueElementsCount}})', {\n      issueTitle: title,\n      issueElementsCount: elementsCount\n    }) : title),\n    titleColor: titleColor,\n    titleStyle: jsStyles.titleStyle,\n    actAsExpander: expandable,\n    showExpandableButton: true,\n    closeIcon: closeFontIcon,\n    openIcon: openFontIcon,\n    iconStyle: iconStyle\n  }), elementsCount > 0 && /*#__PURE__*/React.createElement(CardText, {\n    className: styles.cardText,\n    expandable: expandable\n  }, /*#__PURE__*/React.createElement(Content, {\n    content: content\n  })));\n};\n\nIssueCard.propTypes = {\n  title: PropTypes.string.isRequired,\n  content: PropTypes.oneOfType([PropTypes.array, PropTypes.object])\n};\nIssueCard.defaultProps = {\n  content: []\n};\nexport default IssueCard;","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport IssueCard from './IssueCard';\nimport styles from './Issues.module.css';\nconst controls = {\n  dataElementsWithoutDataSet: i18n.t('Data elements without data set'),\n  dataElementsWithoutGroups: i18n.t('Data elements without groups'),\n  dataElementsViolatingExclusiveGroupSets: i18n.t('Data elements violating exclusive group sets'),\n  dataElementsAssignedToDataSetsWithDifferentPeriodTypes: i18n.t('Data elements assigned to data sets with different period types'),\n  dataSetsNotAssignedToOrganisationUnits: i18n.t('Data sets not assigned to organisation units'),\n  indicatorsWithIdenticalFormulas: i18n.t('Indicators with identical formulas'),\n  indicatorsWithoutGroups: i18n.t('Indicators without groups'),\n  invalidIndicatorNumerators: i18n.t('Invalid indicator numerators'),\n  invalidIndicatorDenominators: i18n.t('Invalid indicator denominators'),\n  indicatorsViolatingExclusiveGroupSets: i18n.t('Indicators violating exclusive group sets'),\n  organisationUnitsWithCyclicReferences: i18n.t('Organisation units with cyclic references'),\n  orphanedOrganisationUnits: i18n.t('Orphaned organisation units'),\n  organisationUnitsWithoutGroups: i18n.t('Organisation units without groups'),\n  organisationUnitsViolatingExclusiveGroupSets: i18n.t('Organisation units violating exclusive group sets'),\n  organisationUnitGroupsWithoutGroupSets: i18n.t('Organisation unit groups without group sets'),\n  validationRulesWithoutGroups: i18n.t('Validation rules without groups'),\n  invalidValidationRuleLeftSideExpressions: i18n.t('Invalid validation rule left side expressions'),\n  invalidValidationRuleRightSideExpressions: i18n.t('Invalid validation rule right side expressions'),\n  invalidProgramIndicatorExpressions: i18n.t('Invalid program indicator expressions'),\n  invalidProgramIndicatorFilters: i18n.t('Invalid program indicator filters'),\n  dataElementsInDataSetNotInForm: i18n.t('There are data elements in the form, but not in the form or sections'),\n  invalidCategoryCombos: i18n.t('Invalid category combinations'),\n  duplicatePeriods: i18n.t('Duplicate periods'),\n  programRulesWithNoCondition: i18n.t('Program rules with no condition'),\n  programRulesWithNoAction: i18n.t('Program rules with no action'),\n  programRulesWithNoPriority: i18n.t('Program rules with no priority'),\n  programRuleVariablesWithNoDataElement: i18n.t('Program rule variables with no data element'),\n  programRuleVariablesWithNoAttribute: i18n.t('Program rule variables with no attribute'),\n  programRuleActionsWithNoDataObject: i18n.t('Program rule actions with no data object'),\n  programRuleActionsWithNoNotification: i18n.t('Program rule actions with no notification'),\n  programRuleActionsWithNoSectionId: i18n.t('Program rule actions with no section id'),\n  programRuleActionsWithNoStageId: i18n.t('Program rule actions with no stage id'),\n  programIndicatorsWithNoExpression: i18n.t('Program indicators with no expression')\n};\n\nconst Issues = ({\n  issues\n}) => {\n  const errorElementskeys = Object.keys(issues);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.issues\n  }, errorElementskeys.map(element => {\n    const label = controls[element];\n\n    if (!label) {\n      return null;\n    }\n\n    return /*#__PURE__*/React.createElement(IssueCard, {\n      key: element,\n      title: label,\n      content: issues[element]\n    });\n  }), Object.keys(controls).filter(element => !errorElementskeys.includes(element)).map(element => /*#__PURE__*/React.createElement(IssueCard, {\n    key: element,\n    title: controls[element]\n  })));\n};\n\nIssues.propTypes = {\n  issues: PropTypes.object.isRequired\n};\nexport default Issues;","import { useDataQuery } from '@dhis2/app-runtime';\nimport { useEffect } from 'react';\nimport { usePoll } from '../../hooks/use-poll';\nconst pollQuery = {\n  poll: {\n    resource: 'system/taskSummaries/DATA_INTEGRITY',\n    id: ({\n      jobId\n    }) => jobId\n  }\n};\nexport const useDataIntegrityPoll = () => {\n  const {\n    refetch,\n    error,\n    data\n  } = useDataQuery(pollQuery, {\n    lazy: true\n  });\n  const PULL_INTERVAL = 3000;\n  const poll = usePoll(jobId => {\n    refetch({\n      jobId\n    });\n  }, PULL_INTERVAL);\n  useEffect(() => {\n    if (data !== null && data !== void 0 && data.poll) {\n      poll.cancel();\n    }\n  }, [data]);\n  return { ...poll,\n    error,\n    data: data === null || data === void 0 ? void 0 : data.poll\n  };\n};","import { useDataMutation } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Button, CircularLoader, NoticeBox } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport PageHeader from '../../components/PageHeader/PageHeader';\nimport { i18nKeys } from '../../i18n-keys';\nimport Issues from './Issues/Issues';\nimport { useDataIntegrityPoll } from './use-data-integrity-poll';\nconst startDataIntegrityCheckMutation = {\n  resource: 'dataIntegrity',\n  type: 'create'\n};\n\nconst DataIntegrity = ({\n  sectionKey\n}) => {\n  var _poll$error;\n\n  const [handleStartDataIntegrityCheck, {\n    loading,\n    error,\n    data\n  }] = useDataMutation(startDataIntegrityCheckMutation);\n  const poll = useDataIntegrityPoll();\n  const isPolling = data && !poll.data;\n  useEffect(() => {\n    if (loading || !data) {\n      return;\n    }\n\n    const {\n      id: jobId\n    } = data.response;\n    poll.start(jobId);\n  }, [loading, data]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(PageHeader, {\n    sectionKey: sectionKey,\n    title: i18nKeys.dataIntegrity.title\n  }), (error || poll.error) && /*#__PURE__*/React.createElement(NoticeBox, {\n    error: true\n  }, (error === null || error === void 0 ? void 0 : error.message) || ((_poll$error = poll.error) === null || _poll$error === void 0 ? void 0 : _poll$error.message)), poll.data && /*#__PURE__*/React.createElement(Issues, {\n    issues: poll.data\n  }), /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    disabled: loading || isPolling,\n    onClick: handleStartDataIntegrityCheck\n  }, loading || isPolling ? /*#__PURE__*/React.createElement(React.Fragment, null, i18n.t('Checking data integrity...'), /*#__PURE__*/React.createElement(CircularLoader, {\n    small: true\n  })) : i18n.t('Run integrity checks')));\n};\n\nDataIntegrity.propTypes = {\n  sectionKey: PropTypes.string.isRequired\n};\nexport default DataIntegrity;","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nconst FormattedNumber = props => /*#__PURE__*/React.createElement(\"span\", null, new Intl.NumberFormat(i18n.language).format(props.value));\n\nFormattedNumber.propTypes = {\n  value: PropTypes.number.isRequired\n};\nexport default FormattedNumber;","import { Table, TableBody, TableCell, TableCellHead, TableHead, TableRow, TableRowHead } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport FormattedNumber from '../../components/FormattedNumber/FormattedNumber';\n\nconst DataStatisticsTable = ({\n  elements,\n  label\n}) => /*#__PURE__*/React.createElement(Table, {\n  suppressZebraStriping: true\n}, /*#__PURE__*/React.createElement(TableHead, null, /*#__PURE__*/React.createElement(TableRowHead, null, /*#__PURE__*/React.createElement(TableCellHead, null, label), /*#__PURE__*/React.createElement(TableCellHead, null))), /*#__PURE__*/React.createElement(TableBody, null, elements.map(element => /*#__PURE__*/React.createElement(TableRow, {\n  key: element.label\n}, /*#__PURE__*/React.createElement(TableCell, null, element.label), /*#__PURE__*/React.createElement(TableCell, null, /*#__PURE__*/React.createElement(FormattedNumber, {\n  value: element.count\n}))))));\n\nDataStatisticsTable.propTypes = {\n  elements: PropTypes.array.isRequired,\n  label: PropTypes.string.isRequired\n};\nexport default DataStatisticsTable;","export const OBJECT_COUNTS_KEY = 'objectCounts';\nexport const ACTIVE_USERS_KEY = 'activeUsers';\nexport const USER_INVITATIONS_KEY = 'userInvitations';\nexport const DATA_VALUE_COUNT_KEY = 'dataValueCount';\nexport const EVENT_COUNT_KEY = 'eventCount';\nexport const PENDING_INVITATION_ALL_KEY = 'all';\nexport const EXPIRED_INVITATION_KEY = 'expired';","import i18n from '@dhis2/d2-i18n';\nimport { OBJECT_COUNTS_KEY, ACTIVE_USERS_KEY, USER_INVITATIONS_KEY, DATA_VALUE_COUNT_KEY, EVENT_COUNT_KEY, PENDING_INVITATION_ALL_KEY, EXPIRED_INVITATION_KEY } from './table-keys';\nconst objectLabels = {\n  indicator: i18n.t('Indicators'),\n  period: i18n.t('Periods'),\n  visualization: i18n.t('Visualization'),\n  programStageInstance: i18n.t('Events'),\n  organisationUnit: i18n.t('Organisation units'),\n  validationRule: i18n.t('Validation rules'),\n  dataValue: i18n.t('Data values'),\n  program: i18n.t('Programs'),\n  dataElement: i18n.t('Data elements'),\n  organisationUnitGroup: i18n.t('Organisation unit groups'),\n  trackedEntityInstance: i18n.t('Tracked entity instances'),\n  reportTable: i18n.t('Pivot tables'),\n  programInstance: i18n.t('Program instances'),\n  indicatorType: i18n.t('Indicator types'),\n  dataSet: i18n.t('Data sets'),\n  userGroup: i18n.t('User groups'),\n  user: i18n.t('Users'),\n  map: i18n.t('Maps'),\n  indicatorGroup: i18n.t('Indicator groups'),\n  chart: i18n.t('Charts'),\n  dataElementGroup: i18n.t('Data element groups'),\n  dashboard: i18n.t('Dashboards')\n};\n\nconst translatedTimeLabelFromIntProperty = key => {\n  const intProperty = parseInt(key, 10);\n\n  if (intProperty === 1) {\n    return i18n.t('Today');\n  } else if (intProperty > 0) {\n    return i18n.t('Last {{days}} days', {\n      days: intProperty\n    });\n  } else {\n    return i18n.t('Last hour');\n  }\n};\n\nconst objectCountsTableFromResponse = objectCountsResponse => {\n  if (!objectCountsResponse) {\n    return null;\n  }\n\n  return {\n    label: i18n.t('Object type'),\n    elements: Object.entries(objectCountsResponse).map(([key, count]) => ({\n      label: objectLabels[key] || key,\n      count\n    }))\n  };\n};\n\nconst activeUsersTableFromResponse = activeUsersResponse => {\n  if (!activeUsersResponse) {\n    return null;\n  }\n\n  return {\n    label: i18n.t('Users logged in'),\n    elements: Object.entries(activeUsersResponse).map(([key, count]) => ({\n      label: translatedTimeLabelFromIntProperty(key),\n      count\n    }))\n  };\n};\n\nconst userInvitationsTableFromResponse = userInvitationsResponse => {\n  if (!userInvitationsResponse) {\n    return null;\n  }\n\n  const userInvitationsTable = {\n    label: i18n.t('User account invitations'),\n    elements: []\n  };\n\n  if (Object.hasOwnProperty.call(userInvitationsResponse, PENDING_INVITATION_ALL_KEY)) {\n    userInvitationsTable.elements.push({\n      label: i18n.t('Pending invitations'),\n      count: userInvitationsResponse[PENDING_INVITATION_ALL_KEY]\n    });\n  }\n\n  if (Object.hasOwnProperty.call(userInvitationsResponse, EXPIRED_INVITATION_KEY)) {\n    userInvitationsTable.elements.push({\n      label: i18n.t('Expired invitations'),\n      count: userInvitationsResponse[EXPIRED_INVITATION_KEY]\n    });\n  }\n\n  return userInvitationsTable;\n};\n\nconst dataValueCountsTableFromResponse = dataValueCountsResponse => {\n  if (!dataValueCountsResponse) {\n    return null;\n  }\n\n  return {\n    label: i18n.t('Data values'),\n    elements: Object.entries(dataValueCountsResponse).map(([key, count]) => ({\n      label: translatedTimeLabelFromIntProperty(key),\n      count\n    }))\n  };\n};\n\nconst eventCountsTableFromResponse = eventCountsResponse => {\n  if (!eventCountsResponse) {\n    return null;\n  }\n\n  return {\n    label: i18n.t('Events'),\n    elements: Object.entries(eventCountsResponse).map(([key, count]) => ({\n      label: translatedTimeLabelFromIntProperty(key),\n      count\n    }))\n  };\n};\n\nexport const parseTables = response => ({\n  [OBJECT_COUNTS_KEY]: objectCountsTableFromResponse(response[OBJECT_COUNTS_KEY]),\n  [ACTIVE_USERS_KEY]: activeUsersTableFromResponse(response[ACTIVE_USERS_KEY]),\n  [USER_INVITATIONS_KEY]: userInvitationsTableFromResponse(response[USER_INVITATIONS_KEY]),\n  [DATA_VALUE_COUNT_KEY]: dataValueCountsTableFromResponse(response[DATA_VALUE_COUNT_KEY]),\n  [EVENT_COUNT_KEY]: eventCountsTableFromResponse(response[EVENT_COUNT_KEY])\n});","import { useDataQuery } from '@dhis2/app-runtime';\nimport { Card, NoticeBox, CircularLoader, CenteredContent } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport PageHeader from '../../components/PageHeader/PageHeader';\nimport { i18nKeys } from '../../i18n-keys';\nimport styles from './DataStatistics.module.css';\nimport DataStatisticsTable from './DataStatisticsTable';\nimport { parseTables } from './parse-tables';\nimport { OBJECT_COUNTS_KEY, ACTIVE_USERS_KEY, USER_INVITATIONS_KEY, DATA_VALUE_COUNT_KEY, EVENT_COUNT_KEY } from './table-keys';\n\nconst TableCard = ({\n  label,\n  elements\n}) => /*#__PURE__*/React.createElement(Card, {\n  className: styles.card\n}, /*#__PURE__*/React.createElement(DataStatisticsTable, {\n  label: label,\n  elements: elements\n}));\n\nTableCard.propTypes = {\n  elements: PropTypes.array.isRequired,\n  label: PropTypes.string.isRequired\n};\nconst query = {\n  dataSummary: {\n    resource: 'dataSummary'\n  }\n};\n\nconst DataStatistics = ({\n  sectionKey\n}) => {\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(query);\n\n  if (loading) {\n    return /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null));\n  }\n\n  if (error) {\n    return /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(NoticeBox, {\n      error: true\n    }, error.message));\n  }\n\n  const tables = parseTables(data.dataSummary);\n\n  const renderTable = key => {\n    if (tables[key] === null) {\n      return null;\n    }\n\n    return /*#__PURE__*/React.createElement(TableCard, {\n      label: tables[key].label,\n      elements: tables[key].elements\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(PageHeader, {\n    sectionKey: sectionKey,\n    title: i18nKeys.dataStatistics.title\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-6\"\n  }, renderTable(OBJECT_COUNTS_KEY)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-6\"\n  }, renderTable(USER_INVITATIONS_KEY), renderTable(DATA_VALUE_COUNT_KEY), renderTable(EVENT_COUNT_KEY), renderTable(ACTIVE_USERS_KEY))));\n};\n\nDataStatistics.propTypes = {\n  sectionKey: PropTypes.string.isRequired\n};\nexport default DataStatistics;","import i18n from '@dhis2/d2-i18n';\nimport { Button, Table, TableHead, TableRowHead, TableCellHead, TableBody, TableRow, TableCell } from '@dhis2/ui';\nimport FontIcon from 'material-ui/FontIcon';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nconst columnLabels = {\n  dataSet: i18n.t('Data set'),\n  period: i18n.t('Period'),\n  organisationUnit: i18n.t('Organisation unit')\n};\n\nconst LockExceptionsTable = ({\n  columns,\n  rows,\n  atBatchDeletionPage,\n  onRemoveLockException\n}) => /*#__PURE__*/React.createElement(Table, null, /*#__PURE__*/React.createElement(TableHead, null, /*#__PURE__*/React.createElement(TableRowHead, null, columns.map(column => /*#__PURE__*/React.createElement(TableCellHead, {\n  key: column\n}, columnLabels[column])), /*#__PURE__*/React.createElement(TableCellHead, null))), /*#__PURE__*/React.createElement(TableBody, null, rows.map((row, index) => /*#__PURE__*/React.createElement(TableRow, {\n  key: index\n}, columns.map(column => /*#__PURE__*/React.createElement(TableCell, {\n  key: column\n}, row[column])), /*#__PURE__*/React.createElement(TableCell, null, /*#__PURE__*/React.createElement(Button, {\n  small: true,\n  secondary: true,\n  onClick: () => onRemoveLockException(row)\n}, /*#__PURE__*/React.createElement(\"span\", {\n  title: atBatchDeletionPage ? i18n.t('Batch delete lock exceptions') : i18n.t('Remove lock exception')\n}, /*#__PURE__*/React.createElement(FontIcon, {\n  className: \"material-icons\"\n}, \"delete\"))))))));\n\nLockExceptionsTable.propTypes = {\n  atBatchDeletionPage: PropTypes.bool.isRequired,\n  columns: PropTypes.array.isRequired,\n  rows: PropTypes.array.isRequired,\n  onRemoveLockException: PropTypes.func.isRequired\n};\nexport default LockExceptionsTable;","export const parseLockExceptions = lockExceptionResponse => lockExceptionResponse.map(({\n  dataSet,\n  period,\n  organisationUnit\n}) => {\n  const row = {\n    period: period.displayName,\n    periodId: period.id,\n    dataSet: dataSet.displayName,\n    dataSetId: dataSet.id\n  };\n\n  if (organisationUnit) {\n    row.organisationUnit = organisationUnit.displayName;\n    row.organisationUnitId = organisationUnit.id;\n  }\n\n  return row;\n});","import { useAlert, useDataMutation } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Modal, ModalTitle, ModalContent, ModalActions, ButtonStrip, Button, CircularLoader } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nconst mutation = {\n  resource: 'lockExceptions',\n  type: 'delete',\n  params: params => params\n};\n\nconst RemoveLockExceptionModal = ({\n  lockException,\n  onRemove,\n  onClose\n}) => {\n  const successAlert = useAlert(i18n.t('Lock exception removed'), {\n    success: true\n  });\n  const errorAlert = useAlert(({\n    error\n  }) => i18n.t('Error removing lock exception: {{error}}', {\n    error,\n    nsSeparator: null\n  }), {\n    critical: true\n  });\n  const [mutate, {\n    loading\n  }] = useDataMutation(mutation, {\n    onComplete: () => {\n      successAlert.show();\n      onRemove();\n      onClose();\n    },\n    onError: error => errorAlert.show({\n      error\n    })\n  });\n\n  const handleRemoveLockException = () => {\n    const params = {\n      pe: lockException.periodId,\n      ds: lockException.dataSetId\n    };\n\n    if (lockException.organisationUnitId) {\n      params.ou = lockException.organisationUnitId;\n    }\n\n    mutate(params);\n  };\n\n  return /*#__PURE__*/React.createElement(Modal, {\n    onClose: onClose\n  }, /*#__PURE__*/React.createElement(ModalTitle, null, i18n.t('Remove lock exception')), /*#__PURE__*/React.createElement(ModalContent, null, i18n.t('Are you sure you want to remove this lock exception?')), /*#__PURE__*/React.createElement(ModalActions, null, /*#__PURE__*/React.createElement(ButtonStrip, null, /*#__PURE__*/React.createElement(Button, {\n    disabled: loading,\n    onClick: onClose\n  }, i18n.t('No, cancel')), /*#__PURE__*/React.createElement(Button, {\n    destructive: true,\n    disabled: loading,\n    onClick: handleRemoveLockException\n  }, loading ? /*#__PURE__*/React.createElement(React.Fragment, null, i18n.t('Removing lock exception...'), /*#__PURE__*/React.createElement(CircularLoader, {\n    small: true\n  })) : i18n.t('Yes, remove lock exception')))));\n};\n\nRemoveLockExceptionModal.propTypes = {\n  lockException: PropTypes.object.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onRemove: PropTypes.func.isRequired\n};\nexport default RemoveLockExceptionModal;","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { CenteredContent, CircularLoader, NoticeBox, Button, Pagination, ButtonStrip } from '@dhis2/ui';\nimport classnames from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport PageHeader from '../../components/PageHeader/PageHeader';\nimport { i18nKeys } from '../../i18n-keys';\nimport styles from './LockException.module.css';\nimport LockExceptionsTable from './LockExceptionsTable';\nimport { parseLockExceptions } from './parse-lock-exceptions';\nimport RemoveLockExceptionModal from './RemoveLockExceptionModal';\nconst query = {\n  lockExceptions: {\n    resource: 'lockExceptions',\n    params: params => ({ ...params,\n      fields: 'name,period[id,displayName],organisationUnit[id,displayName],dataSet[id,displayName]',\n      order: 'name:asc'\n    })\n  }\n};\n\nconst LockException = ({\n  sectionKey\n}) => {\n  const [page, setPage] = useState(1);\n  const [pageSize, setPageSize] = useState(20);\n  const {\n    loading,\n    called,\n    error,\n    data,\n    refetch\n  } = useDataQuery(query, {\n    lazy: true\n  });\n  const [removeLockExceptionModal, setRemoveLockExceptionModal] = useState({\n    visible: false,\n    lockException: null\n  });\n  useEffect(() => {\n    refetch({\n      page,\n      pageSize\n    });\n  }, [page, pageSize]);\n  const lockExceptions = data && parseLockExceptions(data.lockExceptions.lockExceptions);\n\n  const renderPagination = () => {\n    const {\n      total,\n      pageCount\n    } = data.lockExceptions.pager;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.pagination\n    }, /*#__PURE__*/React.createElement(Pagination, {\n      total: total,\n      pageCount: pageCount,\n      page: page,\n      pageSize: pageSize,\n      onPageSizeChange: pageSize => {\n        setPage(1);\n        setPageSize(pageSize);\n      },\n      onPageChange: page => setPage(page)\n    }));\n  };\n\n  const handleShowRemoveLockExceptionModal = lockException => {\n    setRemoveLockExceptionModal({\n      visible: true,\n      lockException\n    });\n  };\n\n  const handleCloseRemoveLockExceptionModal = () => {\n    setRemoveLockExceptionModal({\n      visible: false,\n      lockException: null\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.lockExceptions\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classnames(styles.headerContainer, styles.flexSpaceBetween)\n  }, /*#__PURE__*/React.createElement(PageHeader, {\n    sectionKey: sectionKey,\n    title: i18nKeys.lockException.title\n  }), /*#__PURE__*/React.createElement(ButtonStrip, null, /*#__PURE__*/React.createElement(Link, {\n    to: \"/lock-exception/add\",\n    tabIndex: \"-1\"\n  }, /*#__PURE__*/React.createElement(Button, {\n    primary: true\n  }, i18n.t('Add lock exception'))), /*#__PURE__*/React.createElement(Link, {\n    to: \"/lock-exception/batch-deletion\",\n    tabIndex: \"-1\"\n  }, /*#__PURE__*/React.createElement(Button, null, i18n.t('Batch deletion'))))), error ? /*#__PURE__*/React.createElement(NoticeBox, {\n    error: true\n  }, error.message) : loading || !called ? /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null)) : lockExceptions.length > 0 ? /*#__PURE__*/React.createElement(React.Fragment, null, renderPagination(), /*#__PURE__*/React.createElement(LockExceptionsTable, {\n    columns: ['organisationUnit', 'dataSet', 'period'],\n    rows: lockExceptions,\n    onRemoveLockException: handleShowRemoveLockExceptionModal,\n    atBatchDeletionPage: false\n  }), renderPagination()) : /*#__PURE__*/React.createElement(\"em\", null, i18n.t('No lock exceptions to show.')), removeLockExceptionModal.visible && /*#__PURE__*/React.createElement(RemoveLockExceptionModal, {\n    lockException: removeLockExceptionModal.lockException,\n    onRemove: refetch,\n    onClose: handleCloseRemoveLockExceptionModal\n  }));\n};\n\nLockException.propTypes = {\n  sectionKey: PropTypes.string.isRequired\n};\nexport default LockException;","import { Checkbox } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { i18nKeys } from '../../i18n-keys';\nimport styles from './Checkboxes.module.css';\n\nconst Checkboxes = ({\n  checkboxes,\n  toggleCheckbox,\n  disabled\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  className: styles.checkboxes\n}, Object.entries(checkboxes).map(([key, checked]) => /*#__PURE__*/React.createElement(Checkbox, {\n  key: key,\n  className: styles.checkbox,\n  label: i18nKeys.maintenance.checkboxes[key],\n  checked: checked,\n  onChange: () => toggleCheckbox(key),\n  disabled: disabled\n})));\n\nCheckboxes.propTypes = {\n  checkboxes: PropTypes.object.isRequired,\n  disabled: PropTypes.bool.isRequired,\n  toggleCheckbox: PropTypes.func.isRequired\n};\nexport default Checkboxes;","import { useState } from 'react';\nimport { i18nKeys } from '../../i18n-keys';\nexport const useCheckboxes = () => {\n  const [checkboxes, setCheckboxes] = useState(() => {\n    const checkboxes = {};\n\n    for (const key of Object.keys(i18nKeys.maintenance.checkboxes)) {\n      checkboxes[key] = false;\n    }\n\n    return checkboxes;\n  });\n\n  const toggleCheckbox = key => {\n    setCheckboxes({ ...checkboxes,\n      [key]: !checkboxes[key]\n    });\n  };\n\n  return {\n    checkboxes,\n    toggleCheckbox\n  };\n};","import { useDataMutation, useAlert } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Card, Button, CircularLoader } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport PageHeader from '../../components/PageHeader/PageHeader';\nimport { i18nKeys } from '../../i18n-keys';\nimport Checkboxes from './Checkboxes';\nimport styles from './Maintenance.module.css';\nimport { useCheckboxes } from './use-checkboxes';\nconst mutation = {\n  resource: 'maintenance',\n  type: 'create',\n  params: params => params\n};\n\nconst Maintenance = ({\n  sectionKey\n}) => {\n  const {\n    checkboxes,\n    toggleCheckbox\n  } = useCheckboxes();\n  const successAlert = useAlert(i18n.t('Maintenance done'), {\n    success: true\n  });\n  const errorAlert = useAlert(({\n    error\n  }) => error.message, {\n    critical: true\n  });\n  const [mutate, {\n    loading\n  }] = useDataMutation(mutation, {\n    onComplete: () => successAlert.show(),\n    onError: error => errorAlert.show({\n      error\n    })\n  });\n\n  const handlePerformMaintenance = async () => {\n    const params = {};\n\n    for (const [key, checked] of Object.entries(checkboxes)) {\n      if (checked) {\n        params[key] = true;\n      }\n    }\n\n    mutate(params);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(PageHeader, {\n    sectionKey: sectionKey,\n    title: i18nKeys.maintenance.title\n  }), /*#__PURE__*/React.createElement(Card, {\n    className: styles.card\n  }, /*#__PURE__*/React.createElement(Checkboxes, {\n    checkboxes: checkboxes,\n    toggleCheckbox: toggleCheckbox,\n    disabled: loading\n  }), /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    disabled: loading || !Object.values(checkboxes).some(checked => checked),\n    onClick: handlePerformMaintenance\n  }, loading ? /*#__PURE__*/React.createElement(React.Fragment, null, i18n.t('Performing maintenance...'), /*#__PURE__*/React.createElement(CircularLoader, {\n    small: true\n  })) : i18n.t('Perform maintenance'))));\n};\n\nMaintenance.propTypes = {\n  sectionKey: PropTypes.string.isRequired\n};\nexport default Maintenance;","import { useAlert, useDataQuery, useDataMutation } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { CenteredContent, CircularLoader, NoticeBox, OrganisationUnitTree, ButtonStrip, Button, Card } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState, useRef } from 'react';\nimport PageHeader from '../../components/PageHeader/PageHeader';\nimport { i18nKeys } from '../../i18n-keys';\nimport styles from './MinMaxValueGeneration.module.css';\nconst MIN_MAX_VALUE_ENDPOINT = '/minMaxValues';\n\nconst organisationIdFromPath = path => {\n  const last = array => array[array.length - 1];\n\n  return last(path.split('/'));\n};\n\nconst query = {\n  organisationUnits: {\n    resource: 'organisationUnits',\n    params: {\n      fields: 'id',\n      paging: false,\n      level: 1\n    }\n  },\n  dataSets: {\n    resource: 'dataSets',\n    params: {\n      fields: 'id,displayName',\n      paging: false\n    }\n  }\n};\nconst generateMinMaxValueMutation = {\n  resource: MIN_MAX_VALUE_ENDPOINT,\n  type: 'create',\n  data: data => data\n};\nconst removeMinMaxValueMutation = {\n  resource: MIN_MAX_VALUE_ENDPOINT,\n  type: 'delete',\n  id: ({\n    id\n  }) => id,\n  params: ({\n    ds\n  }) => ({\n    ds\n  })\n};\n\nconst MinMaxValueGeneration = ({\n  sectionKey\n}) => {\n  const successAlert = useAlert(({\n    message\n  }) => message, {\n    success: true\n  });\n  const errorAlert = useAlert(({\n    error\n  }) => error.message, {\n    critical: true\n  });\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(query);\n  const [generateMinMaxValue] = useDataMutation(generateMinMaxValueMutation, {\n    onComplete: () => {\n      successAlert.show({\n        message: i18n.t('Min-max values generated')\n      });\n    },\n    onError: error => {\n      errorAlert.show({\n        error\n      });\n    }\n  });\n  const [removeMinMaxValue] = useDataMutation(removeMinMaxValueMutation, {\n    onComplete: () => {\n      successAlert.show({\n        message: i18n.t('Min-max values removed')\n      });\n    },\n    onError: error => {\n      errorAlert.show({\n        error\n      });\n    }\n  });\n  const [selectedOrganisationUnit, setSelectedOrganisationUnit] = useState(null);\n  const [selectedDataSets, setSelectedDataSets] = useState([]);\n  const dataSetsSelectRef = useRef(null);\n  const formValid = selectedDataSets.length > 0 && selectedOrganisationUnit !== null;\n\n  const handleDataSetsSelectClick = () => {\n    setSelectedDataSets(Array.from(dataSetsSelectRef.current.selectedOptions).map(({\n      value\n    }) => value));\n  };\n\n  const handleOrganisationUnitChange = ({\n    path,\n    checked\n  }) => {\n    if (checked) {\n      setSelectedOrganisationUnit({\n        path,\n        id: organisationIdFromPath(path)\n      });\n    } else {\n      setSelectedOrganisationUnit(null);\n    }\n  };\n\n  const handleGenerateMinMaxValue = async () => {\n    successAlert.show({\n      message: i18n.t('Generating min-max values...')\n    });\n    generateMinMaxValue({\n      organisationUnit: selectedOrganisationUnit.id,\n      dataSets: selectedDataSets\n    });\n  };\n\n  const handleRemoveMinMaxValue = async () => {\n    successAlert.show({\n      message: i18n.t('Removing min-max values...')\n    });\n    removeMinMaxValue({\n      id: selectedOrganisationUnit.id,\n      ds: selectedDataSets\n    });\n  };\n\n  if (loading) {\n    return /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null));\n  }\n\n  if (error) {\n    return /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(NoticeBox, {\n      error: true\n    }, error.message));\n  }\n\n  const {\n    organisationUnits: {\n      organisationUnits\n    },\n    dataSets: {\n      dataSets\n    }\n  } = data;\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(PageHeader, {\n    sectionKey: sectionKey,\n    title: i18nKeys.minMaxValueGeneration.title\n  }), /*#__PURE__*/React.createElement(Card, {\n    className: styles.card\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.left\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.label\n  }, i18n.t('Data set')), /*#__PURE__*/React.createElement(\"select\", {\n    multiple: true,\n    onClick: handleDataSetsSelectClick,\n    className: styles.select,\n    ref: dataSetsSelectRef\n  }, dataSets.map(item => /*#__PURE__*/React.createElement(\"option\", {\n    key: item.id,\n    value: item.id,\n    className: styles.options\n  }, item.displayName)))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.right\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.label\n  }, i18n.t('Organisation unit')), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.tree\n  }, /*#__PURE__*/React.createElement(OrganisationUnitTree, {\n    roots: organisationUnits.map(r => r.id),\n    singleSelection: true,\n    selected: selectedOrganisationUnit ? [selectedOrganisationUnit.path] : [],\n    onChange: handleOrganisationUnitChange\n  })))), /*#__PURE__*/React.createElement(ButtonStrip, null, /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    onClick: handleGenerateMinMaxValue,\n    disabled: !formValid\n  }, i18n.t('Generate min-max values')), /*#__PURE__*/React.createElement(Button, {\n    destructive: true,\n    onClick: handleRemoveMinMaxValue,\n    disabled: !formValid\n  }, i18n.t('Remove min-max values')))));\n};\n\nMinMaxValueGeneration.propTypes = {\n  sectionKey: PropTypes.string.isRequired\n};\nexport default MinMaxValueGeneration;","import { useDataQuery } from '@dhis2/app-runtime';\nimport { useEffect } from 'react';\nimport { usePoll } from '../../hooks/use-poll';\nconst pollQuery = {\n  poll: {\n    resource: 'system/tasks/RESOURCE_TABLE',\n    id: ({\n      jobId\n    }) => jobId\n  }\n};\nexport const useResourceTablesPoll = () => {\n  const {\n    refetch,\n    error,\n    data\n  } = useDataQuery(pollQuery, {\n    lazy: true\n  });\n  const PULL_INTERVAL = 3000;\n  const poll = usePoll(jobId => {\n    refetch({\n      jobId\n    });\n  }, PULL_INTERVAL);\n  useEffect(() => {\n    if (data !== null && data !== void 0 && data.poll.some(t => t.completed)) {\n      poll.cancel();\n    }\n  }, [data]);\n  return { ...poll,\n    error,\n    data: data === null || data === void 0 ? void 0 : data.poll\n  };\n};","import { useDataMutation } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Card, Button, NoticeBox, CircularLoader } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport NotificationsTable from '../../components/notifications-table/NotificationsTable';\nimport PageHeader from '../../components/PageHeader/PageHeader';\nimport { getUpdatedNotifications } from '../../get-updated-notifications';\nimport { i18nKeys } from '../../i18n-keys';\nimport styles from './ResourceTables.module.css';\nimport { useResourceTablesPoll } from './use-resource-tables-poll';\nconst tables = [{\n  key: 'organisationUnitStructure',\n  name: '_orgunitstructure'\n}, {\n  key: 'organistionUnitCategoryOptionCombo',\n  name: '_orgunitstructure'\n}, {\n  key: 'categoryOptionGroupSetStructure',\n  name: '_categoryoptiongroupsetstructure'\n}, {\n  key: 'dataElementGroupSetStructure',\n  name: '_dataelementgroupsetstructure'\n}, {\n  key: 'indicatorGroupSetStructure',\n  name: '_indicatorgroupsetstructure'\n}, {\n  key: 'organisationUnitGroupSetStructure',\n  name: '_organisationunitgroupsetstructure'\n}, {\n  key: 'categoryStructure',\n  name: '_categorystructure'\n}, {\n  key: 'dataElementCategoryOptionComboName',\n  name: '_categoryoptioncomboname'\n}, {\n  key: 'dataElementStructure',\n  name: '_dataelementstructure'\n}, {\n  key: 'periodStructure',\n  name: '_periodstructure'\n}, {\n  key: 'dataPeriodStructure',\n  name: '_dateperiodstructure'\n}, {\n  key: 'dataElementCategoryOptionCombinations',\n  name: '_dataelementcategoryoptioncombo'\n}];\nconst startResourceTablesGenerationMutation = {\n  resource: 'resourceTables',\n  type: 'create'\n};\n\nconst ResourceTable = ({\n  sectionKey\n}) => {\n  const [handleStartResourceTablesGeneration, {\n    loading,\n    error,\n    data\n  }] = useDataMutation(startResourceTablesGenerationMutation);\n  const poll = useResourceTablesPoll();\n  const notifications = poll.data ? getUpdatedNotifications(poll.data) : [];\n  const isPolling = data && (!poll.data || !notifications.some(n => n.completed));\n  useEffect(() => {\n    if (loading || !data) {\n      return;\n    }\n\n    const {\n      id: jobId\n    } = data.response;\n    poll.start(jobId);\n  }, [loading, data]);\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(PageHeader, {\n    title: i18nKeys.resourceTables.title,\n    sectionKey: sectionKey\n  }), /*#__PURE__*/React.createElement(Card, {\n    className: styles.card\n  }, (error || poll.error) && /*#__PURE__*/React.createElement(NoticeBox, {\n    className: styles.noticeBox,\n    error: true\n  }, (error === null || error === void 0 ? void 0 : error.message) || poll.error.message), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.description\n  }, tables.map(table => /*#__PURE__*/React.createElement(\"div\", {\n    key: table.key\n  }, i18nKeys.resourceTables.tables[table.key], /*#__PURE__*/React.createElement(\"span\", {\n    title: \"Table name\",\n    className: styles.tableName\n  }, \"(\", table.name, \")\")))), /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    onClick: handleStartResourceTablesGeneration,\n    disabled: loading || isPolling\n  }, loading || isPolling ? /*#__PURE__*/React.createElement(React.Fragment, null, i18n.t('Generating tables...'), /*#__PURE__*/React.createElement(CircularLoader, {\n    small: true\n  })) : i18n.t('Generate tables')), notifications.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.notificationsTable\n  }, /*#__PURE__*/React.createElement(NotificationsTable, {\n    notifications: notifications,\n    animateIncomplete: true\n  }))));\n};\n\nResourceTable.propTypes = {\n  sectionKey: PropTypes.string.isRequired\n};\nexport default ResourceTable;","import { i18nKeys } from '../i18n-keys';\nimport Analytics from './analytics/Analytics';\nimport DataIntegrity from './data-integrity/DataIntegrity';\nimport DataStatistics from './data-statistics/DataStatistics';\nimport LockException from './lock-exception/LockException';\nimport Maintenance from './maintenance/Maintenance';\nimport MinMaxValueGeneration from './min-max-value-generation/MinMaxValueGeneration';\nimport ResourceTables from './resource-tables/ResourceTables';\nexport const sections = [{\n  key: 'dataIntegrity',\n  path: '/data-integrity',\n  component: DataIntegrity,\n  info: {\n    label: i18nKeys.dataIntegrity.label,\n    icon: 'link',\n    description: i18nKeys.dataIntegrity.description,\n    actionText: i18nKeys.dataIntegrity.actionText,\n    docs: 'dataAdmin_dataIntegrity'\n  }\n}, {\n  key: 'maintenance',\n  path: '/maintenance',\n  component: Maintenance,\n  info: {\n    label: i18nKeys.maintenance.label,\n    icon: 'settings',\n    description: i18nKeys.maintenance.description,\n    actionText: i18nKeys.maintenance.actionText,\n    docs: 'data_admin_maintenance'\n  }\n}, {\n  key: 'resourceTables',\n  path: '/resourceTables',\n  component: ResourceTables,\n  info: {\n    label: i18nKeys.resourceTables.label,\n    icon: 'view_list',\n    description: i18nKeys.resourceTables.description,\n    actionText: i18nKeys.resourceTables.actionText,\n    docs: 'dataAdmin_resourceTables'\n  }\n}, {\n  key: 'analytics',\n  path: '/analytics',\n  component: Analytics,\n  info: {\n    label: i18nKeys.analytics.label,\n    icon: 'multiline_chart',\n    description: i18nKeys.analytics.description,\n    actionText: i18nKeys.analytics.actionText,\n    docs: 'analytics_tables_management'\n  }\n}, {\n  key: 'statistics',\n  path: '/data-statistics',\n  component: DataStatistics,\n  info: {\n    label: i18nKeys.dataStatistics.label,\n    icon: 'timeline',\n    description: i18nKeys.dataStatistics.description,\n    actionText: i18nKeys.dataStatistics.actionText,\n    docs: 'dataAdmin_dataStatistics'\n  }\n}, {\n  key: 'lock',\n  path: '/lock-exception',\n  component: LockException,\n  info: {\n    label: i18nKeys.lockException.label,\n    icon: 'lock',\n    description: i18nKeys.lockException.description,\n    actionText: i18nKeys.lockException.actionText,\n    docs: 'dataAdmin_lockException'\n  }\n}, {\n  key: 'minMax',\n  path: '/min-max-value-generation',\n  component: MinMaxValueGeneration,\n  info: {\n    label: i18nKeys.minMaxValueGeneration.label,\n    icon: 'compare_arrows',\n    description: i18nKeys.minMaxValueGeneration.description,\n    actionText: i18nKeys.minMaxValueGeneration.actionText,\n    docs: 'dataAdmin_minMaxValueGeneration'\n  }\n}];\nexport const getDocsKeyForSection = sectionKey => {\n  var _sections$find;\n\n  return ((_sections$find = sections.find(section => section.key === sectionKey)) === null || _sections$find === void 0 ? void 0 : _sections$find.info.docs) || '';\n};","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport classNames from 'classnames';\nimport FontIcon from 'material-ui/FontIcon';\nimport { GridTile } from 'material-ui/GridList';\nimport PropTypes from 'prop-types';\nimport React, { PureComponent } from 'react';\nimport { Link } from 'react-router-dom';\nimport styles from './GridSection.module.css';\n\nclass GridSection extends PureComponent {\n  render() {\n    return /*#__PURE__*/React.createElement(Link, {\n      to: this.props.section.path\n    }, /*#__PURE__*/React.createElement(GridTile, {\n      key: this.props.section.key,\n      className: classNames('section', styles.gridElement)\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: classNames('row', styles.gridTitleBar)\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: classNames('section-title', styles.gridTitleDescription)\n    }, this.props.section.info.label), /*#__PURE__*/React.createElement(FontIcon, {\n      className: classNames('material-icons', 'icon', styles.gridIcon)\n    }, this.props.section.info.icon)), /*#__PURE__*/React.createElement(\"span\", {\n      className: classNames('section-description', 'row', styles.gridDescription)\n    }, this.props.section.info.description), /*#__PURE__*/React.createElement(\"span\", {\n      className: classNames('section-action-text', 'row', styles.gridActionText)\n    }, this.props.section.info.actionText)));\n  }\n\n}\n\n_defineProperty(GridSection, \"propTypes\", {\n  section: PropTypes.shape({\n    info: PropTypes.shape({\n      actionText: PropTypes.string,\n      description: PropTypes.string,\n      icon: PropTypes.string,\n      label: PropTypes.string\n    }),\n    key: PropTypes.string,\n    path: PropTypes.string\n  }).isRequired\n});\n\nexport default GridSection;","import classNames from 'classnames';\nimport React from 'react';\nimport { sections } from '../sections.conf';\nimport GridSection from './grid-section/GridSection';\nimport styles from './Home.module.css';\nimport './grid.css';\n\nconst Home = () => {\n  const gridElements = sections.map(section => /*#__PURE__*/React.createElement(\"div\", {\n    key: section.key,\n    className: classNames('col-sm-12 col-md-6 col-lg-4', styles.gridContainer)\n  }, /*#__PURE__*/React.createElement(GridSection, {\n    key: section.key,\n    section: section\n  })));\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: \"grid-list-id\",\n    className: \"row\"\n  }, gridElements);\n};\n\nexport default Home;","function addToSelection(orgUnits) {\n  const orgUnitArray = Array.isArray(orgUnits) ? orgUnits : orgUnits.toArray();\n  const addedOus = orgUnitArray.filter(ou => !this.props.selected.includes(ou.path));\n  this.props.onUpdateSelection(this.props.selected.concat(addedOus.map(ou => ou.path)));\n}\n\nfunction removeFromSelection(orgUnits) {\n  const orgUnitArray = Array.isArray(orgUnits) ? orgUnits : orgUnits.toArray();\n  const removedOus = orgUnitArray.filter(ou => this.props.selected.includes(ou.path));\n  const removed = removedOus.map(ou => ou.path);\n  const selectedOus = this.props.selected.filter(ou => !removed.includes(ou));\n  this.props.onUpdateSelection(selectedOus);\n}\n\nfunction handleChangeSelection(event) {\n  this.setState({\n    selection: event.target.value\n  });\n}\n\nexport { addToSelection, removeFromSelection, handleChangeSelection };","const style = {\n  button: {\n    position: 'relative',\n    top: 3,\n    marginLeft: 16\n  },\n  progress: {\n    height: 2,\n    backgroundColor: 'rgba(0,0,0,0)',\n    top: 46\n  }\n};\nstyle.button1 = Object.assign({}, style.button, {\n  marginLeft: 0\n});\nexport default style;","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport i18n from '@dhis2/d2-i18n';\nimport RaisedButton from 'material-ui/RaisedButton/RaisedButton';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { addToSelection, removeFromSelection } from './common';\nimport style from './style';\n\nclass OrgUnitSelectAll extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"handleSelectAll\", () => {\n      if (this.props.currentRoot) {\n        this.setState({\n          loading: true\n        });\n        this.getDescendantOrgUnits().then(orgUnits => {\n          this.setState({\n            loading: false\n          });\n          this.addToSelection(orgUnits);\n        });\n      } else if (Array.isArray(this.state.cache)) {\n        this.props.onUpdateSelection(this.state.cache.slice());\n      } else {\n        this.setState({\n          loading: true\n        });\n        this.props.d2.models.organisationUnits.list({\n          fields: 'id,path',\n          paging: false\n        }).then(orgUnits => {\n          const ous = orgUnits.toArray().map(ou => ou.path);\n          this.setState({\n            cache: ous,\n            loading: false\n          });\n          this.props.onUpdateSelection(ous.slice());\n        }).catch(err => {\n          this.setState({\n            loading: false\n          });\n          console.error('Failed to load all org units:', err);\n        });\n      }\n    });\n\n    _defineProperty(this, \"handleDeselectAll\", () => {\n      if (this.props.currentRoot) {\n        this.setState({\n          loading: true\n        });\n        this.getDescendantOrgUnits().then(orgUnits => {\n          this.setState({\n            loading: false\n          });\n          this.removeFromSelection(orgUnits);\n        });\n      } else {\n        this.props.onUpdateSelection([]);\n      }\n    });\n\n    this.state = {\n      loading: false,\n      cache: null\n    };\n    this.addToSelection = addToSelection.bind(this);\n    this.removeFromSelection = removeFromSelection.bind(this);\n  }\n\n  getDescendantOrgUnits() {\n    return this.props.d2.models.organisationUnits.list({\n      root: this.props.currentRoot.id,\n      paging: false,\n      includeDescendants: true,\n      fields: 'id,path'\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(RaisedButton, {\n      style: style.button1,\n      label: i18n.t('Select All Org Units'),\n      onClick: this.handleSelectAll,\n      disabled: this.state.loading\n    }), /*#__PURE__*/React.createElement(RaisedButton, {\n      style: style.button,\n      label: i18n.t('Deselect All Org Units'),\n      onClick: this.handleDeselectAll,\n      disabled: this.state.loading\n    }));\n  }\n\n}\n\nOrgUnitSelectAll.propTypes = {\n  d2: PropTypes.object.isRequired,\n  // This prop is used, but in the functions defined in `common.js`\n\n  /* eslint-disable react/no-unused-prop-types */\n  // selected is an array of selected organisation unit IDs\n  selected: PropTypes.array.isRequired,\n\n  /* eslint-enable react/no-unused-prop-types */\n  // Whenever the selection changes, onUpdateSelection will be called with\n  // one argument: The new array of selected organisation unit paths\n  onUpdateSelection: PropTypes.func.isRequired,\n  // If currentRoot is set, only org units that are descendants of the\n  // current root org unit will be added to or removed from the selection\n  currentRoot: PropTypes.object\n};\nexport default OrgUnitSelectAll;","import i18n from '@dhis2/d2-i18n';\nimport LinearProgress from 'material-ui/LinearProgress/LinearProgress';\nimport RaisedButton from 'material-ui/RaisedButton/RaisedButton';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport sharedStyles from '../style';\n\nconst Controls = ({\n  loading,\n  disabled,\n  onSelect,\n  onDeselect\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  style: {\n    position: 'absolute',\n    display: 'inline-block',\n    top: 24,\n    marginLeft: 16\n  }\n}, loading && /*#__PURE__*/React.createElement(LinearProgress, {\n  size: 0.5,\n  style: sharedStyles.progress\n}), /*#__PURE__*/React.createElement(RaisedButton, {\n  label: i18n.t('Select'),\n  style: sharedStyles.button1,\n  onClick: onSelect,\n  disabled: disabled\n}), /*#__PURE__*/React.createElement(RaisedButton, {\n  label: i18n.t('Deselect'),\n  style: sharedStyles.button,\n  onClick: onDeselect,\n  disabled: disabled\n}));\n\nControls.propTypes = {\n  disabled: PropTypes.bool.isRequired,\n  loading: PropTypes.bool.isRequired,\n  onDeselect: PropTypes.func.isRequired,\n  onSelect: PropTypes.func.isRequired\n};\nexport default Controls;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport MenuItem from 'material-ui/MenuItem';\nimport SelectField from 'material-ui/SelectField';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nfunction renderMenuItem(id, displayName) {\n  return /*#__PURE__*/React.createElement(MenuItem, {\n    key: id,\n    value: id,\n    primaryText: displayName\n  });\n}\n\nfunction renderMenuItems(menuItems) {\n  const renderedMenuItems = menuItems.map(({\n    id,\n    displayName\n  }) => renderMenuItem(id, displayName));\n  return renderedMenuItems;\n}\n\nfunction createCallbackWithFakeEventFromMaterialSelectField(callback) {\n  return (event, index, value) => callback({\n    target: {\n      value\n    }\n  });\n}\n\nfunction D2UiDropdown({\n  onChange,\n  value,\n  disabled,\n  menuItems,\n  ...other\n}) {\n  const menuItemArray = Array.isArray(menuItems) ? menuItems : menuItems.toArray();\n  const hasOptions = menuItemArray.length > 0;\n  return /*#__PURE__*/React.createElement(SelectField, _extends({\n    value: hasOptions ? value : 1,\n    fullWidth: false,\n    onChange: createCallbackWithFakeEventFromMaterialSelectField(onChange),\n    disabled: !hasOptions || disabled\n  }, other), hasOptions ? renderMenuItems(menuItemArray) : /*#__PURE__*/React.createElement(MenuItem, {\n    value: 1,\n    primaryText: \"-\"\n  }));\n}\n\nD2UiDropdown.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  disabled: PropTypes.bool,\n  menuItems: PropTypes.oneOfType([PropTypes.array, PropTypes.object]),\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.number, PropTypes.bool])\n};\nD2UiDropdown.defaultProps = {\n  value: null,\n  menuItems: [],\n  disabled: false\n};\nexport default D2UiDropdown;","import PropTypes from 'prop-types';\nimport React from 'react';\nimport Controls from './Controls';\nimport D2UiDropdown from './D2UiDropdown';\n\nconst Dropdown = ({\n  menuItems,\n  value,\n  label,\n  loading,\n  onChange,\n  onSelect,\n  onDeselect\n}) =>\n/*#__PURE__*/\n// The minHeight on the wrapping div below is there to compensate for the fact that a\n// Material-UI SelectField will change height depending on whether or not it has a value\nReact.createElement(\"div\", {\n  style: {\n    position: 'relative',\n    minHeight: 89\n  }\n}, /*#__PURE__*/React.createElement(D2UiDropdown, {\n  menuItems: menuItems,\n  value: value,\n  floatingLabelText: label,\n  disabled: loading,\n  onChange: onChange\n}), /*#__PURE__*/React.createElement(Controls, {\n  loading: loading,\n  disabled: loading || !value,\n  onSelect: onSelect,\n  onDeselect: onDeselect\n}));\n\nDropdown.propTypes = {\n  label: PropTypes.string.isRequired,\n  menuItems: PropTypes.array.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onDeselect: PropTypes.func.isRequired,\n  onSelect: PropTypes.func.isRequired,\n  loading: PropTypes.bool,\n  value: PropTypes.any\n};\nexport default Dropdown;","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { addToSelection, removeFromSelection, handleChangeSelection } from './common';\nimport Dropdown from './Dropdown/Dropdown';\n\nclass OrgUnitSelectByGroup extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: false,\n      selection: undefined\n    };\n    this.groupCache = new Map();\n    this.addToSelection = addToSelection.bind(this);\n    this.removeFromSelection = removeFromSelection.bind(this);\n    this.handleChangeSelection = handleChangeSelection.bind(this);\n    this.getOrgUnitsForGroup = this.getOrgUnitsForGroup.bind(this);\n    this.handleSelect = this.handleSelect.bind(this);\n    this.handleDeselect = this.handleDeselect.bind(this);\n  }\n\n  getOrgUnitsForGroup(groupId, ignoreCache = false) {\n    const d2 = this.props.d2;\n    return new Promise(resolve => {\n      if (this.props.currentRoot) {\n        this.setState({\n          loading: true\n        });\n        d2.models.organisationUnits.list({\n          root: this.props.currentRoot.id,\n          paging: false,\n          includeDescendants: true,\n          fields: 'id,path',\n          filter: \"organisationUnitGroups.id:eq:\".concat(groupId)\n        }).then(orgUnits => orgUnits.toArray()).then(orgUnits => {\n          this.setState({\n            loading: false\n          });\n          resolve(orgUnits.slice());\n        });\n      } else if (!ignoreCache && this.groupCache.has(groupId)) {\n        resolve(this.groupCache.get(groupId).slice());\n      } else {\n        this.setState({\n          loading: true\n        });\n        const d2 = this.props.d2;\n        d2.models.organisationUnitGroups.get(groupId, {\n          fields: 'organisationUnits[id,path]'\n        }).then(orgUnitGroups => orgUnitGroups.organisationUnits.toArray()).then(orgUnits => {\n          this.setState({\n            loading: false\n          });\n          this.groupCache.set(groupId, orgUnits); // Make a copy of the returned array to ensure that the cache won't be modified from elsewhere\n\n          resolve(orgUnits.slice());\n        }).catch(err => {\n          this.setState({\n            loading: false\n          });\n          console.error(\"Failed to load org units in group \".concat(groupId, \":\"), err);\n        });\n      }\n    });\n  }\n\n  handleSelect() {\n    this.getOrgUnitsForGroup(this.state.selection).then(this.addToSelection);\n  }\n\n  handleDeselect() {\n    this.getOrgUnitsForGroup(this.state.selection).then(this.removeFromSelection);\n  }\n\n  render() {\n    const menuItems = Array.isArray(this.props.groups) ? this.props.groups : this.props.groups.toArray();\n    const label = i18n.t('Organisation unit group');\n    return /*#__PURE__*/React.createElement(Dropdown, {\n      menuItems: menuItems,\n      value: this.state.selection,\n      label: label,\n      loading: this.state.loading,\n      onChange: this.handleChangeSelection,\n      onSelect: this.handleSelect,\n      onDeselect: this.handleDeselect\n    });\n  }\n\n}\n\nOrgUnitSelectByGroup.propTypes = {\n  d2: PropTypes.object.isRequired,\n  // groups is an array of either ModelCollection objects or plain objects,\n  // where each object should contain `id` and `displayName` properties\n  groups: PropTypes.oneOfType([PropTypes.object, PropTypes.array]).isRequired,\n  // This prop is used, but in the functions defined in `common.js`\n\n  /* eslint-disable react/no-unused-prop-types */\n  // selected is an array of selected organisation unit IDs\n  selected: PropTypes.array.isRequired,\n\n  /* eslint-enable react/no-unused-prop-types */\n  // This prop is used, but in the functions defined in `common.js`\n\n  /* eslint-disable react/no-unused-prop-types */\n  // Whenever the selection changes, onUpdateSelection will be called with\n  // one argument: The new array of selected organisation unit paths\n  onUpdateSelection: PropTypes.func.isRequired,\n\n  /* eslint-enable react/no-unused-prop-types */\n  // If currentRoot is set, only org units that are descendants of the\n  // current root org unit will be added to or removed from the selection\n  currentRoot: PropTypes.object\n};\nexport default OrgUnitSelectByGroup;","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { addToSelection, removeFromSelection, handleChangeSelection } from './common';\nimport Dropdown from './Dropdown/Dropdown';\n\nclass OrgUnitSelectByLevel extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: false,\n      selection: undefined\n    };\n    this.levelCache = new Map();\n    this.addToSelection = addToSelection.bind(this);\n    this.removeFromSelection = removeFromSelection.bind(this);\n    this.handleChangeSelection = handleChangeSelection.bind(this);\n    this.getOrgUnitsForLevel = this.getOrgUnitsForLevel.bind(this);\n    this.handleSelect = this.handleSelect.bind(this);\n    this.handleDeselect = this.handleDeselect.bind(this);\n  }\n\n  getOrgUnitsForLevel(level, ignoreCache = false) {\n    const d2 = this.props.d2;\n    return new Promise(resolve => {\n      if (this.props.currentRoot) {\n        const rootLevel = this.props.currentRoot.level || this.props.currentRoot.path ? this.props.currentRoot.path.match(/\\//g).length : NaN;\n        const relativeLevel = level - rootLevel;\n\n        if (isNaN(relativeLevel) || relativeLevel < 0) {\n          return resolve([]);\n        }\n\n        d2.models.organisationUnits.list({\n          paging: false,\n          level: level - rootLevel,\n          fields: 'id,path',\n          root: this.props.currentRoot.id\n        }).then(orgUnits => orgUnits.toArray()).then(orgUnitArray => {\n          this.setState({\n            loading: false\n          });\n          resolve(orgUnitArray);\n        });\n      } else if (!ignoreCache && this.levelCache.has(level)) {\n        resolve(this.levelCache.get(level).slice());\n      } else {\n        this.setState({\n          loading: true\n        });\n        d2.models.organisationUnits.list({\n          paging: false,\n          level,\n          fields: 'id,path'\n        }).then(orgUnits => orgUnits.toArray()).then(orgUnitArray => {\n          this.setState({\n            loading: false\n          });\n          this.levelCache.set(level, orgUnitArray); // Make a copy of the returned array to ensure that the cache won't be modified from elsewhere\n\n          resolve(orgUnitArray.slice());\n        }).catch(err => {\n          this.setState({\n            loading: false\n          });\n          console.error(\"Failed to load org units in level \".concat(level, \":\"), err);\n        });\n      }\n    });\n  }\n\n  handleSelect() {\n    this.getOrgUnitsForLevel(this.state.selection).then(orgUnits => {\n      this.addToSelection(orgUnits);\n    });\n  }\n\n  handleDeselect() {\n    this.getOrgUnitsForLevel(this.state.selection).then(orgUnits => {\n      this.removeFromSelection(orgUnits);\n    });\n  }\n\n  render() {\n    const currentRoot = this.props.currentRoot;\n    const currentRootLevel = currentRoot ? currentRoot.level || currentRoot.path.match(/\\//g).length : 1;\n    const menuItems = (Array.isArray(this.props.levels) ? this.props.levels : this.props.levels.toArray()).filter(level => level.level >= currentRootLevel).map(level => ({\n      id: level.level,\n      displayName: level.displayName\n    }));\n    const label = i18n.t('Organisation unit level');\n    return /*#__PURE__*/React.createElement(Dropdown, {\n      menuItems: menuItems,\n      value: this.state.selection,\n      label: label,\n      loading: this.state.loading,\n      onChange: this.handleChangeSelection,\n      onSelect: this.handleSelect,\n      onDeselect: this.handleDeselect\n    });\n  }\n\n}\n\nOrgUnitSelectByLevel.propTypes = {\n  d2: PropTypes.object.isRequired,\n  // levels is an array of either ModelCollection objects or plain objects,\n  // where each object should contain `level` and `displayName` properties\n  levels: PropTypes.oneOfType([PropTypes.object, PropTypes.array]).isRequired,\n  // This prop is used, but in the functions defined in `common.js`\n\n  /* eslint-disable react/no-unused-prop-types */\n  // selected is an array of selected organisation unit IDs\n  selected: PropTypes.array.isRequired,\n\n  /* eslint-enable react/no-unused-prop-types */\n  // This prop is used, but in the functions defined in `common.js`\n\n  /* eslint-disable react/no-unused-prop-types */\n  // Whenever the selection changes, onUpdateSelection will be called with\n  // one argument: The new array of selected organisation unit paths\n  onUpdateSelection: PropTypes.func.isRequired,\n\n  /* eslint-enable react/no-unused-prop-types */\n  // If currentRoot is set, only org units that are descendants of the\n  // current root org unit will be added to or removed from the selection\n  currentRoot: (props, propName) => {\n    if (props[propName]) {\n      if (!Object.prototype.hasOwnProperty.call(props[propName], 'id')) {\n        return new Error('currentRoot must have an `id` property');\n      }\n\n      if (!Object.prototype.hasOwnProperty.call(props[propName], 'level') && !Object.prototype.hasOwnProperty.call(props[propName], 'path')) {\n        return new Error('currentRoot must have either a `level` or a `path` property');\n      }\n    }\n  }\n};\nexport default OrgUnitSelectByLevel;","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\n/* eslint-disable react/sort-prop-types */\n\nclass TreeView extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"handleClick\", e => {\n      if (this.props.onClick) {\n        this.props.onClick(e);\n      }\n\n      if (e !== undefined) {\n        e.stopPropagation();\n      }\n    });\n\n    this.state = {\n      collapsed: !props.initiallyExpanded,\n      hasBeenExpanded: props.initiallyExpanded\n    };\n  }\n\n  toggleCollapsed() {\n    this.setState(state => ({\n      collapsed: !state.collapsed,\n      hasBeenExpanded: true\n    }), () => {\n      if (!this.state.collapsed && typeof this.props.onExpand === 'function') {\n        this.props.onExpand();\n      }\n    });\n  }\n\n  UNSAFE_componentWillReceiveProps(newProps) {\n    // When initiallyExpanded status changed and the tree is collapsed we fire a toggleEvent to open it up\n    if (newProps.initiallyExpanded && this.state.collapsed) {\n      this.toggleCollapsed();\n    }\n  }\n\n  render() {\n    const styles = {\n      tree: {\n        marginLeft: 16,\n        whiteSpace: 'nowrap'\n      },\n      itemLabel: {\n        display: 'inline-block',\n        position: 'relative'\n      },\n      arrow: {\n        display: 'inline-block',\n        position: 'absolute',\n        left: -16,\n        top: -1,\n        width: 11,\n        height: 16,\n        paddingLeft: 4,\n        textAlign: 'center',\n        cursor: 'pointer'\n      },\n      arrowSymbol: {\n        transition: 'transform 150ms ease-out',\n        transform: this.state.collapsed ? '' : 'rotate(90deg)',\n        position: 'absolute'\n      },\n      clickTarget: {\n        cursor: this.props.onClick && 'pointer'\n      },\n      children: {\n        position: 'relative',\n        marginLeft: 16,\n        height: this.state.collapsed ? 0 : 'inherit'\n      }\n    };\n    const label = /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.itemLabel\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"arrow\",\n      style: styles.arrow,\n      onClick: this.toggleCollapsed.bind(this)\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.arrowSymbol\n    }, this.props.arrowSymbol)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"label\",\n      onClick: this.handleClick,\n      style: styles.clickTarget\n    }, this.props.label));\n    styles.children.display = this.state.collapsed ? 'none' : 'block'; // Render children if not collapsed, or (persistent and has been expanded)\n\n    const children = (!this.state.collapsed || this.props.persistent && this.state.hasBeenExpanded) && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"children\",\n      style: styles.children\n    }, this.props.children);\n    const className = \"tree-view \".concat(this.props.className);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: className,\n      style: Object.assign(styles.tree, this.props.style)\n    }, label, children);\n  }\n\n}\n\nTreeView.propTypes = {\n  label: PropTypes.node,\n  children: PropTypes.node,\n  persistent: PropTypes.bool,\n  initiallyExpanded: PropTypes.bool,\n  arrowSymbol: PropTypes.node,\n  style: PropTypes.object,\n  className: PropTypes.string,\n  onExpand: PropTypes.func,\n  onClick: PropTypes.func\n};\nTreeView.defaultProps = {\n  persistent: false,\n  initiallyExpanded: false,\n  arrowSymbol: '▸',\n  style: {}\n};\nexport default TreeView;","import LinearProgress from 'material-ui/LinearProgress';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport TreeView from './TreeView.component';\n/* eslint-disable react/sort-prop-types */\n\n/* eslint-disable max-params */\n\nconst styles = {\n  progress: {\n    position: 'absolute',\n    display: 'inline-block',\n    width: '100%',\n    left: -8\n  },\n  progressBar: {\n    height: 2,\n    backgroundColor: 'transparent'\n  },\n  spacer: {\n    position: 'relative',\n    display: 'inline-block',\n    width: '1.2rem',\n    height: '1rem'\n  },\n  label: {\n    display: 'inline-block',\n    outline: 'none'\n  },\n  ouContainer: {\n    borderColor: 'transparent',\n    borderStyle: 'solid',\n    borderWidth: '1px',\n    borderRightWidth: 0,\n    borderRadius: '3px 0 0 3px',\n    background: 'transparent',\n    paddingLeft: 2,\n    outline: 'none'\n  },\n  currentOuContainer: {\n    background: 'rgba(0,0,0,0.05)',\n    borderColor: 'rgba(0,0,0,0.1)'\n  },\n  memberCount: {\n    fontSize: '0.75rem',\n    marginLeft: 4\n  }\n};\n\nclass OrgUnitTree extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      children: props.root.children === false || Array.isArray(props.root.children) && props.root.children.length === 0 ? [] : undefined,\n      loading: false\n    };\n\n    if ('toArray' in props.root.children && !props.root.children.hasUnloadedData) {\n      this.state.children = props.root.children.toArray() // Sort here since the API returns nested children in random order\n      .sort((a, b) => a.displayName.localeCompare(b.displayName));\n    }\n\n    this.loadChildren = this.loadChildren.bind(this);\n    this.handleSelectClick = this.handleSelectClick.bind(this);\n  }\n\n  componentDidMount() {\n    if (this.props.initiallyExpanded.some(ou => ou.includes(\"/\".concat(this.props.root.id)))) {\n      this.loadChildren();\n    }\n  }\n\n  UNSAFE_componentWillReceiveProps(newProps) {\n    if (newProps.initiallyExpanded.some(ou => ou.includes(\"/\".concat(newProps.root.id))) || newProps.idsThatShouldBeReloaded.includes(newProps.root.id)) {\n      this.loadChildren();\n    }\n  }\n\n  setChildState(children) {\n    if (this.props.onChildrenLoaded) {\n      this.props.onChildrenLoaded(children);\n    }\n\n    this.setState({\n      children: children.toArray().sort((a, b) => a.displayName.localeCompare(b.displayName)),\n      loading: false\n    });\n  }\n\n  loadChildren() {\n    if (this.state.children === undefined && !this.state.loading || this.props.idsThatShouldBeReloaded.indexOf(this.props.root.id) >= 0) {\n      this.setState({\n        loading: true\n      });\n      const root = this.props.root; // d2.ModelCollectionProperty.load takes a second parameter `forceReload` and will just return\n      // the current valueMap unless either `this.hasUnloadedData` or `forceReload` are true\n\n      root.children.load({\n        fields: 'id,displayName,children::isNotEmpty,path,parent'\n      }, this.props.forceReloadChildren).then(children => {\n        this.setChildState(children);\n      });\n    }\n  }\n\n  handleSelectClick(e) {\n    if (this.props.onSelectClick) {\n      this.props.onSelectClick(e, this.props.root);\n    }\n\n    e.stopPropagation();\n  }\n\n  shouldIncludeOrgUnit(orgUnit) {\n    if (!this.props.orgUnitsPathsToInclude || this.props.orgUnitsPathsToInclude.length === 0) {\n      return true;\n    }\n\n    return !!this.props.orgUnitsPathsToInclude.some(ou => ou.includes(\"/\".concat(orgUnit.id)));\n  }\n\n  renderChild(orgUnit, expandedProp) {\n    if (this.shouldIncludeOrgUnit(orgUnit)) {\n      return /*#__PURE__*/React.createElement(OrgUnitTree, {\n        key: orgUnit.id,\n        root: orgUnit,\n        selected: this.props.selected,\n        initiallyExpanded: expandedProp,\n        onSelectClick: this.props.onSelectClick,\n        currentRoot: this.props.currentRoot,\n        onChangeCurrentRoot: this.props.onChangeCurrentRoot,\n        labelStyle: this.props.labelStyle,\n        selectedLabelStyle: this.props.selectedLabelStyle,\n        arrowSymbol: this.props.arrowSymbol,\n        idsThatShouldBeReloaded: this.props.idsThatShouldBeReloaded,\n        hideCheckboxes: this.props.hideCheckboxes,\n        onChildrenLoaded: this.props.onChildrenLoaded,\n        hideMemberCount: this.props.hideMemberCount,\n        orgUnitsPathsToInclude: this.props.orgUnitsPathsToInclude,\n        forceReloadChildren: this.props.forceReloadChildren\n      });\n    }\n\n    return null;\n  }\n\n  renderChildren() {\n    // If initiallyExpanded is an array, remove the current root id and pass the rest on\n    // If it's a string, pass it on unless it's the current root id\n    const expandedProp = Array.isArray(this.props.initiallyExpanded) ? this.props.initiallyExpanded.filter(id => id !== this.props.root.id) : this.props.initiallyExpanded !== this.props.root.id && this.props.initiallyExpanded || [];\n\n    if (Array.isArray(this.state.children) && this.state.children.length > 0) {\n      return this.state.children.map(orgUnit => this.renderChild(orgUnit, expandedProp));\n    }\n\n    if (this.state.loading) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        style: styles.progress\n      }, /*#__PURE__*/React.createElement(LinearProgress, {\n        style: styles.progressBar\n      }));\n    }\n\n    return null;\n  }\n\n  render() {\n    const currentOu = this.props.root; // True if this OU has children = is not a leaf node\n\n    const hasChildren = this.state.children === undefined || Array.isArray(this.state.children) && this.state.children.length > 0; // True if a click handler exists\n\n    const isSelectable = !!this.props.onSelectClick;\n    const pathRegEx = new RegExp(\"/\".concat(currentOu.id, \"$\"));\n    const memberRegEx = new RegExp(\"/\".concat(currentOu.id));\n    const isSelected = this.props.selected && this.props.selected.some(ou => pathRegEx.test(ou)); // True if this OU is the current root\n\n    const isCurrentRoot = this.props.currentRoot && this.props.currentRoot.id === currentOu.id; // True if this OU should be expanded by default\n\n    const isInitiallyExpanded = this.props.initiallyExpanded.some(ou => ou.includes(\"/\".concat(currentOu.id))); // True if this OU can BECOME the current root, which means that:\n    // 1) there is a change root handler\n    // 2) this OU is not already the current root\n    // 3) this OU has children (is not a leaf node)\n\n    const canBecomeCurrentRoot = this.props.onChangeCurrentRoot && !isCurrentRoot && hasChildren;\n    const memberCount = this.props.selected !== undefined ? this.props.selected.filter(ou => memberRegEx.test(ou)).length : currentOu.memberCount; // Hard coded styles for OU name labels - can be overridden with the selectedLabelStyle and labelStyle props\n\n    const labelStyle = Object.assign({}, styles.label, {\n      fontWeight: isSelected ? 500 : 300,\n      color: isSelected ? 'orange' : 'inherit',\n      cursor: canBecomeCurrentRoot ? 'pointer' : 'default'\n    }, isSelected ? this.props.selectedLabelStyle : this.props.labelStyle); // Styles for this OU and OUs contained within it\n\n    const ouContainerStyle = Object.assign({}, styles.ouContainer, isCurrentRoot ? styles.currentOuContainer : {}); // Wrap the change root click handler in order to stop event propagation\n\n    const setCurrentRoot = e => {\n      e.stopPropagation();\n      this.props.onChangeCurrentRoot(currentOu);\n    };\n\n    const label = /*#__PURE__*/React.createElement(\"div\", {\n      style: labelStyle,\n      onClick: canBecomeCurrentRoot && setCurrentRoot || isSelectable && this.handleSelectClick,\n      role: \"button\",\n      tabIndex: 0\n    }, isSelectable && !this.props.hideCheckboxes && /*#__PURE__*/React.createElement(\"input\", {\n      type: \"checkbox\",\n      readOnly: true,\n      disabled: !isSelectable,\n      checked: isSelected,\n      onClick: this.handleSelectClick\n    }), currentOu.displayName, hasChildren && !this.props.hideMemberCount && !!memberCount && /*#__PURE__*/React.createElement(\"span\", {\n      style: styles.memberCount\n    }, \"(\", memberCount, \")\"));\n\n    if (hasChildren) {\n      return /*#__PURE__*/React.createElement(TreeView, {\n        label: label,\n        onExpand: this.loadChildren,\n        persistent: true,\n        initiallyExpanded: isInitiallyExpanded,\n        arrowSymbol: this.props.arrowSymbol,\n        className: \"orgunit with-children\",\n        style: ouContainerStyle\n      }, this.renderChildren());\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      onClick: isSelectable && this.handleSelectClick,\n      className: \"orgunit without-children\",\n      style: ouContainerStyle,\n      role: \"button\",\n      tabIndex: 0\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.spacer\n    }), label);\n  }\n\n}\n\nfunction orgUnitPathPropValidator(propValue, key, compName, location, propFullName) {\n  if (!/(\\/[a-zA-Z][a-zA-Z0-9]{10})+/.test(propValue[key])) {\n    return new Error(\"Invalid org unit path `\".concat(propValue[key], \"` supplied to `\").concat(compName, \".\").concat(propFullName, \"`\"));\n  }\n\n  return undefined;\n}\n\nOrgUnitTree.propTypes = {\n  /**\n   * The root OrganisationUnit of the tree\n   *\n   * If the root OU is known to have no children, the `children` property of the root OU should be either\n   * `false` or an empty array. If the children property is undefined, the children will be fetched from\n   * the server when the tree is expanded.\n   */\n  root: PropTypes.object.isRequired,\n\n  /**\n   * An array of paths of selected OUs\n   *\n   * The path of an OU is the UIDs of the OU and all its parent OUs separated by slashes (/)\n   */\n  selected: PropTypes.arrayOf(orgUnitPathPropValidator),\n\n  /**\n   * An array of OU paths that will be expanded automatically as soon as they are encountered\n   *\n   * The path of an OU is the UIDs of the OU and all its parent OUs separated by slashes (/)\n   */\n  initiallyExpanded: PropTypes.arrayOf(orgUnitPathPropValidator),\n\n  /**\n   * onSelectClick callback, which is triggered when a click triggers the selection of an organisation unit\n   *\n   * The onSelectClick callback will receive two arguments: The original click event, and the OU that was clicked\n   */\n  onSelectClick: PropTypes.func,\n\n  /**\n   * onChangeCurrentRoot callback, which is triggered when the change current root label is clicked. Setting this also\n   * enables the display of the change current root label\n   *\n   * the onChangeCurrentRoot callback will receive two arguments: The original click event, and the organisation unit\n   * model object that was selected as the new root\n   */\n  onChangeCurrentRoot: PropTypes.func,\n\n  /**\n   * Organisation unit model representing the current root\n   */\n  currentRoot: PropTypes.object,\n\n  /**\n   * onChildrenLoaded callback, which is triggered when the children of this root org unit have been loaded\n   *\n   * The callback receives one argument: A D2 ModelCollection object that contains all the newly loaded org units\n   */\n  onChildrenLoaded: PropTypes.func,\n\n  /**\n   * Custom styling for OU labels\n   */\n  labelStyle: PropTypes.object,\n\n  /**\n   * Custom styling for the labels of selected OUs\n   */\n  selectedLabelStyle: PropTypes.object,\n\n  /**\n   * An array of organisation unit IDs that should be reloaded from the API\n   */\n  idsThatShouldBeReloaded: PropTypes.arrayOf(PropTypes.string),\n\n  /**\n   * Custom arrow symbol\n   */\n  arrowSymbol: PropTypes.string,\n\n  /**\n   * If true, don't display checkboxes next to org unit labels\n   */\n  hideCheckboxes: PropTypes.bool,\n\n  /**\n   * if true, don't display the selected member count next to org unit labels\n   */\n  hideMemberCount: PropTypes.bool,\n\n  /**\n   * Array of paths of Organisation Units to include on tree. If not defined or empty, all children from root to leafs will be shown\n   */\n  orgUnitsPathsToInclude: PropTypes.array,\n\n  /**\n   * If true `root.children.load` (a method on d2.ModelCollectionProperty) will be called with forceReload set to true, which is required\n   * for dynamic OrgUnitTrees, i.e. in cases where parent-child relations are updated\n   */\n  forceReloadChildren: PropTypes.bool\n};\nOrgUnitTree.defaultProps = {\n  selected: [],\n  initiallyExpanded: [],\n  onSelectClick: undefined,\n  onChangeCurrentRoot: undefined,\n  currentRoot: undefined,\n  onChildrenLoaded: undefined,\n  labelStyle: {},\n  selectedLabelStyle: {},\n  idsThatShouldBeReloaded: [],\n  arrowSymbol: undefined,\n  hideCheckboxes: false,\n  hideMemberCount: false,\n  orgUnitsPathsToInclude: null,\n  forceReloadChildren: false\n};\nexport default OrgUnitTree;","import { is53WeekISOYear, getFirstDateOfWeek } from 'd2/period/helpers';\nimport DatePicker from 'material-ui/DatePicker';\nimport MenuItem from 'material-ui/MenuItem';\nimport SelectField from 'material-ui/SelectField';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nconst styles = {\n  datePicker: {\n    width: '100%'\n  },\n  year: {\n    width: 95,\n    marginRight: 16\n  },\n  month: {\n    width: 125\n  },\n  week: {\n    width: 105\n  },\n  biWeek: {\n    width: 200\n  },\n  biMonth: {\n    width: 200\n  },\n  quarter: {\n    width: 200\n  },\n  sixMonth: {\n    width: 200\n  },\n  line: {\n    marginTop: 0\n  }\n};\n\nconst getYear = date => new Date(date).getFullYear().toString();\n\nconst getTwoDigitMonth = date => {\n  const month = new Date(date).getMonth() + 1; // Month is 0 indexed\n\n  return \"0\".concat(month).slice(-2);\n};\n\nconst getTwoDigitDay = date => {\n  const day = new Date(date).getDate();\n  return \"0\".concat(day).slice(-2);\n};\n\nconst formattedDate = date => \"\".concat(getYear(date)).concat(getTwoDigitMonth(date)).concat(getTwoDigitDay(date));\n\nconst getWeekYear = date => {\n  // Create a new date object for the thursday of this week\n  const target = new Date(date);\n  target.setDate(target.getDate() - (date.getDay() + 6) % 7 + 3);\n  return target.getFullYear();\n};\n\nconst isWeekValid = (date, week) => // It's not possible to have a week 53 in a 52 week year\n!is53WeekISOYear(date) && Number(week) !== 53;\n\nconst biWeekToWeek = biWeekStr => parseInt(biWeekStr) * 2 - 1;\n\nclass PeriodPicker extends React.Component {\n  constructor(props, context) {\n    super(props, context);\n    this.state = {};\n  }\n\n  getTranslation(key) {\n    return this.props.d2.i18n.getTranslation(key);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.periodType !== prevProps.periodType) {\n      this.handleChange();\n    }\n  }\n\n  getPeriod() {\n    const week = this.props.periodType === 'BiWeekly' && this.state.biWeek ? biWeekToWeek(this.state.biWeek) : this.state.week;\n    const date = this.state.year && week && getFirstDateOfWeek(this.state.year, week);\n\n    switch (this.props.periodType) {\n      case 'Daily':\n        return this.state.date && formattedDate(this.state.date);\n\n      case 'Weekly':\n        if (date) {\n          this.setState({\n            invalidWeek: !isWeekValid(date, this.state.week)\n          });\n        }\n\n        return date && isWeekValid(date, this.state.week) && \"\".concat(getWeekYear(date), \"W\").concat(this.state.week);\n\n      case 'WeeklyWednesday':\n        if (date) {\n          this.setState({\n            invalidWeek: !isWeekValid(date, this.state.week)\n          });\n        }\n\n        return date && isWeekValid(date, this.state.week) && \"\".concat(getWeekYear(date), \"WedW\").concat(this.state.week);\n\n      case 'WeeklyThursday':\n        if (date) {\n          this.setState({\n            invalidWeek: !isWeekValid(date, this.state.week)\n          });\n        }\n\n        return date && isWeekValid(date, this.state.week) && \"\".concat(getWeekYear(date), \"ThuW\").concat(this.state.week);\n\n      case 'WeeklySaturday':\n        if (date) {\n          this.setState({\n            invalidWeek: !isWeekValid(date, this.state.week)\n          });\n        }\n\n        return date && isWeekValid(date, this.state.week) && \"\".concat(getWeekYear(date), \"SatW\").concat(this.state.week);\n\n      case 'WeeklySunday':\n        if (date) {\n          this.setState({\n            invalidWeek: !isWeekValid(date, this.state.week)\n          });\n        }\n\n        return date && isWeekValid(date, this.state.week) && \"\".concat(getWeekYear(date), \"SunW\").concat(this.state.week);\n\n      case 'BiWeekly':\n        if (date) {\n          this.setState({\n            invalidBiWeek: !isWeekValid(date, biWeekToWeek(this.state.biWeek))\n          });\n        }\n\n        return this.state.year && this.state.biWeek && \"\".concat(this.state.year, \"BiW\").concat(this.state.biWeek);\n\n      case 'Monthly':\n        return this.state.year && this.state.month && \"\".concat(this.state.year).concat(this.state.month);\n\n      case 'BiMonthly':\n        return this.state.year && this.state.biMonth && \"\".concat(this.state.year, \"0\").concat(this.state.biMonth, \"B\");\n\n      case 'Quarterly':\n        return this.state.year && this.state.quarter && \"\".concat(this.state.year, \"Q\").concat(this.state.quarter);\n\n      case 'SixMonthly':\n        return this.state.year && this.state.sixMonth && \"\".concat(this.state.year, \"S\").concat(this.state.sixMonth);\n\n      case 'SixMonthlyApril':\n        return this.state.year && this.state.sixMonth && \"\".concat(this.state.year, \"AprilS\").concat(this.state.sixMonth);\n\n      case 'SixMonthlyNov':\n        return this.state.year && this.state.sixMonth && \"\".concat(this.state.year, \"NovS\").concat(this.state.sixMonth);\n\n      case 'Yearly':\n        return this.state.year;\n\n      case 'FinancialApril':\n        return this.state.year && \"\".concat(this.state.year, \"April\");\n\n      case 'FinancialJuly':\n        return this.state.year && \"\".concat(this.state.year, \"July\");\n\n      case 'FinancialOct':\n        return this.state.year && \"\".concat(this.state.year, \"Oct\");\n\n      default:\n        return false;\n    }\n  }\n\n  handleChange() {\n    if (this.getPeriod()) {\n      this.props.onPickPeriod(this.getPeriod());\n    }\n  }\n\n  renderOptionPicker(name, options) {\n    const changeState = (e, i, value) => this.setState({\n      [name]: value\n    }, this.handleChange);\n\n    const isInvalid = name === 'week' && this.state.invalidWeek || name === 'biWeek' && this.state.invalidBiWeek;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: 'inline-block'\n      },\n      \"data-test\": \"period-picker-option-\".concat(name)\n    }, /*#__PURE__*/React.createElement(SelectField, {\n      value: this.state[name],\n      onChange: changeState,\n      style: styles[name],\n      floatingLabelText: this.getTranslation(name),\n      floatingLabelStyle: isInvalid ? {\n        color: 'red'\n      } : {}\n    }, Object.keys(options).sort().map(value => /*#__PURE__*/React.createElement(MenuItem, {\n      key: value,\n      value: value,\n      primaryText: /[^0-9]/.test(options[value]) && name !== 'biWeek' ? this.getTranslation(options[value]) : options[value]\n    }))));\n  }\n\n  renderYearPicker() {\n    const years = {};\n    const currentYear = new Date().getFullYear();\n\n    for (let year = 2014; year < currentYear + 5; year++) {\n      years[year] = year;\n    }\n\n    return this.renderOptionPicker('year', years);\n  }\n\n  renderMonthPicker() {\n    const months = {\n      '01': 'jan',\n      '02': 'feb',\n      '03': 'mar',\n      '04': 'apr',\n      '05': 'may',\n      '06': 'jun',\n      '07': 'jul',\n      '08': 'aug',\n      '09': 'sep',\n      10: 'oct',\n      11: 'nov',\n      12: 'dec'\n    };\n    return this.renderOptionPicker('month', months);\n  }\n\n  renderWeekPicker() {\n    const weeks = {};\n    const weekLimit = 53;\n\n    for (let week = 1; week <= weekLimit; week++) {\n      weeks[\"0\".concat(week).substr(-2)] = week;\n    }\n\n    return this.renderOptionPicker('week', weeks);\n  }\n\n  renderBiWeekPicker() {\n    const biWeeks = {};\n    const biWeekLimit = 27;\n    const prefix = this.getTranslation('bi_week');\n\n    for (let biWeek = 1; biWeek <= biWeekLimit; biWeek++) {\n      biWeeks[\"0\".concat(biWeek).substr(-2)] = \"\".concat(prefix, \" \").concat(biWeek);\n    }\n\n    return this.renderOptionPicker('biWeek', biWeeks);\n  }\n\n  renderBiMonthPicker() {\n    const biMonths = {\n      1: 'jan-feb',\n      2: 'mar-apr',\n      3: 'may-jun',\n      4: 'jul-aug',\n      5: 'sep-oct',\n      6: 'nov-dec'\n    };\n    return this.renderOptionPicker('biMonth', biMonths);\n  }\n\n  renderQuarterPicker() {\n    const quarters = {\n      1: 'Q1',\n      2: 'Q2',\n      3: 'Q3',\n      4: 'Q4'\n    };\n    return this.renderOptionPicker('quarter', quarters);\n  }\n\n  render() {\n    const setDateState = (nothing, date) => {\n      const year = getYear(date);\n      const month = getTwoDigitMonth(date);\n      this.setState({\n        date,\n        year,\n        month\n      }, this.handleChange);\n    };\n\n    switch (this.props.periodType) {\n      case 'Daily':\n        return /*#__PURE__*/React.createElement(DatePicker, {\n          floatingLabelText: this.getTranslation('day'),\n          onChange: setDateState,\n          autoOk: true,\n          container: \"inline\",\n          style: styles.datePicker\n        });\n\n      case 'Weekly':\n      case 'WeeklyWednesday':\n      case 'WeeklyThursday':\n      case 'WeeklySaturday':\n      case 'WeeklySunday':\n        return /*#__PURE__*/React.createElement(\"div\", {\n          style: styles.line\n        }, this.renderYearPicker(), this.renderWeekPicker());\n\n      case 'BiWeekly':\n        return /*#__PURE__*/React.createElement(\"div\", {\n          style: styles.line\n        }, this.renderYearPicker(), this.renderBiWeekPicker());\n\n      case 'Monthly':\n        return /*#__PURE__*/React.createElement(\"div\", {\n          style: styles.line\n        }, this.renderYearPicker(), this.renderMonthPicker());\n\n      case 'BiMonthly':\n        return /*#__PURE__*/React.createElement(\"div\", {\n          style: styles.line\n        }, this.renderYearPicker(), this.renderBiMonthPicker());\n\n      case 'Quarterly':\n        return /*#__PURE__*/React.createElement(\"div\", {\n          style: styles.line\n        }, this.renderYearPicker(), this.renderQuarterPicker());\n\n      case 'SixMonthly':\n        return /*#__PURE__*/React.createElement(\"div\", {\n          style: styles.line\n        }, this.renderYearPicker(), this.renderOptionPicker('sixMonth', {\n          1: 'jan-jun',\n          2: 'jul-dec'\n        }));\n\n      case 'SixMonthlyApril':\n        return /*#__PURE__*/React.createElement(\"div\", {\n          style: styles.line\n        }, this.renderYearPicker(), this.renderOptionPicker('sixMonth', {\n          1: 'apr-sep',\n          2: 'oct-mar'\n        }));\n\n      case 'SixMonthlyNov':\n        return /*#__PURE__*/React.createElement(\"div\", {\n          style: styles.line\n        }, this.renderYearPicker(), this.renderOptionPicker('sixMonth', {\n          1: 'nov-apr',\n          2: 'may-oct'\n        }));\n\n      case 'Yearly':\n      case 'FinancialApril':\n      case 'FinancialJuly':\n      case 'FinancialOct':\n        return /*#__PURE__*/React.createElement(\"div\", {\n          style: styles.line\n        }, this.renderYearPicker());\n\n      default:\n        return null;\n    }\n  }\n\n}\n\nPeriodPicker.propTypes = {\n  d2: PropTypes.object.isRequired,\n  periodType: PropTypes.oneOf(['Daily', 'Weekly', 'WeeklyWednesday', 'WeeklyThursday', 'WeeklySaturday', 'WeeklySunday', 'BiWeekly', 'Monthly', 'BiMonthly', 'Quarterly', 'SixMonthly', 'SixMonthlyApril', 'SixMonthlyNov', 'Yearly', 'FinancialApril', 'FinancialJuly', 'FinancialOct']).isRequired,\n  onPickPeriod: PropTypes.func.isRequired\n};\nexport default PeriodPicker;","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport i18n from '@dhis2/d2-i18n';\nimport { NoticeBox } from '@dhis2/ui';\nimport SelectField from 'd2-ui/lib/select-field/SelectField';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport styles from './AddLockExceptionForm.module.css';\nimport OrgUnitSelectAll from './OrgUnitSelect/OrgUnitSelectAll';\nimport OrgUnitSelectByGroup from './OrgUnitSelect/OrgUnitSelectByGroup';\nimport OrgUnitSelectByLevel from './OrgUnitSelect/OrgUnitSelectByLevel';\nimport OrgUnitTree from './OrgUnitTree';\nimport PeriodPicker from './PeriodPicker';\nconst d2UiSelectStyleOverride = {\n  minWidth: 360,\n  marginRight: 20\n};\n\nclass AddLockExceptionForm extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"handleDataSetChange\", async dataSet => {\n      const dataSetId = dataSet.id;\n\n      if (this.state.dataSet !== null && dataSetId === this.state.dataSet.id) {\n        return;\n      }\n\n      this.props.updateSelectedDataSetId(dataSetId);\n      this.setState({\n        rootWithMembers: null,\n        selected: [],\n        dataSet\n      });\n      const {\n        d2\n      } = this.props;\n\n      try {\n        const [rootWithDataSetMembers, dataSetMembers] = await Promise.all([d2.models.organisationUnits.list({\n          paging: false,\n          level: 1,\n          fields: 'id,displayName,path,children::isNotEmpty,memberCount',\n          memberCollection: 'dataSets',\n          memberObject: dataSetId\n        }), d2.models.dataSets.get(dataSetId, {\n          paging: false,\n          fields: 'organisationUnits[id,path]'\n        })]);\n        const rootWithMembers = rootWithDataSetMembers.toArray()[0];\n        this.setState({\n          rootWithMembers,\n          selected: [],\n          orgUnitPaths: dataSetMembers.organisationUnits.toArray().map(ou => ou.path)\n        });\n      } catch (error) {\n        this.setState({\n          error: i18n.t('Error loading data for data set')\n        });\n      }\n    });\n\n    _defineProperty(this, \"handlePeriodChange\", periodId => {\n      this.props.updateSelectedPeriodId(periodId);\n    });\n\n    _defineProperty(this, \"handleSelectionUpdate\", newSelection => {\n      this.setState({\n        selected: newSelection\n      });\n      this.props.updateSelectedOrgUnits(this.state.selected);\n    });\n\n    _defineProperty(this, \"handleOrgUnitClick\", (event, orgUnit) => {\n      if (this.state.selected.includes(orgUnit.path)) {\n        const selected = this.state.selected;\n        selected.splice(selected.indexOf(orgUnit.path), 1);\n        this.setState({\n          selected\n        });\n      } else {\n        const selected = this.state.selected;\n        selected.push(orgUnit.path);\n        this.setState({\n          selected\n        });\n      }\n\n      this.props.updateSelectedOrgUnits(this.state.selected);\n    });\n\n    _defineProperty(this, \"handleChangeRoot\", currentRoot => {\n      this.setState({\n        currentRoot\n      });\n    });\n\n    this.state = {\n      selected: [],\n      dataSet: null,\n      orgUnitPaths: null,\n      error: null\n    }; // Required by PeriodPicker\n    // TODO: Move translations to PeriodPicker component\n\n    this.fixD2Translations();\n  }\n\n  getChildContext() {\n    return {\n      d2: this.props.d2\n    };\n  }\n\n  fixD2Translations() {\n    Object.assign(this.props.d2.i18n.translations, {\n      period: i18n.t('Period'),\n      data_set: i18n.t('Data set'),\n      organisation_unit: i18n.t('Organisation unit'),\n      name: i18n.t('Name'),\n      show: i18n.t('Show details'),\n      remove: i18n.t('Remove'),\n      actions: i18n.t('Actions'),\n      week: i18n.t('week'),\n      month: i18n.t('month'),\n      year: i18n.t('year'),\n      biMonth: i18n.t('bi monthly'),\n      day: i18n.t('day'),\n      jan: i18n.t('jan'),\n      feb: i18n.t('feb'),\n      mar: i18n.t('mar'),\n      apr: i18n.t('apr'),\n      may: i18n.t('may'),\n      jun: i18n.t('jun'),\n      jul: i18n.t('jul'),\n      aug: i18n.t('aug'),\n      sep: i18n.t('sep'),\n      oct: i18n.t('oct'),\n      nov: i18n.t('nov'),\n      dec: i18n.t('dec'),\n      'jan-feb': i18n.t('jan-feb'),\n      'mar-apr': i18n.t('mar-apr'),\n      'may-jun': i18n.t('may-jun'),\n      'jul-aug': i18n.t('jul-aug'),\n      'sep-oct': i18n.t('sep-oct'),\n      'nov-dec': i18n.t('nov-dec'),\n      quarter: i18n.t('quarter'),\n      Q1: i18n.t('Q1'),\n      Q2: i18n.t('Q2'),\n      Q3: i18n.t('Q3'),\n      Q4: i18n.t('Q4'),\n      sixMonth: i18n.t('six monthly'),\n      'jan-jun': i18n.t('jan-jun'),\n      'jul-dec': i18n.t('jul-dec'),\n      'apr-sep': i18n.t('apr-sep'),\n      'oct-mar': i18n.t('oct-mar')\n    });\n  }\n\n  renderOrganisationUnitSelectionCard() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.organisationUnitSelectionCard\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.organisationUnitTree,\n      \"data-test\": \"add-lock-exception-modal-org-unit-tree\"\n    }, this.state.rootWithMembers ? /*#__PURE__*/React.createElement(OrgUnitTree, {\n      root: this.state.rootWithMembers,\n      selected: this.state.selected,\n      currentRoot: this.state.currentRoot,\n      initiallyExpanded: [\"/\".concat(this.state.rootWithMembers.id)],\n      memberCollection: \"dataSets\",\n      memberObject: this.state.dataSet.id,\n      onSelectClick: this.handleOrgUnitClick,\n      onChangeCurrentRoot: this.handleChangeRoot,\n      orgUnitsPathsToInclude: this.state.orgUnitPaths\n    }) : i18n.t('Loading organisation units tree...')), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.right\n    }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"div\", null, this.state.currentRoot ? i18n.t('For organisation units within {{organisationUnitName}}:', {\n      organisationUnitName: this.state.currentRoot.displayName\n    }) : i18n.t('For all organisation units:')), /*#__PURE__*/React.createElement(OrgUnitSelectByLevel, {\n      d2: this.props.d2,\n      levels: this.props.levels,\n      selected: this.state.selected,\n      currentRoot: this.state.currentRoot,\n      onUpdateSelection: this.handleSelectionUpdate\n    }), /*#__PURE__*/React.createElement(OrgUnitSelectByGroup, {\n      d2: this.props.d2,\n      groups: this.props.groups,\n      selected: this.state.selected,\n      currentRoot: this.state.currentRoot,\n      onUpdateSelection: this.handleSelectionUpdate\n    }), /*#__PURE__*/React.createElement(OrgUnitSelectAll, {\n      d2: this.props.d2,\n      selected: this.state.selected,\n      currentRoot: this.state.currentRoot,\n      onUpdateSelection: this.handleSelectionUpdate\n    }))));\n  }\n\n  render() {\n    const dataSetItems = this.props.dataSets.map(dataSet => ({\n      id: dataSet.id,\n      name: dataSet.displayName,\n      periodType: dataSet.periodType\n    }));\n    let dataSetSelectLabel = i18n.t('Select a data set');\n    let dataSetSelectValue = null;\n\n    if (this.state.dataSet) {\n      dataSetSelectLabel = i18n.t('Data set');\n      dataSetSelectValue = this.state.dataSet.id;\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.selectsContainer\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      \"data-test\": \"add-lock-exception-modal-select-data-set\"\n    }, /*#__PURE__*/React.createElement(SelectField, {\n      style: d2UiSelectStyleOverride,\n      label: dataSetSelectLabel,\n      items: dataSetItems,\n      onChange: this.handleDataSetChange,\n      value: dataSetSelectValue\n    })), this.state.dataSet && /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(PeriodPicker, {\n      d2: this.props.d2,\n      periodType: this.state.dataSet.periodType,\n      onPickPeriod: this.handlePeriodChange\n    }))), this.state.dataSet && (this.state.error ? /*#__PURE__*/React.createElement(NoticeBox, {\n      error: true\n    }, this.state.error) : this.renderOrganisationUnitSelectionCard()));\n  }\n\n}\n\n_defineProperty(AddLockExceptionForm, \"propTypes\", {\n  d2: PropTypes.object.isRequired,\n  dataSets: PropTypes.array.isRequired,\n  groups: PropTypes.oneOfType([PropTypes.object, PropTypes.array]).isRequired,\n  levels: PropTypes.oneOfType([PropTypes.object, PropTypes.array]).isRequired,\n  updateSelectedDataSetId: PropTypes.func.isRequired,\n  updateSelectedOrgUnits: PropTypes.func.isRequired,\n  updateSelectedPeriodId: PropTypes.func.isRequired\n});\n\n_defineProperty(AddLockExceptionForm, \"childContextTypes\", {\n  d2: PropTypes.object\n});\n\nexport default AddLockExceptionForm;","import { useDataQuery, useDataMutation, useAlert } from '@dhis2/app-runtime';\nimport { useD2 } from '@dhis2/app-runtime-adapter-d2';\nimport i18n from '@dhis2/d2-i18n';\nimport { Card, CenteredContent, NoticeBox, Button, CircularLoader } from '@dhis2/ui';\nimport classnames from 'classnames';\nimport FontIcon from 'material-ui/FontIcon';\nimport React, { useState } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport AddLockExceptionForm from './AddLockExceptionForm';\nimport styles from './LockException.module.css';\nconst query = {\n  levels: {\n    resource: 'organisationUnitLevels',\n    params: {\n      fields: 'id,level,displayName',\n      paging: false,\n      order: 'level:asc'\n    }\n  },\n  groups: {\n    resource: 'organisationUnitGroups',\n    params: {\n      fields: 'id,displayName',\n      paging: false\n    }\n  },\n  dataSets: {\n    resource: 'dataSets',\n    params: {\n      fields: 'id,displayName,periodType',\n      paging: false\n    }\n  }\n};\nconst mutation = {\n  resource: 'lockExceptions',\n  type: 'create',\n  params: params => params\n};\n\nconst AddLockException = () => {\n  const history = useHistory();\n  const dataQuery = useDataQuery(query);\n  const successAlert = useAlert(i18n.t('Lock exception added'), {\n    success: true\n  });\n  const errorAlert = useAlert(({\n    error\n  }) => i18n.t('Error adding lock exception: {{error}}', {\n    error,\n    nsSeparator: null\n  }), {\n    critical: true\n  });\n  const [mutate, dataMutation] = useDataMutation(mutation, {\n    onComplete: () => {\n      successAlert.show();\n      history.push('/lock-exception');\n    },\n    onError: error => {\n      errorAlert.show({\n        error\n      });\n    }\n  });\n  const [selectedOrgUnits, setSelectedOrgUnits] = useState([]);\n  const [selectedDataSetId, setSelectedDataSetId] = useState(null);\n  const [selectedPeriodId, setSelectedPeriodId] = useState(null);\n  const {\n    d2\n  } = useD2();\n\n  const handleAdd = () => {\n    const orgUnitIds = selectedOrgUnits.map(orgUnitPath => {\n      const splitOrgUnitPath = orgUnitPath.split('/');\n      return splitOrgUnitPath[splitOrgUnitPath.length - 1];\n    });\n    mutate({\n      ou: \"[\".concat(orgUnitIds.join(','), \"]\"),\n      pe: selectedPeriodId,\n      ds: selectedDataSetId\n    });\n  };\n\n  const isAddActionDisabled = dataMutation.loading || !(selectedOrgUnits.length > 0 && selectedDataSetId && selectedPeriodId);\n\n  if (dataQuery.loading) {\n    return /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null));\n  }\n\n  if (dataQuery.error) {\n    return /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(NoticeBox, {\n      error: true\n    }, dataQuery.error.message));\n  }\n\n  const {\n    levels: {\n      organisationUnitLevels\n    },\n    groups: {\n      organisationUnitGroups\n    },\n    dataSets: {\n      dataSets\n    }\n  } = dataQuery.data;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.lockExceptions\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.headerContainer\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/lock-exception\"\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    title: i18n.t('Go back to all lock exceptions')\n  }, /*#__PURE__*/React.createElement(FontIcon, {\n    className: classnames('material-icons', styles.backArrowIcon)\n  }, \"arrow_back\"))), /*#__PURE__*/React.createElement(\"h1\", {\n    className: styles.header\n  }, /*#__PURE__*/React.createElement(\"span\", null, i18n.t('Lock Exception')), /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.headerDivider\n  }, \" | \"), /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.subHeader\n  }, i18n.t('Add lock exception')))), /*#__PURE__*/React.createElement(Card, {\n    className: styles.card\n  }, /*#__PURE__*/React.createElement(AddLockExceptionForm, {\n    d2: d2,\n    levels: organisationUnitLevels,\n    groups: organisationUnitGroups,\n    dataSets: dataSets,\n    updateSelectedOrgUnits: setSelectedOrgUnits,\n    updateSelectedDataSetId: setSelectedDataSetId,\n    updateSelectedPeriodId: setSelectedPeriodId\n  }), /*#__PURE__*/React.createElement(Button, {\n    className: styles.addLockExceptionButton,\n    primary: true,\n    disabled: isAddActionDisabled,\n    onClick: handleAdd\n  }, dataMutation.loading ? /*#__PURE__*/React.createElement(React.Fragment, null, i18n.t('Adding lock exception...'), /*#__PURE__*/React.createElement(CircularLoader, {\n    small: true\n  })) : i18n.t('Add lock exception'))));\n};\n\nexport default AddLockException;","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { CenteredContent, CircularLoader, NoticeBox } from '@dhis2/ui';\nimport classnames from 'classnames';\nimport FontIcon from 'material-ui/FontIcon';\nimport React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport styles from './LockException.module.css';\nimport LockExceptionsTable from './LockExceptionsTable';\nimport { parseLockExceptions } from './parse-lock-exceptions';\nimport RemoveLockExceptionModal from './RemoveLockExceptionModal';\nconst query = {\n  batchedLockExceptions: {\n    resource: 'lockExceptions/combinations',\n    params: {\n      fields: 'name,period[id,displayName],dataSet[id,displayName]'\n    }\n  }\n};\n\nconst BatchDeleteLockExceptions = () => {\n  const {\n    loading,\n    error,\n    data,\n    refetch\n  } = useDataQuery(query);\n  const [removeLockExceptionModal, setRemoveLockExceptionModal] = useState({\n    visible: false,\n    lockException: null\n  });\n  const lockExceptions = data && parseLockExceptions(data.batchedLockExceptions.lockExceptions);\n\n  const handleShowRemoveLockExceptionModal = lockException => {\n    setRemoveLockExceptionModal({\n      visible: true,\n      lockException\n    });\n  };\n\n  const handleCloseRemoveLockExceptionModal = () => {\n    setRemoveLockExceptionModal({\n      visible: false,\n      lockException: null\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.lockExceptions\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.headerContainer\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/lock-exception\"\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    title: i18n.t('Go back to all lock exceptions')\n  }, /*#__PURE__*/React.createElement(FontIcon, {\n    className: classnames('material-icons', styles.backArrowIcon)\n  }, \"arrow_back\"))), /*#__PURE__*/React.createElement(\"h1\", {\n    className: styles.header\n  }, /*#__PURE__*/React.createElement(\"span\", null, i18n.t('Lock Exception')), /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.headerDivider\n  }, \" | \"), /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.subHeader\n  }, i18n.t('Batch Deletion')))), error ? /*#__PURE__*/React.createElement(NoticeBox, {\n    error: true\n  }, error.message) : loading ? /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null)) : lockExceptions.length > 0 ? /*#__PURE__*/React.createElement(LockExceptionsTable, {\n    columns: ['dataSet', 'period'],\n    rows: lockExceptions,\n    onRemoveLockException: handleShowRemoveLockExceptionModal,\n    atBatchDeletionPage: true\n  }) : /*#__PURE__*/React.createElement(\"em\", null, i18n.t('No lock exceptions to show.')), removeLockExceptionModal.visible && /*#__PURE__*/React.createElement(RemoveLockExceptionModal, {\n    lockException: removeLockExceptionModal.lockException,\n    onRemove: refetch,\n    onClose: handleCloseRemoveLockExceptionModal\n  }));\n};\n\nexport default BatchDeleteLockExceptions;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from 'react';\nimport { Switch, Route, Redirect } from 'react-router-dom';\nimport Home from '../../pages/home/Home';\nimport AddLockException from '../../pages/lock-exception/AddLockException.js';\nimport BatchDeleteLockExceptions from '../../pages/lock-exception/BatchDeleteLockExceptions';\nimport { sections } from '../../pages/sections.conf';\n\nconst Routes = () => /*#__PURE__*/React.createElement(Switch, null, /*#__PURE__*/React.createElement(Route, {\n  exact: true,\n  path: \"/\",\n  component: Home\n}), sections.map(section => /*#__PURE__*/React.createElement(Route, {\n  key: section.key,\n  exact: true,\n  path: section.path,\n  component: props => /*#__PURE__*/React.createElement(section.component, _extends({\n    sectionKey: section.key\n  }, props))\n})), /*#__PURE__*/React.createElement(Route, {\n  path: \"/lock-exception/batch-deletion\",\n  component: BatchDeleteLockExceptions\n}), /*#__PURE__*/React.createElement(Route, {\n  path: \"/lock-exception/add\",\n  component: AddLockException\n}), /*#__PURE__*/React.createElement(Redirect, {\n  from: \"*\",\n  to: \"/\"\n}));\n\nexport default Routes;","import { PropTypes } from '@dhis2/prop-types';\nimport { Menu, MenuItem } from '@dhis2/ui';\nimport React from 'react';\nimport { useHistory, useRouteMatch } from 'react-router-dom';\nimport { sections } from '../../pages/sections.conf';\nimport styles from './Sidebar.module.css';\n\nconst SidebarItem = ({\n  label,\n  path\n}) => {\n  const history = useHistory();\n  const isActive = !!useRouteMatch(path);\n\n  const navigateToPath = () => history.push(path);\n\n  return /*#__PURE__*/React.createElement(MenuItem, {\n    className: styles.sidebarItem,\n    onClick: navigateToPath,\n    active: isActive,\n    label: label\n  });\n};\n\nSidebarItem.propTypes = {\n  label: PropTypes.string.isRequired,\n  path: PropTypes.string.isRequired\n};\n\nconst Sidebar = () => /*#__PURE__*/React.createElement(Menu, null, sections.map(section => /*#__PURE__*/React.createElement(SidebarItem, {\n  key: section.key,\n  label: section.info.label,\n  path: section.path\n})));\n\nexport default Sidebar;","import { blue100, blue700, grey100, grey400, orange500, orangeA200, darkBlack, white } from 'material-ui/styles/colors';\nimport getMuiTheme from 'material-ui/styles/getMuiTheme';\nimport Spacing from 'material-ui/styles/spacing';\nimport { fade } from 'material-ui/utils/colorManipulator';\nconst theme = {\n  spacing: Spacing,\n  fontFamily: 'Roboto, sans-serif',\n  palette: {\n    primary1Color: '#004ba0',\n    primary2Color: blue700,\n    primary3Color: blue100,\n    accent1Color: orange500,\n    accent2Color: grey100,\n    accent3Color: orangeA200,\n    textColor: darkBlack,\n    alternateTextColor: white,\n    canvasColor: white,\n    borderColor: grey400,\n    disabledColor: fade(darkBlack, 0.3)\n  }\n};\nconst muiTheme = getMuiTheme(theme);\nexport default muiTheme;","import { useD2 } from '@dhis2/app-runtime-adapter-d2';\nimport { CssVariables } from '@dhis2/ui';\nimport { MuiThemeProvider } from 'material-ui/styles';\nimport React from 'react';\nimport { HashRouter } from 'react-router-dom';\nimport styles from './App.module.css';\nimport Routes from './components/Routes/Routes';\nimport Sidebar from './components/Sidebar/Sidebar';\nimport muiTheme from './theme';\nimport 'material-design-icons-iconfont';\nimport './locales';\n\nconst App = () => {\n  const {\n    d2\n  } = useD2();\n\n  if (!d2) {\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(HashRouter, null, /*#__PURE__*/React.createElement(CssVariables, {\n    spacers: true,\n    colors: true\n  }), /*#__PURE__*/React.createElement(MuiThemeProvider, {\n    muiTheme: muiTheme\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.sidebar\n  }, /*#__PURE__*/React.createElement(Sidebar, null)), /*#__PURE__*/React.createElement(\"main\", {\n    className: styles.content\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.contentWrapper\n  }, /*#__PURE__*/React.createElement(Routes, null))))));\n};\n\nexport default App;"],"sourceRoot":""}