(this["webpackJsonp@dhis2/app-shell"]=this["webpackJsonp@dhis2/app-shell"]||[]).push([[135],{417:function(e,t,a){e.exports={uppercase:"Page_uppercase__1jIso",gridContainer:"Page_gridContainer__-51DT",formControl:"Page_formControl__3fSiU",cardContainer:"Page_cardContainer__1Dt3b"}},512:function(e,t,a){e.exports={header:"DataStatistics_header__2TZYM",card:"DataStatistics_card__-usL2",maxWith:"DataStatistics_maxWith__eTiig",statisticsTable:"DataStatistics_statisticsTable__2Btwb"}},647:function(e,t,a){e.exports={container:"App_container__2zgzu",sidebar:"App_sidebar__10tAV",content:"App_content__3I8HS"}},755:function(e,t,a){},756:function(e){e.exports=JSON.parse('{"Data set":"\u062d\u0632\u0645\u0629 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a","Period":"\u0627\u0644\u0641\u062a\u0631\u0629 \u0627\u0644\u0632\u0645\u0646\u064a\u0629","Organisation unit":"\u0627\u0644\u0648\u062d\u062f\u0629 \u0627\u0644\u062a\u0646\u0638\u064a\u0645\u064a\u0629"}')},757:function(e){e.exports=JSON.parse("{}")},758:function(e){e.exports=JSON.parse('{"Data set":"","Period":"","Organisation unit":"\u0627\u0644\u0648\u062d\u062f\u0629 \u0627\u0644\u062a\u0646\u0638\u064a\u0645\u064a\u0629"}')},759:function(e){e.exports=JSON.parse("{}")},760:function(e){e.exports=JSON.parse("{}")},761:function(e){e.exports=JSON.parse('{"Data set":"","Period":"\u0645\u0627\u0648\u0629","Organisation unit":"\u064a\u0629\u0643\u0629\u064a \u0631\u064a\u0643\u062e\u0631\u0627\u0648"}')},762:function(e){e.exports=JSON.parse('{"Data set":"Datov\xe1 sada","Period":"Obdob\xed","Organisation unit":"Organiza\u010dn\xed jednotka"}')},763:function(e){e.exports=JSON.parse('{"Data set":"Data set","Period":"","Organisation unit":"Organisation unit"}')},764:function(e){e.exports=JSON.parse('{"Data set":"","Period":"","Organisation unit":""}')},765:function(e){e.exports=JSON.parse('{"Data set":"Set de Datos\\\\:","Period":"Periodo","Organisation unit":"Unidad organizativa"}')},766:function(e){e.exports=JSON.parse('{"Data set":"Ensemble de donn\xe9es","Period":"P\xe9riode","Organisation unit":"Unit\xe9 d\'organisation"}')},767:function(e){e.exports=JSON.parse('{"Data set":"Data set","Period":"Periode","Organisation unit":"Unit organisasi"}')},768:function(e){e.exports=JSON.parse('{"Data set":"Data set","Period":"\u1780\u17c6\u17a1\u17bb\u1784\u1796\u17c1\u179b","Organisation unit":"\u1795\u17d2\u1793\u17c2\u1780\u200b\u1793\u17c3\u200b\u17a2\u1784\u17d2\u1782\u1780\u17b6\u179a"}')},769:function(e){e.exports=JSON.parse('{"Data set":"Data set\\\\:","Period":"\u0e8a\u0ec8\u0ea7\u0e87\u0ec0\u0ea7\u0ea5\u0eb2","Organisation unit":"\u200b\u0eab\u0ebb\u0ea7\u200b\u0edc\u0ec8\u0ea7\u0e8d\u200b\u0e81\u0eb2\u0e99\u200b\u0e88\u0eb1\u0e94\u200b\u0e95\u0eb1\u0ec9\u0e87"}')},770:function(e){e.exports=JSON.parse("{}")},771:function(e){e.exports=JSON.parse('{"Data set":"Dataset","Period":"\u1021\u1001\u103b\u102d\u1014\u103a\u1000\u102c\u101c","Organisation unit":"Organisation unit"}')},772:function(e){e.exports=JSON.parse('{"Data set":"Datasett","Period":"Periode","Organisation unit":"Organisasjonsenhet"}')},773:function(e){e.exports=JSON.parse("{}")},774:function(e){e.exports=JSON.parse('{"Data set":"\u062f \u0645\u0627\u0644\u0648\u0645\u0627\u062a\u0648 (\u0689\u0627\u067c\u0627) \u067c\u0648\u0644\u06ab\u0647","Period":"\u062f\u0648\u0631\u0647","Organisation unit":"\u0648\u0627\u062d\u062f \u0633\u0627\u0632\u0645\u0627\u0646"}')},775:function(e){e.exports=JSON.parse('{"Data set":"\u062f \u0645\u0627\u0644\u0648\u0645\u0627\u062a\u0648 (\u0689\u0627\u067c\u0627) \u067c\u0648\u0644\u06ab\u0647","Period":"\u0645\u0639\u06cc\u0627\u062f","Organisation unit":"\u062f \u0633\u0627\u0632\u0645\u0627\u0646 \u0648\u0627\u062d\u062f"}')},776:function(e){e.exports=JSON.parse('{"Data set":"Ficha","Period":"Per\xedodo","Organisation unit":"Unidade organizacional"}')},777:function(e){e.exports=JSON.parse('{"Data set":"Conjunto de dados","Period":"Per\xedodo","Organisation unit":"Unidade organizacional"}')},778:function(e){e.exports=JSON.parse('{"Data set":"\u041d\u0430\u0431\u043e\u0440 \u0434\u0430\u043d\u043d\u044b\u0445","Period":"\u041f\u0435\u0440\u0438\u043e\u0434","Organisation unit":"\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0430\u044f \u0435\u0434\u0438\u043d\u0438\u0446\u0430"}')},779:function(e){e.exports=JSON.parse("{}")},780:function(e){e.exports=JSON.parse('{"Data set":"datam\xe4ngd","Period":"Period","Organisation unit":"Organisationsenhet"}')},781:function(e){e.exports=JSON.parse('{"Data set":"Pakote dadus","Period":"Per\xedodu","Organisation unit":"Unidade organizasional"}')},782:function(e){e.exports=JSON.parse('{"Data set":"\u041c\u0430\u04b7\u043c\u04ef\u0438 \u0438\u0442\u0442\u0438\u043b\u043e\u043e\u0442","Period":"\u0414\u0430\u0432\u0440\u0430","Organisation unit":"\u0412\u043e\u04b3\u0438\u0434\u0438 \u0441\u043e\u0445\u0442\u043e\u0440\u04e3"}')},783:function(e){e.exports=JSON.parse('{"Data set":"\u041d\u0430\u0431\u0456\u0440 \u0434\u0430\u043d\u0438\u0445","Period":"\u041f\u0435\u0440\u0456\u043e\u0434","Organisation unit":"\u041e\u0440\u0433\u0430\u043d\u0456\u0437\u0430\u0446\u0456\u0439\u043d\u0438\u0439 \u043f\u0456\u0434\u0440\u043e\u0437\u0434\u0456\u043b"}')},784:function(e){e.exports=JSON.parse('{"Data set":"\u0688\u06cc\u0679\u0627 \u0633\u06cc\u0679","Period":"\u0645\u062f\u062a","Organisation unit":"\u062a\u0646\u0638\u06cc\u0645 \u06cc\u0648\u0646\u0679"}')},785:function(e){e.exports=JSON.parse('{"Data set":"\u041c\u0430\u044a\u043b\u0443\u043c\u043e\u0442\u043b\u0430\u0440 \u0442\u045e\u043f\u043b\u0430\u043c\u0438","Period":"\u0414\u0430\u0432\u0440","Organisation unit":"\u0422\u0430\u0448\u043a\u0438\u043b\u0438\u0439 \u0431\u045e\u043b\u0438\u043c"}')},786:function(e){e.exports=JSON.parse('{"Data Administration":"\u041c\u0430\u044a\u043b\u0443\u043c\u043e\u0442\u043b\u0430\u0440\u043d\u0438 \u0431\u043e\u0448\u049b\u0430\u0440\u0438\u0448"}')},787:function(e){e.exports=JSON.parse('{"Data set":"Ma\u02bclumotlar to\u02bcplami","Period":"davr","Organisation unit":"\u0422\u0430\u0448\u043a\u0438\u043b\u0438\u0439 \u0431\u0438\u0440\u043b\u0438\u043a"}')},788:function(e){e.exports=JSON.parse('{"Data set":"T\u1eadp d\u1eef li\u1ec7u","Period":"Th\u1eddi \u0111i\u1ec3m","Organisation unit":"\u0110\u01a1n v\u1ecb"}')},789:function(e){e.exports=JSON.parse('{"Data set":"\u6570\u636e\u96c6","Period":"\u671f\u95f4","Organisation unit":"\u673a\u6784"}')},790:function(e){e.exports=JSON.parse('{"Data set":"\u6570\u636e\u96c6","Period":"\u5468\u671f","Organisation unit":"\u673a\u6784"}')},791:function(e,t,a){e.exports={card:"DataIntegrityCard_card__KV-D9"}},792:function(e,t,a){e.exports={header:"DataIntegrity_header__1yaU5"}},921:function(e,t,a){e.exports={selectsContainer:"AddLockExceptionForm_selectsContainer__1FfO9",organisationUnitTreeContainer:"AddLockExceptionForm_organisationUnitTreeContainer__Qmc3a",left:"AddLockExceptionForm_left__3rBtP",right:"AddLockExceptionForm_right__3MHtt",ouLabel:"AddLockExceptionForm_ouLabel__2ajXK",organisationUnitTreeCard:"AddLockExceptionForm_organisationUnitTreeCard__308i8"}},923:function(e,t,a){},924:function(e,t,a){e.exports={pagination:"LockException_pagination__386cw",header:"LockException_header__3DHeL",lockExceptionsTable:"LockException_lockExceptionsTable__23sTj",headerContainer:"LockException_headerContainer__3IVXu",lockExceptionsTableHeader:"LockException_lockExceptionsTableHeader__2Prp0",lockExceptionDialog:"LockException_lockExceptionDialog__3Facz",actionButton:"LockException_actionButton__3hfk_",marginForAddButton:"LockException_marginForAddButton__3L837",backArrowIcon:"LockException_backArrowIcon__3o-BP",headerDivider:"LockException_headerDivider__98yTN",subHeader:"LockException_subHeader__3h-v4"}},925:function(e,t,a){e.exports={card:"MinMaxValueGeneration_card__3HhUq",header:"MinMaxValueGeneration_header__3aa-o",container:"MinMaxValueGeneration_container__1KXr1",label:"MinMaxValueGeneration_label__Zpg4R",left:"MinMaxValueGeneration_left___Z-17",right:"MinMaxValueGeneration_right__3Nvgn",tree:"MinMaxValueGeneration_tree__1LuaX",select:"MinMaxValueGeneration_select__3RB4a",options:"MinMaxValueGeneration_options__XH-P_",actionButton:"MinMaxValueGeneration_actionButton__3X2MH"}},926:function(e,t,a){e.exports={description:"ResourceTables_description__3ojib",tableName:"ResourceTables_tableName__3eEPw"}},927:function(e,t,a){e.exports={gridElement:"GridSection_gridElement__dFN30",gridTitleBar:"GridSection_gridTitleBar__iuWB9",gridTitleDescription:"GridSection_gridTitleDescription__OBU6O",gridIcon:"GridSection_gridIcon__1BcuZ",gridDescription:"GridSection_gridDescription__3BQ6R",gridActionText:"GridSection_gridActionText__2cTCc"}},933:function(e,t,a){e.exports={gridContainer:"Home_gridContainer__3mcNn"}},934:function(e,t,a){},935:function(e,t,a){e.exports={sidebarItem:"Sidebar_sidebarItem__3GXPY"}},994:function(e,t,a){"use strict";a.r(t);var n=a(937),i=a(7),s=a(570),o=a(0),r=a.n(o),l=a(362),c=a(647),d=a.n(c),p=a(276),h=a(5),u=a.n(h);const m={dataIntegrity:{title:"Data Integrity",label:"Data Integrity",description:"Run data integrity checks and unveil anomalies and problems in the meta data setup.",actionText:"Check Data Integrity",performing:"Performing data integrity checks...",unexpectedError:"An unexpected error happened during data integrity checks",actionButton:"RUN INTEGRITY CHECKS",dataElementsWithoutDataSet:{label:"Data elements without data set"},dataElementsWithoutGroups:{label:"Data elements without groups"},dataElementsViolatingExclusiveGroupSets:{label:"Data elements violating exclusive group sets"},dataElementsAssignedToDataSetsWithDifferentPeriodTypes:{label:"Data elements assigned to data sets with different period types"},dataSetsNotAssignedToOrganisationUnits:{label:"Data sets not assigned to organisation units"},indicatorsWithIdenticalFormulas:{label:"Indicators with identical formulas"},indicatorsWithoutGroups:{label:"Indicators without groups"},invalidIndicatorNumerators:{label:"Invalid indicator numerators"},invalidIndicatorDenominators:{label:"Invalid indicator denominators"},indicatorsViolatingExclusiveGroupSets:{label:"Indicators violating exclusive group sets"},organisationUnitsWithCyclicReferences:{label:"Organisation units with cyclic references"},orphanedOrganisationUnits:{label:"Orphaned organisation units"},organisationUnitsWithoutGroups:{label:"Organisation units without groups"},organisationUnitsViolatingExclusiveGroupSets:{label:"Organisation units violating exclusive group sets"},organisationUnitGroupsWithoutGroupSets:{label:"Organisation unit groups without group sets"},validationRulesWithoutGroups:{label:"Validation rules without groups"},invalidValidationRuleLeftSideExpressions:{label:"Invalid validation rule left side expressions"},invalidValidationRuleRightSideExpressions:{label:"Invalid validation rule right side expressions"},invalidProgramIndicatorExpressions:{label:"Invalid program indicator expressions"},invalidProgramIndicatorFilters:{label:"Invalid program indicator filters"},dataElementsInDataSetNotInForm:{label:"There are data elements in the form, but not in the form or sections"},invalidCategoryCombos:{label:"Invalid category combinations"},duplicatePeriods:{label:"Duplicate periods"},programRulesWithNoCondition:{label:"Program rules with no condition"},programRulesWithNoAction:{label:"Program rules with no action"},programRulesWithNoPriority:{label:"Program rules with no priority"},programRuleVariablesWithNoDataElement:{label:"Program rule variables with no data element"},programRuleVariablesWithNoAttribute:{label:"Program rule variables with no attribute"},programRuleActionsWithNoDataObject:{label:"Program rule actions with no data object"},programRuleActionsWithNoNotification:{label:"Program rule actions with no notification"},programRuleActionsWithNoSectionId:{label:"Program rule actions with no section id"},programRuleActionsWithNoStageId:{label:"Program rule actions with no stage id"},programIndicatorsWithNoExpression:{label:"Program indicators wit no expression"}},maintenance:{title:"Maintenance",label:"Maintenance",description:"Perform maintenance tasks and generate resource database tables for the organisation unit hierarchy and group set structure.",actionText:"Perform Maintenance",actionButton:"PERFORM MAINTENANCE",performing:"Performing Maintenance...",actionPerformed:"Maintenance done",unexpectedError:"An unexpected error happened during maintenance",analyticsTableClear:"Clear analytics tables",analyticsTableAnalyze:"Analyze analytics tables",zeroDataValueRemoval:"Remove zero data values",softDeletedDataValueRemoval:"Permanently remove soft deleted data values",softDeletedEventRemoval:"Permanently remove soft deleted events",softDeletedEnrollmentRemoval:"Permanently remove soft deleted enrollments",softDeletedTrackedEntityInstanceRemoval:"Permanently remove soft deleted tracked entity instances",periodPruning:"Prune periods",expiredInvitationsClear:"Remove expired invitations",sqlViewsDrop:"Drop SQL views",sqlViewsCreate:"Create SQL views",categoryOptionComboUpdate:"Update category option combinations",ouPathsUpdate:"Update organisation unit paths",cacheClear:"Clear application cache",appReload:"Reload apps"},resourceTables:{title:"Resource Tables",label:"Resource Tables",description:"Generate resource database tables for the organisation unit hierarchy and group set structure among others.",actionText:"Generate Resource Tables",actionButton:"GENERATE TABLES",actionPerformed:"Resource Tables generated",unexpectedError:"An unexpected error happened during operation",organisationUnitStructure:"Organisation unit structure",organistionUnitCategoryOptionCombo:"Organisation unit category option combo",categoryOptionGroupSetStructure:"Category option group set structure",dataElementGroupSetStructure:"Data element group set structure",indicatorGroupSetStructure:"Indicator group set structure",organisationUnitGroupSetStructure:"Organisation unit group set structure",categoryStructure:"Category structure",dataElementCategoryOptionComboName:"Data element category option combo name",dataElementStructure:"Data element structure",periodStructure:"Period structure",dataPeriodStructure:"Date period structure",dataElementCategoryOptionCombinations:"Data element category option combinations"},dataStatistics:{title:"Data Statistics",label:"Data Statistics",description:"Browse the number of objects in the database, like data elements, indicators, data sets and data values.",actionText:"Overview Data Statistics",loadingMessage:"Loading Data Statistics...",errorMessage:"It was not possible to load Data Statistics",noDataMessage:"No data to show.",objectType:"Object type",lastHour:"Last hour",today:"Today",last:"Last",days:"days",usersLoggedIn:"Users logged in",userAccountInvitations:"User account invitations",pedingInvitations:"Pending invitations",expiredInvitations:"Expired invitations",dataValues:"Data values",events:"Events",objects:{indicator:"Indicators",period:"Periods",programStageInstance:"Events",organisationUnit:"Organisation units",validationRule:"Validation rules",dataValue:"Data values",program:"Programs",dataElement:"Data elements",organisationUnitGroup:"Organisation unit groups",reportTable:"Pivot tables",indicatorType:"Indicator types",dataSet:"Data sets",userGroup:"User groups",user:"Users",map:"Maps",indicatorGroup:"Indicator groups",chart:"Charts",dataElementGroup:"Data element groups",dashboard:"Dashboards"}},lockException:{title:"Lock Exception Management",batchDeletionHeader:"Lock Exception",batchDeletionSubHeader:"Batch Deletion",addLockExceptionFormTitle:"Add new lock exception",label:"Lock Exception",description:"Add or remove exceptions to the the standard rules for locking of data entry forms.",actionText:"Lock Exception Management",actionButton:"BATCH DELETION",cancelButton:"CANCEL",addButton:"ADD",noDataMessage:"No data to show.",loadingMessage:"Loading Lock Exceptions...",addingMessage:"Adding Lock Exception...",removedMessage:"Lock Exception removed",addedMessage:"Lock Exception Added",confirmDeleteMessage:"Are you sure?",confirmButton:"CONFIRM",selectADataSet:"Select a Data Set",updatingTree:"Updating Organisation Units Tree...",organisationUnitsWithin:"For organisation units within",period:"Period",dataSet:"Data Set",organisationUnit:"Organisation Unit",organisationUnitGroup:"Organisation Unit Group",organisationUnitLevel:"Organisation Unit Level",select:"Select",deselect:"Deselect",selectAll:"Select All Org Units",deselectAll:"Deselect All Org Units",name:"Name",show:"Show Details",remove:"Remove",actions:"Actions",ofPage:"of",week:"week",month:"month",year:"year",biMonth:"bi monthly",day:"day",jan:"jan",feb:"feb",mar:"mar",apr:"apr",may:"may",jun:"jun",jul:"jul",aug:"aug",sep:"sep",oct:"oct",nov:"nov",dec:"dec",janFeb:"jan-feb",marApr:"mar-apr",mayJun:"may-jun",julAug:"jul-aug",sepOct:"sep-oct",novDec:"nov-dec",quarter:"quarter",Q1:"Q1",Q2:"Q2",Q3:"Q3",Q4:"Q4",sixMonth:"six monthly",janJun:"jan-jun",julDec:"jul-dec",aprSep:"apr-sep",octMar:"oct-mar",selectOrganisationUnits:"For all organisation units:"},minMaxValueGeneration:{title:"Min-Max Value Generation",label:"Min-Max Value Generation",description:"Generate min-max values which can be used for data validation during data entry and validation processes.",actionText:"Generate Min-Max Value",notPossibleToLoadMessage:"It was not possible to load data",performingMessage:"Doing Min Max generation...",removingMessage:"Removing Min Max generation...",minMaxGenerationDone:"Min Max generation done",minMaxRemovalDone:"Min Max removal done",dataSet:"Data Set",loadingDataSetsMessage:"Loading data sets",organisationUnitSelect:"Organisation Unit Selection",updatingTree:"Updating Organisation Units Tree...",actionButton:"Generate",removeButton:"Remove"},analytics:{title:"Analytics tables management",label:"Analytics Tables",description:"The data mart is a set of tables in the DHIS database which is used by all reporting and analysis tools to retrieve data from. ",actionText:"Analytics tables update",actionButton:"START EXPORT",skipAggregate:"Skip generation of aggregate data and completeness data",skipResourceTables:"Skip generation of resource tables",skipEvents:"Skip generation of event data",skipEnrollment:"Skip generation of enrollment data",analyticsTablesUpdateHeader:"Analytics Tables Update",lastYearsLabel:"Number of last years of data to include",allLastYears:"[ All ]",unexpectedError:"An unexpected error happened during maintenance"},messages:{unexpectedError:"An unexpected error happened during operation"},d2UiComponents:{settings:"Settings",app_search_placeholder:"Search apps",profile:"Profile",account:"Account",help:"Help",log_out:"Log out",about_dhis2:"About DHIS 2",manage_my_apps:"Manage my apps",no_results_found:"No results found",interpretations:"Interpretations",messages:"Messages"}};var g=a(300),b=a(314);const y="#8ac542",k="#000000",S="#ff0000",E="check",x={iconStyle:{fontSize:14},rowStyle:{fontSize:14,height:48},evenRowStyle:{backgroundColor:"#fafafa"},timeColumnStyle:{width:"20%"},messageColumnStyle:{width:"80%"},successStyle:{color:y,iconColor:y,fontWeight:"bold"},errorStyle:{color:S,iconColor:S,fontWeight:"bold"},infoStyle:{color:k,iconColor:y}},v={};v.SUCCESS={color:y,icon:E,row:Object.assign({},x.rowStyle,x.successStyle)},v.ERROR={color:S,icon:"error",row:Object.assign({},x.rowStyle,x.errorStyle)},v.INFO={color:k,icon:E,iconColor:y,row:Object.assign({},x.rowStyle,x.infoStyle)};const f=v;a(755);var C=({notifications:e,animateIncomplete:t})=>{const a=(e,a)=>{return r.a.createElement(b.l,{key:a,displayBorder:!1,style:Object.assign({},f[e.level].row,(a+1)%2===0?x.evenRowStyle:{})},r.a.createElement(b.m,{style:x.timeColumnStyle},(n=e.time)?"".concat(n.slice(0,10)," ").concat(n.slice(11,19)):""),r.a.createElement(b.m,{style:x.messageColumnStyle},e.message," ",(e=>{const a=f[e.level];return a&&a.icon&&e.completed?r.a.createElement(b.d,{className:"material-icons",style:x.iconStyle,color:a.iconColor},a.icon):t&&!e.completed?r.a.createElement("span",{className:"notification-icon-busy"},"..."):null})(e)));var n};return e&&e.length>0?r.a.createElement(b.j,{selectable:!1},r.a.createElement(b.k,{displayRowCheckbox:!1},e.map(a))):null},P=a(1),T=a.n(P);const I=({major:e,minor:t,snapshot:a})=>a?"master":"".concat(e,".").concat(t);var D=a(6),N=a(756),O=a(757),A=a(758),w=a(759),R=a(760),_=a(761),M=a(762),U=a(763),L=a(764),W=a(765),j=a(766),G=a(767),B=a(768),F=a(769),V=a(770),q=a(771),J=a(772),z=a(773),Y=a(774),Q=a(775),H=a(776),K=a(777),X=a(778),Z=a(779),$=a(780),ee=a(781),te=a(782),ae=a(783),ne=a(784),ie=a(785),se=a(786),oe=a(787),re=a(788),le=a(789),ce=a(790);const de="default";D.a.addResources("ar",de,N),D.a.addResources("ar_EG",de,O),D.a.addResources("ar_IQ",de,A),D.a.addResources("ar_SD",de,w),D.a.addResources("bn",de,R),D.a.addResources("ckb",de,_),D.a.addResources("cs",de,M),D.a.addResources("da",de,U),D.a.addResources("en",de,L),D.a.addResources("es",de,W),D.a.addResources("fr",de,j),D.a.addResources("id",de,G),D.a.addResources("km",de,B),D.a.addResources("lo",de,F),D.a.addResources("mn",de,V),D.a.addResources("my",de,q),D.a.addResources("nb",de,J),D.a.addResources("ne",de,z),D.a.addResources("prs",de,Y),D.a.addResources("ps",de,Q),D.a.addResources("pt",de,H),D.a.addResources("pt_BR",de,K),D.a.addResources("ru",de,X),D.a.addResources("rw",de,Z),D.a.addResources("sv",de,$),D.a.addResources("tet",de,ee),D.a.addResources("tg",de,te),D.a.addResources("uk",de,ae),D.a.addResources("ur",de,ne),D.a.addResources("uz",de,ie),D.a.addResources("uz_Cyrl",de,se),D.a.addResources("uz_Latn",de,oe),D.a.addResources("vi",de,re),D.a.addResources("zh",de,le),D.a.addResources("zh_CN",de,ce);var pe=D.a;function he(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ue extends o.PureComponent{render(){const{d2:e}=this.context,{lng:t,sectionDocsKey:a}=this.props;return r.a.createElement(b.f,{className:"helper-icon",iconStyle:{color:"#276696"},href:"".concat("https://docs.dhis2.org","/").concat(I(e.system.version),"/").concat(t,"/user/html/").concat(a,".html"),target:"_blank",rel:"noopener noreferrer",tooltip:pe.t("Open user guide"),tooltipPosition:"bottom-center",iconClassName:"material-icons"},"help")}}he(ue,"propTypes",{sectionDocsKey:T.a.string.isRequired,lng:T.a.string}),he(ue,"defaultProps",{lng:"en"}),he(ue,"contextTypes",{d2:T.a.object});var me=ue;const ge="system/tasks/ANALYTICS_TABLE",be=[{key:-1,value:-1,displayName:m.analytics.allLastYears}];for(let Fa=1;Fa<=10;Fa++)be.push({key:Fa,value:Fa,displayName:Fa});const ye=be,ke=[{key:"skipAggregate",label:m.analytics.skipAggregate},{key:"skipResourceTables",label:m.analytics.skipResourceTables},{key:"skipEvents",label:m.analytics.skipEvents},{key:"skipEnrollment",label:m.analytics.skipEnrollment}];function Se(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ee extends o.Component{UNSAFE_componentWillMount(){this.pageMounted=!0,this.context.currentSection!==this.props.sectionKey&&this.context.updateAppState({currentSection:this.props.sectionKey})}componentWillUnmount(){this.pageMounted=!1}isPageMounted(){return this.pageMounted}}Se(Ee,"propTypes",{sectionKey:T.a.string.isRequired}),Se(Ee,"contextTypes",{d2:T.a.object,loading:T.a.bool,currentSection:T.a.string,updateAppState:T.a.func});var xe=Ee,ve=a(417),fe=a.n(ve);function Ce(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Pe=class extends xe{constructor(){super(),Ce(this,"startTaskProgressPolling",(()=>{this.intervalId=setInterval((()=>{this.requestTaskProgress()}),5e3)})),Ce(this,"initAnalyticsTablesGeneration",(()=>{const e=this.context.d2.Api.getApi(),t=this.buildFormData();this.setLoadingPageState(),e.post("resourceTables/analytics",t).then((({response:e})=>{this.isPageMounted()&&e&&this.setState({taskId:e.id},this.startTaskProgressPolling)})).catch((e=>{this.isPageMounted()&&this.setLoadedPageWithErrorState(e)}))})),Ce(this,"requestTaskProgress",(()=>{this.context.d2.Api.getApi().get("".concat(ge,"/").concat(this.state.taskId)).then((e=>{this.isTaskCompleted(e)&&(this.stopTaskProgressPolling(),this.unsetLoadingPageState()),this.setState({notifications:this.getUpdatedNotifications(e)})})).catch((e=>{this.isPageMounted()&&this.setLoadedPageWithErrorState(e)}))})),Ce(this,"onChangeLastYears",((e,t,a)=>{this.setState({lastYears:a})})),Ce(this,"toggleCheckbox",((e,t)=>()=>{const a=Object.assign({},e),n=a[t].checked;a[t].checked=!n,this.setState({checkboxes:a})})),Ce(this,"renderCheckbox",(e=>r.a.createElement(b.e,{key:e.key,className:u()("col-xs-12 col-md-6",fe.a.formControl)},r.a.createElement(b.c,{label:pe.t(e.label),checked:this.state.checkboxes[e.key].checked,onCheck:this.toggleCheckbox(this.state.checkboxes,e.key),labelStyle:{color:"#000000"},iconStyle:{fill:"#000000"},disabled:this.areActionsDisabled()}))));const e={};for(let t=0;t<ke.length;t++){e[ke[t].key]={checked:!1}}this.state={checkboxes:e,lastYears:-1,taskId:null,notifications:[]},this.intervalId=null}componentDidMount(){this.requestTaskSummary()}componentWillUnmount(){super.componentWillUnmount(),this.stopTaskProgressPolling()}stopTaskProgressPolling(){clearInterval(this.intervalId),this.intervalId=null}setLoadingPageState(){this.setState({notifications:[]}),this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:g.c},pageState:{loading:!0}})}unsetLoadingPageState(){this.context.updateAppState({showSnackbar:!1,snackbarConf:{type:g.c},pageState:{loading:!1}})}setLoadedPageWithErrorState(e){console.error(e);const t=e&&e.message?e.message:pe.t(m.analytics.unexpectedError);this.stopTaskProgressPolling(),this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:g.b,message:t},pageState:{loading:!1}})}requestTaskSummary(){this.context.d2.Api.getApi().get(ge).then((e=>{if(!this.isPageMounted())return;const t=this.getActiveTaskIdFromSummary(e);t&&(this.setLoadingPageState(),this.setState({taskId:t,notifications:this.getUpdatedNotifications(e[t])},this.startTaskProgressPolling))})).catch((e=>{this.isPageMounted()&&this.setLoadedPageWithErrorState(e)}))}getUpdatedNotifications(e=[]){if(e.length<=this.state.notifications.length)return this.state.notifications;const t=e.length-1;return e.reverse().map(((e,a)=>({...e,completed:e.completed||a<t})))}getActiveTaskIdFromSummary(e){const{taskId:t}=Object.entries(e).reduce(((e,[t,a])=>{const n=a[a.length-1],i=new Date(n.time);return!this.isTaskCompleted(a)&&i>e.time?{taskId:t,time:i}:e}),{taskId:null,time:new Date(0)});return t}isTaskCompleted(e){return e[0].completed}areActionsDisabled(){return this.props.loading}buildFormData(){let e=null;const t=Object.keys(this.state.checkboxes);for(let a=0;a<t.length;a++){const n=t[a],i=this.state.checkboxes[n].checked;e=e||new FormData,e.append(n,i)}return-1!==this.state.lastYears&&e.append("lastYears",this.state.lastYears),e}render(){const e=ke.map(this.renderCheckbox);return r.a.createElement("div",null,r.a.createElement("h1",null,pe.t(m.analytics.title),r.a.createElement(me,{sectionDocsKey:xa(this.props.sectionKey)})),r.a.createElement(b.a,{className:fe.a.cardContainer},r.a.createElement(b.b,null,r.a.createElement("h4",{className:fe.a.uppercase},m.analytics.analyticsTablesUpdateHeader),r.a.createElement("div",{className:u()(fe.a.gridContainer,"row")},e,r.a.createElement(b.i,{disabled:this.areActionsDisabled(),className:"col-xs-12 col-md-6",floatingLabelText:pe.t(m.analytics.lastYearsLabel),onChange:this.onChangeLastYears,value:this.state.lastYears,fullWidth:!0},ye.map((e=>r.a.createElement(b.g,{key:e.key,value:e.value,primaryText:pe.t(e.displayName)}))))),r.a.createElement(b.h,{id:"startExportBtnId",primary:!0,label:pe.t(m.analytics.actionButton),onClick:this.initAnalyticsTablesGeneration,disabled:this.areActionsDisabled()}))),(this.state.notifications||[]).length>0&&r.a.createElement(b.a,{className:fe.a.cardContainer},r.a.createElement(b.b,null,r.a.createElement(C,{notifications:this.state.notifications,animateIncomplete:!0}))))}},Te=a(304),Ie=a(791),De=a.n(Ie);function Ne(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Oe={errorColor:"#ff5722",noErrorColor:"#1c9d17",titleStyle:{fontSize:14,fontWeight:"normal"},iconStyle:{color:"#1c9d17",cursor:"auto"},noPaddingTop:{paddingTop:0}};class Ae extends o.PureComponent{render(){let e=!0,t=Oe.errorColor,a="keyboard_arrow_down",n="keyboard_arrow_up",i=null;Array.isArray(this.props.content)?this.props.content.length?i=r.a.createElement(Te.CardText,{style:Oe.noPaddingTop,expandable:e},r.a.createElement("div",{id:"elementDescription"},this.props.content.map((e=>r.a.createElement("p",{key:e},Array.isArray(e)?e.join(", "):e))))):(e=!1,t=Oe.noErrorColor,a="done",n="done"):i=r.a.createElement(Te.CardText,{style:Oe.noPaddingTop,expandable:e},r.a.createElement("div",{id:"elementDescription"},Object.keys(this.props.content).map((e=>r.a.createElement("span",{key:e},r.a.createElement("h4",null,e),r.a.createElement("p",null,Array.isArray(this.props.content[e])?this.props.content[e].join(", "):this.props.content[e]))))));const s=r.a.createElement(b.d,{className:"material-icons"},a),o=r.a.createElement(b.d,{className:"material-icons"},n);return r.a.createElement(Te.Card,{id:this.props.cardId,className:De.a.card},r.a.createElement(Te.CardHeader,{title:pe.t(this.props.title),titleColor:t,titleStyle:Oe.titleStyle,actAsExpander:e,showExpandableButton:!0,closeIcon:s,openIcon:o,iconStyle:e?{}:Oe.iconStyle}),i)}}Ne(Ae,"propTypes",{cardId:T.a.string.isRequired,title:T.a.string.isRequired,content:T.a.oneOfType([T.a.array,T.a.object])}),Ne(Ae,"defaultProps",{content:[]});var we=Ae;const Re=m.dataIntegrity.title,_e=[{key:"dataElementsWithoutDataSet",label:m.dataIntegrity.dataElementsWithoutDataSet.label,text:m.dataIntegrity.dataElementsWithoutDataSet.text},{key:"dataElementsWithoutGroups",label:m.dataIntegrity.dataElementsWithoutGroups.label,text:m.dataIntegrity.dataElementsWithoutGroups.text},{key:"dataElementsViolatingExclusiveGroupSets",label:m.dataIntegrity.dataElementsViolatingExclusiveGroupSets.label,text:m.dataIntegrity.dataElementsViolatingExclusiveGroupSets.label},{key:"dataElementsAssignedToDataSetsWithDifferentPeriodTypes",label:m.dataIntegrity.dataElementsAssignedToDataSetsWithDifferentPeriodTypes.label,text:m.dataIntegrity.dataElementsAssignedToDataSetsWithDifferentPeriodTypes.text},{key:"dataSetsNotAssignedToOrganisationUnits",label:m.dataIntegrity.dataSetsNotAssignedToOrganisationUnits.label,text:m.dataIntegrity.dataSetsNotAssignedToOrganisationUnits.text},{key:"indicatorsWithIdenticalFormulas",label:m.dataIntegrity.indicatorsWithIdenticalFormulas.label,text:m.dataIntegrity.indicatorsWithIdenticalFormulas.text},{key:"indicatorsWithoutGroups",label:m.dataIntegrity.indicatorsWithoutGroups.label,text:m.dataIntegrity.indicatorsWithoutGroups.text},{key:"invalidIndicatorNumerators",label:m.dataIntegrity.invalidIndicatorNumerators.label,text:m.dataIntegrity.invalidIndicatorNumerators.text},{key:"invalidIndicatorDenominators",label:m.dataIntegrity.invalidIndicatorDenominators.label,text:m.dataIntegrity.invalidIndicatorDenominators.text},{key:"indicatorsViolatingExclusiveGroupSets",label:m.dataIntegrity.indicatorsViolatingExclusiveGroupSets.label,text:m.dataIntegrity.indicatorsViolatingExclusiveGroupSets.text},{key:"organisationUnitsWithCyclicReferences",label:m.dataIntegrity.organisationUnitsWithCyclicReferences.label,text:m.dataIntegrity.organisationUnitsWithCyclicReferences.text},{key:"orphanedOrganisationUnits",label:m.dataIntegrity.orphanedOrganisationUnits.label,text:m.dataIntegrity.orphanedOrganisationUnits.text},{key:"organisationUnitsWithoutGroups",label:m.dataIntegrity.organisationUnitsWithoutGroups.label,text:m.dataIntegrity.organisationUnitsWithoutGroups.text},{key:"organisationUnitsViolatingExclusiveGroupSets",label:m.dataIntegrity.organisationUnitsViolatingExclusiveGroupSets.label,text:m.dataIntegrity.organisationUnitsViolatingExclusiveGroupSets.text},{key:"organisationUnitGroupsWithoutGroupSets",label:m.dataIntegrity.organisationUnitGroupsWithoutGroupSets.label,text:m.dataIntegrity.organisationUnitGroupsWithoutGroupSets.text},{key:"validationRulesWithoutGroups",label:m.dataIntegrity.validationRulesWithoutGroups.label,text:m.dataIntegrity.validationRulesWithoutGroups.text},{key:"invalidValidationRuleLeftSideExpressions",label:m.dataIntegrity.invalidValidationRuleLeftSideExpressions.label,text:m.dataIntegrity.invalidValidationRuleLeftSideExpressions.text},{key:"invalidValidationRuleRightSideExpressions",label:m.dataIntegrity.invalidValidationRuleRightSideExpressions.label,text:m.dataIntegrity.invalidValidationRuleRightSideExpressions.text},{key:"invalidProgramIndicatorExpressions",label:m.dataIntegrity.invalidProgramIndicatorExpressions.label},{key:"invalidProgramIndicatorFilters",label:m.dataIntegrity.invalidProgramIndicatorFilters.label},{key:"dataElementsInDataSetNotInForm",label:m.dataIntegrity.dataElementsInDataSetNotInForm.label},{key:"invalidCategoryCombos",label:m.dataIntegrity.invalidCategoryCombos.label},{key:"duplicatePeriods",label:m.dataIntegrity.duplicatePeriods.label},{key:"programRulesWithNoCondition",label:m.dataIntegrity.programRulesWithNoCondition.label},{key:"programRulesWithNoAction",label:m.dataIntegrity.programRulesWithNoAction.label},{key:"programRulesWithNoPriority",label:m.dataIntegrity.programRulesWithNoPriority.label},{key:"programRuleVariablesWithNoDataElement",label:m.dataIntegrity.programRuleVariablesWithNoDataElement.label},{key:"programRuleVariablesWithNoAttribute",label:m.dataIntegrity.programRuleVariablesWithNoAttribute.label},{key:"programRuleActionsWithNoDataObject",label:m.dataIntegrity.programRuleActionsWithNoDataObject.label},{key:"programRuleActionsWithNoNotification",label:m.dataIntegrity.programRuleActionsWithNoNotification.label},{key:"programRuleActionsWithNoSectionId",label:m.dataIntegrity.programRuleActionsWithNoSectionId.label},{key:"programRuleActionsWithNoStageId",label:m.dataIntegrity.programRuleActionsWithNoStageId.label},{key:"programIndicatorsWithNoExpression",label:m.dataIntegrity.programIndicatorsWithNoExpression.label}];var Me=a(792),Ue=a.n(Me);var Le=class extends xe{constructor(...e){var t,a,n;super(...e),n=()=>{const e=this.context.d2.Api.getApi();this.setLoadingPageState(),e.post("dataIntegrity").then((e=>{if(this.isPageMounted()&&e){const t=e.response.id;this.intervalId=setInterval((()=>{this.requestTaskSummary(t)}),5e3)}})).catch((e=>{this.isPageMounted()&&this.setLoadedPageWithErrorState(e)}))},(a="initDataIntegrityCheck")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n}componentWillUnmount(){super.componentWillUnmount(),this.cancelPullingRequests()}cancelPullingRequests(){this.intervalId&&clearInterval(this.intervalId)}setLoadingPageState(){this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:g.c,message:pe.t(m.dataIntegrity.performing)},currentSection:this.props.sectionKey,pageState:{loaded:!1,loading:!0}})}setLoadedPageWithErrorState(e){const t=e&&e.message?e.message:pe.t(m.dataIntegrity.unexpectedError);this.cancelPullingRequests(),this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:g.b,message:t},currentSection:this.props.sectionKey,pageState:{loaded:!0,loading:!1}})}requestTaskSummary(e){const t=this.context.d2.Api.getApi(),a="".concat("system/taskSummaries/DATA_INTEGRITY","/").concat(e);t.get(a).then((e=>{this.isPageMounted()&&e&&(this.cancelPullingRequests(),this.context.updateAppState({showSnackbar:!1,currentSection:this.props.sectionKey,pageState:{loaded:!0,cards:e,loading:!1}}))})).catch((e=>{this.isPageMounted()&&this.setLoadedPageWithErrorState(e)}))}render(){const e=r.a.createElement(b.h,{id:"runDataIntegrityChecksBtnId",label:pe.t(m.dataIntegrity.actionButton),onClick:this.initDataIntegrityCheck,primary:!0,disabled:this.props.loading});let t=[];if(this.props.cards){const e=Object.keys(this.props.cards);if(t=e.map((e=>{const t=_e.find((t=>t.key===e));return t?r.a.createElement(we,{cardId:"errorElement-".concat(e),key:e,title:t.label,content:this.props.cards[e]}):null})),this.props.loaded){const a=_e.filter((t=>e.indexOf(t.key)<0)).map((e=>r.a.createElement(we,{cardId:"noErrorElement-".concat(e.key),key:e.key,title:e.label,content:[]})));t.push(a)}}return r.a.createElement("div",null,r.a.createElement("h1",{className:Ue.a.header},pe.t(Re),r.a.createElement(me,{sectionDocsKey:xa(this.props.sectionKey)})),t&&t.length>0?t:e)}},We=a(512),je=a.n(We),Ge=a(409);var Be,Fe,Ve,qe=e=>r.a.createElement("span",null,new Intl.NumberFormat(D.a.language).format(e.value));class Je extends o.PureComponent{render(){const e=this.props.elements.map((e=>r.a.createElement(Ge.TableRow,{key:e.label,className:"data-statistics-table-row"},r.a.createElement(Ge.TableRowColumn,null,e.label),r.a.createElement(Ge.TableRowColumn,null,r.a.createElement(qe,{value:e.count})))));return r.a.createElement(Ge.Table,{selectable:!1,className:je.a.statisticsTable},r.a.createElement(Ge.TableHeader,{className:"data-statistics-table-header",displaySelectAll:!1,adjustForCheckbox:!1,enableSelectAll:!1},r.a.createElement(Ge.TableRow,null,r.a.createElement(Ge.TableHeaderColumn,null,this.props.label))),r.a.createElement(Ge.TableBody,{displayRowCheckbox:!1,stripedRows:!1},e))}}Be=Je,Fe="propTypes",Ve={elements:T.a.array.isRequired,label:T.a.string.isRequired},Fe in Be?Object.defineProperty(Be,Fe,{value:Ve,enumerable:!0,configurable:!0,writable:!0}):Be[Fe]=Ve;var ze=Je;function Ye(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Qe="expired",He=({label:e,elements:t})=>r.a.createElement(Te.Card,{className:u()(je.a.card,"data-statistics-table")},r.a.createElement(ze,{label:e,elements:t}));class Ke extends xe{constructor(...e){super(...e),Ye(this,"hasTables",(()=>this.props.tables&&this.props.tables.constructor===Object&&Object.keys(this.props.tables).length>0))}componentDidMount(){this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:g.c,message:pe.t(m.dataStatistics.loadingMessage)},pageState:{loaded:!1,tables:{},loading:!0}});this.context.d2.Api.getApi().get("dataSummary").then((e=>{if(this.isPageMounted()){const t={};t.objectCounts=Ke.objectCountsTableObjectToShowFromServerResponse(e.objectCounts),t.activeUsers=Ke.activeUsersTableObjectToShowFromServerResponse(e.activeUsers),t.userInvitations=Ke.userInvitationsTableObjectToShowFromServerResponse(e.userInvitations),t.dataValueCount=Ke.dataValueCountsTableObjectToShowFromServerResponse(e.dataValueCount),t.eventCount=Ke.eventCountsTableObjectToShowFromServerResponse(e.eventCount),this.context.updateAppState({showSnackbar:!1,pageState:{loaded:!0,tables:t,loading:!1}})}})).catch((()=>{this.isPageMounted()&&this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:g.b,message:pe.t(m.dataStatistics.errorMessage)},pageState:{loaded:!0,tables:{},loading:!1}})}))}render(){const e=r.a.createElement(Te.Card,{style:{display:this.props.loading?"none":"block"}},r.a.createElement(Te.CardText,null,pe.t(m.dataStatistics.noDataMessage)));return r.a.createElement("div",null,r.a.createElement("h1",{className:je.a.header},pe.t(m.dataStatistics.title),r.a.createElement(me,{sectionDocsKey:xa(this.props.sectionKey)})),this.hasTables()?r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},this.props.tables.objectCounts&&r.a.createElement(He,{label:this.props.tables.objectCounts.label,elements:this.props.tables.objectCounts.elements}),this.props.tables.activeUsers&&r.a.createElement(He,{label:this.props.tables.activeUsers.label,elements:this.props.tables.activeUsers.elements})),r.a.createElement("div",{className:"col-md-6"},this.props.tables.userInvitations&&r.a.createElement(He,{label:this.props.tables.userInvitations.label,elements:this.props.tables.userInvitations.elements}),this.props.tables.dataValueCount&&r.a.createElement(He,{label:this.props.tables.dataValueCount.label,elements:this.props.tables.dataValueCount.elements}),this.props.tables.eventCount&&r.a.createElement(He,{label:this.props.tables.eventCount.label,elements:this.props.tables.eventCount.elements}))):e)}}Ye(Ke,"objectCountsTableObjectToShowFromServerResponse",(e=>{if(e){const t=Object.keys(e),a={label:pe.t(m.dataStatistics.objectType),elements:[]};for(let n=0;n<t.length;n++){const i=t[n];a.elements.push({label:pe.t(m.dataStatistics.objects[i]),count:e[i]})}return a}return{}})),Ye(Ke,"translatedTimeLabelFromIntProperty",(e=>{let t=pe.t(m.dataStatistics.lastHour);if(1===e)t=pe.t(m.dataStatistics.today);else if(e>0){const a=pe.t(m.dataStatistics.last),n=pe.t(m.dataStatistics.days);t="".concat(a," ").concat(e," ").concat(n)}return t})),Ye(Ke,"activeUsersTableObjectToShowFromServerResponse",(e=>{if(e){const t=Object.keys(e),a={label:pe.t(m.dataStatistics.usersLoggedIn),elements:[]};for(let n=0;n<t.length;n++){const i=t[n];a.elements.push({label:Ke.translatedTimeLabelFromIntProperty(parseInt(i,10)),count:e[i]})}return a}return{}})),Ye(Ke,"userInvitationsTableObjectToShowFromServerResponse",(e=>{if(e){const t={label:pe.t(m.dataStatistics.userAccountInvitations),elements:[]};return Object.hasOwnProperty.call(e,"all")&&t.elements.push({label:pe.t(m.dataStatistics.pedingInvitations),count:e.all}),Object.hasOwnProperty.call(e,Qe)&&t.elements.push({label:pe.t(m.dataStatistics.expiredInvitations),count:e.expired}),t}return{}})),Ye(Ke,"dataValueCountsTableObjectToShowFromServerResponse",(e=>{if(e){const t=Object.keys(e),a={label:pe.t(m.dataStatistics.dataValues),elements:[]};for(let n=0;n<t.length;n++){const i=t[n];a.elements.push({label:Ke.translatedTimeLabelFromIntProperty(parseInt(i,10)),count:e[i]})}return a}return{}})),Ye(Ke,"eventCountsTableObjectToShowFromServerResponse",(e=>{if(e){const t=Object.keys(e),a={label:pe.t(m.dataStatistics.events),elements:[]};for(let n=0;n<t.length;n++){const i=t[n];a.elements.push({label:Ke.translatedTimeLabelFromIntProperty(parseInt(i,10)),count:e[i]})}return a}return{}}));var Xe=Ke,Ze=a(328),$e=a.n(Ze),et=a(318),tt=a.n(et),at=a(400),nt=a.n(at),it=a(315),st=a.n(it),ot=a(296),rt=a.n(ot),lt=a(349),ct=a.n(lt),dt=a(793),pt=a.n(dt),ht=a(794),ut=a(795),mt=a(796),gt=a(993),bt=a(487),yt=a.n(bt),kt=a(347),St=a.n(kt),Et=a(921),xt=a.n(Et),vt=a(402),ft=a.n(vt);class Ct extends r.a.Component{constructor(e){super(e),this.state={collapsed:!e.initiallyExpanded,hasBeenExpanded:e.initiallyExpanded},this.handleClick=this.handleClick.bind(this)}toggleCollapsed(){this.setState((e=>({collapsed:!e.collapsed,hasBeenExpanded:!0})),(()=>{this.state.collapsed||"function"!==typeof this.props.onExpand||this.props.onExpand()}))}UNSAFE_componentWillReceiveProps(e){e.initiallyExpanded&&this.state.collapsed&&this.toggleCollapsed()}handleClick(e){this.props.onClick&&this.props.onClick(e),void 0!==e&&e.stopPropagation()}render(){const e={tree:{marginLeft:16,whiteSpace:"nowrap"},itemLabel:{display:"inline-block",position:"relative"},arrow:{display:"inline-block",position:"absolute",left:-16,top:-1,width:11,height:16,paddingLeft:4,textAlign:"center",cursor:"pointer"},arrowSymbol:{transition:"transform 150ms ease-out",transform:this.state.collapsed?"":"rotate(90deg)",position:"absolute"},clickTarget:{cursor:this.props.onClick&&"pointer"},children:{position:"relative",marginLeft:16,height:this.state.collapsed?0:"inherit"}},t=r.a.createElement("div",{style:e.itemLabel},r.a.createElement("div",{className:"arrow",style:e.arrow,onClick:this.toggleCollapsed.bind(this)},r.a.createElement("div",{style:e.arrowSymbol},this.props.arrowSymbol)),r.a.createElement("div",{className:"label",onClick:this.handleClick,style:e.clickTarget},this.props.label));e.children.display=this.state.collapsed?"none":"block";const a=(!this.state.collapsed||this.props.persistent&&this.state.hasBeenExpanded)&&r.a.createElement("div",{className:"children",style:e.children},this.props.children),n="tree-view ".concat(this.props.className);return r.a.createElement("div",{className:n,style:Object.assign(e.tree,this.props.style)},t,a)}}Ct.defaultProps={persistent:!1,initiallyExpanded:!1,arrowSymbol:"\u25b8",style:{}};var Pt=Ct;const Tt={progress:{position:"absolute",display:"inline-block",width:"100%",left:-8},progressBar:{height:2,backgroundColor:"transparent"},spacer:{position:"relative",display:"inline-block",width:"1.2rem",height:"1rem"},label:{display:"inline-block",outline:"none"},ouContainer:{borderColor:"transparent",borderStyle:"solid",borderWidth:"1px",borderRightWidth:0,borderRadius:"3px 0 0 3px",background:"transparent",paddingLeft:2,outline:"none"},currentOuContainer:{background:"rgba(0,0,0,0.05)",borderColor:"rgba(0,0,0,0.1)"},memberCount:{fontSize:"0.75rem",marginLeft:4}};class It extends r.a.Component{constructor(e){super(e),this.state={children:!1===e.root.children||Array.isArray(e.root.children)&&0===e.root.children.length?[]:void 0,loading:!1},"toArray"in e.root.children&&!e.root.children.hasUnloadedData&&(this.state.children=e.root.children.toArray().sort(((e,t)=>e.displayName.localeCompare(t.displayName)))),this.loadChildren=this.loadChildren.bind(this),this.handleSelectClick=this.handleSelectClick.bind(this)}componentDidMount(){this.props.initiallyExpanded.some((e=>e.includes("/".concat(this.props.root.id))))&&this.loadChildren()}UNSAFE_componentWillReceiveProps(e){(e.initiallyExpanded.some((t=>t.includes("/".concat(e.root.id))))||e.idsThatShouldBeReloaded.includes(e.root.id))&&this.loadChildren()}setChildState(e){this.props.onChildrenLoaded&&this.props.onChildrenLoaded(e),this.setState({children:e.toArray().sort(((e,t)=>e.displayName.localeCompare(t.displayName))),loading:!1})}loadChildren(){if(void 0===this.state.children&&!this.state.loading||this.props.idsThatShouldBeReloaded.indexOf(this.props.root.id)>=0){this.setState({loading:!0});this.props.root.children.load({fields:"id,displayName,children::isNotEmpty,path,parent"},this.props.forceReloadChildren).then((e=>{this.setChildState(e)}))}}handleSelectClick(e){this.props.onSelectClick&&this.props.onSelectClick(e,this.props.root),e.stopPropagation()}shouldIncludeOrgUnit(e){return!this.props.orgUnitsPathsToInclude||0===this.props.orgUnitsPathsToInclude.length||!!this.props.orgUnitsPathsToInclude.some((t=>t.includes("/".concat(e.id))))}renderChild(e,t){return this.shouldIncludeOrgUnit(e)?r.a.createElement(It,{key:e.id,root:e,selected:this.props.selected,initiallyExpanded:t,onSelectClick:this.props.onSelectClick,currentRoot:this.props.currentRoot,onChangeCurrentRoot:this.props.onChangeCurrentRoot,labelStyle:this.props.labelStyle,selectedLabelStyle:this.props.selectedLabelStyle,arrowSymbol:this.props.arrowSymbol,idsThatShouldBeReloaded:this.props.idsThatShouldBeReloaded,hideCheckboxes:this.props.hideCheckboxes,onChildrenLoaded:this.props.onChildrenLoaded,hideMemberCount:this.props.hideMemberCount,orgUnitsPathsToInclude:this.props.orgUnitsPathsToInclude,forceReloadChildren:this.props.forceReloadChildren}):null}renderChildren(){const e=Array.isArray(this.props.initiallyExpanded)?this.props.initiallyExpanded.filter((e=>e!==this.props.root.id)):this.props.initiallyExpanded!==this.props.root.id&&this.props.initiallyExpanded||[];return Array.isArray(this.state.children)&&this.state.children.length>0?this.state.children.map((t=>this.renderChild(t,e))):this.state.loading?r.a.createElement("div",{style:Tt.progress},r.a.createElement(ft.a,{style:Tt.progressBar})):null}render(){const e=this.props.root,t=void 0===this.state.children||Array.isArray(this.state.children)&&this.state.children.length>0,a=!!this.props.onSelectClick,n=new RegExp("/".concat(e.id,"$")),i=new RegExp("/".concat(e.id)),s=this.props.selected&&this.props.selected.some((e=>n.test(e))),o=this.props.currentRoot&&this.props.currentRoot.id===e.id,l=this.props.initiallyExpanded.some((t=>t.includes("/".concat(e.id)))),c=this.props.onChangeCurrentRoot&&!o&&t,d=void 0!==this.props.selected?this.props.selected.filter((e=>i.test(e))).length:e.memberCount,p=Object.assign({},Tt.label,{fontWeight:s?500:300,color:s?"orange":"inherit",cursor:c?"pointer":"default"},s?this.props.selectedLabelStyle:this.props.labelStyle),h=Object.assign({},Tt.ouContainer,o?Tt.currentOuContainer:{}),u=r.a.createElement("div",{style:p,onClick:c&&(t=>{t.stopPropagation(),this.props.onChangeCurrentRoot(e)})||a&&this.handleSelectClick,role:"button",tabIndex:0},a&&!this.props.hideCheckboxes&&r.a.createElement("input",{type:"checkbox",readOnly:!0,disabled:!a,checked:s,onClick:this.handleSelectClick}),e.displayName,t&&!this.props.hideMemberCount&&!!d&&r.a.createElement("span",{style:Tt.memberCount},"(",d,")"));return t?r.a.createElement(Pt,{label:u,onExpand:this.loadChildren,persistent:!0,initiallyExpanded:l,arrowSymbol:this.props.arrowSymbol,className:"orgunit with-children",style:h},this.renderChildren()):r.a.createElement("div",{onClick:a&&this.handleSelectClick,className:"orgunit without-children",style:h,role:"button",tabIndex:0},r.a.createElement("div",{style:Tt.spacer}),u)}}It.defaultProps={selected:[],initiallyExpanded:[],onSelectClick:void 0,onChangeCurrentRoot:void 0,currentRoot:void 0,onChildrenLoaded:void 0,labelStyle:{},selectedLabelStyle:{},idsThatShouldBeReloaded:[],arrowSymbol:void 0,hideCheckboxes:!1,hideMemberCount:!1,orgUnitsPathsToInclude:null,forceReloadChildren:!1};var Dt=It,Nt=a(922),Ot=a(396),At=a.n(Ot),wt=a(303),Rt=a.n(wt),_t=a(329),Mt=a.n(_t);const Ut={datePicker:{width:"100%"},year:{width:95,marginRight:16},month:{width:125},week:{width:105},biWeek:{width:200},biMonth:{width:200},quarter:{width:200},sixMonth:{width:200},line:{marginTop:0}},Lt=e=>new Date(e).getFullYear().toString(),Wt=e=>{const t=new Date(e).getMonth()+1;return"0".concat(t).slice(-2)},jt=e=>"".concat(Lt(e)).concat(Wt(e)).concat((e=>{const t=new Date(e).getDate();return"0".concat(t).slice(-2)})(e)),Gt=e=>{const t=new Date(e);return t.setDate(t.getDate()-(e.getDay()+6)%7+3),t.getFullYear()},Bt=(e,t)=>!Object(Nt.is53WeekISOYear)(e)&&53!==Number(t),Ft=e=>2*parseInt(e)-1;class Vt extends r.a.Component{constructor(e,t){super(e,t),this.state={};const a=t.d2.i18n;this.getTranslation=a.getTranslation.bind(a)}componentDidUpdate(e){this.props.periodType!==e.periodType&&this.handleChange()}getPeriod(){const e="BiWeekly"===this.props.periodType&&this.state.biWeek?Ft(this.state.biWeek):this.state.week,t=this.state.year&&e&&Object(Nt.getFirstDateOfWeek)(this.state.year,e);switch(this.props.periodType){case"Daily":return this.state.date&&jt(this.state.date);case"Weekly":return t&&this.setState({invalidWeek:!Bt(t,this.state.week)}),t&&Bt(t,this.state.week)&&"".concat(Gt(t),"W").concat(this.state.week);case"WeeklyWednesday":return t&&this.setState({invalidWeek:!Bt(t,this.state.week)}),t&&Bt(t,this.state.week)&&"".concat(Gt(t),"WedW").concat(this.state.week);case"WeeklyThursday":return t&&this.setState({invalidWeek:!Bt(t,this.state.week)}),t&&Bt(t,this.state.week)&&"".concat(Gt(t),"ThuW").concat(this.state.week);case"WeeklySaturday":return t&&this.setState({invalidWeek:!Bt(t,this.state.week)}),t&&Bt(t,this.state.week)&&"".concat(Gt(t),"SatW").concat(this.state.week);case"WeeklySunday":return t&&this.setState({invalidWeek:!Bt(t,this.state.week)}),t&&Bt(t,this.state.week)&&"".concat(Gt(t),"SunW").concat(this.state.week);case"BiWeekly":return t&&this.setState({invalidBiWeek:!Bt(t,Ft(this.state.biWeek))}),this.state.year&&this.state.biWeek&&"".concat(this.state.year,"BiW").concat(this.state.biWeek);case"Monthly":return this.state.year&&this.state.month&&"".concat(this.state.year).concat(this.state.month);case"BiMonthly":return this.state.year&&this.state.biMonth&&"".concat(this.state.year,"0").concat(this.state.biMonth,"B");case"Quarterly":return this.state.year&&this.state.quarter&&"".concat(this.state.year,"Q").concat(this.state.quarter);case"SixMonthly":return this.state.year&&this.state.sixMonth&&"".concat(this.state.year,"S").concat(this.state.sixMonth);case"SixMonthlyApril":return this.state.year&&this.state.sixMonth&&"".concat(this.state.year,"AprilS").concat(this.state.sixMonth);case"SixMonthlyNov":return this.state.year&&this.state.sixMonth&&"".concat(this.state.year,"NovS").concat(this.state.sixMonth);case"Yearly":return this.state.year;case"FinancialApril":return this.state.year&&"".concat(this.state.year,"April");case"FinancialJuly":return this.state.year&&"".concat(this.state.year,"July");case"FinancialOct":return this.state.year&&"".concat(this.state.year,"Oct");default:return!1}}handleChange(){this.getPeriod()&&this.props.onPickPeriod(this.getPeriod())}renderOptionPicker(e,t){const a="week"===e&&this.state.invalidWeek||"biWeek"===e&&this.state.invalidBiWeek;return r.a.createElement(Mt.a,{value:this.state[e],onChange:(t,a,n)=>this.setState({[e]:n},this.handleChange),style:Ut[e],floatingLabelText:this.getTranslation(e),floatingLabelStyle:a?{color:"red"}:{}},Object.keys(t).sort().map((a=>r.a.createElement(Rt.a,{key:a,value:a,primaryText:/[^0-9]/.test(t[a])&&"biWeek"!==e?this.getTranslation(t[a]):t[a]}))))}renderYearPicker(){const e={},t=(new Date).getFullYear();for(let a=2014;a<t+5;a++)e[a]=a;return this.renderOptionPicker("year",e)}renderMonthPicker(){return this.renderOptionPicker("month",{"01":"jan","02":"feb","03":"mar","04":"apr","05":"may","06":"jun","07":"jul","08":"aug","09":"sep",10:"oct",11:"nov",12:"dec"})}renderWeekPicker(){const e={};for(let t=1;t<=53;t++)e["0".concat(t).substr(-2)]=t;return this.renderOptionPicker("week",e)}renderBiWeekPicker(){const e={},t=this.getTranslation("bi_week");for(let a=1;a<=27;a++)e["0".concat(a).substr(-2)]="".concat(t," ").concat(a);return this.renderOptionPicker("biWeek",e)}renderBiMonthPicker(){return this.renderOptionPicker("biMonth",{1:"jan-feb",2:"mar-apr",3:"may-jun",4:"jul-aug",5:"sep-oct",6:"nov-dec"})}renderQuarterPicker(){return this.renderOptionPicker("quarter",{1:"Q1",2:"Q2",3:"Q3",4:"Q4"})}render(){const e=(e,t)=>{const a=Lt(t),n=Wt(t);this.setState({date:t,year:a,month:n},this.handleChange)};switch(this.props.periodType){case"Daily":return r.a.createElement(At.a,{floatingLabelText:this.getTranslation("day"),onChange:e,autoOk:!0,container:"inline",style:Ut.datePicker});case"Weekly":case"WeeklyWednesday":case"WeeklyThursday":case"WeeklySaturday":case"WeeklySunday":return r.a.createElement("div",{style:Ut.line},this.renderYearPicker(),this.renderWeekPicker());case"BiWeekly":return r.a.createElement("div",{style:Ut.line},this.renderYearPicker(),this.renderBiWeekPicker());case"Monthly":return r.a.createElement("div",{style:Ut.line},this.renderYearPicker(),this.renderMonthPicker());case"BiMonthly":return r.a.createElement("div",{style:Ut.line},this.renderYearPicker(),this.renderBiMonthPicker());case"Quarterly":return r.a.createElement("div",{style:Ut.line},this.renderYearPicker(),this.renderQuarterPicker());case"SixMonthly":return r.a.createElement("div",{style:Ut.line},this.renderYearPicker(),this.renderOptionPicker("sixMonth",{1:"jan-jun",2:"jul-dec"}));case"SixMonthlyApril":return r.a.createElement("div",{style:Ut.line},this.renderYearPicker(),this.renderOptionPicker("sixMonth",{1:"apr-sep",2:"oct-mar"}));case"SixMonthlyNov":return r.a.createElement("div",{style:Ut.line},this.renderYearPicker(),this.renderOptionPicker("sixMonth",{1:"nov-apr",2:"may-oct"}));case"Yearly":case"FinancialApril":case"FinancialJuly":case"FinancialOct":return r.a.createElement("div",{style:Ut.line},this.renderYearPicker());default:return null}}}Vt.contextTypes={d2:T.a.object.isRequired};var qt=Vt;function Jt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const zt={minWidth:360,marginRight:20};class Yt extends o.Component{constructor(){super(),this.state={selected:[],dataSet:null,orgUnitPaths:null},this.onDataSetChange=this.onDataSetChange.bind(this),this.onPeriodChange=this.onPeriodChange.bind(this),this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.handleOrgUnitClick=this.handleOrgUnitClick.bind(this),this.changeRoot=this.changeRoot.bind(this)}onDataSetChange(e){const t=this.context.d2,a=e.id;null!==this.state.dataSet&&a===this.state.dataSet.id||(this.props.updateSeletedDataSetId(a),this.setState({rootWithMembers:null,selected:[],dataSet:e}),Promise.all([t.models.organisationUnits.list({paging:!1,level:1,fields:"id,displayName,path,children::isNotEmpty,memberCount",memberCollection:"dataSets",memberObject:a}),t.models.dataSets.get(a,{paging:!1,fields:"organisationUnits[id,path]"})]).then((([e,t])=>{const a=e.toArray()[0];this.setState({rootWithMembers:a,selected:[],orgUnitPaths:t.organisationUnits.toArray().map((e=>e.path))})})).catch((e=>{console.error(e)})))}onPeriodChange(e){this.props.updateSelectedPeriodId(e)}handleSelectionUpdate(e){this.setState({selected:e}),this.props.updateSelectedOrgUnits(this.state.selected)}handleOrgUnitClick(e,t){if(this.state.selected.includes(t.path)){const e=this.state.selected;e.splice(e.indexOf(t.path),1),this.setState({selected:e})}else{const e=this.state.selected;e.push(t.path),this.setState({selected:e})}this.props.updateSelectedOrgUnits(this.state.selected)}changeRoot(e){this.setState({currentRoot:e})}render(){const e=this.props.dataSets.map((e=>({id:e.id,name:e.displayName,periodType:e.periodType})));let t=pe.t(m.lockException.selectADataSet),a=null;return this.state.dataSet&&(t=pe.t(m.lockException.dataSet),a=this.state.dataSet.id),r.a.createElement("div",{id:"addLockExceptionFormId"},r.a.createElement("div",{className:xt.a.selectsContainer},r.a.createElement(gt.a,{style:zt,label:t,items:e,onChange:this.onDataSetChange,value:a}),this.state.dataSet&&r.a.createElement("span",{id:"idPeriodPicker"},r.a.createElement(qt,{periodType:this.state.dataSet.periodType,onPickPeriod:this.onPeriodChange}))),this.state.dataSet?r.a.createElement(yt.a,{className:xt.a.organisationUnitTreeCard},r.a.createElement(St.a,{className:xt.a.organisationUnitTreeContainer},r.a.createElement("div",{className:xt.a.left},this.state.rootWithMembers?r.a.createElement(Dt,{root:this.state.rootWithMembers,selected:this.state.selected,currentRoot:this.state.currentRoot,initiallyExpanded:["/".concat(this.state.rootWithMembers.id)],memberCollection:"dataSets",memberObject:this.state.dataSet.id,onSelectClick:this.handleOrgUnitClick,onChangeCurrentRoot:this.changeRoot,orgUnitsPathsToInclude:this.state.orgUnitPaths}):r.a.createElement("span",null,pe.t(m.lockException.updatingTree))),r.a.createElement("div",{className:xt.a.right},r.a.createElement("div",null,this.state.currentRoot?r.a.createElement("div",null,pe.t(m.lockException.organisationUnitsWithin)," ",r.a.createElement("span",{className:xt.a.ouLabel},this.state.currentRoot.displayName),":"):r.a.createElement("div",null,pe.t(m.lockException.selectOrganisationUnits)),r.a.createElement(mt.a,{levels:this.props.levels,selected:this.state.selected,currentRoot:this.state.currentRoot,onUpdateSelection:this.handleSelectionUpdate}),r.a.createElement(ut.a,{groups:this.props.groups,selected:this.state.selected,currentRoot:this.state.currentRoot,onUpdateSelection:this.handleSelectionUpdate}),r.a.createElement(ht.a,{selected:this.state.selected,currentRoot:this.state.currentRoot,onUpdateSelection:this.handleSelectionUpdate}))))):null)}}Jt(Yt,"propTypes",{dataSets:T.a.array.isRequired,groups:T.a.oneOfType([T.a.object,T.a.array]).isRequired,levels:T.a.oneOfType([T.a.object,T.a.array]).isRequired,updateSelectedOrgUnits:T.a.func.isRequired,updateSelectedPeriodId:T.a.func.isRequired,updateSeletedDataSetId:T.a.func.isRequired}),Jt(Yt,"contextTypes",{d2:T.a.object});var Qt=Yt,Ht=(a(923),a(924)),Kt=a.n(Ht);function Xt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Zt={dialog:{maxWidth:"80%"},addButton:{position:"fixed",bottom:"1.5rem",right:"1.5rem"}},$t={dataSet:pe.t("Data set"),period:pe.t("Period"),organisationUnit:pe.t("Organisation unit")},ea=({columns:e,rows:t,onRemoveLockException:a})=>r.a.createElement(i.t,null,r.a.createElement(i.x,null,r.a.createElement(i.z,null,e.map((e=>r.a.createElement(i.w,{key:e},$t[e]))),r.a.createElement(i.w,null))),r.a.createElement(i.u,null,t.map(((t,n)=>r.a.createElement(i.y,{key:n},e.map((e=>r.a.createElement(i.v,{key:e},t[e]))),r.a.createElement(i.v,null,r.a.createElement(i.c,{small:!0,secondary:!0,onClick:a.bind(null,t)},r.a.createElement(st.a,{className:"material-icons"},"delete"))))))));class ta extends xe{constructor(e,t){super(e,t),Xt(this,"handlePageChange",(e=>{const t={...this.props.pager,page:e};this.loadLockExceptionsForPager(t,!0)})),Xt(this,"handlePageSizeChange",(e=>{const t={...this.props.pager,pageSize:e};this.loadLockExceptionsForPager(t,!0)})),Xt(this,"removeLockException",(e=>{this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:g.a,message:pe.t(m.lockException.confirmDeleteMessage),action:pe.t(m.lockException.confirmButton),onActionClick:()=>{let t="lockExceptions?pe=".concat(e.periodId,"&ds=").concat(e.dataSetId);e.organisationUnitId&&(t+="&ou=".concat(e.organisationUnitId)),this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:g.c,message:pe.t(m.lockException.loadingMessage)},pageState:{...this.props,loading:!0}});this.context.d2.Api.getApi().delete(t).then((()=>{if(this.isPageMounted()){const t={...this.props,loading:!1};this.props.atBatchDeletionPage?(t.lockExceptions=this.props.lockExceptions.filter((t=>t.periodId!==e.periodId||t.dataSetId!==e.dataSetId)),this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:g.d,message:pe.t(m.lockException.removedMessage)},pageState:t})):(this.deleteInProgress=!0,this.loadLockExceptionsForPager(ta.initialPager,!0))}})).catch((e=>{if(console.error(e),this.isPageMounted()){const t=e&&e.message?e.message:pe.t(m.messages.unexpectedError);this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:g.b,message:t},pageState:{...this.props,loading:!1}})}}))}}})})),this.state={selectedOrgUnits:[],selectedDataSetId:null,selectedPeriodId:null,showAddDialogOpen:!1,levels:null,groups:null,dataSets:[]},this.updateSelectedOrgUnits=this.updateSelectedOrgUnits.bind(this),this.updateSeletedDataSetId=this.updateSeletedDataSetId.bind(this),this.updateSelectedPeriodId=this.updateSelectedPeriodId.bind(this),this.showLockExceptionFormDialog=this.showLockExceptionFormDialog.bind(this),this.closeLockExceptionFormDialog=this.closeLockExceptionFormDialog.bind(this),this.addLockException=this.addLockException.bind(this),this.backToLockExceptions=this.backToLockExceptions.bind(this),this.goToBatchDeletionPage=this.goToBatchDeletionPage.bind(this);const a=t.d2;Object.assign(a.i18n.translations,{period:pe.t(m.lockException.period),data_set:pe.t(m.lockException.dataSet),organisation_unit:pe.t(m.lockException.organisationUnit),organisation_unit_group:pe.t(m.lockException.organisationUnitGroup),organisation_unit_level:pe.t(m.lockException.organisationUnitLevel),select:pe.t(m.lockException.select),deselect:pe.t(m.lockException.deselect),select_all:pe.t(m.lockException.selectAll),deselect_all:pe.t(m.lockException.deselectAll),name:pe.t(m.lockException.name),show:pe.t(m.lockException.show),remove:pe.t(m.lockException.remove),actions:pe.t(m.lockException.actions),of_page:pe.t(m.lockException.ofPage),week:pe.t(m.lockException.week),month:pe.t(m.lockException.month),year:pe.t(m.lockException.year),biMonth:pe.t(m.lockException.biMonth),day:pe.t(m.lockException.day),jan:pe.t(m.lockException.jan),feb:pe.t(m.lockException.feb),mar:pe.t(m.lockException.mar),apr:pe.t(m.lockException.apr),may:pe.t(m.lockException.may),jun:pe.t(m.lockException.jun),jul:pe.t(m.lockException.jul),aug:pe.t(m.lockException.aug),sep:pe.t(m.lockException.sep),oct:pe.t(m.lockException.oct),nov:pe.t(m.lockException.nov),dec:pe.t(m.lockException.dec),"jan-feb":pe.t(m.lockException.janFeb),"mar-apr":pe.t(m.lockException.marApr),"may-jun":pe.t(m.lockException.mayJun),"jul-aug":pe.t(m.lockException.julAug),"sep-oct":pe.t(m.lockException.sepOct),"nov-dec":pe.t(m.lockException.novDec),quarter:pe.t(m.lockException.quarter),Q1:pe.t(m.lockException.Q1),Q2:pe.t(m.lockException.Q2),Q3:pe.t(m.lockException.Q3),Q4:pe.t(m.lockException.Q4),sixMonth:pe.t(m.lockException.sixMonth),"jan-jun":pe.t(m.lockException.janJun),"jul-dec":pe.t(m.lockException.julDec),"apr-sep":pe.t(m.lockException.aprSep),"oct-mar":pe.t(m.lockException.octMar)})}prepareLockExceptionsResponseToDataTable(e){return e.map((e=>{const t={};return this.props.atBatchDeletionPage||(t.organisationUnit=e.organisationUnit.displayName,t.organisationUnitId=e.organisationUnit.id),t.period=e.period.displayName,t.periodId=e.period.id,t.dataSet=e.dataSet.displayName,t.dataSetId=e.dataSet.id,t}))}dataTableColumns(){return this.props.atBatchDeletionPage?["dataSet","period"]:["organisationUnit","dataSet","period"]}header(){return this.props.atBatchDeletionPage?r.a.createElement("div",{className:Kt.a.headerContainer},r.a.createElement("h1",{className:Kt.a.header},r.a.createElement(rt.a,{onClick:this.backToLockExceptions},r.a.createElement(st.a,{className:u()("material-icons",Kt.a.backArrowIcon)},"arrow_back")),r.a.createElement("span",null,pe.t(m.lockException.batchDeletionHeader)),r.a.createElement("span",{className:Kt.a.headerDivider}," | "),r.a.createElement("span",{className:Kt.a.subHeader},pe.t(m.lockException.batchDeletionSubHeader)))):r.a.createElement("div",{className:Kt.a.headerContainer},r.a.createElement("h1",{className:Kt.a.header},pe.t(m.lockException.title),r.a.createElement(me,{sectionDocsKey:xa(this.props.sectionKey)})),r.a.createElement("div",null,r.a.createElement(i.c,{className:Kt.a.actionButton,onClick:this.goToBatchDeletionPage,primary:!0,disabled:this.areActionsDisabled()},pe.t(m.lockException.actionButton))))}areActionsDisabled(){return this.props.loading}addLockExceptionEnabled(){return this.state.selectedOrgUnits.length>0&&this.state.selectedDataSetId&&this.state.selectedPeriodId}componentDidMount(){this.loadLockExceptionsForPager(ta.initialPager)}loadLockExceptionsForPager(e,t){const a=this.context.d2.Api.getApi(),n="lockExceptions?page=".concat(e.page,"&pageSize=").concat(e.pageSize)+"&fields=name,period[id,displayName],organisationUnit[id,displayName],dataSet[id,displayName]&order=name:asc";(t||!this.props.loading&&!this.props.loaded)&&(this.context.updateAppState(this.deleteInProgress||this.addInProgress?{atBatchDeletionPage:!1,loaded:!1,loading:!0}:{showSnackbar:!0,snackbarConf:{type:g.c,message:pe.t(m.lockException.loading)},pageState:{atBatchDeletionPage:!1,loaded:!1,loading:!0}}),a.get(n).then((e=>{if(this.isPageMounted()){let t;this.deleteInProgress?(t={showSnackbar:!0,snackbarConf:{type:g.d,message:pe.t(m.lockException.removedMessage)}},this.deleteInProgress=!1):this.addInProgress?(t={showSnackbar:!0,snackbarConf:{type:g.d,message:pe.t(m.lockException.addedMessage)}},this.addInProgress=!1):t={showSnackbar:!1},this.context.updateAppState({...t,pageState:{loaded:!0,lockExceptions:this.prepareLockExceptionsResponseToDataTable(e.lockExceptions),pager:e.pager,loading:!1}})}})).catch((e=>{if(this.isPageMounted()){const t=e&&e.message?e.message:pe.t(m.messages.unexpectedError);this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:g.b,message:t},pageState:{loaded:!0,loading:!1}})}})))}loadLockExceptionCombinations(){const e=this.context.d2.Api.getApi(),t=this.props.pager;this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:g.c,message:pe.t(m.lockException.loadingMessage)},pageState:{atBatchDeletionPage:!0,loaded:!1,loading:!0,pager:t}}),e.get("lockExceptions/combinations?fields=name, period[id,displayName], dataSet[id,displayName]").then((e=>{this.isPageMounted()&&this.context.updateAppState({showSnackbar:!1,pageState:{loaded:!0,atBatchDeletionPage:!0,lockExceptions:this.prepareLockExceptionsResponseToDataTable(e.lockExceptions),loading:!1,pager:t}})})).catch((e=>{if(this.isPageMounted()){const t=e&&e.message?e.message:pe.t(m.messages.unexpectedError);this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:g.b,message:t},pageState:{loaded:!0,loading:!1}})}}))}updateSelectedOrgUnits(e){this.setState({selectedOrgUnits:e})}updateSeletedDataSetId(e){this.setState({selectedDataSetId:e})}updateSelectedPeriodId(e){this.setState({selectedPeriodId:e})}backToLockExceptions(){this.loadLockExceptionsForPager(this.props.pager,!0)}goToBatchDeletionPage(){this.loadLockExceptionCombinations()}showLockExceptionFormDialog(){const e=this.context.d2;this.state.levels&&this.state.groups&&this.state.dataSets.length>0?this.setState({showAddDialogOpen:!0}):Promise.all([e.models.organisationUnitLevel.list({paging:!1,fields:"id,level,displayName",order:"level:asc"}),e.models.organisationUnitGroup.list({paging:!1,fields:"id,displayName"}),e.models.dataSet.list({paging:!1,fields:"id,displayName,periodType"})]).then((([e,t,a])=>{this.isPageMounted()&&this.setState({showAddDialogOpen:!0,levels:e,groups:t,dataSets:a.toArray()})})).catch((e=>{if(this.isPageMounted()){const t=e&&e.message?e.message:pe.t(m.messages.unexpectedError);this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:g.b,message:t},pageState:{...this.props,loading:!1}})}}))}closeLockExceptionFormDialog(){this.setState({showAddDialogOpen:!1,selectedOrgUnits:[],selectedDataSetId:null,selectedPeriodId:null})}addLockException(){if(this.addLockExceptionEnabled()){const e=this.context.d2.Api.getApi(),t=this.state.selectedOrgUnits.map((e=>{const t=e.split("/");return t[t.length-1]})),a=new FormData;a.append("ou","[".concat(t.join(","),"]")),a.append("pe",this.state.selectedPeriodId),a.append("ds",this.state.selectedDataSetId),this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:g.c,message:pe.t(m.lockException.addingMessage)},pageState:{loading:!0}}),e.post("lockExceptions",a).then((()=>{this.isPageMounted()&&(this.context.updateAppState({pageState:{loaded:!1,loading:!1}}),this.addInProgress=!0,this.loadLockExceptionsForPager(ta.initialPager,!1),this.closeLockExceptionFormDialog())})).catch((e=>{if(this.isPageMounted()){const t=e&&e.message?e.message:pe.t(m.messages.unexpectedError);this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:g.b,message:t},pageState:{...this.props,loading:!1}})}}))}}render(){const e={...this.props.pager,onPageSizeChange:this.handlePageSizeChange,onPageChange:this.handlePageChange},t=[r.a.createElement(tt.a,{key:"cancel-button",className:Kt.a.actionButton,label:pe.t(m.lockException.cancelButton),onClick:this.closeLockExceptionFormDialog}),r.a.createElement(ct.a,{key:"add-button",className:Kt.a.actionButton,primary:!0,label:pe.t(m.lockException.addButton),onClick:this.addLockException,disabled:!this.addLockExceptionEnabled()})];return r.a.createElement("div",{className:Kt.a.lockExceptionsTable},this.header(),this.props.lockExceptions&&this.props.lockExceptions.length?r.a.createElement("div",null,!this.areActionsDisabled()&&!this.props.atBatchDeletionPage&&r.a.createElement("div",{className:Kt.a.pagination},r.a.createElement(i.s,e)),r.a.createElement(ea,{columns:this.dataTableColumns(),rows:this.props.lockExceptions,onRemoveLockException:this.removeLockException}),!this.areActionsDisabled()&&!this.props.atBatchDeletionPage&&r.a.createElement("div",{className:u()(Kt.a.pagination,Kt.a.marginForAddButton)},r.a.createElement(i.s,e))):r.a.createElement(Te.Card,{style:{display:this.props.loading?"none":"block"}},r.a.createElement(Te.CardText,null,pe.t(m.lockException.noDataMessage))),this.state.levels&&this.state.groups&&this.state.dataSets.length>0&&r.a.createElement($e.a,{title:pe.t(m.lockException.addLockExceptionFormTitle),actions:t,modal:!1,open:this.state.showAddDialogOpen,contentStyle:Zt.dialog,onRequestClose:this.closeLockExceptionFormDialog},r.a.createElement(Qt,{levels:this.state.levels,groups:this.state.groups,dataSets:this.state.dataSets,updateSelectedOrgUnits:this.updateSelectedOrgUnits,updateSeletedDataSetId:this.updateSeletedDataSetId,updateSelectedPeriodId:this.updateSelectedPeriodId})),!this.props.atBatchDeletionPage&&!this.areActionsDisabled()&&r.a.createElement(nt.a,{id:"addExceptionButtonId",style:Zt.addButton,onClick:this.showLockExceptionFormDialog},r.a.createElement(pt.a,null)))}}Xt(ta,"initialPager",{pageSize:20,page:1,total:0,pageCount:1});var aa=ta,na=a(326),ia=a.n(na),sa=a(348);const oa=m.maintenance.title,ra=[{key:"analyticsTableClear",label:m.maintenance.analyticsTableClear},{key:"analyticsTableAnalyze",label:m.maintenance.analyticsTableAnalyze},{key:"zeroDataValueRemoval",label:m.maintenance.zeroDataValueRemoval},{key:"softDeletedDataValueRemoval",label:m.maintenance.softDeletedDataValueRemoval},{key:"softDeletedEventRemoval",label:m.maintenance.softDeletedEventRemoval},{key:"softDeletedEnrollmentRemoval",label:m.maintenance.softDeletedEnrollmentRemoval},{key:"softDeletedTrackedEntityInstanceRemoval",label:m.maintenance.softDeletedTrackedEntityInstanceRemoval},{key:"periodPruning",label:m.maintenance.periodPruning},{key:"expiredInvitationsClear",label:m.maintenance.expiredInvitationsClear},{key:"sqlViewsDrop",label:m.maintenance.sqlViewsDrop},{key:"sqlViewsCreate",label:m.maintenance.sqlViewsCreate},{key:"categoryOptionComboUpdate",label:m.maintenance.categoryOptionComboUpdate},{key:"ouPathsUpdate",label:m.maintenance.ouPathsUpdate},{key:"cacheClear",label:m.maintenance.cacheClear},{key:"appReload",label:m.maintenance.appReload}];var la=class extends xe{constructor(){super(),function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(this,"performMaintenance",(()=>{const e=this.context.d2.Api.getApi(),t=this.buildFormData();t&&(this.setLoadingPageState(),e.post("maintenance",t).then((()=>{this.isPageMounted()&&this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:g.d,message:pe.t(m.maintenance.actionPerformed)},pageState:{loading:!1}})})).catch((e=>{this.isPageMounted()&&this.setLoadedPageWithErrorState(e)})))}));const e={};for(const t of Object.values(ra))e[t.key]={checked:!1};this.state={checkboxes:e}}setLoadingPageState(){this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:g.c,message:pe.t(m.maintenance.performing)},pageState:{loading:!0}})}setLoadedPageWithErrorState(e){const t=e&&e.message?e.message:pe.t(m.maintenance.unexpectedError);this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:g.b,message:t},pageState:{loading:!1}})}selectedCheckboxesCount(){let e=0;const t=Object.keys(this.state.checkboxes);for(let a=0;a<t.length;a++){const n=t[a];this.state.checkboxes[n].checked&&(e+=1)}return e}areActionsDisabled(){return this.props.loading}buildFormData(){let e=null;const t=Object.keys(this.state.checkboxes);for(let a=0;a<t.length;a++){const n=t[a],i=this.state.checkboxes[n].checked;e=e||new FormData,e.append(n,i)}return e}render(){const e=Object.assign({},this.state.checkboxes),t=ra.map((t=>{const a=e[t.key].checked;return r.a.createElement(sa.GridTile,{key:t.key,className:u()("col-xs-12 col-md-6 col-lg-4",fe.a.formControl)},r.a.createElement(ia.a,{label:pe.t(t.label),checked:a,onCheck:()=>{e[t.key].checked=!a,this.setState({checkboxes:e})},labelStyle:{color:"#000000"},iconStyle:{fill:"#000000"},disabled:this.areActionsDisabled()}))}));return r.a.createElement("div",null,r.a.createElement("h1",null,pe.t(oa),r.a.createElement(me,{sectionDocsKey:xa(this.props.sectionKey)})),r.a.createElement(Te.Card,{id:"maintenanceContentContainerId"},r.a.createElement(Te.CardText,null,r.a.createElement("div",{className:u()(fe.a.gridContainer,"row")},t),r.a.createElement(ct.a,{id:"performMaintenanceBtnId",label:pe.t(m.maintenance.actionButton),onClick:this.performMaintenance,primary:!0,disabled:this.areActionsDisabled()||0===this.selectedCheckboxesCount()}))))}},ca=a(925),da=a.n(ca);function pa(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const ha="/minMaxValues",ua=e=>{return(t=e.split("/"))[t.length-1];var t};var ma=class extends xe{constructor(){super(),pa(this,"isFormValid",(()=>this.state.dataSetsSelectedCount>0&&this.state.selected.length>0)),pa(this,"dataSetsSelectRef",(e=>{this.dataSetsSelect=e})),pa(this,"dataSetsSelectClick",(()=>{this.setState({dataSetsSelectedCount:this.dataSetsSelect.selectedOptions.length})})),pa(this,"handleOrgUnitChange",(({path:e,checked:t})=>{t?this.setState({selected:[e]}):this.setState({selected:[]})})),pa(this,"handleGenerateMinMaxValue",(()=>{const e=ua(this.state.selected[0]),t=Array.from(this.dataSetsSelect.selectedOptions).map((({value:e})=>e));this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:g.c,message:pe.t(m.minMaxValueGeneration.performingMessage)},pageState:{loading:!0}});this.context.d2.Api.getApi().post(ha,{organisationUnit:e,dataSets:t}).then((()=>{this.isPageMounted()&&this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:g.d,message:pe.t(m.minMaxValueGeneration.minMaxGenerationDone)},pageState:{loading:!1}})})).catch((()=>{this.isPageMounted()&&this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:g.b,message:pe.t(m.messages.unexpectedError)},pageState:{loading:!1}})}))})),pa(this,"handleRemoveMinMaxValue",(()=>{const e=ua(this.state.selected[0]),t=Array.from(this.dataSetsSelect.selectedOptions).map((({value:e})=>e));this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:g.c,message:pe.t(m.minMaxValueGeneration.removingMessage)},pageState:{loading:!0}});this.context.d2.Api.getApi().delete("".concat(ha,"/").concat(e,"?ds=").concat(t)).then((()=>{this.isPageMounted()&&this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:g.d,message:pe.t(m.minMaxValueGeneration.minMaxRemovalDone)},pageState:{loading:!1}})})).catch((()=>{this.isPageMounted()&&this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:g.b,message:pe.t(m.messages.unexpectedError)},pageState:{loading:!1}})}))})),this.state={selected:[],dataSets:null,roots:null,dataSetsSelectedCount:0}}componentDidMount(){this.loadData()}isUserInteractionDisabled(){return this.props.loading||null==this.state.dataSets||null===this.state.roots}loadData(){const e=this.context.d2;null!=this.state.dataSets&&null!=this.state.roots||Promise.all([e.models.organisationUnits.list({paging:!1,level:1,fields:"id"}),e.models.dataSet.list({paging:!1,fields:"id,displayName"})]).then((([e,t])=>{this.isPageMounted()&&this.setState({roots:e.toArray(),dataSets:t.toArray()})})).catch((()=>{this.isPageMounted()&&this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:g.b,message:pe.t(m.minMaxValueGeneration.notPossibleToLoadMessage)},pageState:{loading:!1}})}))}render(){return r.a.createElement("div",null,r.a.createElement("h1",{className:da.a.header},pe.t(m.minMaxValueGeneration.title),r.a.createElement(me,{sectionDocsKey:xa(this.props.sectionKey)})),r.a.createElement(i.d,{className:da.a.card},r.a.createElement("div",{className:da.a.container},this.state.dataSets?r.a.createElement("div",{className:da.a.left},r.a.createElement("div",{className:da.a.label},pe.t(m.minMaxValueGeneration.dataSet)),r.a.createElement("select",{multiple:!0,onClick:this.dataSetsSelectClick,disabled:this.isUserInteractionDisabled(),className:da.a.select,ref:this.dataSetsSelectRef},this.state.dataSets.map((e=>r.a.createElement("option",{key:e.id,value:e.id,className:da.a.options},e.displayName))))):r.a.createElement("div",{className:da.a.left},r.a.createElement("span",null,pe.t(m.minMaxValueGeneration.loadingDataSetsMessage))),this.state.roots?r.a.createElement("div",{className:da.a.right},r.a.createElement("div",{className:da.a.label},pe.t(m.minMaxValueGeneration.organisationUnitSelect)),r.a.createElement("div",{className:da.a.tree},r.a.createElement(i.r,{className:da.a.tree,roots:this.state.roots.map((e=>e.id)),selected:this.state.selected,onChange:this.handleOrgUnitChange}))):r.a.createElement("div",{className:da.a.right},r.a.createElement("span",null,pe.t(m.minMaxValueGeneration.updatingTree)))),r.a.createElement(i.c,{primary:!0,className:da.a.actionButton,onClick:this.handleGenerateMinMaxValue,disabled:this.isUserInteractionDisabled()||!this.isFormValid()},pe.t(m.minMaxValueGeneration.actionButton)),r.a.createElement(i.c,{secondary:!0,onClick:this.handleRemoveMinMaxValue,disabled:this.isUserInteractionDisabled()||!this.isFormValid()},pe.t(m.minMaxValueGeneration.removeButton))))}};const ga="system/tasks/RESOURCE_TABLE";var ba=a(926),ya=a.n(ba);function ka(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Sa=class extends xe{constructor(){super(),ka(this,"startTaskProgressPolling",(()=>{this.intervalId=setInterval((()=>{this.requestTaskProgress()}),5e3)})),ka(this,"isAnalyzingTables",(()=>this.state.intervalId)),ka(this,"startsPooling",(()=>setInterval((()=>{this.requestTaskSummary()}),5e3))),ka(this,"isJobInProgress",(e=>e.every((e=>!e.completed)))),ka(this,"initResourceTablesGeneration",(()=>{const e=this.context.d2.Api.getApi();this.setLoadingPageState(),e.post("resourceTables").then((({response:e})=>{this.isPageMounted()&&e&&this.setState({taskId:e.id},this.startTaskProgressPolling)})).catch((e=>{this.isPageMounted()&&this.setLoadedPageWithErrorState(e)}))})),ka(this,"requestTaskProgress",(()=>{this.context.d2.Api.getApi().get("".concat(ga,"/").concat(this.state.taskId)).then((e=>{this.isTaskCompleted(e)&&(this.stopTaskProgressPolling(),this.unsetLoadingPageState()),this.setState({notifications:this.getUpdatedNotifications(e)})})).catch((e=>{this.isPageMounted()&&this.setLoadedPageWithErrorState(e)}))})),this.state={taskId:null,notifications:[]}}componentDidMount(){this.requestTaskSummary()}componentWillUnmount(){super.componentWillUnmount(),this.stopTaskProgressPolling()}stopTaskProgressPolling(){clearInterval(this.intervalId),this.intervalId=null}setLoadingPageState(){this.setState({notifications:[]}),this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:g.c},pageState:{loading:!0}})}unsetLoadingPageState(){this.context.updateAppState({showSnackbar:!1,snackbarConf:{type:g.c},pageState:{loading:!1}})}setLoadedPageWithErrorState(e){console.error(e);const t=e&&e.message?e.message:pe.t(m.resourcetables.unexpectedError);this.stopTaskProgressPolling(),this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:g.b,message:t},pageState:{loading:!1}})}requestTaskSummary(){this.context.d2.Api.getApi().get(ga).then((e=>{if(!this.isPageMounted())return;const t=this.getActiveTaskIdFromSummary(e);t&&(this.setLoadingPageState(),this.setState({taskId:t,notifications:this.getUpdatedNotifications(e[t])},this.startTaskProgressPolling))})).catch((e=>{this.isPageMounted()&&this.setLoadedPageWithErrorState(e)}))}getUpdatedNotifications(e=[]){if(e.length<=this.state.notifications.length)return this.state.notifications;const t=e.length-1;return e.reverse().map(((e,a)=>({...e,completed:e.completed||a<t})))}getActiveTaskIdFromSummary(e){const{taskId:t}=Object.entries(e).reduce(((e,[t,a])=>{const n=a[a.length-1],i=new Date(n.time);return!this.isTaskCompleted(a)&&i>e.time?{taskId:t,time:i}:e}),{taskId:null,time:new Date(0)});return t}isTaskCompleted(e){return e[0].completed}render(){return r.a.createElement("div",null,r.a.createElement("h1",null,pe.t(m.resourceTables.title),r.a.createElement(me,{sectionDocsKey:xa(this.props.sectionKey)})),r.a.createElement(Te.Card,{className:fe.a.cardContainer},r.a.createElement(Te.CardText,null,r.a.createElement("div",{className:ya.a.description},r.a.createElement("div",null,pe.t(m.resourceTables.organisationUnitStructure)," ",r.a.createElement("span",{className:ya.a.tableName},"(_orgunitstructure)")),r.a.createElement("div",null,pe.t(m.resourceTables.organistionUnitCategoryOptionCombo)," ",r.a.createElement("span",{className:ya.a.tableName},"(_orgunitstructure)")),r.a.createElement("div",null,pe.t(m.resourceTables.categoryOptionGroupSetStructure)," ",r.a.createElement("span",{className:ya.a.tableName},"(_categoryoptiongroupsetstructure)")),r.a.createElement("div",null,pe.t(m.resourceTables.dataElementGroupSetStructure)," ",r.a.createElement("span",{className:ya.a.tableName},"(_dataelementgroupsetstructure)")),r.a.createElement("div",null,pe.t(m.resourceTables.indicatorGroupSetStructure)," ",r.a.createElement("span",{className:ya.a.tableName},"(_indicatorgroupsetstructure)")),r.a.createElement("div",null,pe.t(m.resourceTables.organisationUnitGroupSetStructure)," ",r.a.createElement("span",{className:ya.a.tableName},"(_organisationunitgroupsetstructure)")),r.a.createElement("div",null,pe.t(m.resourceTables.categoryStructure)," ",r.a.createElement("span",{className:ya.a.tableName},"(_categorystructure)")),r.a.createElement("div",null,pe.t(m.resourceTables.dataElementCategoryOptionComboName)," ",r.a.createElement("span",{className:ya.a.tableName},"(_categoryoptioncomboname)")),r.a.createElement("div",null,pe.t(m.resourceTables.dataElementStructure)," ",r.a.createElement("span",{className:ya.a.tableName},"(_dataelementstructure)")),r.a.createElement("div",null,pe.t(m.resourceTables.periodStructure)," ",r.a.createElement("span",{className:ya.a.tableName},"(_periodstructure)")),r.a.createElement("div",null,pe.t(m.resourceTables.dataPeriodStructure)," ",r.a.createElement("span",{className:ya.a.tableName},"(_dateperiodstructure)")),r.a.createElement("div",null,pe.t(m.resourceTables.dataElementCategoryOptionCombinations)," ",r.a.createElement("span",{className:ya.a.tableName},"(_dataelementcategoryoptioncombo)"))),r.a.createElement(b.h,{id:"generateTablesBtnId",primary:!0,label:pe.t(m.resourceTables.actionButton),onClick:this.initResourceTablesGeneration,disabled:this.props.loading}))),(this.state.notifications||[]).length>0&&r.a.createElement(Te.Card,{className:fe.a.cardContainer},r.a.createElement(Te.CardText,null,r.a.createElement(C,{notifications:this.state.notifications,animateIncomplete:!0}))))}};const Ea=[{key:"dataIntegrity",path:"/data-integrity",component:Le,info:{label:m.dataIntegrity.label,icon:"link",description:m.dataIntegrity.description,actionText:m.dataIntegrity.actionText,docs:"dataAdmin_dataIntegrity"}},{key:"maintenance",path:"/maintenance",component:la,info:{label:m.maintenance.label,icon:"settings",description:m.maintenance.description,actionText:m.maintenance.actionText,docs:"data_admin_maintenance"}},{key:"resourceTables",path:"/resourceTables",component:Sa,info:{label:m.resourceTables.label,icon:"view_list",description:m.resourceTables.description,actionText:m.resourceTables.actionText,docs:"dataAdmin_resourceTables"}},{key:"analytics",path:"/analytics",component:Pe,info:{label:m.analytics.label,icon:"multiline_chart",description:m.analytics.description,actionText:m.analytics.actionText,docs:"generate_analytics_tables"}},{key:"statistics",path:"/data-statistics",component:Xe,info:{label:m.dataStatistics.label,icon:"timeline",description:m.dataStatistics.description,actionText:m.dataStatistics.actionText,docs:"dataAdmin_dataStatistics"}},{key:"lock",path:"/lock-exception",component:aa,info:{label:m.lockException.label,icon:"lock",description:m.lockException.description,actionText:m.lockException.actionText,docs:"dataAdmin_lockException"}},{key:"minMax",path:"/min-max-value-generation",component:ma,info:{label:m.minMaxValueGeneration.label,icon:"compare_arrows",description:m.minMaxValueGeneration.description,actionText:m.minMaxValueGeneration.actionText,docs:"dataAdmin_minMaxValueGeneration"}}],xa=e=>{var t;return(null===(t=Ea.find((t=>t.key===e)))||void 0===t?void 0:t.info.docs)||""};var va=a(927),fa=a.n(va);class Ca extends o.PureComponent{render(){return r.a.createElement(l.b,{to:this.props.section.path},r.a.createElement(sa.GridTile,{key:this.props.section.key,className:u()("section",fa.a.gridElement)},r.a.createElement("div",{className:u()("row",fa.a.gridTitleBar)},r.a.createElement("span",{className:u()("section-title",fa.a.gridTitleDescription)},this.props.section.info.label),r.a.createElement(st.a,{className:u()("material-icons","icon",fa.a.gridIcon)},this.props.section.info.icon)),r.a.createElement("span",{className:u()("section-description","row",fa.a.gridDescription)},pe.t(this.props.section.info.description)),r.a.createElement("span",{className:u()("section-action-text","row",fa.a.gridActionText)},pe.t(this.props.section.info.actionText))))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Ca,"propTypes",{section:T.a.shape({info:T.a.shape({actionText:T.a.string,description:T.a.string,icon:T.a.string,label:T.a.string}),key:T.a.string,path:T.a.string}).isRequired});var Pa=Ca,Ta=a(933),Ia=a.n(Ta);a(934);var Da=()=>{const e=Ea.map((e=>r.a.createElement("div",{key:e.key,className:u()("col-sm-12 col-md-6 col-lg-4",Ia.a.gridContainer)},r.a.createElement(Pa,{key:e.key,section:e}))));return r.a.createElement("div",{id:"grid-list-id",className:"row"},e)};var Na=()=>r.a.createElement(p.d,null,r.a.createElement(p.b,{exact:!0,path:"/",component:Da}),Ea.map((e=>r.a.createElement(p.b,{key:e.key,path:e.path,component:e.component}))),r.a.createElement(p.a,{from:"*",to:"/"})),Oa=a(935),Aa=a.n(Oa);const wa=({label:e,path:t})=>{const a=Object(p.g)(),n=!!Object(p.h)(t);return r.a.createElement(i.m,{className:Aa.a.sidebarItem,onClick:()=>a.push(t),active:n,label:e})};var Ra=()=>r.a.createElement(i.l,null,Ea.map((e=>r.a.createElement(wa,{key:e.key,label:e.info.label,path:e.path}))));var _a=a(312),Ma=a(342),Ua=a.n(Ma),La=a(343),Wa=a.n(La),ja=a(289);const Ga={spacing:Wa.a,fontFamily:"Roboto, sans-serif",palette:{primary1Color:"#004ba0",primary2Color:_a.blue700,primary3Color:_a.blue100,accent1Color:_a.orange500,accent2Color:_a.grey100,accent3Color:_a.orangeA200,textColor:_a.darkBlack,alternateTextColor:_a.white,canvasColor:_a.white,borderColor:_a.grey400,disabledColor:Object(ja.fade)(_a.darkBlack,.3)}};var Ba=Ua()(Ga);a(936);t.default=()=>{const{d2:e}=Object(n.a)();return Object(o.useEffect)((()=>{e&&(e=>{if(e){const t={},a=Object.keys(m.d2UiComponents);for(let e=0;e<a.length;e++){const n=a[e];t[n]=pe.t(m.d2UiComponents[n])}Object.assign(e.i18n.translations,t)}})(e)}),[e]),e?r.a.createElement(l.a,null,r.a.createElement(i.h,{spacers:!0,colors:!0}),r.a.createElement(s.MuiThemeProvider,{muiTheme:Ba},r.a.createElement("div",{className:d.a.container},r.a.createElement("div",{className:d.a.sidebar},r.a.createElement(Ra,null)),r.a.createElement("main",{className:d.a.content},r.a.createElement(Na,null))))):null}}}]);
//# sourceMappingURL=app.2963f1b1.chunk.js.map