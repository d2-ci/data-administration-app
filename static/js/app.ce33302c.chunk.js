(this["webpackJsonp@dhis2/app-shell"]=this["webpackJsonp@dhis2/app-shell"]||[]).push([[135],{417:function(e,t,a){e.exports={uppercase:"Page_uppercase__1jIso",gridContainer:"Page_gridContainer__-51DT",formControl:"Page_formControl__3fSiU",cardContainer:"Page_cardContainer__1Dt3b"}},513:function(e,t,a){e.exports={header:"DataStatistics_header__2TZYM",card:"DataStatistics_card__-usL2",maxWith:"DataStatistics_maxWith__eTiig",statisticsTable:"DataStatistics_statisticsTable__2Btwb"}},755:function(e){e.exports=JSON.parse('{"Data set":"\u062d\u0632\u0645\u0629 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a","Period":"\u0627\u0644\u0641\u062a\u0631\u0629 \u0627\u0644\u0632\u0645\u0646\u064a\u0629","Organisation unit":"\u0627\u0644\u0648\u062d\u062f\u0629 \u0627\u0644\u062a\u0646\u0638\u064a\u0645\u064a\u0629"}')},756:function(e){e.exports=JSON.parse("{}")},757:function(e){e.exports=JSON.parse('{"Data set":"","Period":"","Organisation unit":"\u0627\u0644\u0648\u062d\u062f\u0629 \u0627\u0644\u062a\u0646\u0638\u064a\u0645\u064a\u0629"}')},758:function(e){e.exports=JSON.parse("{}")},759:function(e){e.exports=JSON.parse("{}")},760:function(e){e.exports=JSON.parse('{"Data set":"","Period":"\u0645\u0627\u0648\u0629","Organisation unit":"\u064a\u0629\u0643\u0629\u064a \u0631\u064a\u0643\u062e\u0631\u0627\u0648"}')},761:function(e){e.exports=JSON.parse('{"Data set":"Datov\xe1 sada","Period":"Obdob\xed","Organisation unit":"Organiza\u010dn\xed jednotka"}')},762:function(e){e.exports=JSON.parse('{"Data set":"Data set","Period":"","Organisation unit":"Organisation unit"}')},763:function(e){e.exports=JSON.parse('{"Data set":"","Period":"","Organisation unit":""}')},764:function(e){e.exports=JSON.parse('{"Data set":"Set de Datos\\\\:","Period":"Periodo","Organisation unit":"Unidad organizativa"}')},765:function(e){e.exports=JSON.parse('{"Data set":"Ensemble de donn\xe9es","Period":"P\xe9riode","Organisation unit":"Unit\xe9 d\'organisation"}')},766:function(e){e.exports=JSON.parse('{"Data set":"Data set","Period":"Periode","Organisation unit":"Unit organisasi"}')},767:function(e){e.exports=JSON.parse('{"Data set":"Data set","Period":"\u1780\u17c6\u17a1\u17bb\u1784\u1796\u17c1\u179b","Organisation unit":"\u1795\u17d2\u1793\u17c2\u1780\u200b\u1793\u17c3\u200b\u17a2\u1784\u17d2\u1782\u1780\u17b6\u179a"}')},768:function(e){e.exports=JSON.parse('{"Data set":"Data set\\\\:","Period":"\u0e8a\u0ec8\u0ea7\u0e87\u0ec0\u0ea7\u0ea5\u0eb2","Organisation unit":"\u200b\u0eab\u0ebb\u0ea7\u200b\u0edc\u0ec8\u0ea7\u0e8d\u200b\u0e81\u0eb2\u0e99\u200b\u0e88\u0eb1\u0e94\u200b\u0e95\u0eb1\u0ec9\u0e87"}')},769:function(e){e.exports=JSON.parse("{}")},770:function(e){e.exports=JSON.parse('{"Data set":"Dataset","Period":"\u1021\u1001\u103b\u102d\u1014\u103a\u1000\u102c\u101c","Organisation unit":"Organisation unit"}')},771:function(e){e.exports=JSON.parse('{"Data set":"Datasett","Period":"Periode","Organisation unit":"Organisasjonsenhet"}')},772:function(e){e.exports=JSON.parse("{}")},773:function(e){e.exports=JSON.parse('{"Data set":"\u062f \u0645\u0627\u0644\u0648\u0645\u0627\u062a\u0648 (\u0689\u0627\u067c\u0627) \u067c\u0648\u0644\u06ab\u0647","Period":"\u062f\u0648\u0631\u0647","Organisation unit":"\u0648\u0627\u062d\u062f \u0633\u0627\u0632\u0645\u0627\u0646"}')},774:function(e){e.exports=JSON.parse('{"Data set":"\u062f \u0645\u0627\u0644\u0648\u0645\u0627\u062a\u0648 (\u0689\u0627\u067c\u0627) \u067c\u0648\u0644\u06ab\u0647","Period":"\u0645\u0639\u06cc\u0627\u062f","Organisation unit":"\u062f \u0633\u0627\u0632\u0645\u0627\u0646 \u0648\u0627\u062d\u062f"}')},775:function(e){e.exports=JSON.parse('{"Data set":"Ficha","Period":"Per\xedodo","Organisation unit":"Unidade organizacional"}')},776:function(e){e.exports=JSON.parse('{"Data set":"Conjunto de dados","Period":"Per\xedodo","Organisation unit":"Unidade organizacional"}')},777:function(e){e.exports=JSON.parse('{"Data set":"\u041d\u0430\u0431\u043e\u0440 \u0434\u0430\u043d\u043d\u044b\u0445","Period":"\u041f\u0435\u0440\u0438\u043e\u0434","Organisation unit":"\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0430\u044f \u0435\u0434\u0438\u043d\u0438\u0446\u0430"}')},778:function(e){e.exports=JSON.parse("{}")},779:function(e){e.exports=JSON.parse('{"Data set":"datam\xe4ngd","Period":"Period","Organisation unit":"Organisationsenhet"}')},780:function(e){e.exports=JSON.parse('{"Data set":"Pakote dadus","Period":"Per\xedodu","Organisation unit":"Unidade organizasional"}')},781:function(e){e.exports=JSON.parse('{"Data set":"\u041c\u0430\u04b7\u043c\u04ef\u0438 \u0438\u0442\u0442\u0438\u043b\u043e\u043e\u0442","Period":"\u0414\u0430\u0432\u0440\u0430","Organisation unit":"\u0412\u043e\u04b3\u0438\u0434\u0438 \u0441\u043e\u0445\u0442\u043e\u0440\u04e3"}')},782:function(e){e.exports=JSON.parse('{"Data set":"\u041d\u0430\u0431\u0456\u0440 \u0434\u0430\u043d\u0438\u0445","Period":"\u041f\u0435\u0440\u0456\u043e\u0434","Organisation unit":"\u041e\u0440\u0433\u0430\u043d\u0456\u0437\u0430\u0446\u0456\u0439\u043d\u0438\u0439 \u043f\u0456\u0434\u0440\u043e\u0437\u0434\u0456\u043b"}')},783:function(e){e.exports=JSON.parse('{"Data set":"\u0688\u06cc\u0679\u0627 \u0633\u06cc\u0679","Period":"\u0645\u062f\u062a","Organisation unit":"\u062a\u0646\u0638\u06cc\u0645 \u06cc\u0648\u0646\u0679"}')},784:function(e){e.exports=JSON.parse('{"Data set":"\u041c\u0430\u044a\u043b\u0443\u043c\u043e\u0442\u043b\u0430\u0440 \u0442\u045e\u043f\u043b\u0430\u043c\u0438","Period":"\u0414\u0430\u0432\u0440","Organisation unit":"\u0422\u0430\u0448\u043a\u0438\u043b\u0438\u0439 \u0431\u045e\u043b\u0438\u043c"}')},785:function(e){e.exports=JSON.parse('{"Data Administration":"\u041c\u0430\u044a\u043b\u0443\u043c\u043e\u0442\u043b\u0430\u0440\u043d\u0438 \u0431\u043e\u0448\u049b\u0430\u0440\u0438\u0448"}')},786:function(e){e.exports=JSON.parse('{"Data set":"Ma\u02bclumotlar to\u02bcplami","Period":"davr","Organisation unit":"\u0422\u0430\u0448\u043a\u0438\u043b\u0438\u0439 \u0431\u0438\u0440\u043b\u0438\u043a"}')},787:function(e){e.exports=JSON.parse('{"Data set":"T\u1eadp d\u1eef li\u1ec7u","Period":"Th\u1eddi \u0111i\u1ec3m","Organisation unit":"\u0110\u01a1n v\u1ecb"}')},788:function(e){e.exports=JSON.parse('{"Data set":"\u6570\u636e\u96c6","Period":"\u671f\u95f4","Organisation unit":"\u673a\u6784"}')},789:function(e){e.exports=JSON.parse('{"Data set":"\u6570\u636e\u96c6","Period":"\u5468\u671f","Organisation unit":"\u673a\u6784"}')},790:function(e,t,a){},791:function(e,t,a){e.exports={card:"DataIntegrityCard_card__KV-D9"}},792:function(e,t,a){e.exports={header:"DataIntegrity_header__1yaU5"}},921:function(e,t,a){e.exports={selectsContainer:"AddLockExceptionForm_selectsContainer__1FfO9",organisationUnitTreeContainer:"AddLockExceptionForm_organisationUnitTreeContainer__Qmc3a",left:"AddLockExceptionForm_left__3rBtP",right:"AddLockExceptionForm_right__3MHtt",ouLabel:"AddLockExceptionForm_ouLabel__2ajXK",organisationUnitTreeCard:"AddLockExceptionForm_organisationUnitTreeCard__308i8"}},923:function(e,t,a){},924:function(e,t,a){e.exports={pagination:"LockException_pagination__386cw",header:"LockException_header__3DHeL",lockExceptionsTable:"LockException_lockExceptionsTable__23sTj",headerContainer:"LockException_headerContainer__3IVXu",lockExceptionsTableHeader:"LockException_lockExceptionsTableHeader__2Prp0",lockExceptionDialog:"LockException_lockExceptionDialog__3Facz",actionButton:"LockException_actionButton__3hfk_",marginForAddButton:"LockException_marginForAddButton__3L837",backArrowIcon:"LockException_backArrowIcon__3o-BP",headerDivider:"LockException_headerDivider__98yTN",subHeader:"LockException_subHeader__3h-v4"}},925:function(e,t,a){e.exports={card:"MinMaxValueGeneration_card__3HhUq",header:"MinMaxValueGeneration_header__3aa-o",container:"MinMaxValueGeneration_container__1KXr1",label:"MinMaxValueGeneration_label__Zpg4R",left:"MinMaxValueGeneration_left___Z-17",right:"MinMaxValueGeneration_right__3Nvgn",tree:"MinMaxValueGeneration_tree__1LuaX",select:"MinMaxValueGeneration_select__3RB4a",options:"MinMaxValueGeneration_options__XH-P_",actionButton:"MinMaxValueGeneration_actionButton__3X2MH"}},926:function(e,t,a){e.exports={description:"ResourceTables_description__3ojib",tableName:"ResourceTables_tableName__3eEPw"}},927:function(e,t,a){e.exports={gridElement:"GridSection_gridElement__dFN30",gridTitleBar:"GridSection_gridTitleBar__iuWB9",gridTitleDescription:"GridSection_gridTitleDescription__OBU6O",gridIcon:"GridSection_gridIcon__1BcuZ",gridDescription:"GridSection_gridDescription__3BQ6R",gridActionText:"GridSection_gridActionText__2cTCc"}},933:function(e,t,a){e.exports={gridContainer:"Home_gridContainer__3mcNn"}},934:function(e,t,a){},935:function(e,t,a){e.exports={contentArea:"App_contentArea__2j2HG",contentWrapper:"App_contentWrapper__Hgvg2",leftBar:"App_leftBar__2dvPA",maxWith:"App_maxWith__1Prsh",centered:"App_centered__3iqgB"}},936:function(e,t,a){},997:function(e,t,a){"use strict";a.r(t);var n=a(938),i=a(7),s=a(570),o=a(0),r=a.n(o),l=a(338),c=a(6),d=a(647),p=a(994),h=a(290),u=a(754),g=a(1),m=a.n(g),b=a(276);const y={dataIntegrity:{title:"Data Integrity",label:"Data Integrity",description:"Run data integrity checks and unveil anomalies and problems in the meta data setup.",actionText:"Check Data Integrity",performing:"Performing data integrity checks...",unexpectedError:"An unexpected error happened during data integrity checks",actionButton:"RUN INTEGRITY CHECKS",dataElementsWithoutDataSet:{label:"Data elements without data set"},dataElementsWithoutGroups:{label:"Data elements without groups"},dataElementsViolatingExclusiveGroupSets:{label:"Data elements violating exclusive group sets"},dataElementsAssignedToDataSetsWithDifferentPeriodTypes:{label:"Data elements assigned to data sets with different period types"},dataSetsNotAssignedToOrganisationUnits:{label:"Data sets not assigned to organisation units"},indicatorsWithIdenticalFormulas:{label:"Indicators with identical formulas"},indicatorsWithoutGroups:{label:"Indicators without groups"},invalidIndicatorNumerators:{label:"Invalid indicator numerators"},invalidIndicatorDenominators:{label:"Invalid indicator denominators"},indicatorsViolatingExclusiveGroupSets:{label:"Indicators violating exclusive group sets"},organisationUnitsWithCyclicReferences:{label:"Organisation units with cyclic references"},orphanedOrganisationUnits:{label:"Orphaned organisation units"},organisationUnitsWithoutGroups:{label:"Organisation units without groups"},organisationUnitsViolatingExclusiveGroupSets:{label:"Organisation units violating exclusive group sets"},organisationUnitGroupsWithoutGroupSets:{label:"Organisation unit groups without group sets"},validationRulesWithoutGroups:{label:"Validation rules without groups"},invalidValidationRuleLeftSideExpressions:{label:"Invalid validation rule left side expressions"},invalidValidationRuleRightSideExpressions:{label:"Invalid validation rule right side expressions"},invalidProgramIndicatorExpressions:{label:"Invalid program indicator expressions"},invalidProgramIndicatorFilters:{label:"Invalid program indicator filters"},dataElementsInDataSetNotInForm:{label:"There are data elements in the form, but not in the form or sections"},invalidCategoryCombos:{label:"Invalid category combinations"},duplicatePeriods:{label:"Duplicate periods"},programRulesWithNoCondition:{label:"Program rules with no condition"},programRulesWithNoAction:{label:"Program rules with no action"},programRulesWithNoPriority:{label:"Program rules with no priority"},programRuleVariablesWithNoDataElement:{label:"Program rule variables with no data element"},programRuleVariablesWithNoAttribute:{label:"Program rule variables with no attribute"},programRuleActionsWithNoDataObject:{label:"Program rule actions with no data object"},programRuleActionsWithNoNotification:{label:"Program rule actions with no notification"},programRuleActionsWithNoSectionId:{label:"Program rule actions with no section id"},programRuleActionsWithNoStageId:{label:"Program rule actions with no stage id"},programIndicatorsWithNoExpression:{label:"Program indicators wit no expression"}},maintenance:{title:"Maintenance",label:"Maintenance",description:"Perform maintenance tasks and generate resource database tables for the organisation unit hierarchy and group set structure.",actionText:"Perform Maintenance",actionButton:"PERFORM MAINTENANCE",performing:"Performing Maintenance...",actionPerformed:"Maintenance done",unexpectedError:"An unexpected error happened during maintenance",analyticsTableClear:"Clear analytics tables",analyticsTableAnalyze:"Analyze analytics tables",zeroDataValueRemoval:"Remove zero data values",softDeletedDataValueRemoval:"Permanently remove soft deleted data values",softDeletedEventRemoval:"Permanently remove soft deleted events",softDeletedEnrollmentRemoval:"Permanently remove soft deleted enrollments",softDeletedTrackedEntityInstanceRemoval:"Permanently remove soft deleted tracked entity instances",periodPruning:"Prune periods",expiredInvitationsClear:"Remove expired invitations",sqlViewsDrop:"Drop SQL views",sqlViewsCreate:"Create SQL views",categoryOptionComboUpdate:"Update category option combinations",ouPathsUpdate:"Update organisation unit paths",cacheClear:"Clear application cache",appReload:"Reload apps"},resourceTables:{title:"Resource Tables",label:"Resource Tables",description:"Generate resource database tables for the organisation unit hierarchy and group set structure among others.",actionText:"Generate Resource Tables",actionButton:"GENERATE TABLES",actionPerformed:"Resource Tables generated",unexpectedError:"An unexpected error happened during operation",organisationUnitStructure:"Organisation unit structure",organistionUnitCategoryOptionCombo:"Organisation unit category option combo",categoryOptionGroupSetStructure:"Category option group set structure",dataElementGroupSetStructure:"Data element group set structure",indicatorGroupSetStructure:"Indicator group set structure",organisationUnitGroupSetStructure:"Organisation unit group set structure",categoryStructure:"Category structure",dataElementCategoryOptionComboName:"Data element category option combo name",dataElementStructure:"Data element structure",periodStructure:"Period structure",dataPeriodStructure:"Date period structure",dataElementCategoryOptionCombinations:"Data element category option combinations"},dataStatistics:{title:"Data Statistics",label:"Data Statistics",description:"Browse the number of objects in the database, like data elements, indicators, data sets and data values.",actionText:"Overview Data Statistics",loadingMessage:"Loading Data Statistics...",errorMessage:"It was not possible to load Data Statistics",noDataMessage:"No data to show.",objectType:"Object type",lastHour:"Last hour",today:"Today",last:"Last",days:"days",usersLoggedIn:"Users logged in",userAccountInvitations:"User account invitations",pedingInvitations:"Pending invitations",expiredInvitations:"Expired invitations",dataValues:"Data values",events:"Events",objects:{indicator:"Indicators",period:"Periods",programStageInstance:"Events",organisationUnit:"Organisation units",validationRule:"Validation rules",dataValue:"Data values",program:"Programs",dataElement:"Data elements",organisationUnitGroup:"Organisation unit groups",reportTable:"Pivot tables",indicatorType:"Indicator types",dataSet:"Data sets",userGroup:"User groups",user:"Users",map:"Maps",indicatorGroup:"Indicator groups",chart:"Charts",dataElementGroup:"Data element groups",dashboard:"Dashboards"}},lockException:{title:"Lock Exception Management",batchDeletionHeader:"Lock Exception",batchDeletionSubHeader:"Batch Deletion",addLockExceptionFormTitle:"Add new lock exception",label:"Lock Exception",description:"Add or remove exceptions to the the standard rules for locking of data entry forms.",actionText:"Lock Exception Management",actionButton:"BATCH DELETION",cancelButton:"CANCEL",addButton:"ADD",noDataMessage:"No data to show.",loadingMessage:"Loading Lock Exceptions...",addingMessage:"Adding Lock Exception...",removedMessage:"Lock Exception removed",addedMessage:"Lock Exception Added",confirmDeleteMessage:"Are you sure?",confirmButton:"CONFIRM",selectADataSet:"Select a Data Set",updatingTree:"Updating Organisation Units Tree...",organisationUnitsWithin:"For organisation units within",period:"Period",dataSet:"Data Set",organisationUnit:"Organisation Unit",organisationUnitGroup:"Organisation Unit Group",organisationUnitLevel:"Organisation Unit Level",select:"Select",deselect:"Deselect",selectAll:"Select All Org Units",deselectAll:"Deselect All Org Units",name:"Name",show:"Show Details",remove:"Remove",actions:"Actions",ofPage:"of",week:"week",month:"month",year:"year",biMonth:"bi monthly",day:"day",jan:"jan",feb:"feb",mar:"mar",apr:"apr",may:"may",jun:"jun",jul:"jul",aug:"aug",sep:"sep",oct:"oct",nov:"nov",dec:"dec",janFeb:"jan-feb",marApr:"mar-apr",mayJun:"may-jun",julAug:"jul-aug",sepOct:"sep-oct",novDec:"nov-dec",quarter:"quarter",Q1:"Q1",Q2:"Q2",Q3:"Q3",Q4:"Q4",sixMonth:"six monthly",janJun:"jan-jun",julDec:"jul-dec",aprSep:"apr-sep",octMar:"oct-mar",selectOrganisationUnits:"For all organisation units:"},minMaxValueGeneration:{title:"Min-Max Value Generation",label:"Min-Max Value Generation",description:"Generate min-max values which can be used for data validation during data entry and validation processes.",actionText:"Generate Min-Max Value",notPossibleToLoadMessage:"It was not possible to load data",performingMessage:"Doing Min Max generation...",removingMessage:"Removing Min Max generation...",minMaxGenerationDone:"Min Max generation done",minMaxRemovalDone:"Min Max removal done",dataSet:"Data Set",loadingDataSetsMessage:"Loading data sets",organisationUnitSelect:"Organisation Unit Selection",updatingTree:"Updating Organisation Units Tree...",actionButton:"Generate",removeButton:"Remove"},analytics:{title:"Analytics tables management",label:"Analytics Tables",description:"The data mart is a set of tables in the DHIS database which is used by all reporting and analysis tools to retrieve data from. ",actionText:"Analytics tables update",actionButton:"START EXPORT",skipAggregate:"Skip generation of aggregate data and completeness data",skipResourceTables:"Skip generation of resource tables",skipEvents:"Skip generation of event data",skipEnrollment:"Skip generation of enrollment data",analyticsTablesUpdateHeader:"Analytics Tables Update",lastYearsLabel:"Number of last years of data to include",allLastYears:"[ All ]",unexpectedError:"An unexpected error happened during maintenance"},messages:{unexpectedError:"An unexpected error happened during operation"},d2UiComponents:{settings:"Settings",app_search_placeholder:"Search apps",profile:"Profile",account:"Account",help:"Help",log_out:"Log out",about_dhis2:"About DHIS 2",manage_my_apps:"Manage my apps",no_results_found:"No results found",interpretations:"Interpretations",messages:"Messages"}};var k=a(755),S=a(756),E=a(757),x=a(758),f=a(759),v=a(760),C=a(761),P=a(762),T=a(763),I=a(764),D=a(765),N=a(766),O=a(767),A=a(768),w=a(769),R=a(770),_=a(771),M=a(772),U=a(773),W=a(774),L=a(775),j=a(776),G=a(777),B=a(778),F=a(779),V=a(780),q=a(781),J=a(782),Y=a(783),z=a(784),Q=a(785),H=a(786),K=a(787),X=a(788),Z=a(789);const $="default";c.a.addResources("ar",$,k),c.a.addResources("ar_EG",$,S),c.a.addResources("ar_IQ",$,E),c.a.addResources("ar_SD",$,x),c.a.addResources("bn",$,f),c.a.addResources("ckb",$,v),c.a.addResources("cs",$,C),c.a.addResources("da",$,P),c.a.addResources("en",$,T),c.a.addResources("es",$,I),c.a.addResources("fr",$,D),c.a.addResources("id",$,N),c.a.addResources("km",$,O),c.a.addResources("lo",$,A),c.a.addResources("mn",$,w),c.a.addResources("my",$,R),c.a.addResources("nb",$,_),c.a.addResources("ne",$,M),c.a.addResources("prs",$,U),c.a.addResources("ps",$,W),c.a.addResources("pt",$,L),c.a.addResources("pt_BR",$,j),c.a.addResources("ru",$,G),c.a.addResources("rw",$,B),c.a.addResources("sv",$,F),c.a.addResources("tet",$,V),c.a.addResources("tg",$,q),c.a.addResources("uk",$,J),c.a.addResources("ur",$,Y),c.a.addResources("uz",$,z),c.a.addResources("uz_Cyrl",$,Q),c.a.addResources("uz_Latn",$,H),c.a.addResources("vi",$,K),c.a.addResources("zh",$,X),c.a.addResources("zh_CN",$,Z);var ee=c.a;var te=a(5),ae=a.n(te),ne=a(297);const ie="#8ac542",se="#000000",oe="#ff0000",re="check",le={iconStyle:{fontSize:14},rowStyle:{fontSize:14,height:48},evenRowStyle:{backgroundColor:"#fafafa"},timeColumnStyle:{width:"20%"},messageColumnStyle:{width:"80%"},successStyle:{color:ie,iconColor:ie,fontWeight:"bold"},errorStyle:{color:oe,iconColor:oe,fontWeight:"bold"},infoStyle:{color:se,iconColor:ie}},ce={};ce.SUCCESS={color:ie,icon:re,row:Object.assign({},le.rowStyle,le.successStyle)},ce.ERROR={color:oe,icon:"error",row:Object.assign({},le.rowStyle,le.errorStyle)},ce.INFO={color:se,icon:re,iconColor:ie,row:Object.assign({},le.rowStyle,le.infoStyle)};const de=ce;a(790);var pe=({notifications:e,animateIncomplete:t})=>{const a=(e,a)=>{return r.a.createElement(ne.n,{key:a,displayBorder:!1,style:Object.assign({},de[e.level].row,(a+1)%2===0?le.evenRowStyle:{})},r.a.createElement(ne.o,{style:le.timeColumnStyle},(n=e.time)?"".concat(n.slice(0,10)," ").concat(n.slice(11,19)):""),r.a.createElement(ne.o,{style:le.messageColumnStyle},e.message," ",(e=>{const a=de[e.level];return a&&a.icon&&e.completed?r.a.createElement(ne.e,{className:"material-icons",style:le.iconStyle,color:a.iconColor},a.icon):t&&!e.completed?r.a.createElement("span",{className:"notification-icon-busy"},"..."):null})(e)));var n};return e&&e.length>0?r.a.createElement(ne.l,{selectable:!1},r.a.createElement(ne.m,{displayRowCheckbox:!1},e.map(a))):null};const he=({major:e,minor:t,snapshot:a})=>a?"master":"".concat(e,".").concat(t);function ue(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ge extends o.PureComponent{render(){const{d2:e}=this.context,{lng:t,sectionDocsKey:a}=this.props;return r.a.createElement(ne.g,{className:"helper-icon",iconStyle:{color:"#276696"},href:"".concat("https://docs.dhis2.org","/").concat(he(e.system.version),"/").concat(t,"/user/html/").concat(a,".html"),target:"_blank",rel:"noopener noreferrer",tooltip:ee.t("Open user guide"),tooltipPosition:"bottom-center",iconClassName:"material-icons"},"help")}}ue(ge,"propTypes",{sectionDocsKey:m.a.string.isRequired,lng:m.a.string}),ue(ge,"defaultProps",{lng:"en"}),ue(ge,"contextTypes",{d2:m.a.object});var me=ge;const be="system/tasks/ANALYTICS_TABLE",ye=[{key:-1,value:-1,displayName:y.analytics.allLastYears}];for(let Qa=1;Qa<=10;Qa++)ye.push({key:Qa,value:Qa,displayName:Qa});const ke=ye,Se=[{key:"skipAggregate",label:y.analytics.skipAggregate},{key:"skipResourceTables",label:y.analytics.skipResourceTables},{key:"skipEvents",label:y.analytics.skipEvents},{key:"skipEnrollment",label:y.analytics.skipEnrollment}];function Ee(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class xe extends o.Component{UNSAFE_componentWillMount(){this.pageMounted=!0,this.context.currentSection!==this.props.sectionKey&&this.context.updateAppState({currentSection:this.props.sectionKey})}componentWillUnmount(){this.pageMounted=!1}isPageMounted(){return this.pageMounted}}Ee(xe,"propTypes",{sectionKey:m.a.string.isRequired}),Ee(xe,"contextTypes",{d2:m.a.object,loading:m.a.bool,currentSection:m.a.string,updateAppState:m.a.func});var fe=xe,ve=a(417),Ce=a.n(ve);function Pe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Te=class extends fe{constructor(){super(),Pe(this,"startTaskProgressPolling",(()=>{this.intervalId=setInterval((()=>{this.requestTaskProgress()}),5e3)})),Pe(this,"initAnalyticsTablesGeneration",(()=>{const e=this.context.d2.Api.getApi(),t=this.buildFormData();this.setLoadingPageState(),e.post("resourceTables/analytics",t).then((({response:e})=>{this.isPageMounted()&&e&&this.setState({taskId:e.id},this.startTaskProgressPolling)})).catch((e=>{this.isPageMounted()&&this.setLoadedPageWithErrorState(e)}))})),Pe(this,"requestTaskProgress",(()=>{this.context.d2.Api.getApi().get("".concat(be,"/").concat(this.state.taskId)).then((e=>{this.isTaskCompleted(e)&&(this.stopTaskProgressPolling(),this.unsetLoadingPageState()),this.setState({notifications:this.getUpdatedNotifications(e)})})).catch((e=>{this.isPageMounted()&&this.setLoadedPageWithErrorState(e)}))})),Pe(this,"onChangeLastYears",((e,t,a)=>{this.setState({lastYears:a})})),Pe(this,"toggleCheckbox",((e,t)=>()=>{const a=Object.assign({},e),n=a[t].checked;a[t].checked=!n,this.setState({checkboxes:a})})),Pe(this,"renderCheckbox",(e=>r.a.createElement(ne.f,{key:e.key,className:ae()("col-xs-12 col-md-6",Ce.a.formControl)},r.a.createElement(ne.c,{label:ee.t(e.label),checked:this.state.checkboxes[e.key].checked,onCheck:this.toggleCheckbox(this.state.checkboxes,e.key),labelStyle:{color:"#000000"},iconStyle:{fill:"#000000"},disabled:this.areActionsDisabled()}))));const e={};for(let t=0;t<Se.length;t++){e[Se[t].key]={checked:!1}}this.state={checkboxes:e,lastYears:-1,taskId:null,notifications:[]},this.intervalId=null}componentDidMount(){this.requestTaskSummary()}componentWillUnmount(){super.componentWillUnmount(),this.stopTaskProgressPolling()}stopTaskProgressPolling(){clearInterval(this.intervalId),this.intervalId=null}setLoadingPageState(){this.setState({notifications:[]}),this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:h.c},pageState:{loading:!0}})}unsetLoadingPageState(){this.context.updateAppState({showSnackbar:!1,snackbarConf:{type:h.c},pageState:{loading:!1}})}setLoadedPageWithErrorState(e){console.error(e);const t=e&&e.message?e.message:ee.t(y.analytics.unexpectedError);this.stopTaskProgressPolling(),this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:h.b,message:t},pageState:{loading:!1}})}requestTaskSummary(){this.context.d2.Api.getApi().get(be).then((e=>{if(!this.isPageMounted())return;const t=this.getActiveTaskIdFromSummary(e);t&&(this.setLoadingPageState(),this.setState({taskId:t,notifications:this.getUpdatedNotifications(e[t])},this.startTaskProgressPolling))})).catch((e=>{this.isPageMounted()&&this.setLoadedPageWithErrorState(e)}))}getUpdatedNotifications(e=[]){if(e.length<=this.state.notifications.length)return this.state.notifications;const t=e.length-1;return e.reverse().map(((e,a)=>({...e,completed:e.completed||a<t})))}getActiveTaskIdFromSummary(e){const{taskId:t}=Object.entries(e).reduce(((e,[t,a])=>{const n=a[a.length-1],i=new Date(n.time);return!this.isTaskCompleted(a)&&i>e.time?{taskId:t,time:i}:e}),{taskId:null,time:new Date(0)});return t}isTaskCompleted(e){return e[0].completed}areActionsDisabled(){return this.props.loading}buildFormData(){let e=null;const t=Object.keys(this.state.checkboxes);for(let a=0;a<t.length;a++){const n=t[a],i=this.state.checkboxes[n].checked;e=e||new FormData,e.append(n,i)}return-1!==this.state.lastYears&&e.append("lastYears",this.state.lastYears),e}render(){const e=Se.map(this.renderCheckbox);return r.a.createElement("div",null,r.a.createElement("h1",null,ee.t(y.analytics.title),r.a.createElement(me,{sectionDocsKey:fa(this.props.sectionKey)})),r.a.createElement(ne.a,{className:Ce.a.cardContainer},r.a.createElement(ne.b,null,r.a.createElement("h4",{className:Ce.a.uppercase},y.analytics.analyticsTablesUpdateHeader),r.a.createElement("div",{className:ae()(Ce.a.gridContainer,"row")},e,r.a.createElement(ne.j,{disabled:this.areActionsDisabled(),className:"col-xs-12 col-md-6",floatingLabelText:ee.t(y.analytics.lastYearsLabel),onChange:this.onChangeLastYears,value:this.state.lastYears,fullWidth:!0},ke.map((e=>r.a.createElement(ne.h,{key:e.key,value:e.value,primaryText:ee.t(e.displayName)}))))),r.a.createElement(ne.i,{id:"startExportBtnId",primary:!0,label:ee.t(y.analytics.actionButton),onClick:this.initAnalyticsTablesGeneration,disabled:this.areActionsDisabled()}))),(this.state.notifications||[]).length>0&&r.a.createElement(ne.a,{className:Ce.a.cardContainer},r.a.createElement(ne.b,null,r.a.createElement(pe,{notifications:this.state.notifications,animateIncomplete:!0}))))}},Ie=a(307),De=a(791),Ne=a.n(De);function Oe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Ae={errorColor:"#ff5722",noErrorColor:"#1c9d17",titleStyle:{fontSize:14,fontWeight:"normal"},iconStyle:{color:"#1c9d17",cursor:"auto"},noPaddingTop:{paddingTop:0}};class we extends o.PureComponent{render(){let e=!0,t=Ae.errorColor,a="keyboard_arrow_down",n="keyboard_arrow_up",i=null;Array.isArray(this.props.content)?this.props.content.length?i=r.a.createElement(Ie.CardText,{style:Ae.noPaddingTop,expandable:e},r.a.createElement("div",{id:"elementDescription"},this.props.content.map((e=>r.a.createElement("p",{key:e},Array.isArray(e)?e.join(", "):e))))):(e=!1,t=Ae.noErrorColor,a="done",n="done"):i=r.a.createElement(Ie.CardText,{style:Ae.noPaddingTop,expandable:e},r.a.createElement("div",{id:"elementDescription"},Object.keys(this.props.content).map((e=>r.a.createElement("span",{key:e},r.a.createElement("h4",null,e),r.a.createElement("p",null,Array.isArray(this.props.content[e])?this.props.content[e].join(", "):this.props.content[e]))))));const s=r.a.createElement(ne.e,{className:"material-icons"},a),o=r.a.createElement(ne.e,{className:"material-icons"},n);return r.a.createElement(Ie.Card,{id:this.props.cardId,className:Ne.a.card},r.a.createElement(Ie.CardHeader,{title:ee.t(this.props.title),titleColor:t,titleStyle:Ae.titleStyle,actAsExpander:e,showExpandableButton:!0,closeIcon:s,openIcon:o,iconStyle:e?{}:Ae.iconStyle}),i)}}Oe(we,"propTypes",{cardId:m.a.string.isRequired,title:m.a.string.isRequired,content:m.a.oneOfType([m.a.array,m.a.object])}),Oe(we,"defaultProps",{content:[]});var Re=we;const _e=y.dataIntegrity.title,Me=[{key:"dataElementsWithoutDataSet",label:y.dataIntegrity.dataElementsWithoutDataSet.label,text:y.dataIntegrity.dataElementsWithoutDataSet.text},{key:"dataElementsWithoutGroups",label:y.dataIntegrity.dataElementsWithoutGroups.label,text:y.dataIntegrity.dataElementsWithoutGroups.text},{key:"dataElementsViolatingExclusiveGroupSets",label:y.dataIntegrity.dataElementsViolatingExclusiveGroupSets.label,text:y.dataIntegrity.dataElementsViolatingExclusiveGroupSets.label},{key:"dataElementsAssignedToDataSetsWithDifferentPeriodTypes",label:y.dataIntegrity.dataElementsAssignedToDataSetsWithDifferentPeriodTypes.label,text:y.dataIntegrity.dataElementsAssignedToDataSetsWithDifferentPeriodTypes.text},{key:"dataSetsNotAssignedToOrganisationUnits",label:y.dataIntegrity.dataSetsNotAssignedToOrganisationUnits.label,text:y.dataIntegrity.dataSetsNotAssignedToOrganisationUnits.text},{key:"indicatorsWithIdenticalFormulas",label:y.dataIntegrity.indicatorsWithIdenticalFormulas.label,text:y.dataIntegrity.indicatorsWithIdenticalFormulas.text},{key:"indicatorsWithoutGroups",label:y.dataIntegrity.indicatorsWithoutGroups.label,text:y.dataIntegrity.indicatorsWithoutGroups.text},{key:"invalidIndicatorNumerators",label:y.dataIntegrity.invalidIndicatorNumerators.label,text:y.dataIntegrity.invalidIndicatorNumerators.text},{key:"invalidIndicatorDenominators",label:y.dataIntegrity.invalidIndicatorDenominators.label,text:y.dataIntegrity.invalidIndicatorDenominators.text},{key:"indicatorsViolatingExclusiveGroupSets",label:y.dataIntegrity.indicatorsViolatingExclusiveGroupSets.label,text:y.dataIntegrity.indicatorsViolatingExclusiveGroupSets.text},{key:"organisationUnitsWithCyclicReferences",label:y.dataIntegrity.organisationUnitsWithCyclicReferences.label,text:y.dataIntegrity.organisationUnitsWithCyclicReferences.text},{key:"orphanedOrganisationUnits",label:y.dataIntegrity.orphanedOrganisationUnits.label,text:y.dataIntegrity.orphanedOrganisationUnits.text},{key:"organisationUnitsWithoutGroups",label:y.dataIntegrity.organisationUnitsWithoutGroups.label,text:y.dataIntegrity.organisationUnitsWithoutGroups.text},{key:"organisationUnitsViolatingExclusiveGroupSets",label:y.dataIntegrity.organisationUnitsViolatingExclusiveGroupSets.label,text:y.dataIntegrity.organisationUnitsViolatingExclusiveGroupSets.text},{key:"organisationUnitGroupsWithoutGroupSets",label:y.dataIntegrity.organisationUnitGroupsWithoutGroupSets.label,text:y.dataIntegrity.organisationUnitGroupsWithoutGroupSets.text},{key:"validationRulesWithoutGroups",label:y.dataIntegrity.validationRulesWithoutGroups.label,text:y.dataIntegrity.validationRulesWithoutGroups.text},{key:"invalidValidationRuleLeftSideExpressions",label:y.dataIntegrity.invalidValidationRuleLeftSideExpressions.label,text:y.dataIntegrity.invalidValidationRuleLeftSideExpressions.text},{key:"invalidValidationRuleRightSideExpressions",label:y.dataIntegrity.invalidValidationRuleRightSideExpressions.label,text:y.dataIntegrity.invalidValidationRuleRightSideExpressions.text},{key:"invalidProgramIndicatorExpressions",label:y.dataIntegrity.invalidProgramIndicatorExpressions.label},{key:"invalidProgramIndicatorFilters",label:y.dataIntegrity.invalidProgramIndicatorFilters.label},{key:"dataElementsInDataSetNotInForm",label:y.dataIntegrity.dataElementsInDataSetNotInForm.label},{key:"invalidCategoryCombos",label:y.dataIntegrity.invalidCategoryCombos.label},{key:"duplicatePeriods",label:y.dataIntegrity.duplicatePeriods.label},{key:"programRulesWithNoCondition",label:y.dataIntegrity.programRulesWithNoCondition.label},{key:"programRulesWithNoAction",label:y.dataIntegrity.programRulesWithNoAction.label},{key:"programRulesWithNoPriority",label:y.dataIntegrity.programRulesWithNoPriority.label},{key:"programRuleVariablesWithNoDataElement",label:y.dataIntegrity.programRuleVariablesWithNoDataElement.label},{key:"programRuleVariablesWithNoAttribute",label:y.dataIntegrity.programRuleVariablesWithNoAttribute.label},{key:"programRuleActionsWithNoDataObject",label:y.dataIntegrity.programRuleActionsWithNoDataObject.label},{key:"programRuleActionsWithNoNotification",label:y.dataIntegrity.programRuleActionsWithNoNotification.label},{key:"programRuleActionsWithNoSectionId",label:y.dataIntegrity.programRuleActionsWithNoSectionId.label},{key:"programRuleActionsWithNoStageId",label:y.dataIntegrity.programRuleActionsWithNoStageId.label},{key:"programIndicatorsWithNoExpression",label:y.dataIntegrity.programIndicatorsWithNoExpression.label}];var Ue=a(792),We=a.n(Ue);var Le=class extends fe{constructor(...e){var t,a,n;super(...e),n=()=>{const e=this.context.d2.Api.getApi();this.setLoadingPageState(),e.post("dataIntegrity").then((e=>{if(this.isPageMounted()&&e){const t=e.response.id;this.intervalId=setInterval((()=>{this.requestTaskSummary(t)}),5e3)}})).catch((e=>{this.isPageMounted()&&this.setLoadedPageWithErrorState(e)}))},(a="initDataIntegrityCheck")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n}componentWillUnmount(){super.componentWillUnmount(),this.cancelPullingRequests()}cancelPullingRequests(){this.intervalId&&clearInterval(this.intervalId)}setLoadingPageState(){this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:h.c,message:ee.t(y.dataIntegrity.performing)},currentSection:this.props.sectionKey,pageState:{loaded:!1,loading:!0}})}setLoadedPageWithErrorState(e){const t=e&&e.message?e.message:ee.t(y.dataIntegrity.unexpectedError);this.cancelPullingRequests(),this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:h.b,message:t},currentSection:this.props.sectionKey,pageState:{loaded:!0,loading:!1}})}requestTaskSummary(e){const t=this.context.d2.Api.getApi(),a="".concat("system/taskSummaries/DATA_INTEGRITY","/").concat(e);t.get(a).then((e=>{this.isPageMounted()&&e&&(this.cancelPullingRequests(),this.context.updateAppState({showSnackbar:!1,currentSection:this.props.sectionKey,pageState:{loaded:!0,cards:e,loading:!1}}))})).catch((e=>{this.isPageMounted()&&this.setLoadedPageWithErrorState(e)}))}render(){const e=r.a.createElement(ne.i,{id:"runDataIntegrityChecksBtnId",label:ee.t(y.dataIntegrity.actionButton),onClick:this.initDataIntegrityCheck,primary:!0,disabled:this.props.loading});let t=[];if(this.props.cards){const e=Object.keys(this.props.cards);if(t=e.map((e=>{const t=Me.find((t=>t.key===e));return t?r.a.createElement(Re,{cardId:"errorElement-".concat(e),key:e,title:t.label,content:this.props.cards[e]}):null})),this.props.loaded){const a=Me.filter((t=>e.indexOf(t.key)<0)).map((e=>r.a.createElement(Re,{cardId:"noErrorElement-".concat(e.key),key:e.key,title:e.label,content:[]})));t.push(a)}}return r.a.createElement("div",null,r.a.createElement("h1",{className:We.a.header},ee.t(_e),r.a.createElement(me,{sectionDocsKey:fa(this.props.sectionKey)})),t&&t.length>0?t:e)}},je=a(513),Ge=a.n(je),Be=a(409);var Fe,Ve,qe,Je=e=>r.a.createElement("span",null,new Intl.NumberFormat(c.a.language).format(e.value));class Ye extends o.PureComponent{render(){const e=this.props.elements.map((e=>r.a.createElement(Be.TableRow,{key:e.label,className:"data-statistics-table-row"},r.a.createElement(Be.TableRowColumn,null,e.label),r.a.createElement(Be.TableRowColumn,null,r.a.createElement(Je,{value:e.count})))));return r.a.createElement(Be.Table,{selectable:!1,className:Ge.a.statisticsTable},r.a.createElement(Be.TableHeader,{className:"data-statistics-table-header",displaySelectAll:!1,adjustForCheckbox:!1,enableSelectAll:!1},r.a.createElement(Be.TableRow,null,r.a.createElement(Be.TableHeaderColumn,null,this.props.label))),r.a.createElement(Be.TableBody,{displayRowCheckbox:!1,stripedRows:!1},e))}}Fe=Ye,Ve="propTypes",qe={elements:m.a.array.isRequired,label:m.a.string.isRequired},Ve in Fe?Object.defineProperty(Fe,Ve,{value:qe,enumerable:!0,configurable:!0,writable:!0}):Fe[Ve]=qe;var ze=Ye;function Qe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const He="expired",Ke=({label:e,elements:t})=>r.a.createElement(Ie.Card,{className:ae()(Ge.a.card,"data-statistics-table")},r.a.createElement(ze,{label:e,elements:t}));class Xe extends fe{constructor(...e){super(...e),Qe(this,"hasTables",(()=>this.props.tables&&this.props.tables.constructor===Object&&Object.keys(this.props.tables).length>0))}componentDidMount(){this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:h.c,message:ee.t(y.dataStatistics.loadingMessage)},pageState:{loaded:!1,tables:{},loading:!0}});this.context.d2.Api.getApi().get("dataSummary").then((e=>{if(this.isPageMounted()){const t={};t.objectCounts=Xe.objectCountsTableObjectToShowFromServerResponse(e.objectCounts),t.activeUsers=Xe.activeUsersTableObjectToShowFromServerResponse(e.activeUsers),t.userInvitations=Xe.userInvitationsTableObjectToShowFromServerResponse(e.userInvitations),t.dataValueCount=Xe.dataValueCountsTableObjectToShowFromServerResponse(e.dataValueCount),t.eventCount=Xe.eventCountsTableObjectToShowFromServerResponse(e.eventCount),this.context.updateAppState({showSnackbar:!1,pageState:{loaded:!0,tables:t,loading:!1}})}})).catch((()=>{this.isPageMounted()&&this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:h.b,message:ee.t(y.dataStatistics.errorMessage)},pageState:{loaded:!0,tables:{},loading:!1}})}))}render(){const e=r.a.createElement(Ie.Card,{style:{display:this.props.loading?"none":"block"}},r.a.createElement(Ie.CardText,null,ee.t(y.dataStatistics.noDataMessage)));return r.a.createElement("div",null,r.a.createElement("h1",{className:Ge.a.header},ee.t(y.dataStatistics.title),r.a.createElement(me,{sectionDocsKey:fa(this.props.sectionKey)})),this.hasTables()?r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},this.props.tables.objectCounts&&r.a.createElement(Ke,{label:this.props.tables.objectCounts.label,elements:this.props.tables.objectCounts.elements}),this.props.tables.activeUsers&&r.a.createElement(Ke,{label:this.props.tables.activeUsers.label,elements:this.props.tables.activeUsers.elements})),r.a.createElement("div",{className:"col-md-6"},this.props.tables.userInvitations&&r.a.createElement(Ke,{label:this.props.tables.userInvitations.label,elements:this.props.tables.userInvitations.elements}),this.props.tables.dataValueCount&&r.a.createElement(Ke,{label:this.props.tables.dataValueCount.label,elements:this.props.tables.dataValueCount.elements}),this.props.tables.eventCount&&r.a.createElement(Ke,{label:this.props.tables.eventCount.label,elements:this.props.tables.eventCount.elements}))):e)}}Qe(Xe,"objectCountsTableObjectToShowFromServerResponse",(e=>{if(e){const t=Object.keys(e),a={label:ee.t(y.dataStatistics.objectType),elements:[]};for(let n=0;n<t.length;n++){const i=t[n];a.elements.push({label:ee.t(y.dataStatistics.objects[i]),count:e[i]})}return a}return{}})),Qe(Xe,"translatedTimeLabelFromIntProperty",(e=>{let t=ee.t(y.dataStatistics.lastHour);if(1===e)t=ee.t(y.dataStatistics.today);else if(e>0){const a=ee.t(y.dataStatistics.last),n=ee.t(y.dataStatistics.days);t="".concat(a," ").concat(e," ").concat(n)}return t})),Qe(Xe,"activeUsersTableObjectToShowFromServerResponse",(e=>{if(e){const t=Object.keys(e),a={label:ee.t(y.dataStatistics.usersLoggedIn),elements:[]};for(let n=0;n<t.length;n++){const i=t[n];a.elements.push({label:Xe.translatedTimeLabelFromIntProperty(parseInt(i,10)),count:e[i]})}return a}return{}})),Qe(Xe,"userInvitationsTableObjectToShowFromServerResponse",(e=>{if(e){const t={label:ee.t(y.dataStatistics.userAccountInvitations),elements:[]};return Object.hasOwnProperty.call(e,"all")&&t.elements.push({label:ee.t(y.dataStatistics.pedingInvitations),count:e.all}),Object.hasOwnProperty.call(e,He)&&t.elements.push({label:ee.t(y.dataStatistics.expiredInvitations),count:e.expired}),t}return{}})),Qe(Xe,"dataValueCountsTableObjectToShowFromServerResponse",(e=>{if(e){const t=Object.keys(e),a={label:ee.t(y.dataStatistics.dataValues),elements:[]};for(let n=0;n<t.length;n++){const i=t[n];a.elements.push({label:Xe.translatedTimeLabelFromIntProperty(parseInt(i,10)),count:e[i]})}return a}return{}})),Qe(Xe,"eventCountsTableObjectToShowFromServerResponse",(e=>{if(e){const t=Object.keys(e),a={label:ee.t(y.dataStatistics.events),elements:[]};for(let n=0;n<t.length;n++){const i=t[n];a.elements.push({label:Xe.translatedTimeLabelFromIntProperty(parseInt(i,10)),count:e[i]})}return a}return{}}));var Ze=Xe,$e=a(329),et=a.n($e),tt=a(318),at=a.n(tt),nt=a(400),it=a.n(nt),st=a(299),ot=a.n(st),rt=a(298),lt=a.n(rt),ct=a(351),dt=a.n(ct),pt=a(793),ht=a.n(pt),ut=a(794),gt=a(795),mt=a(796),bt=a(995),yt=a(488),kt=a.n(yt),St=a(349),Et=a.n(St),xt=a(921),ft=a.n(xt),vt=a(402),Ct=a.n(vt);class Pt extends r.a.Component{constructor(e){super(e),this.state={collapsed:!e.initiallyExpanded,hasBeenExpanded:e.initiallyExpanded},this.handleClick=this.handleClick.bind(this)}toggleCollapsed(){this.setState((e=>({collapsed:!e.collapsed,hasBeenExpanded:!0})),(()=>{this.state.collapsed||"function"!==typeof this.props.onExpand||this.props.onExpand()}))}UNSAFE_componentWillReceiveProps(e){e.initiallyExpanded&&this.state.collapsed&&this.toggleCollapsed()}handleClick(e){this.props.onClick&&this.props.onClick(e),void 0!==e&&e.stopPropagation()}render(){const e={tree:{marginLeft:16,whiteSpace:"nowrap"},itemLabel:{display:"inline-block",position:"relative"},arrow:{display:"inline-block",position:"absolute",left:-16,top:-1,width:11,height:16,paddingLeft:4,textAlign:"center",cursor:"pointer"},arrowSymbol:{transition:"transform 150ms ease-out",transform:this.state.collapsed?"":"rotate(90deg)",position:"absolute"},clickTarget:{cursor:this.props.onClick&&"pointer"},children:{position:"relative",marginLeft:16,height:this.state.collapsed?0:"inherit"}},t=r.a.createElement("div",{style:e.itemLabel},r.a.createElement("div",{className:"arrow",style:e.arrow,onClick:this.toggleCollapsed.bind(this)},r.a.createElement("div",{style:e.arrowSymbol},this.props.arrowSymbol)),r.a.createElement("div",{className:"label",onClick:this.handleClick,style:e.clickTarget},this.props.label));e.children.display=this.state.collapsed?"none":"block";const a=(!this.state.collapsed||this.props.persistent&&this.state.hasBeenExpanded)&&r.a.createElement("div",{className:"children",style:e.children},this.props.children),n="tree-view ".concat(this.props.className);return r.a.createElement("div",{className:n,style:Object.assign(e.tree,this.props.style)},t,a)}}Pt.defaultProps={persistent:!1,initiallyExpanded:!1,arrowSymbol:"\u25b8",style:{}};var Tt=Pt;const It={progress:{position:"absolute",display:"inline-block",width:"100%",left:-8},progressBar:{height:2,backgroundColor:"transparent"},spacer:{position:"relative",display:"inline-block",width:"1.2rem",height:"1rem"},label:{display:"inline-block",outline:"none"},ouContainer:{borderColor:"transparent",borderStyle:"solid",borderWidth:"1px",borderRightWidth:0,borderRadius:"3px 0 0 3px",background:"transparent",paddingLeft:2,outline:"none"},currentOuContainer:{background:"rgba(0,0,0,0.05)",borderColor:"rgba(0,0,0,0.1)"},memberCount:{fontSize:"0.75rem",marginLeft:4}};class Dt extends r.a.Component{constructor(e){super(e),this.state={children:!1===e.root.children||Array.isArray(e.root.children)&&0===e.root.children.length?[]:void 0,loading:!1},"toArray"in e.root.children&&!e.root.children.hasUnloadedData&&(this.state.children=e.root.children.toArray().sort(((e,t)=>e.displayName.localeCompare(t.displayName)))),this.loadChildren=this.loadChildren.bind(this),this.handleSelectClick=this.handleSelectClick.bind(this)}componentDidMount(){this.props.initiallyExpanded.some((e=>e.includes("/".concat(this.props.root.id))))&&this.loadChildren()}UNSAFE_componentWillReceiveProps(e){(e.initiallyExpanded.some((t=>t.includes("/".concat(e.root.id))))||e.idsThatShouldBeReloaded.includes(e.root.id))&&this.loadChildren()}setChildState(e){this.props.onChildrenLoaded&&this.props.onChildrenLoaded(e),this.setState({children:e.toArray().sort(((e,t)=>e.displayName.localeCompare(t.displayName))),loading:!1})}loadChildren(){if(void 0===this.state.children&&!this.state.loading||this.props.idsThatShouldBeReloaded.indexOf(this.props.root.id)>=0){this.setState({loading:!0});this.props.root.children.load({fields:"id,displayName,children::isNotEmpty,path,parent"},this.props.forceReloadChildren).then((e=>{this.setChildState(e)}))}}handleSelectClick(e){this.props.onSelectClick&&this.props.onSelectClick(e,this.props.root),e.stopPropagation()}shouldIncludeOrgUnit(e){return!this.props.orgUnitsPathsToInclude||0===this.props.orgUnitsPathsToInclude.length||!!this.props.orgUnitsPathsToInclude.some((t=>t.includes("/".concat(e.id))))}renderChild(e,t){return this.shouldIncludeOrgUnit(e)?r.a.createElement(Dt,{key:e.id,root:e,selected:this.props.selected,initiallyExpanded:t,onSelectClick:this.props.onSelectClick,currentRoot:this.props.currentRoot,onChangeCurrentRoot:this.props.onChangeCurrentRoot,labelStyle:this.props.labelStyle,selectedLabelStyle:this.props.selectedLabelStyle,arrowSymbol:this.props.arrowSymbol,idsThatShouldBeReloaded:this.props.idsThatShouldBeReloaded,hideCheckboxes:this.props.hideCheckboxes,onChildrenLoaded:this.props.onChildrenLoaded,hideMemberCount:this.props.hideMemberCount,orgUnitsPathsToInclude:this.props.orgUnitsPathsToInclude,forceReloadChildren:this.props.forceReloadChildren}):null}renderChildren(){const e=Array.isArray(this.props.initiallyExpanded)?this.props.initiallyExpanded.filter((e=>e!==this.props.root.id)):this.props.initiallyExpanded!==this.props.root.id&&this.props.initiallyExpanded||[];return Array.isArray(this.state.children)&&this.state.children.length>0?this.state.children.map((t=>this.renderChild(t,e))):this.state.loading?r.a.createElement("div",{style:It.progress},r.a.createElement(Ct.a,{style:It.progressBar})):null}render(){const e=this.props.root,t=void 0===this.state.children||Array.isArray(this.state.children)&&this.state.children.length>0,a=!!this.props.onSelectClick,n=new RegExp("/".concat(e.id,"$")),i=new RegExp("/".concat(e.id)),s=this.props.selected&&this.props.selected.some((e=>n.test(e))),o=this.props.currentRoot&&this.props.currentRoot.id===e.id,l=this.props.initiallyExpanded.some((t=>t.includes("/".concat(e.id)))),c=this.props.onChangeCurrentRoot&&!o&&t,d=void 0!==this.props.selected?this.props.selected.filter((e=>i.test(e))).length:e.memberCount,p=Object.assign({},It.label,{fontWeight:s?500:300,color:s?"orange":"inherit",cursor:c?"pointer":"default"},s?this.props.selectedLabelStyle:this.props.labelStyle),h=Object.assign({},It.ouContainer,o?It.currentOuContainer:{}),u=r.a.createElement("div",{style:p,onClick:c&&(t=>{t.stopPropagation(),this.props.onChangeCurrentRoot(e)})||a&&this.handleSelectClick,role:"button",tabIndex:0},a&&!this.props.hideCheckboxes&&r.a.createElement("input",{type:"checkbox",readOnly:!0,disabled:!a,checked:s,onClick:this.handleSelectClick}),e.displayName,t&&!this.props.hideMemberCount&&!!d&&r.a.createElement("span",{style:It.memberCount},"(",d,")"));return t?r.a.createElement(Tt,{label:u,onExpand:this.loadChildren,persistent:!0,initiallyExpanded:l,arrowSymbol:this.props.arrowSymbol,className:"orgunit with-children",style:h},this.renderChildren()):r.a.createElement("div",{onClick:a&&this.handleSelectClick,className:"orgunit without-children",style:h,role:"button",tabIndex:0},r.a.createElement("div",{style:It.spacer}),u)}}Dt.defaultProps={selected:[],initiallyExpanded:[],onSelectClick:void 0,onChangeCurrentRoot:void 0,currentRoot:void 0,onChildrenLoaded:void 0,labelStyle:{},selectedLabelStyle:{},idsThatShouldBeReloaded:[],arrowSymbol:void 0,hideCheckboxes:!1,hideMemberCount:!1,orgUnitsPathsToInclude:null,forceReloadChildren:!1};var Nt=Dt,Ot=a(922),At=a(396),wt=a.n(At),Rt=a(306),_t=a.n(Rt),Mt=a(330),Ut=a.n(Mt);const Wt={datePicker:{width:"100%"},year:{width:95,marginRight:16},month:{width:125},week:{width:105},biWeek:{width:200},biMonth:{width:200},quarter:{width:200},sixMonth:{width:200},line:{marginTop:0}},Lt=e=>new Date(e).getFullYear().toString(),jt=e=>{const t=new Date(e).getMonth()+1;return"0".concat(t).slice(-2)},Gt=e=>"".concat(Lt(e)).concat(jt(e)).concat((e=>{const t=new Date(e).getDate();return"0".concat(t).slice(-2)})(e)),Bt=e=>{const t=new Date(e);return t.setDate(t.getDate()-(e.getDay()+6)%7+3),t.getFullYear()},Ft=(e,t)=>!Object(Ot.is53WeekISOYear)(e)&&53!==Number(t),Vt=e=>2*parseInt(e)-1;class qt extends r.a.Component{constructor(e,t){super(e,t),this.state={};const a=t.d2.i18n;this.getTranslation=a.getTranslation.bind(a)}componentDidUpdate(e){this.props.periodType!==e.periodType&&this.handleChange()}getPeriod(){const e="BiWeekly"===this.props.periodType&&this.state.biWeek?Vt(this.state.biWeek):this.state.week,t=this.state.year&&e&&Object(Ot.getFirstDateOfWeek)(this.state.year,e);switch(this.props.periodType){case"Daily":return this.state.date&&Gt(this.state.date);case"Weekly":return t&&this.setState({invalidWeek:!Ft(t,this.state.week)}),t&&Ft(t,this.state.week)&&"".concat(Bt(t),"W").concat(this.state.week);case"WeeklyWednesday":return t&&this.setState({invalidWeek:!Ft(t,this.state.week)}),t&&Ft(t,this.state.week)&&"".concat(Bt(t),"WedW").concat(this.state.week);case"WeeklyThursday":return t&&this.setState({invalidWeek:!Ft(t,this.state.week)}),t&&Ft(t,this.state.week)&&"".concat(Bt(t),"ThuW").concat(this.state.week);case"WeeklySaturday":return t&&this.setState({invalidWeek:!Ft(t,this.state.week)}),t&&Ft(t,this.state.week)&&"".concat(Bt(t),"SatW").concat(this.state.week);case"WeeklySunday":return t&&this.setState({invalidWeek:!Ft(t,this.state.week)}),t&&Ft(t,this.state.week)&&"".concat(Bt(t),"SunW").concat(this.state.week);case"BiWeekly":return t&&this.setState({invalidBiWeek:!Ft(t,Vt(this.state.biWeek))}),this.state.year&&this.state.biWeek&&"".concat(this.state.year,"BiW").concat(this.state.biWeek);case"Monthly":return this.state.year&&this.state.month&&"".concat(this.state.year).concat(this.state.month);case"BiMonthly":return this.state.year&&this.state.biMonth&&"".concat(this.state.year,"0").concat(this.state.biMonth,"B");case"Quarterly":return this.state.year&&this.state.quarter&&"".concat(this.state.year,"Q").concat(this.state.quarter);case"SixMonthly":return this.state.year&&this.state.sixMonth&&"".concat(this.state.year,"S").concat(this.state.sixMonth);case"SixMonthlyApril":return this.state.year&&this.state.sixMonth&&"".concat(this.state.year,"AprilS").concat(this.state.sixMonth);case"SixMonthlyNov":return this.state.year&&this.state.sixMonth&&"".concat(this.state.year,"NovS").concat(this.state.sixMonth);case"Yearly":return this.state.year;case"FinancialApril":return this.state.year&&"".concat(this.state.year,"April");case"FinancialJuly":return this.state.year&&"".concat(this.state.year,"July");case"FinancialOct":return this.state.year&&"".concat(this.state.year,"Oct");default:return!1}}handleChange(){this.getPeriod()&&this.props.onPickPeriod(this.getPeriod())}renderOptionPicker(e,t){const a="week"===e&&this.state.invalidWeek||"biWeek"===e&&this.state.invalidBiWeek;return r.a.createElement(Ut.a,{value:this.state[e],onChange:(t,a,n)=>this.setState({[e]:n},this.handleChange),style:Wt[e],floatingLabelText:this.getTranslation(e),floatingLabelStyle:a?{color:"red"}:{}},Object.keys(t).sort().map((a=>r.a.createElement(_t.a,{key:a,value:a,primaryText:/[^0-9]/.test(t[a])&&"biWeek"!==e?this.getTranslation(t[a]):t[a]}))))}renderYearPicker(){const e={},t=(new Date).getFullYear();for(let a=2014;a<t+5;a++)e[a]=a;return this.renderOptionPicker("year",e)}renderMonthPicker(){return this.renderOptionPicker("month",{"01":"jan","02":"feb","03":"mar","04":"apr","05":"may","06":"jun","07":"jul","08":"aug","09":"sep",10:"oct",11:"nov",12:"dec"})}renderWeekPicker(){const e={};for(let t=1;t<=53;t++)e["0".concat(t).substr(-2)]=t;return this.renderOptionPicker("week",e)}renderBiWeekPicker(){const e={},t=this.getTranslation("bi_week");for(let a=1;a<=27;a++)e["0".concat(a).substr(-2)]="".concat(t," ").concat(a);return this.renderOptionPicker("biWeek",e)}renderBiMonthPicker(){return this.renderOptionPicker("biMonth",{1:"jan-feb",2:"mar-apr",3:"may-jun",4:"jul-aug",5:"sep-oct",6:"nov-dec"})}renderQuarterPicker(){return this.renderOptionPicker("quarter",{1:"Q1",2:"Q2",3:"Q3",4:"Q4"})}render(){const e=(e,t)=>{const a=Lt(t),n=jt(t);this.setState({date:t,year:a,month:n},this.handleChange)};switch(this.props.periodType){case"Daily":return r.a.createElement(wt.a,{floatingLabelText:this.getTranslation("day"),onChange:e,autoOk:!0,container:"inline",style:Wt.datePicker});case"Weekly":case"WeeklyWednesday":case"WeeklyThursday":case"WeeklySaturday":case"WeeklySunday":return r.a.createElement("div",{style:Wt.line},this.renderYearPicker(),this.renderWeekPicker());case"BiWeekly":return r.a.createElement("div",{style:Wt.line},this.renderYearPicker(),this.renderBiWeekPicker());case"Monthly":return r.a.createElement("div",{style:Wt.line},this.renderYearPicker(),this.renderMonthPicker());case"BiMonthly":return r.a.createElement("div",{style:Wt.line},this.renderYearPicker(),this.renderBiMonthPicker());case"Quarterly":return r.a.createElement("div",{style:Wt.line},this.renderYearPicker(),this.renderQuarterPicker());case"SixMonthly":return r.a.createElement("div",{style:Wt.line},this.renderYearPicker(),this.renderOptionPicker("sixMonth",{1:"jan-jun",2:"jul-dec"}));case"SixMonthlyApril":return r.a.createElement("div",{style:Wt.line},this.renderYearPicker(),this.renderOptionPicker("sixMonth",{1:"apr-sep",2:"oct-mar"}));case"SixMonthlyNov":return r.a.createElement("div",{style:Wt.line},this.renderYearPicker(),this.renderOptionPicker("sixMonth",{1:"nov-apr",2:"may-oct"}));case"Yearly":case"FinancialApril":case"FinancialJuly":case"FinancialOct":return r.a.createElement("div",{style:Wt.line},this.renderYearPicker());default:return null}}}qt.contextTypes={d2:m.a.object.isRequired};var Jt=qt;function Yt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const zt={minWidth:360,marginRight:20};class Qt extends o.Component{constructor(){super(),this.state={selected:[],dataSet:null,orgUnitPaths:null},this.onDataSetChange=this.onDataSetChange.bind(this),this.onPeriodChange=this.onPeriodChange.bind(this),this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.handleOrgUnitClick=this.handleOrgUnitClick.bind(this),this.changeRoot=this.changeRoot.bind(this)}onDataSetChange(e){const t=this.context.d2,a=e.id;null!==this.state.dataSet&&a===this.state.dataSet.id||(this.props.updateSeletedDataSetId(a),this.setState({rootWithMembers:null,selected:[],dataSet:e}),Promise.all([t.models.organisationUnits.list({paging:!1,level:1,fields:"id,displayName,path,children::isNotEmpty,memberCount",memberCollection:"dataSets",memberObject:a}),t.models.dataSets.get(a,{paging:!1,fields:"organisationUnits[id,path]"})]).then((([e,t])=>{const a=e.toArray()[0];this.setState({rootWithMembers:a,selected:[],orgUnitPaths:t.organisationUnits.toArray().map((e=>e.path))})})).catch((e=>{console.error(e)})))}onPeriodChange(e){this.props.updateSelectedPeriodId(e)}handleSelectionUpdate(e){this.setState({selected:e}),this.props.updateSelectedOrgUnits(this.state.selected)}handleOrgUnitClick(e,t){if(this.state.selected.includes(t.path)){const e=this.state.selected;e.splice(e.indexOf(t.path),1),this.setState({selected:e})}else{const e=this.state.selected;e.push(t.path),this.setState({selected:e})}this.props.updateSelectedOrgUnits(this.state.selected)}changeRoot(e){this.setState({currentRoot:e})}render(){const e=this.props.dataSets.map((e=>({id:e.id,name:e.displayName,periodType:e.periodType})));let t=ee.t(y.lockException.selectADataSet),a=null;return this.state.dataSet&&(t=ee.t(y.lockException.dataSet),a=this.state.dataSet.id),r.a.createElement("div",{id:"addLockExceptionFormId"},r.a.createElement("div",{className:ft.a.selectsContainer},r.a.createElement(bt.a,{style:zt,label:t,items:e,onChange:this.onDataSetChange,value:a}),this.state.dataSet&&r.a.createElement("span",{id:"idPeriodPicker"},r.a.createElement(Jt,{periodType:this.state.dataSet.periodType,onPickPeriod:this.onPeriodChange}))),this.state.dataSet?r.a.createElement(kt.a,{className:ft.a.organisationUnitTreeCard},r.a.createElement(Et.a,{className:ft.a.organisationUnitTreeContainer},r.a.createElement("div",{className:ft.a.left},this.state.rootWithMembers?r.a.createElement(Nt,{root:this.state.rootWithMembers,selected:this.state.selected,currentRoot:this.state.currentRoot,initiallyExpanded:["/".concat(this.state.rootWithMembers.id)],memberCollection:"dataSets",memberObject:this.state.dataSet.id,onSelectClick:this.handleOrgUnitClick,onChangeCurrentRoot:this.changeRoot,orgUnitsPathsToInclude:this.state.orgUnitPaths}):r.a.createElement("span",null,ee.t(y.lockException.updatingTree))),r.a.createElement("div",{className:ft.a.right},r.a.createElement("div",null,this.state.currentRoot?r.a.createElement("div",null,ee.t(y.lockException.organisationUnitsWithin)," ",r.a.createElement("span",{className:ft.a.ouLabel},this.state.currentRoot.displayName),":"):r.a.createElement("div",null,ee.t(y.lockException.selectOrganisationUnits)),r.a.createElement(mt.a,{levels:this.props.levels,selected:this.state.selected,currentRoot:this.state.currentRoot,onUpdateSelection:this.handleSelectionUpdate}),r.a.createElement(gt.a,{groups:this.props.groups,selected:this.state.selected,currentRoot:this.state.currentRoot,onUpdateSelection:this.handleSelectionUpdate}),r.a.createElement(ut.a,{selected:this.state.selected,currentRoot:this.state.currentRoot,onUpdateSelection:this.handleSelectionUpdate}))))):null)}}Yt(Qt,"propTypes",{dataSets:m.a.array.isRequired,groups:m.a.oneOfType([m.a.object,m.a.array]).isRequired,levels:m.a.oneOfType([m.a.object,m.a.array]).isRequired,updateSelectedOrgUnits:m.a.func.isRequired,updateSelectedPeriodId:m.a.func.isRequired,updateSeletedDataSetId:m.a.func.isRequired}),Yt(Qt,"contextTypes",{d2:m.a.object});var Ht=Qt,Kt=(a(923),a(924)),Xt=a.n(Kt);function Zt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const $t={dialog:{maxWidth:"80%"},addButton:{position:"fixed",bottom:"1.5rem",right:"1.5rem"}},ea={dataSet:ee.t("Data set"),period:ee.t("Period"),organisationUnit:ee.t("Organisation unit")},ta=({columns:e,rows:t,onRemoveLockException:a})=>r.a.createElement(i.r,null,r.a.createElement(i.v,null,r.a.createElement(i.x,null,e.map((e=>r.a.createElement(i.u,{key:e},ea[e]))),r.a.createElement(i.u,null))),r.a.createElement(i.s,null,t.map(((t,n)=>r.a.createElement(i.w,{key:n},e.map((e=>r.a.createElement(i.t,{key:e},t[e]))),r.a.createElement(i.t,null,r.a.createElement(i.c,{small:!0,secondary:!0,onClick:a},r.a.createElement(ot.a,{className:"material-icons"},"delete"))))))));class aa extends fe{constructor(e,t){super(e,t),Zt(this,"handlePageChange",(e=>{const t={...this.props.pager,page:e};this.loadLockExceptionsForPager(t,!0)})),Zt(this,"handlePageSizeChange",(e=>{const t={...this.props.pager,pageSize:e};this.loadLockExceptionsForPager(t,!0)})),Zt(this,"removeLockException",(e=>{this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:h.a,message:ee.t(y.lockException.confirmDeleteMessage),action:ee.t(y.lockException.confirmButton),onActionClick:()=>{let t="lockExceptions?pe=".concat(e.periodId,"&ds=").concat(e.dataSetId);e.organisationUnitId&&(t+="&ou=".concat(e.organisationUnitId)),this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:h.c,message:ee.t(y.lockException.loadingMessage)},pageState:{...this.props,loading:!0}});this.context.d2.Api.getApi().delete(t).then((()=>{if(this.isPageMounted()){const t={...this.props,loading:!1};this.props.atBatchDeletionPage?(t.lockExceptions=this.props.lockExceptions.filter((t=>t.periodId!==e.periodId||t.dataSetId!==e.dataSetId)),this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:h.d,message:ee.t(y.lockException.removedMessage)},pageState:t})):(this.props.deleteInProgress=!0,this.context.updateAppState({pageState:t}),this.loadLockExceptionsForPager(aa.initialPager,!1))}})).catch((e=>{if(this.isPageMounted()){const t=e&&e.message?e.message:ee.t(y.messages.unexpectedError);this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:h.b,message:t},pageState:{...this.props,loading:!1}})}}))}}})})),this.state={selectedOrgUnits:[],selectedDataSetId:null,selectedPeriodId:null,showAddDialogOpen:!1,levels:null,groups:null,dataSets:[]},this.updateSelectedOrgUnits=this.updateSelectedOrgUnits.bind(this),this.updateSeletedDataSetId=this.updateSeletedDataSetId.bind(this),this.updateSelectedPeriodId=this.updateSelectedPeriodId.bind(this),this.showLockExceptionFormDialog=this.showLockExceptionFormDialog.bind(this),this.closeLockExceptionFormDialog=this.closeLockExceptionFormDialog.bind(this),this.addLockException=this.addLockException.bind(this),this.backToLockExceptions=this.backToLockExceptions.bind(this),this.goToBatchDeletionPage=this.goToBatchDeletionPage.bind(this);const a=t.d2;Object.assign(a.i18n.translations,{period:ee.t(y.lockException.period),data_set:ee.t(y.lockException.dataSet),organisation_unit:ee.t(y.lockException.organisationUnit),organisation_unit_group:ee.t(y.lockException.organisationUnitGroup),organisation_unit_level:ee.t(y.lockException.organisationUnitLevel),select:ee.t(y.lockException.select),deselect:ee.t(y.lockException.deselect),select_all:ee.t(y.lockException.selectAll),deselect_all:ee.t(y.lockException.deselectAll),name:ee.t(y.lockException.name),show:ee.t(y.lockException.show),remove:ee.t(y.lockException.remove),actions:ee.t(y.lockException.actions),of_page:ee.t(y.lockException.ofPage),week:ee.t(y.lockException.week),month:ee.t(y.lockException.month),year:ee.t(y.lockException.year),biMonth:ee.t(y.lockException.biMonth),day:ee.t(y.lockException.day),jan:ee.t(y.lockException.jan),feb:ee.t(y.lockException.feb),mar:ee.t(y.lockException.mar),apr:ee.t(y.lockException.apr),may:ee.t(y.lockException.may),jun:ee.t(y.lockException.jun),jul:ee.t(y.lockException.jul),aug:ee.t(y.lockException.aug),sep:ee.t(y.lockException.sep),oct:ee.t(y.lockException.oct),nov:ee.t(y.lockException.nov),dec:ee.t(y.lockException.dec),"jan-feb":ee.t(y.lockException.janFeb),"mar-apr":ee.t(y.lockException.marApr),"may-jun":ee.t(y.lockException.mayJun),"jul-aug":ee.t(y.lockException.julAug),"sep-oct":ee.t(y.lockException.sepOct),"nov-dec":ee.t(y.lockException.novDec),quarter:ee.t(y.lockException.quarter),Q1:ee.t(y.lockException.Q1),Q2:ee.t(y.lockException.Q2),Q3:ee.t(y.lockException.Q3),Q4:ee.t(y.lockException.Q4),sixMonth:ee.t(y.lockException.sixMonth),"jan-jun":ee.t(y.lockException.janJun),"jul-dec":ee.t(y.lockException.julDec),"apr-sep":ee.t(y.lockException.aprSep),"oct-mar":ee.t(y.lockException.octMar)})}prepareLockExceptionsResponseToDataTable(e){return e.map((e=>{const t={};return this.props.atBatchDeletionPage||(t.organisationUnit=e.organisationUnit.displayName,t.organisationUnitId=e.organisationUnit.id),t.period=e.period.displayName,t.periodId=e.period.id,t.dataSet=e.dataSet.displayName,t.dataSetId=e.dataSet.id,t}))}dataTableColumns(){return this.props.atBatchDeletionPage?["dataSet","period"]:["organisationUnit","dataSet","period"]}header(){return this.props.atBatchDeletionPage?r.a.createElement("div",{className:Xt.a.headerContainer},r.a.createElement("h1",{className:Xt.a.header},r.a.createElement(lt.a,{onClick:this.backToLockExceptions},r.a.createElement(ot.a,{className:ae()("material-icons",Xt.a.backArrowIcon)},"arrow_back")),r.a.createElement("span",null,ee.t(y.lockException.batchDeletionHeader)),r.a.createElement("span",{className:Xt.a.headerDivider}," | "),r.a.createElement("span",{className:Xt.a.subHeader},ee.t(y.lockException.batchDeletionSubHeader)))):r.a.createElement("div",{className:Xt.a.headerContainer},r.a.createElement("h1",{className:Xt.a.header},ee.t(y.lockException.title),r.a.createElement(me,{sectionDocsKey:fa(this.props.sectionKey)})),r.a.createElement("div",null,r.a.createElement(i.c,{className:Xt.a.actionButton,onClick:this.goToBatchDeletionPage,primary:!0,disabled:this.areActionsDisabled()},ee.t(y.lockException.actionButton))))}areActionsDisabled(){return this.props.loading}addLockExceptionEnabled(){return this.state.selectedOrgUnits.length>0&&this.state.selectedDataSetId&&this.state.selectedPeriodId}componentDidMount(){this.loadLockExceptionsForPager(aa.initialPager)}loadLockExceptionsForPager(e,t){const a=this.context.d2.Api.getApi(),n="lockExceptions?page=".concat(e.page,"&pageSize=").concat(e.pageSize)+"&fields=name,period[id,displayName],organisationUnit[id,displayName],dataSet[id,displayName]&order=name:asc";(t||!this.props.loading&&!this.props.loaded)&&(this.context.updateAppState(this.props.deleteInProgress||this.props.addInProgress?{atBatchDeletionPage:!1,loaded:!1,loading:!0}:{showSnackbar:!0,snackbarConf:{type:h.c,message:ee.t(y.lockException.loading)},pageState:{atBatchDeletionPage:!1,loaded:!1,loading:!0}}),a.get(n).then((e=>{if(this.isPageMounted()){let t;this.props.deleteInProgress?(t={showSnackbar:!0,snackbarConf:{type:h.d,message:ee.t(y.lockException.removedMessage)}},this.props.deleteInProgress=!1):this.props.addInProgress?(t={showSnackbar:!0,snackbarConf:{type:h.d,message:ee.t(y.lockException.addedMessage)}},this.props.addInProgress=!1):t={showSnackbar:!1},this.context.updateAppState({...t,pageState:{loaded:!0,lockExceptions:this.prepareLockExceptionsResponseToDataTable(e.lockExceptions),pager:e.pager,loading:!1}})}})).catch((e=>{if(this.isPageMounted()){const t=e&&e.message?e.message:ee.t(y.messages.unexpectedError);this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:h.b,message:t},pageState:{loaded:!0,loading:!1}})}})))}loadLockExceptionCombinations(){const e=this.context.d2.Api.getApi();this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:h.c,message:ee.t(y.lockException.loadingMessage)},pageState:{atBatchDeletionPage:!0,loaded:!1,loading:!0}}),e.get("lockExceptions/combinations?fields=name, period[id,displayName], dataSet[id,displayName]").then((e=>{this.isPageMounted()&&this.context.updateAppState({showSnackbar:!1,pageState:{loaded:!0,atBatchDeletionPage:!0,lockExceptions:this.prepareLockExceptionsResponseToDataTable(e.lockExceptions),loading:!1}})})).catch((e=>{if(this.isPageMounted()){const t=e&&e.message?e.message:ee.t(y.messages.unexpectedError);this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:h.b,message:t},pageState:{loaded:!0,loading:!1}})}}))}updateSelectedOrgUnits(e){this.setState({selectedOrgUnits:e})}updateSeletedDataSetId(e){this.setState({selectedDataSetId:e})}updateSelectedPeriodId(e){this.setState({selectedPeriodId:e})}backToLockExceptions(){this.loadLockExceptionsForPager(this.props.pager,!0)}goToBatchDeletionPage(){this.loadLockExceptionCombinations()}showLockExceptionFormDialog(){const e=this.context.d2;this.state.levels&&this.state.groups&&this.state.dataSets.length>0?this.setState({showAddDialogOpen:!0}):Promise.all([e.models.organisationUnitLevel.list({paging:!1,fields:"id,level,displayName",order:"level:asc"}),e.models.organisationUnitGroup.list({paging:!1,fields:"id,displayName"}),e.models.dataSet.list({paging:!1,fields:"id,displayName,periodType"})]).then((([e,t,a])=>{this.isPageMounted()&&this.setState({showAddDialogOpen:!0,levels:e,groups:t,dataSets:a.toArray()})})).catch((e=>{if(this.isPageMounted()){const t=e&&e.message?e.message:ee.t(y.messages.unexpectedError);this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:h.b,message:t},pageState:{...this.props,loading:!1}})}}))}closeLockExceptionFormDialog(){this.setState({showAddDialogOpen:!1,selectedOrgUnits:[],selectedDataSetId:null,selectedPeriodId:null})}addLockException(){if(this.addLockExceptionEnabled()){const e=this.context.d2.Api.getApi(),t=this.state.selectedOrgUnits.map((e=>{const t=e.split("/");return t[t.length-1]})),a=new FormData;a.append("ou","[".concat(t.join(","),"]")),a.append("pe",this.state.selectedPeriodId),a.append("ds",this.state.selectedDataSetId),this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:h.c,message:ee.t(y.lockException.addingMessage)},pageState:{showAddDialogOpen:!1,selectedOrgUnits:[],selectedDataSetId:null,selectedPeriodId:null,loading:!0}}),e.post("lockExceptions",a).then((()=>{this.isPageMounted()&&(this.context.updateAppState({pageState:{loaded:!1,loading:!1}}),this.props.addInProgress=!0,this.loadLockExceptionsForPager(aa.initialPager,!1))})).catch((e=>{if(this.isPageMounted()){const t=e&&e.message?e.message:ee.t(y.messages.unexpectedError);this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:h.b,message:t},pageState:{...this.props,loading:!1}})}}))}}render(){const e={...this.props.pager,onPageSizeChange:this.handlePageSizeChange,onPageChange:this.handlePageChange},t=[r.a.createElement(at.a,{key:"cancel-button",className:Xt.a.actionButton,label:ee.t(y.lockException.cancelButton),onClick:this.closeLockExceptionFormDialog}),r.a.createElement(dt.a,{key:"add-button",className:Xt.a.actionButton,primary:!0,label:ee.t(y.lockException.addButton),onClick:this.addLockException,disabled:!this.addLockExceptionEnabled()})];return r.a.createElement("div",{className:Xt.a.lockExceptionsTable},this.header(),this.props.lockExceptions&&this.props.lockExceptions.length?r.a.createElement("div",null,!this.areActionsDisabled()&&!this.props.atBatchDeletionPage&&r.a.createElement("div",{className:Xt.a.pagination},r.a.createElement(i.q,e)),r.a.createElement(ta,{columns:this.dataTableColumns(),rows:this.props.lockExceptions,onRemoveLockException:this.removeLockException}),!this.areActionsDisabled()&&!this.props.atBatchDeletionPage&&r.a.createElement("div",{className:ae()(Xt.a.pagination,Xt.a.marginForAddButton)},r.a.createElement(i.q,e))):r.a.createElement(Ie.Card,{style:{display:this.props.loading?"none":"block"}},r.a.createElement(Ie.CardText,null,ee.t(y.lockException.noDataMessage))),this.state.levels&&this.state.groups&&this.state.dataSets.length>0&&r.a.createElement(et.a,{title:ee.t(y.lockException.addLockExceptionFormTitle),actions:t,modal:!1,open:this.state.showAddDialogOpen,contentStyle:$t.dialog,onRequestClose:this.closeLockExceptionFormDialog},r.a.createElement(Ht,{levels:this.state.levels,groups:this.state.groups,dataSets:this.state.dataSets,updateSelectedOrgUnits:this.updateSelectedOrgUnits,updateSeletedDataSetId:this.updateSeletedDataSetId,updateSelectedPeriodId:this.updateSelectedPeriodId})),!this.props.atBatchDeletionPage&&!this.areActionsDisabled()&&r.a.createElement(it.a,{id:"addExceptionButtonId",style:$t.addButton,onClick:this.showLockExceptionFormDialog},r.a.createElement(ht.a,null)))}}Zt(aa,"initialPager",{pageSize:20,page:1,total:0,pageCount:1});var na=aa,ia=a(327),sa=a.n(ia),oa=a(350);const ra=y.maintenance.title,la=[{key:"analyticsTableClear",label:y.maintenance.analyticsTableClear},{key:"analyticsTableAnalyze",label:y.maintenance.analyticsTableAnalyze},{key:"zeroDataValueRemoval",label:y.maintenance.zeroDataValueRemoval},{key:"softDeletedDataValueRemoval",label:y.maintenance.softDeletedDataValueRemoval},{key:"softDeletedEventRemoval",label:y.maintenance.softDeletedEventRemoval},{key:"softDeletedEnrollmentRemoval",label:y.maintenance.softDeletedEnrollmentRemoval},{key:"softDeletedTrackedEntityInstanceRemoval",label:y.maintenance.softDeletedTrackedEntityInstanceRemoval},{key:"periodPruning",label:y.maintenance.periodPruning},{key:"expiredInvitationsClear",label:y.maintenance.expiredInvitationsClear},{key:"sqlViewsDrop",label:y.maintenance.sqlViewsDrop},{key:"sqlViewsCreate",label:y.maintenance.sqlViewsCreate},{key:"categoryOptionComboUpdate",label:y.maintenance.categoryOptionComboUpdate},{key:"ouPathsUpdate",label:y.maintenance.ouPathsUpdate},{key:"cacheClear",label:y.maintenance.cacheClear},{key:"appReload",label:y.maintenance.appReload}];var ca=class extends fe{constructor(){super(),function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(this,"performMaintenance",(()=>{const e=this.context.d2.Api.getApi(),t=this.buildFormData();t&&(this.setLoadingPageState(),e.post("maintenance",t).then((()=>{this.isPageMounted()&&this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:h.d,message:ee.t(y.maintenance.actionPerformed)},pageState:{loading:!1}})})).catch((e=>{this.isPageMounted()&&this.setLoadedPageWithErrorState(e)})))}));const e={};for(const t of Object.values(la))e[t.key]={checked:!1};this.state={checkboxes:e}}setLoadingPageState(){this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:h.c,message:ee.t(y.maintenance.performing)},pageState:{loading:!0}})}setLoadedPageWithErrorState(e){const t=e&&e.message?e.message:ee.t(y.maintenance.unexpectedError);this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:h.b,message:t},pageState:{loading:!1}})}selectedCheckboxesCount(){let e=0;const t=Object.keys(this.state.checkboxes);for(let a=0;a<t.length;a++){const n=t[a];this.state.checkboxes[n].checked&&(e+=1)}return e}areActionsDisabled(){return this.props.loading}buildFormData(){let e=null;const t=Object.keys(this.state.checkboxes);for(let a=0;a<t.length;a++){const n=t[a],i=this.state.checkboxes[n].checked;e=e||new FormData,e.append(n,i)}return e}render(){const e=Object.assign({},this.state.checkboxes),t=la.map((t=>{const a=e[t.key].checked;return r.a.createElement(oa.GridTile,{key:t.key,className:ae()("col-xs-12 col-md-6 col-lg-4",Ce.a.formControl)},r.a.createElement(sa.a,{label:ee.t(t.label),checked:a,onCheck:()=>{e[t.key].checked=!a,this.setState({checkboxes:e})},labelStyle:{color:"#000000"},iconStyle:{fill:"#000000"},disabled:this.areActionsDisabled()}))}));return r.a.createElement("div",null,r.a.createElement("h1",null,ee.t(ra),r.a.createElement(me,{sectionDocsKey:fa(this.props.sectionKey)})),r.a.createElement(Ie.Card,{id:"maintenanceContentContainerId"},r.a.createElement(Ie.CardText,null,r.a.createElement("div",{className:ae()(Ce.a.gridContainer,"row")},t),r.a.createElement(dt.a,{id:"performMaintenanceBtnId",label:ee.t(y.maintenance.actionButton),onClick:this.performMaintenance,primary:!0,disabled:this.areActionsDisabled()||0===this.selectedCheckboxesCount()}))))}},da=a(925),pa=a.n(da);function ha(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const ua="/minMaxValues",ga=e=>{return(t=e.split("/"))[t.length-1];var t};var ma=class extends fe{constructor(){super(),ha(this,"isFormValid",(()=>this.state.dataSetsSelectedCount>0&&this.state.selected.length>0)),ha(this,"dataSetsSelectRef",(e=>{this.dataSetsSelect=e})),ha(this,"dataSetsSelectClick",(()=>{this.setState({dataSetsSelectedCount:this.dataSetsSelect.selectedOptions.length})})),ha(this,"handleOrgUnitChange",(({path:e,checked:t})=>{t?this.setState({selected:[e]}):this.setState({selected:[]})})),ha(this,"handleGenerateMinMaxValue",(()=>{const e=ga(this.state.selected[0]),t=Array.from(this.dataSetsSelect.selectedOptions).map((({value:e})=>e));this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:h.c,message:ee.t(y.minMaxValueGeneration.performingMessage)},pageState:{loading:!0}});this.context.d2.Api.getApi().post(ua,{organisationUnit:e,dataSets:t}).then((()=>{this.isPageMounted()&&this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:h.d,message:ee.t(y.minMaxValueGeneration.minMaxGenerationDone)},pageState:{loading:!1}})})).catch((()=>{this.isPageMounted()&&this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:h.b,message:ee.t(y.messages.unexpectedError)},pageState:{loading:!1}})}))})),ha(this,"handleRemoveMinMaxValue",(()=>{const e=ga(this.state.selected[0]),t=Array.from(this.dataSetsSelect.selectedOptions).map((({value:e})=>e));this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:h.c,message:ee.t(y.minMaxValueGeneration.removingMessage)},pageState:{loading:!0}});this.context.d2.Api.getApi().delete("".concat(ua,"/").concat(e,"?ds=").concat(t)).then((()=>{this.isPageMounted()&&this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:h.d,message:ee.t(y.minMaxValueGeneration.minMaxRemovalDone)},pageState:{loading:!1}})})).catch((()=>{this.isPageMounted()&&this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:h.b,message:ee.t(y.messages.unexpectedError)},pageState:{loading:!1}})}))})),this.state={selected:[],dataSets:null,roots:null,dataSetsSelectedCount:0}}componentDidMount(){this.loadData()}isUserInteractionDisabled(){return this.props.loading||null==this.state.dataSets||null===this.state.roots}loadData(){const e=this.context.d2;null!=this.state.dataSets&&null!=this.state.roots||Promise.all([e.models.organisationUnits.list({paging:!1,level:1,fields:"id"}),e.models.dataSet.list({paging:!1,fields:"id,displayName"})]).then((([e,t])=>{this.isPageMounted()&&this.setState({roots:e.toArray(),dataSets:t.toArray()})})).catch((()=>{this.isPageMounted()&&this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:h.b,message:ee.t(y.minMaxValueGeneration.notPossibleToLoadMessage)},pageState:{loading:!1}})}))}render(){return r.a.createElement("div",null,r.a.createElement("h1",{className:pa.a.header},ee.t(y.minMaxValueGeneration.title),r.a.createElement(me,{sectionDocsKey:fa(this.props.sectionKey)})),r.a.createElement(i.d,{className:pa.a.card},r.a.createElement("div",{className:pa.a.container},this.state.dataSets?r.a.createElement("div",{className:pa.a.left},r.a.createElement("div",{className:pa.a.label},ee.t(y.minMaxValueGeneration.dataSet)),r.a.createElement("select",{multiple:!0,onClick:this.dataSetsSelectClick,disabled:this.isUserInteractionDisabled(),className:pa.a.select,ref:this.dataSetsSelectRef},this.state.dataSets.map((e=>r.a.createElement("option",{key:e.id,value:e.id,className:pa.a.options},e.displayName))))):r.a.createElement("div",{className:pa.a.left},r.a.createElement("span",null,ee.t(y.minMaxValueGeneration.loadingDataSetsMessage))),this.state.roots?r.a.createElement("div",{className:pa.a.right},r.a.createElement("div",{className:pa.a.label},ee.t(y.minMaxValueGeneration.organisationUnitSelect)),r.a.createElement("div",{className:pa.a.tree},r.a.createElement(i.p,{className:pa.a.tree,roots:this.state.roots.map((e=>e.id)),selected:this.state.selected,onChange:this.handleOrgUnitChange}))):r.a.createElement("div",{className:pa.a.right},r.a.createElement("span",null,ee.t(y.minMaxValueGeneration.updatingTree)))),r.a.createElement(i.c,{primary:!0,className:pa.a.actionButton,onClick:this.handleGenerateMinMaxValue,disabled:this.isUserInteractionDisabled()||!this.isFormValid()},ee.t(y.minMaxValueGeneration.actionButton)),r.a.createElement(i.c,{secondary:!0,onClick:this.handleRemoveMinMaxValue,disabled:this.isUserInteractionDisabled()||!this.isFormValid()},ee.t(y.minMaxValueGeneration.removeButton))))}};const ba="system/tasks/RESOURCE_TABLE";var ya=a(926),ka=a.n(ya);function Sa(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Ea=class extends fe{constructor(){super(),Sa(this,"startTaskProgressPolling",(()=>{this.intervalId=setInterval((()=>{this.requestTaskProgress()}),5e3)})),Sa(this,"isAnalyzingTables",(()=>this.state.intervalId)),Sa(this,"startsPooling",(()=>setInterval((()=>{this.requestTaskSummary()}),5e3))),Sa(this,"isJobInProgress",(e=>e.every((e=>!e.completed)))),Sa(this,"initResourceTablesGeneration",(()=>{const e=this.context.d2.Api.getApi();this.setLoadingPageState(),e.post("resourceTables").then((({response:e})=>{this.isPageMounted()&&e&&this.setState({taskId:e.id},this.startTaskProgressPolling)})).catch((e=>{this.isPageMounted()&&this.setLoadedPageWithErrorState(e)}))})),Sa(this,"requestTaskProgress",(()=>{this.context.d2.Api.getApi().get("".concat(ba,"/").concat(this.state.taskId)).then((e=>{this.isTaskCompleted(e)&&(this.stopTaskProgressPolling(),this.unsetLoadingPageState()),this.setState({notifications:this.getUpdatedNotifications(e)})})).catch((e=>{this.isPageMounted()&&this.setLoadedPageWithErrorState(e)}))})),this.state={taskId:null,notifications:[]}}componentDidMount(){this.requestTaskSummary()}componentWillUnmount(){super.componentWillUnmount(),this.stopTaskProgressPolling()}stopTaskProgressPolling(){clearInterval(this.intervalId),this.intervalId=null}setLoadingPageState(){this.setState({notifications:[]}),this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:h.c},pageState:{loading:!0}})}unsetLoadingPageState(){this.context.updateAppState({showSnackbar:!1,snackbarConf:{type:h.c},pageState:{loading:!1}})}setLoadedPageWithErrorState(e){console.error(e);const t=e&&e.message?e.message:ee.t(y.resourcetables.unexpectedError);this.stopTaskProgressPolling(),this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:h.b,message:t},pageState:{loading:!1}})}requestTaskSummary(){this.context.d2.Api.getApi().get(ba).then((e=>{if(!this.isPageMounted())return;const t=this.getActiveTaskIdFromSummary(e);t&&(this.setLoadingPageState(),this.setState({taskId:t,notifications:this.getUpdatedNotifications(e[t])},this.startTaskProgressPolling))})).catch((e=>{this.isPageMounted()&&this.setLoadedPageWithErrorState(e)}))}getUpdatedNotifications(e=[]){if(e.length<=this.state.notifications.length)return this.state.notifications;const t=e.length-1;return e.reverse().map(((e,a)=>({...e,completed:e.completed||a<t})))}getActiveTaskIdFromSummary(e){const{taskId:t}=Object.entries(e).reduce(((e,[t,a])=>{const n=a[a.length-1],i=new Date(n.time);return!this.isTaskCompleted(a)&&i>e.time?{taskId:t,time:i}:e}),{taskId:null,time:new Date(0)});return t}isTaskCompleted(e){return e[0].completed}render(){return r.a.createElement("div",null,r.a.createElement("h1",null,ee.t(y.resourceTables.title),r.a.createElement(me,{sectionDocsKey:fa(this.props.sectionKey)})),r.a.createElement(Ie.Card,{className:Ce.a.cardContainer},r.a.createElement(Ie.CardText,null,r.a.createElement("div",{className:ka.a.description},r.a.createElement("div",null,ee.t(y.resourceTables.organisationUnitStructure)," ",r.a.createElement("span",{className:ka.a.tableName},"(_orgunitstructure)")),r.a.createElement("div",null,ee.t(y.resourceTables.organistionUnitCategoryOptionCombo)," ",r.a.createElement("span",{className:ka.a.tableName},"(_orgunitstructure)")),r.a.createElement("div",null,ee.t(y.resourceTables.categoryOptionGroupSetStructure)," ",r.a.createElement("span",{className:ka.a.tableName},"(_categoryoptiongroupsetstructure)")),r.a.createElement("div",null,ee.t(y.resourceTables.dataElementGroupSetStructure)," ",r.a.createElement("span",{className:ka.a.tableName},"(_dataelementgroupsetstructure)")),r.a.createElement("div",null,ee.t(y.resourceTables.indicatorGroupSetStructure)," ",r.a.createElement("span",{className:ka.a.tableName},"(_indicatorgroupsetstructure)")),r.a.createElement("div",null,ee.t(y.resourceTables.organisationUnitGroupSetStructure)," ",r.a.createElement("span",{className:ka.a.tableName},"(_organisationunitgroupsetstructure)")),r.a.createElement("div",null,ee.t(y.resourceTables.categoryStructure)," ",r.a.createElement("span",{className:ka.a.tableName},"(_categorystructure)")),r.a.createElement("div",null,ee.t(y.resourceTables.dataElementCategoryOptionComboName)," ",r.a.createElement("span",{className:ka.a.tableName},"(_categoryoptioncomboname)")),r.a.createElement("div",null,ee.t(y.resourceTables.dataElementStructure)," ",r.a.createElement("span",{className:ka.a.tableName},"(_dataelementstructure)")),r.a.createElement("div",null,ee.t(y.resourceTables.periodStructure)," ",r.a.createElement("span",{className:ka.a.tableName},"(_periodstructure)")),r.a.createElement("div",null,ee.t(y.resourceTables.dataPeriodStructure)," ",r.a.createElement("span",{className:ka.a.tableName},"(_dateperiodstructure)")),r.a.createElement("div",null,ee.t(y.resourceTables.dataElementCategoryOptionCombinations)," ",r.a.createElement("span",{className:ka.a.tableName},"(_dataelementcategoryoptioncombo)"))),r.a.createElement(ne.i,{id:"generateTablesBtnId",primary:!0,label:ee.t(y.resourceTables.actionButton),onClick:this.initResourceTablesGeneration,disabled:this.props.loading}))),(this.state.notifications||[]).length>0&&r.a.createElement(Ie.Card,{className:Ce.a.cardContainer},r.a.createElement(Ie.CardText,null,r.a.createElement(pe,{notifications:this.state.notifications,animateIncomplete:!0}))))}};const xa=[{key:"dataIntegrity",path:"/data-integrity",component:Le,info:{label:y.dataIntegrity.label,icon:"link",description:y.dataIntegrity.description,actionText:y.dataIntegrity.actionText,docs:"dataAdmin_dataIntegrity"}},{key:"maintenance",path:"/maintenance",component:ca,info:{label:y.maintenance.label,icon:"settings",description:y.maintenance.description,actionText:y.maintenance.actionText,docs:"data_admin_maintenance"}},{key:"resourceTables",path:"/resourceTables",component:Ea,info:{label:y.resourceTables.label,icon:"view_list",description:y.resourceTables.description,actionText:y.resourceTables.actionText,docs:"dataAdmin_resourceTables"}},{key:"analytics",path:"/analytics",component:Te,info:{label:y.analytics.label,icon:"multiline_chart",description:y.analytics.description,actionText:y.analytics.actionText,docs:"generate_analytics_tables"}},{key:"statistics",path:"/data-statistics",component:Ze,info:{label:y.dataStatistics.label,icon:"timeline",description:y.dataStatistics.description,actionText:y.dataStatistics.actionText,docs:"dataAdmin_dataStatistics"}},{key:"lock",path:"/lock-exception",component:na,info:{label:y.lockException.label,icon:"lock",description:y.lockException.description,actionText:y.lockException.actionText,docs:"dataAdmin_lockException"}},{key:"minMax",path:"/min-max-value-generation",component:ma,info:{label:y.minMaxValueGeneration.label,icon:"compare_arrows",description:y.minMaxValueGeneration.description,actionText:y.minMaxValueGeneration.actionText,docs:"dataAdmin_minMaxValueGeneration"}}],fa=e=>{for(let t=0;t<xa.length;t++){const a=xa[t];if(a.key===e)return a.info.docs}return""};var va=a(927),Ca=a.n(va);class Pa extends o.PureComponent{render(){return r.a.createElement(l.b,{to:this.props.section.path},r.a.createElement(oa.GridTile,{key:this.props.section.key,className:ae()("section",Ca.a.gridElement)},r.a.createElement("div",{className:ae()("row",Ca.a.gridTitleBar)},r.a.createElement("span",{className:ae()("section-title",Ca.a.gridTitleDescription)},this.props.section.info.label),r.a.createElement(ot.a,{className:ae()("material-icons","icon",Ca.a.gridIcon)},this.props.section.info.icon)),r.a.createElement("span",{className:ae()("section-description","row",Ca.a.gridDescription)},ee.t(this.props.section.info.description)),r.a.createElement("span",{className:ae()("section-action-text","row",Ca.a.gridActionText)},ee.t(this.props.section.info.actionText))))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Pa,"propTypes",{section:m.a.shape({info:m.a.shape({actionText:m.a.string,description:m.a.string,icon:m.a.string,label:m.a.string}),key:m.a.string,path:m.a.string}).isRequired});var Ta=Pa,Ia=a(933),Da=a.n(Ia);a(934);var Na=()=>{const e=xa.map((e=>r.a.createElement("div",{key:e.key,className:ae()("col-sm-12 col-md-6 col-lg-4",Da.a.gridContainer)},r.a.createElement(Ta,{key:e.key,section:e}))));return r.a.createElement("div",{id:"grid-list-id",className:"row"},e)};class Oa extends o.PureComponent{render(){return r.a.createElement("div",null,r.a.createElement("h3",null,"No match for ",r.a.createElement("code",null,this.props.location.pathname)))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Oa,"propTypes",{location:m.a.object.isRequired});var Aa=Oa;function wa(){return(wa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}const Ra=({pageState:e})=>{const t=xa.map((t=>r.a.createElement(b.a,{key:t.key,exact:!0,path:t.path,render:()=>{const a=t.component;return r.a.createElement(a,wa({sectionKey:t.key},e))}})));return t.push(r.a.createElement(b.a,{key:"home",exact:!0,path:"/",render:()=>r.a.createElement(Na,{sectionKey:"home"})})),t.push(r.a.createElement(b.a,{key:"no-match-route",component:Aa})),r.a.createElement("main",null,r.a.createElement(b.c,null,t))};Ra.defaultProps={pageState:{}};var _a=Ra,Ma=a(935),Ua=a.n(Ma);a(936);function Wa(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class La extends o.PureComponent{constructor(e){super(e),Wa(this,"updateAppState",(e=>{e.currentSection&&!e.pageState&&this.state.currentSection!==e.currentSection?this.setState({...e,pageState:void 0,showSnackbar:!1}):this.setState(e)})),(e=>{if(e){const t={},a=Object.keys(y.d2UiComponents);for(let e=0;e<a.length;e++){const n=a[e];t[n]=ee.t(y.d2UiComponents[n])}Object.assign(e.i18n.translations,t)}})(e.d2),this.state={currentSection:"",showSnackbar:!1,snackbarConf:{type:"",message:""}}}getChildContext(){return{d2:this.props.d2,showSnackbar:this.state.showSnackbar,snackbarConf:this.state.snackbarConf,currentSection:this.state.currentSection,updateAppState:this.updateAppState}}showLoadingProgress(){return this.state.snackbarConf.type===h.c&&this.state.showSnackbar}render(){const e=xa.map((e=>Object.assign(e,{icon:e.info.icon,label:c.a.t(e.info.label),containerElement:r.a.createElement(l.b,{to:e.path})}))),t=this.showLoadingProgress()?r.a.createElement("div",{className:Ua.a.centered},r.a.createElement(d.a,null)):r.a.createElement(p.a,{show:this.state.showSnackbar,conf:this.state.snackbarConf});return r.a.createElement("div",null,r.a.createElement(u.a,{sections:e,currentSection:this.state.currentSection,onChangeSection:()=>null}),r.a.createElement("div",{className:Ua.a.contentWrapper},r.a.createElement("div",{className:Ua.a.contentArea},r.a.createElement(_a,{pageState:this.state.pageState}))),t)}}Wa(La,"childContextTypes",{d2:m.a.object,currentSection:m.a.string,showSnackbar:m.a.bool,snackbarConf:m.a.shape({duration:m.a.number,message:m.a.string,type:m.a.string}),updateAppState:m.a.func}),Wa(La,"propTypes",{d2:m.a.object});var ja=Object(b.f)(La),Ga=a(315),Ba=a(344),Fa=a.n(Ba),Va=a(345),qa=a.n(Va),Ja=a(289);const Ya={spacing:qa.a,fontFamily:"Roboto, sans-serif",palette:{primary1Color:"#004ba0",primary2Color:Ga.blue700,primary3Color:Ga.blue100,accent1Color:Ga.orange500,accent2Color:Ga.grey100,accent3Color:Ga.orangeA200,textColor:Ga.darkBlack,alternateTextColor:Ga.white,canvasColor:Ga.white,borderColor:Ga.grey400,disabledColor:Object(Ja.fade)(Ga.darkBlack,.3)}};var za=Fa()(Ya);a(937);t.default=()=>{const{d2:e}=Object(n.a)();return e?r.a.createElement(r.a.Fragment,null,r.a.createElement(i.h,{spacers:!0,colors:!0}),r.a.createElement(s.MuiThemeProvider,{muiTheme:za},r.a.createElement(l.a,null,r.a.createElement(ja,{d2:e})))):null}}}]);
//# sourceMappingURL=app.ce33302c.chunk.js.map