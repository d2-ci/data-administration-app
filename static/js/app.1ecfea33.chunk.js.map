{"version":3,"sources":["D2App/pages/lock-exceptions/LockExceptions.module.css","D2App/App.module.css","D2App/pages/add-lock-exception/AddLockException.module.css","D2App/pages/add-lock-exception/AddLockExceptionForm/AddLockExceptionForm.module.css","D2App/pages/add-lock-exception/AddLockExceptionForm/OrganisationUnitSelectionCard.module.css","D2App/components/PageHeader/PageHeader.module.css","D2App/pages/analytics/Analytics.module.css","D2App/pages/data-integrity/Issues/IssueCard.module.css","D2App/pages/data-integrity/Issues/Issues.module.css","D2App/pages/data-statistics/DataStatistics.module.css","D2App/pages/maintenance/Checkboxes.module.css","D2App/pages/maintenance/Maintenance.module.css","D2App/pages/min-max-value-generation/MinMaxValueGeneration.module.css","D2App/pages/resource-tables/ResourceTables.module.css","D2App/pages/home/grid-section/GridSection.module.css","D2App/pages/home/Home.module.css","D2App/components/Sidebar/Sidebar.module.css","D2App/pages/add-lock-exception/OrgUnitSelect/common.js","D2App/pages/add-lock-exception/OrgUnitSelect/OrgUnitSelectAll.js","D2App/pages/add-lock-exception/OrgUnitSelect/Dropdown/Controls.js","D2App/pages/add-lock-exception/OrgUnitSelect/Dropdown/D2UiDropdown.js","D2App/pages/add-lock-exception/OrgUnitSelect/Dropdown/Dropdown.js","D2App/pages/add-lock-exception/OrgUnitSelect/OrgUnitSelectByGroup.js","D2App/pages/add-lock-exception/OrgUnitSelect/OrgUnitSelectByLevel.js","D2App/pages/add-lock-exception/AddLockExceptionForm/OrganisationUnitSelectionCard.js","D2App/pages/add-lock-exception/AddLockExceptionForm/PeriodPicker.js","D2App/pages/add-lock-exception/AddLockExceptionForm/AddLockExceptionForm.js","D2App/pages/add-lock-exception/AddLockException.js","D2App/components/LockExceptionsTable/LockExceptionsTable.js","D2App/components/RemoveLockExceptionModal/RemoveLockExceptionModal.js","D2App/parse-lock-exceptions.js","D2App/pages/batch-delete-lock-exceptions/BatchDeleteLockExceptions.js","D2App/i18n-keys.js","D2App/components/NotificationsTable/notifications-table.conf.js","D2App/components/NotificationsTable/NotificationsTable.js","D2App/locales/index.js","D2App/components/DocsLink/DocsLink.js","D2App/components/PageHeader/PageHeader.js","D2App/get-updated-notifications.js","D2App/pages/analytics/analytics.conf.js","D2App/hooks/use-poll.js","D2App/pages/analytics/use-analytics-poll.js","D2App/pages/analytics/Analytics.js","D2App/pages/analytics/use-checkboxes.js","D2App/pages/data-integrity/Issues/IssueCard.js","D2App/pages/data-integrity/Issues/Issues.js","D2App/pages/data-integrity/use-data-integrity-poll.js","D2App/pages/data-integrity/DataIntegrity.js","D2App/components/FormattedNumber/FormattedNumber.js","D2App/pages/data-statistics/DataStatisticsTable.js","D2App/pages/data-statistics/table-keys.js","D2App/pages/data-statistics/parse-tables.js","D2App/pages/data-statistics/DataStatistics.js","D2App/pages/lock-exceptions/LockExceptions.js","D2App/pages/maintenance/Checkboxes.js","D2App/pages/maintenance/use-checkboxes.js","D2App/pages/maintenance/Maintenance.js","D2App/pages/min-max-value-generation/MinMaxValueGeneration.js","D2App/pages/resource-tables/use-resource-tables-poll.js","D2App/pages/resource-tables/ResourceTables.js","D2App/pages/sections.conf.js","D2App/pages/home/grid-section/GridSection.js","D2App/pages/home/Home.js","D2App/components/Routes/Routes.js","D2App/components/Sidebar/Sidebar.js","D2App/theme.js","D2App/App.js"],"names":["module","exports","addToSelection","orgUnits","addedOus","Array","isArray","toArray","filter","ou","this","props","selected","includes","path","onUpdateSelection","concat","map","removeFromSelection","removed","selectedOus","handleChangeSelection","event","setState","selection","target","value","_defineProperty","obj","key","Object","defineProperty","enumerable","configurable","writable","OrgUnitSelectAll","React","Component","constructor","super","currentRoot","loading","getDescendantOrgUnits","then","state","cache","slice","d2","models","organisationUnits","list","fields","paging","ous","catch","err","console","error","bind","root","id","includeDescendants","render","createElement","ButtonStrip","Button","onClick","handleSelectAll","disabled","i18n","t","handleDeselectAll","Controls","onSelect","onDeselect","style","position","display","top","marginLeft","CircularLoader","small","_extends","assign","i","arguments","length","source","prototype","hasOwnProperty","call","apply","renderMenuItems","menuItems","displayName","MenuItem","primaryText","renderMenuItem","D2UiDropdown","onChange","other","menuItemArray","hasOptions","SelectField","fullWidth","callback","index","defaultProps","Dropdown","label","minHeight","floatingLabelText","OrgUnitSelectByGroup","undefined","groupCache","Map","getOrgUnitsForGroup","handleSelect","handleDeselect","groupId","ignoreCache","Promise","resolve","has","get","organisationUnitGroups","orgUnitGroups","set","groups","OrgUnitSelectByLevel","levelCache","getOrgUnitsForLevel","level","rootLevel","match","NaN","relativeLevel","isNaN","orgUnitArray","currentRootLevel","levels","query","rootWithMembers","resource","params","dataSetId","memberCollection","memberObject","dataSetMembers","OrganisationUnitSelectionCard","onSelectionUpdate","setCurrentRoot","useState","called","data","refetch","useDataQuery","lazy","useD2","useEffect","CenteredContent","NoticeBox","title","message","orgUnitPaths","className","styles","organisationUnitSelectionCard","organisationUnitTree","OrganisationUnitTree","roots","initiallyExpanded","split","right","organisationUnitName","periodTypeLabels","week","month","year","biWeek","biMonth","day","jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec","quarter","Q1","Q2","Q3","Q4","sixMonth","datePicker","width","marginRight","line","marginTop","getYear","date","Date","getFullYear","toString","getTwoDigitMonth","getMonth","formattedDate","getDate","getTwoDigitDay","getWeekYear","setDate","getDay","isWeekValid","is53WeekISOYear","Number","biWeekToWeek","biWeekStr","parseInt","PeriodPicker","getTranslation","componentDidUpdate","prevProps","periodType","handleChange","getPeriod","getFirstDateOfWeek","invalidWeek","invalidBiWeek","onPickPeriod","renderOptionPicker","name","options","isInvalid","e","floatingLabelStyle","color","keys","sort","test","renderYearPicker","years","currentYear","renderMonthPicker","10","11","12","renderWeekPicker","weeks","substr","renderBiWeekPicker","biWeeks","prefix","renderBiMonthPicker","1","2","3","4","5","6","renderQuarterPicker","setDateState","nothing","DatePicker","autoOk","container","d2UiSelectStyleOverride","minWidth","AddLockExceptionForm","dataSets","updateSelectedDataSetId","updateSelectedOrgUnits","updateSelectedPeriodId","setSelected","selectedDataSet","setSelectedDataSet","dataSetItems","dataSet","dataSetSelectLabel","dataSetSelectValue","Fragment","selectsContainer","items","async","periodId","newSelection","order","mutation","type","AddLockException","history","useHistory","dataQuery","successAlert","useAlert","success","errorAlert","nsSeparator","critical","mutate","dataMutation","useDataMutation","onComplete","show","push","onError","selectedOrgUnits","setSelectedOrgUnits","selectedDataSetId","setSelectedDataSetId","selectedPeriodId","setSelectedPeriodId","isAddActionDisabled","organisationUnitLevels","lockExceptionsStyles","headerContainer","Link","to","FontIcon","classnames","backArrowIcon","header","headerDivider","subHeader","Card","card","addLockExceptionButton","primary","orgUnitIds","orgUnitPath","splitOrgUnitPath","join","pe","ds","columnLabels","period","organisationUnit","LockExceptionsTable","columns","rows","atBatchDeletionPage","onRemoveLockException","Table","TableHead","TableRowHead","column","TableCellHead","TableBody","row","TableRow","TableCell","secondary","RemoveLockExceptionModal","lockException","onRemove","onClose","Modal","ModalTitle","ModalContent","ModalActions","destructive","organisationUnitId","parseLockExceptions","lockExceptionResponse","batchedLockExceptions","BatchDeleteLockExceptions","removeLockExceptionModal","setRemoveLockExceptionModal","visible","lockExceptions","i18nKeys","dataIntegrity","description","actionText","unexpectedError","maintenance","checkboxes","analyticsTableClear","analyticsTableAnalyze","zeroDataValueRemoval","softDeletedDataValueRemoval","softDeletedEventRemoval","softDeletedEnrollmentRemoval","softDeletedTrackedEntityInstanceRemoval","periodPruning","expiredInvitationsClear","sqlViewsDrop","sqlViewsCreate","categoryOptionComboUpdate","ouPathsUpdate","cacheClear","appReload","resourceTables","tables","organisationUnitStructure","organistionUnitCategoryOptionCombo","categoryOptionGroupSetStructure","dataElementGroupSetStructure","indicatorGroupSetStructure","organisationUnitGroupSetStructure","categoryStructure","dataElementCategoryOptionComboName","dataElementStructure","periodStructure","dataPeriodStructure","dataElementCategoryOptionCombinations","analytics","skipAggregate","skipResourceTables","skipEvents","skipEnrollment","dataStatistics","minMaxValueGeneration","SUCCESS_COLOR","INFO_COLOR","ERROR_COLOR","SUCCESS_NOTIFICATION_ICON","notificationsTableStyles","iconStyle","fontSize","rowStyle","height","evenRowStyle","backgroundColor","timeColumnStyle","messageColumnStyle","successStyle","iconColor","fontWeight","errorStyle","infoStyle","notificationStyles","icon","notificationStylesInfo","NotificationsTable","notifications","animateIncomplete","done","some","n","completed","renderNotificationRow","notification","displayBorder","TableRowColumn","dateFromServer","time","notificationIconInfo","renderNotificationIcon","selectable","displayRowCheckbox","namespace","addResources","arTranslations","ar_EGTranslations","ar_IQTranslations","ar_SDTranslations","bnTranslations","ckbTranslations","csTranslations","daTranslations","enTranslations","esTranslations","frTranslations","idTranslations","kmTranslations","loTranslations","mnTranslations","myTranslations","nbTranslations","neTranslations","prsTranslations","psTranslations","ptTranslations","pt_BRTranslations","ruTranslations","rwTranslations","svTranslations","tetTranslations","tgTranslations","ukTranslations","urTranslations","uzTranslations","uz_CyrlTranslations","uz_LatnTranslations","viTranslations","zhTranslations","zh_CNTranslations","DocsLink","sectionKey","serverVersion","useConfig","docsVersion","major","minor","tag","getDocsVersion","docsKey","getDocsKeyForSection","IconButton","href","rel","tooltip","tooltipPosition","iconClassName","PageHeader","headerTitle","getUpdatedNotifications","taskNotifications","lastIndex","reverse","x","DEFAULT_LAST_YEARS","lastYearValues","String","lastYearElements","analyticsCheckboxes","usePoll","fn","pollInterval","intervalId","useRef","cancel","current","clearInterval","start","args","setInterval","pollQuery","poll","jobId","startAnalyticsTablesGenerationMutation","Analytics","toggleCheckbox","setCheckboxes","forEach","checkbox","checked","useCheckboxes","lastYears","setLastYears","startAnalyticsTablesGeneration","useAnalyticsPoll","isPolling","response","noticeBox","form","entries","Checkbox","SingleSelectField","lastYearsSelect","item","SingleSelectOption","notificationsTable","Content","content","renderValue","element","jsStyles","titleStyle","errorStyles","titleColor","colors","red600","openIcon","closeIcon","noErrorStyles","green600","cursor","countElements","sum","arr","reduce","acc","values","IssueCard","elementsCount","expandable","openFontIcon","closeFontIcon","CardHeader","issueTitle","issueElementsCount","actAsExpander","showExpandableButton","CardText","cardText","controls","dataElementsWithoutDataSet","dataElementsWithoutGroups","dataElementsViolatingExclusiveGroupSets","dataElementsAssignedToDataSetsWithDifferentPeriodTypes","dataSetsNotAssignedToOrganisationUnits","indicatorsWithIdenticalFormulas","indicatorsWithoutGroups","invalidIndicatorNumerators","invalidIndicatorDenominators","indicatorsViolatingExclusiveGroupSets","organisationUnitsWithCyclicReferences","orphanedOrganisationUnits","organisationUnitsWithoutGroups","organisationUnitsViolatingExclusiveGroupSets","organisationUnitGroupsWithoutGroupSets","validationRulesWithoutGroups","invalidValidationRuleLeftSideExpressions","invalidValidationRuleRightSideExpressions","invalidProgramIndicatorExpressions","invalidProgramIndicatorFilters","dataElementsInDataSetNotInForm","invalidCategoryCombos","duplicatePeriods","programRulesWithNoCondition","programRulesWithNoAction","programRulesWithNoPriority","programRuleVariablesWithNoDataElement","programRuleVariablesWithNoAttribute","programRuleActionsWithNoDataObject","programRuleActionsWithNoNotification","programRuleActionsWithNoSectionId","programRuleActionsWithNoStageId","programIndicatorsWithNoExpression","Issues","issues","errorElementskeys","startDataIntegrityCheckMutation","DataIntegrity","_poll$error","handleStartDataIntegrityCheck","useDataIntegrityPoll","FormattedNumber","Intl","NumberFormat","language","format","DataStatisticsTable","elements","suppressZebraStriping","count","OBJECT_COUNTS_KEY","ACTIVE_USERS_KEY","USER_INVITATIONS_KEY","DATA_VALUE_COUNT_KEY","EVENT_COUNT_KEY","EXPIRED_INVITATION_KEY","objectLabels","indicator","visualization","programStageInstance","validationRule","dataValue","program","dataElement","organisationUnitGroup","trackedEntityInstance","reportTable","programInstance","indicatorType","userGroup","user","indicatorGroup","chart","dataElementGroup","dashboard","translatedTimeLabelFromIntProperty","intProperty","days","userInvitationsTableFromResponse","userInvitationsResponse","userInvitationsTable","TableCard","dataSummary","DataStatistics","objectCountsResponse","activeUsersResponse","dataValueCountsResponse","eventCountsResponse","parseTables","renderTable","LockExceptions","page","setPage","pageSize","setPageSize","renderPagination","total","pageCount","pager","pagination","Pagination","onPageSizeChange","onPageChange","flexSpaceBetween","tabIndex","Checkboxes","Maintenance","MIN_MAX_VALUE_ENDPOINT","organisationIdFromPath","array","generateMinMaxValueMutation","removeMinMaxValueMutation","MinMaxValueGeneration","generateMinMaxValue","removeMinMaxValue","selectedOrganisationUnit","setSelectedOrganisationUnit","selectedDataSets","setSelectedDataSets","dataSetsSelectRef","formValid","left","multiple","from","selectedOptions","select","ref","tree","r","singleSelection","startResourceTablesGenerationMutation","ResourceTable","handleStartResourceTablesGeneration","useResourceTablesPoll","table","tableName","sections","component","info","docs","ResourceTables","_sections$find","find","section","GridSection","PureComponent","GridTile","classNames","gridElement","gridTitleBar","gridTitleDescription","gridIcon","gridDescription","gridActionText","PropTypes","shape","string","isRequired","Home","gridElements","gridContainer","Routes","Switch","Route","exact","Redirect","SidebarItem","isActive","useRouteMatch","sidebarItem","active","Sidebar","Menu","theme","spacing","Spacing","fontFamily","palette","primary1Color","primary2Color","blue700","primary3Color","blue100","accent1Color","orange500","accent2Color","grey100","accent3Color","orangeA200","textColor","darkBlack","alternateTextColor","white","canvasColor","borderColor","grey400","disabledColor","fade","muiTheme","getMuiTheme","App","HashRouter","CssVariables","spacers","MuiThemeProvider","sidebar","contentWrapper"],"mappings":"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","file":"static/js/app.1ecfea33.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"pagination\":\"LockExceptions_pagination__14JE0\",\"headerContainer\":\"LockExceptions_headerContainer__1Xr9H\",\"header\":\"LockExceptions_header__1Hg9t\",\"flexSpaceBetween\":\"LockExceptions_flexSpaceBetween__120Gr\",\"backArrowIcon\":\"LockExceptions_backArrowIcon__O3yWt\",\"headerDivider\":\"LockExceptions_headerDivider__3y3hh\",\"subHeader\":\"LockExceptions_subHeader__3AlrK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"App_container__2zgzu\",\"sidebar\":\"App_sidebar__10tAV\",\"content\":\"App_content__3I8HS\",\"contentWrapper\":\"App_contentWrapper__28dVZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"AddLockException_card__1cWmQ\",\"addLockExceptionButton\":\"AddLockException_addLockExceptionButton__11OjV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"selectsContainer\":\"AddLockExceptionForm_selectsContainer__3dMtH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"organisationUnitTree\":\"OrganisationUnitSelectionCard_organisationUnitTree__3mqle\",\"right\":\"OrganisationUnitSelectionCard_right__24EXJ\",\"organisationUnitSelectionCard\":\"OrganisationUnitSelectionCard_organisationUnitSelectionCard__1mMim\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"PageHeader_header__1jM0V\",\"headerTitle\":\"PageHeader_headerTitle__1KEEp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"Analytics_card__yDnHd\",\"form\":\"Analytics_form__1kWco\",\"checkboxes\":\"Analytics_checkboxes__3x3kH\",\"noticeBox\":\"Analytics_noticeBox__33LKk\",\"checkbox\":\"Analytics_checkbox__iwSjP\",\"lastYearsSelect\":\"Analytics_lastYearsSelect__1u-Al\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"IssueCard_card__3_lBo\",\"cardText\":\"IssueCard_cardText__2KnBC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"issues\":\"Issues_issues__24Dvb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"DataStatistics_card__-usL2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"checkboxes\":\"Checkboxes_checkboxes__37c7z\",\"checkbox\":\"Checkboxes_checkbox__1sczJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"Maintenance_card__1RUV7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"MinMaxValueGeneration_card__3HhUq\",\"header\":\"MinMaxValueGeneration_header__3aa-o\",\"container\":\"MinMaxValueGeneration_container__1KXr1\",\"label\":\"MinMaxValueGeneration_label__Zpg4R\",\"left\":\"MinMaxValueGeneration_left___Z-17\",\"right\":\"MinMaxValueGeneration_right__3Nvgn\",\"tree\":\"MinMaxValueGeneration_tree__1LuaX\",\"select\":\"MinMaxValueGeneration_select__3RB4a\",\"options\":\"MinMaxValueGeneration_options__XH-P_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"ResourceTables_card__1Xjck\",\"description\":\"ResourceTables_description__3ojib\",\"tableName\":\"ResourceTables_tableName__3eEPw\",\"noticeBox\":\"ResourceTables_noticeBox__2-ZOw\",\"notificationsTable\":\"ResourceTables_notificationsTable__3uSsd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gridElement\":\"GridSection_gridElement__dFN30\",\"gridTitleBar\":\"GridSection_gridTitleBar__iuWB9\",\"gridTitleDescription\":\"GridSection_gridTitleDescription__OBU6O\",\"gridIcon\":\"GridSection_gridIcon__1BcuZ\",\"gridDescription\":\"GridSection_gridDescription__3BQ6R\",\"gridActionText\":\"GridSection_gridActionText__2cTCc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gridContainer\":\"Home_gridContainer__3mcNn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sidebarItem\":\"Sidebar_sidebarItem__3GXPY\"};","function addToSelection(orgUnits) {\n  const orgUnitArray = Array.isArray(orgUnits) ? orgUnits : orgUnits.toArray();\n  const addedOus = orgUnitArray.filter(ou => !this.props.selected.includes(ou.path));\n  this.props.onUpdateSelection(this.props.selected.concat(addedOus.map(ou => ou.path)));\n}\n\nfunction removeFromSelection(orgUnits) {\n  const orgUnitArray = Array.isArray(orgUnits) ? orgUnits : orgUnits.toArray();\n  const removedOus = orgUnitArray.filter(ou => this.props.selected.includes(ou.path));\n  const removed = removedOus.map(ou => ou.path);\n  const selectedOus = this.props.selected.filter(ou => !removed.includes(ou));\n  this.props.onUpdateSelection(selectedOus);\n}\n\nfunction handleChangeSelection(event) {\n  this.setState({\n    selection: event.target.value\n  });\n}\n\nexport { addToSelection, removeFromSelection, handleChangeSelection };","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport i18n from '@dhis2/d2-i18n';\nimport { ButtonStrip, Button } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { addToSelection, removeFromSelection } from './common';\n\nclass OrgUnitSelectAll extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"handleSelectAll\", () => {\n      if (this.props.currentRoot) {\n        this.setState({\n          loading: true\n        });\n        this.getDescendantOrgUnits().then(orgUnits => {\n          this.setState({\n            loading: false\n          });\n          this.addToSelection(orgUnits);\n        });\n      } else if (Array.isArray(this.state.cache)) {\n        this.props.onUpdateSelection(this.state.cache.slice());\n      } else {\n        this.setState({\n          loading: true\n        });\n        this.props.d2.models.organisationUnits.list({\n          fields: 'id,path',\n          paging: false\n        }).then(orgUnits => {\n          const ous = orgUnits.toArray().map(ou => ou.path);\n          this.setState({\n            cache: ous,\n            loading: false\n          });\n          this.props.onUpdateSelection(ous.slice());\n        }).catch(err => {\n          this.setState({\n            loading: false\n          });\n          console.error('Failed to load all org units:', err);\n        });\n      }\n    });\n\n    _defineProperty(this, \"handleDeselectAll\", () => {\n      if (this.props.currentRoot) {\n        this.setState({\n          loading: true\n        });\n        this.getDescendantOrgUnits().then(orgUnits => {\n          this.setState({\n            loading: false\n          });\n          this.removeFromSelection(orgUnits);\n        });\n      } else {\n        this.props.onUpdateSelection([]);\n      }\n    });\n\n    this.state = {\n      loading: false,\n      cache: null\n    };\n    this.addToSelection = addToSelection.bind(this);\n    this.removeFromSelection = removeFromSelection.bind(this);\n  }\n\n  getDescendantOrgUnits() {\n    return this.props.d2.models.organisationUnits.list({\n      root: this.props.currentRoot.id,\n      paging: false,\n      includeDescendants: true,\n      fields: 'id,path'\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(ButtonStrip, null, /*#__PURE__*/React.createElement(Button, {\n      onClick: this.handleSelectAll,\n      disabled: this.state.loading\n    }, i18n.t('Select All Org Units')), /*#__PURE__*/React.createElement(Button, {\n      onClick: this.handleDeselectAll,\n      disabled: this.state.loading\n    }, i18n.t('Deselect All Org Units')));\n  }\n\n}\n\nOrgUnitSelectAll.propTypes = {\n  d2: PropTypes.object.isRequired,\n  // This prop is used, but in the functions defined in `common.js`\n\n  /* eslint-disable react/no-unused-prop-types */\n  // selected is an array of selected organisation unit IDs\n  selected: PropTypes.array.isRequired,\n\n  /* eslint-enable react/no-unused-prop-types */\n  // Whenever the selection changes, onUpdateSelection will be called with\n  // one argument: The new array of selected organisation unit paths\n  onUpdateSelection: PropTypes.func.isRequired,\n  // If currentRoot is set, only org units that are descendants of the\n  // current root org unit will be added to or removed from the selection\n  currentRoot: PropTypes.object\n};\nexport default OrgUnitSelectAll;","import i18n from '@dhis2/d2-i18n';\nimport { CircularLoader, Button, ButtonStrip } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nconst Controls = ({\n  loading,\n  disabled,\n  onSelect,\n  onDeselect\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  style: {\n    position: 'absolute',\n    display: 'inline-block',\n    top: 24,\n    marginLeft: 16\n  }\n}, loading && /*#__PURE__*/React.createElement(CircularLoader, {\n  small: true\n}), /*#__PURE__*/React.createElement(ButtonStrip, null, /*#__PURE__*/React.createElement(Button, {\n  onClick: onSelect,\n  disabled: disabled\n}, i18n.t('Select')), /*#__PURE__*/React.createElement(Button, {\n  onClick: onDeselect,\n  disabled: disabled\n}, i18n.t('Deselect'))));\n\nControls.propTypes = {\n  disabled: PropTypes.bool.isRequired,\n  loading: PropTypes.bool.isRequired,\n  onDeselect: PropTypes.func.isRequired,\n  onSelect: PropTypes.func.isRequired\n};\nexport default Controls;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport MenuItem from 'material-ui/MenuItem';\nimport SelectField from 'material-ui/SelectField';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nfunction renderMenuItem(id, displayName) {\n  return /*#__PURE__*/React.createElement(MenuItem, {\n    key: id,\n    value: id,\n    primaryText: displayName\n  });\n}\n\nfunction renderMenuItems(menuItems) {\n  const renderedMenuItems = menuItems.map(({\n    id,\n    displayName\n  }) => renderMenuItem(id, displayName));\n  return renderedMenuItems;\n}\n\nfunction createCallbackWithFakeEventFromMaterialSelectField(callback) {\n  return (event, index, value) => callback({\n    target: {\n      value\n    }\n  });\n}\n\nfunction D2UiDropdown({\n  onChange,\n  value,\n  disabled,\n  menuItems,\n  ...other\n}) {\n  const menuItemArray = Array.isArray(menuItems) ? menuItems : menuItems.toArray();\n  const hasOptions = menuItemArray.length > 0;\n  return /*#__PURE__*/React.createElement(SelectField, _extends({\n    value: hasOptions ? value : 1,\n    fullWidth: false,\n    onChange: createCallbackWithFakeEventFromMaterialSelectField(onChange),\n    disabled: !hasOptions || disabled\n  }, other), hasOptions ? renderMenuItems(menuItemArray) : /*#__PURE__*/React.createElement(MenuItem, {\n    value: 1,\n    primaryText: \"-\"\n  }));\n}\n\nD2UiDropdown.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  disabled: PropTypes.bool,\n  menuItems: PropTypes.oneOfType([PropTypes.array, PropTypes.object]),\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.number, PropTypes.bool])\n};\nD2UiDropdown.defaultProps = {\n  value: null,\n  menuItems: [],\n  disabled: false\n};\nexport default D2UiDropdown;","import PropTypes from 'prop-types';\nimport React from 'react';\nimport Controls from './Controls';\nimport D2UiDropdown from './D2UiDropdown';\n\nconst Dropdown = ({\n  menuItems,\n  value,\n  label,\n  loading,\n  onChange,\n  onSelect,\n  onDeselect\n}) =>\n/*#__PURE__*/\n// The minHeight on the wrapping div below is there to compensate for the fact that a\n// Material-UI SelectField will change height depending on whether or not it has a value\nReact.createElement(\"div\", {\n  style: {\n    position: 'relative',\n    minHeight: 89\n  }\n}, /*#__PURE__*/React.createElement(D2UiDropdown, {\n  menuItems: menuItems,\n  value: value,\n  floatingLabelText: label,\n  disabled: loading,\n  onChange: onChange\n}), /*#__PURE__*/React.createElement(Controls, {\n  loading: loading,\n  disabled: loading || !value,\n  onSelect: onSelect,\n  onDeselect: onDeselect\n}));\n\nDropdown.propTypes = {\n  label: PropTypes.string.isRequired,\n  menuItems: PropTypes.array.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onDeselect: PropTypes.func.isRequired,\n  onSelect: PropTypes.func.isRequired,\n  loading: PropTypes.bool,\n  value: PropTypes.any\n};\nexport default Dropdown;","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { addToSelection, removeFromSelection, handleChangeSelection } from './common';\nimport Dropdown from './Dropdown/Dropdown';\n\nclass OrgUnitSelectByGroup extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: false,\n      selection: undefined\n    };\n    this.groupCache = new Map();\n    this.addToSelection = addToSelection.bind(this);\n    this.removeFromSelection = removeFromSelection.bind(this);\n    this.handleChangeSelection = handleChangeSelection.bind(this);\n    this.getOrgUnitsForGroup = this.getOrgUnitsForGroup.bind(this);\n    this.handleSelect = this.handleSelect.bind(this);\n    this.handleDeselect = this.handleDeselect.bind(this);\n  }\n\n  getOrgUnitsForGroup(groupId, ignoreCache = false) {\n    const d2 = this.props.d2;\n    return new Promise(resolve => {\n      if (this.props.currentRoot) {\n        this.setState({\n          loading: true\n        });\n        d2.models.organisationUnits.list({\n          root: this.props.currentRoot.id,\n          paging: false,\n          includeDescendants: true,\n          fields: 'id,path',\n          filter: \"organisationUnitGroups.id:eq:\".concat(groupId)\n        }).then(orgUnits => orgUnits.toArray()).then(orgUnits => {\n          this.setState({\n            loading: false\n          });\n          resolve(orgUnits.slice());\n        });\n      } else if (!ignoreCache && this.groupCache.has(groupId)) {\n        resolve(this.groupCache.get(groupId).slice());\n      } else {\n        this.setState({\n          loading: true\n        });\n        const d2 = this.props.d2;\n        d2.models.organisationUnitGroups.get(groupId, {\n          fields: 'organisationUnits[id,path]'\n        }).then(orgUnitGroups => orgUnitGroups.organisationUnits.toArray()).then(orgUnits => {\n          this.setState({\n            loading: false\n          });\n          this.groupCache.set(groupId, orgUnits); // Make a copy of the returned array to ensure that the cache won't be modified from elsewhere\n\n          resolve(orgUnits.slice());\n        }).catch(err => {\n          this.setState({\n            loading: false\n          });\n          console.error(\"Failed to load org units in group \".concat(groupId, \":\"), err);\n        });\n      }\n    });\n  }\n\n  handleSelect() {\n    this.getOrgUnitsForGroup(this.state.selection).then(this.addToSelection);\n  }\n\n  handleDeselect() {\n    this.getOrgUnitsForGroup(this.state.selection).then(this.removeFromSelection);\n  }\n\n  render() {\n    const menuItems = Array.isArray(this.props.groups) ? this.props.groups : this.props.groups.toArray();\n    const label = i18n.t('Organisation unit group');\n    return /*#__PURE__*/React.createElement(Dropdown, {\n      menuItems: menuItems,\n      value: this.state.selection,\n      label: label,\n      loading: this.state.loading,\n      onChange: this.handleChangeSelection,\n      onSelect: this.handleSelect,\n      onDeselect: this.handleDeselect\n    });\n  }\n\n}\n\nOrgUnitSelectByGroup.propTypes = {\n  d2: PropTypes.object.isRequired,\n  // groups is an array of either ModelCollection objects or plain objects,\n  // where each object should contain `id` and `displayName` properties\n  groups: PropTypes.oneOfType([PropTypes.object, PropTypes.array]).isRequired,\n  // This prop is used, but in the functions defined in `common.js`\n\n  /* eslint-disable react/no-unused-prop-types */\n  // selected is an array of selected organisation unit IDs\n  selected: PropTypes.array.isRequired,\n\n  /* eslint-enable react/no-unused-prop-types */\n  // This prop is used, but in the functions defined in `common.js`\n\n  /* eslint-disable react/no-unused-prop-types */\n  // Whenever the selection changes, onUpdateSelection will be called with\n  // one argument: The new array of selected organisation unit paths\n  onUpdateSelection: PropTypes.func.isRequired,\n\n  /* eslint-enable react/no-unused-prop-types */\n  // If currentRoot is set, only org units that are descendants of the\n  // current root org unit will be added to or removed from the selection\n  currentRoot: PropTypes.object\n};\nexport default OrgUnitSelectByGroup;","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { addToSelection, removeFromSelection, handleChangeSelection } from './common';\nimport Dropdown from './Dropdown/Dropdown';\n\nclass OrgUnitSelectByLevel extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: false,\n      selection: undefined\n    };\n    this.levelCache = new Map();\n    this.addToSelection = addToSelection.bind(this);\n    this.removeFromSelection = removeFromSelection.bind(this);\n    this.handleChangeSelection = handleChangeSelection.bind(this);\n    this.getOrgUnitsForLevel = this.getOrgUnitsForLevel.bind(this);\n    this.handleSelect = this.handleSelect.bind(this);\n    this.handleDeselect = this.handleDeselect.bind(this);\n  }\n\n  getOrgUnitsForLevel(level, ignoreCache = false) {\n    const d2 = this.props.d2;\n    return new Promise(resolve => {\n      if (this.props.currentRoot) {\n        const rootLevel = this.props.currentRoot.level || this.props.currentRoot.path ? this.props.currentRoot.path.match(/\\//g).length : NaN;\n        const relativeLevel = level - rootLevel;\n\n        if (isNaN(relativeLevel) || relativeLevel < 0) {\n          return resolve([]);\n        }\n\n        d2.models.organisationUnits.list({\n          paging: false,\n          level: level - rootLevel,\n          fields: 'id,path',\n          root: this.props.currentRoot.id\n        }).then(orgUnits => orgUnits.toArray()).then(orgUnitArray => {\n          this.setState({\n            loading: false\n          });\n          resolve(orgUnitArray);\n        });\n      } else if (!ignoreCache && this.levelCache.has(level)) {\n        resolve(this.levelCache.get(level).slice());\n      } else {\n        this.setState({\n          loading: true\n        });\n        d2.models.organisationUnits.list({\n          paging: false,\n          level,\n          fields: 'id,path'\n        }).then(orgUnits => orgUnits.toArray()).then(orgUnitArray => {\n          this.setState({\n            loading: false\n          });\n          this.levelCache.set(level, orgUnitArray); // Make a copy of the returned array to ensure that the cache won't be modified from elsewhere\n\n          resolve(orgUnitArray.slice());\n        }).catch(err => {\n          this.setState({\n            loading: false\n          });\n          console.error(\"Failed to load org units in level \".concat(level, \":\"), err);\n        });\n      }\n    });\n  }\n\n  handleSelect() {\n    this.getOrgUnitsForLevel(this.state.selection).then(orgUnits => {\n      this.addToSelection(orgUnits);\n    });\n  }\n\n  handleDeselect() {\n    this.getOrgUnitsForLevel(this.state.selection).then(orgUnits => {\n      this.removeFromSelection(orgUnits);\n    });\n  }\n\n  render() {\n    const currentRoot = this.props.currentRoot;\n    const currentRootLevel = currentRoot ? currentRoot.level || currentRoot.path.match(/\\//g).length : 1;\n    const menuItems = (Array.isArray(this.props.levels) ? this.props.levels : this.props.levels.toArray()).filter(level => level.level >= currentRootLevel).map(level => ({\n      id: level.level,\n      displayName: level.displayName\n    }));\n    const label = i18n.t('Organisation unit level');\n    return /*#__PURE__*/React.createElement(Dropdown, {\n      menuItems: menuItems,\n      value: this.state.selection,\n      label: label,\n      loading: this.state.loading,\n      onChange: this.handleChangeSelection,\n      onSelect: this.handleSelect,\n      onDeselect: this.handleDeselect\n    });\n  }\n\n}\n\nOrgUnitSelectByLevel.propTypes = {\n  d2: PropTypes.object.isRequired,\n  // levels is an array of either ModelCollection objects or plain objects,\n  // where each object should contain `level` and `displayName` properties\n  levels: PropTypes.oneOfType([PropTypes.object, PropTypes.array]).isRequired,\n  // This prop is used, but in the functions defined in `common.js`\n\n  /* eslint-disable react/no-unused-prop-types */\n  // selected is an array of selected organisation unit IDs\n  selected: PropTypes.array.isRequired,\n\n  /* eslint-enable react/no-unused-prop-types */\n  // This prop is used, but in the functions defined in `common.js`\n\n  /* eslint-disable react/no-unused-prop-types */\n  // Whenever the selection changes, onUpdateSelection will be called with\n  // one argument: The new array of selected organisation unit paths\n  onUpdateSelection: PropTypes.func.isRequired,\n\n  /* eslint-enable react/no-unused-prop-types */\n  // If currentRoot is set, only org units that are descendants of the\n  // current root org unit will be added to or removed from the selection\n  currentRoot: (props, propName) => {\n    if (props[propName]) {\n      if (!Object.prototype.hasOwnProperty.call(props[propName], 'id')) {\n        return new Error('currentRoot must have an `id` property');\n      }\n\n      if (!Object.prototype.hasOwnProperty.call(props[propName], 'level') && !Object.prototype.hasOwnProperty.call(props[propName], 'path')) {\n        return new Error('currentRoot must have either a `level` or a `path` property');\n      }\n    }\n  }\n};\nexport default OrgUnitSelectByLevel;","import { useDataQuery } from '@dhis2/app-runtime';\nimport { useD2 } from '@dhis2/app-runtime-adapter-d2';\nimport i18n from '@dhis2/d2-i18n';\nimport { NoticeBox, CenteredContent, CircularLoader, OrganisationUnitTree } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState, useEffect } from 'react';\nimport OrgUnitSelectAll from '../OrgUnitSelect/OrgUnitSelectAll';\nimport OrgUnitSelectByGroup from '../OrgUnitSelect/OrgUnitSelectByGroup';\nimport OrgUnitSelectByLevel from '../OrgUnitSelect/OrgUnitSelectByLevel';\nimport styles from './OrganisationUnitSelectionCard.module.css';\nconst query = {\n  rootWithMembers: {\n    resource: 'organisationUnits',\n    params: ({\n      dataSetId\n    }) => ({\n      fields: 'id,path',\n      level: 1,\n      memberCollection: 'dataSets',\n      memberObject: dataSetId,\n      paging: false\n    })\n  },\n  dataSetMembers: {\n    resource: 'dataSets',\n    id: ({\n      dataSetId\n    }) => dataSetId,\n    params: {\n      fields: 'organisationUnits[id,path]',\n      paging: false\n    }\n  }\n};\n\nconst OrganisationUnitSelectionCard = ({\n  dataSetId,\n  levels,\n  groups,\n  selected,\n  onSelectionUpdate\n}) => {\n  const [currentRoot, setCurrentRoot] = useState(null);\n  const {\n    loading,\n    called,\n    error,\n    data,\n    refetch\n  } = useDataQuery(query, {\n    lazy: true\n  });\n  const {\n    d2\n  } = useD2();\n  useEffect(() => {\n    refetch({\n      dataSetId\n    });\n  }, [dataSetId]);\n\n  const handleOrgUnitClick = ({\n    path,\n    selected\n  }) => {\n    const root = path.split('/')[0];\n    setCurrentRoot(root);\n    onSelectionUpdate(selected);\n  };\n\n  if (loading || !called) {\n    return /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null));\n  }\n\n  if (error) {\n    return /*#__PURE__*/React.createElement(NoticeBox, {\n      title: i18n.t('Error loading data for data set'),\n      error: true\n    }, error.message);\n  }\n\n  const rootWithMembers = data.rootWithMembers.organisationUnits[0];\n  const orgUnitPaths = data.dataSetMembers.organisationUnits.map(ou => ou.path); // TODO: ensure only org units in orgUnitPaths can be selected by OrgSelect components\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.organisationUnitSelectionCard\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.organisationUnitTree,\n    \"data-test\": \"add-lock-exception-org-unit-tree\"\n  }, /*#__PURE__*/React.createElement(OrganisationUnitTree, {\n    roots: [rootWithMembers.id],\n    initiallyExpanded: [rootWithMembers.path],\n    filter: orgUnitPaths,\n    selected: selected,\n    onChange: handleOrgUnitClick\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.right\n  }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"div\", null, currentRoot ? i18n.t('For organisation units within {{organisationUnitName}}:', {\n    organisationUnitName: currentRoot.displayName\n  }) : i18n.t('For all organisation units:')), /*#__PURE__*/React.createElement(OrgUnitSelectByLevel, {\n    d2: d2,\n    levels: levels,\n    selected: selected,\n    currentRoot: currentRoot,\n    onUpdateSelection: onSelectionUpdate\n  }), /*#__PURE__*/React.createElement(OrgUnitSelectByGroup, {\n    d2: d2,\n    groups: groups,\n    selected: selected,\n    currentRoot: currentRoot,\n    onUpdateSelection: onSelectionUpdate\n  }), /*#__PURE__*/React.createElement(OrgUnitSelectAll, {\n    d2: d2,\n    selected: selected,\n    currentRoot: currentRoot,\n    onUpdateSelection: onSelectionUpdate\n  }))));\n};\n\nOrganisationUnitSelectionCard.propTypes = {\n  dataSetId: PropTypes.string.isRequired,\n  groups: PropTypes.oneOfType([PropTypes.object, PropTypes.array]).isRequired,\n  levels: PropTypes.oneOfType([PropTypes.object, PropTypes.array]).isRequired,\n  onSelectionUpdate: PropTypes.func.isRequired,\n  selected: PropTypes.array\n};\nexport default OrganisationUnitSelectionCard;","import i18n from '@dhis2/d2-i18n';\nimport { is53WeekISOYear, getFirstDateOfWeek } from 'd2/period/helpers';\nimport DatePicker from 'material-ui/DatePicker';\nimport MenuItem from 'material-ui/MenuItem';\nimport SelectField from 'material-ui/SelectField';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nconst periodTypeLabels = {\n  week: i18n.t('week'),\n  month: i18n.t('month'),\n  year: i18n.t('year'),\n  biWeek: i18n.t('bi weekly'),\n  biMonth: i18n.t('bi monthly'),\n  day: i18n.t('day'),\n  jan: i18n.t('jan'),\n  feb: i18n.t('feb'),\n  mar: i18n.t('mar'),\n  apr: i18n.t('apr'),\n  may: i18n.t('may'),\n  jun: i18n.t('jun'),\n  jul: i18n.t('jul'),\n  aug: i18n.t('aug'),\n  sep: i18n.t('sep'),\n  oct: i18n.t('oct'),\n  nov: i18n.t('nov'),\n  dec: i18n.t('dec'),\n  'jan-feb': i18n.t('jan-feb'),\n  'mar-apr': i18n.t('mar-apr'),\n  'may-jun': i18n.t('may-jun'),\n  'jul-aug': i18n.t('jul-aug'),\n  'sep-oct': i18n.t('sep-oct'),\n  'nov-dec': i18n.t('nov-dec'),\n  quarter: i18n.t('quarter'),\n  Q1: i18n.t('Q1'),\n  Q2: i18n.t('Q2'),\n  Q3: i18n.t('Q3'),\n  Q4: i18n.t('Q4'),\n  sixMonth: i18n.t('six monthly'),\n  'jan-jun': i18n.t('jan-jun'),\n  'jul-dec': i18n.t('jul-dec'),\n  'apr-sep': i18n.t('apr-sep'),\n  'oct-mar': i18n.t('oct-mar')\n};\nconst styles = {\n  datePicker: {\n    width: '100%'\n  },\n  year: {\n    width: 95,\n    marginRight: 16\n  },\n  month: {\n    width: 125\n  },\n  week: {\n    width: 105\n  },\n  biWeek: {\n    width: 200\n  },\n  biMonth: {\n    width: 200\n  },\n  quarter: {\n    width: 200\n  },\n  sixMonth: {\n    width: 200\n  },\n  line: {\n    marginTop: 0\n  }\n};\n\nconst getYear = date => new Date(date).getFullYear().toString();\n\nconst getTwoDigitMonth = date => {\n  const month = new Date(date).getMonth() + 1; // Month is 0 indexed\n\n  return \"0\".concat(month).slice(-2);\n};\n\nconst getTwoDigitDay = date => {\n  const day = new Date(date).getDate();\n  return \"0\".concat(day).slice(-2);\n};\n\nconst formattedDate = date => \"\".concat(getYear(date)).concat(getTwoDigitMonth(date)).concat(getTwoDigitDay(date));\n\nconst getWeekYear = date => {\n  // Create a new date object for the thursday of this week\n  const target = new Date(date);\n  target.setDate(target.getDate() - (date.getDay() + 6) % 7 + 3);\n  return target.getFullYear();\n};\n\nconst isWeekValid = (date, week) => // It's not possible to have a week 53 in a 52 week year\n!is53WeekISOYear(date) && Number(week) !== 53;\n\nconst biWeekToWeek = biWeekStr => parseInt(biWeekStr) * 2 - 1;\n\nclass PeriodPicker extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  getTranslation(key) {\n    return periodTypeLabels[key] || key;\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.periodType !== prevProps.periodType) {\n      this.handleChange();\n    }\n  }\n\n  getPeriod() {\n    const week = this.props.periodType === 'BiWeekly' && this.state.biWeek ? biWeekToWeek(this.state.biWeek) : this.state.week;\n    const date = this.state.year && week && getFirstDateOfWeek(this.state.year, week);\n\n    switch (this.props.periodType) {\n      case 'Daily':\n        return this.state.date && formattedDate(this.state.date);\n\n      case 'Weekly':\n        if (date) {\n          this.setState({\n            invalidWeek: !isWeekValid(date, this.state.week)\n          });\n        }\n\n        return date && isWeekValid(date, this.state.week) && \"\".concat(getWeekYear(date), \"W\").concat(this.state.week);\n\n      case 'WeeklyWednesday':\n        if (date) {\n          this.setState({\n            invalidWeek: !isWeekValid(date, this.state.week)\n          });\n        }\n\n        return date && isWeekValid(date, this.state.week) && \"\".concat(getWeekYear(date), \"WedW\").concat(this.state.week);\n\n      case 'WeeklyThursday':\n        if (date) {\n          this.setState({\n            invalidWeek: !isWeekValid(date, this.state.week)\n          });\n        }\n\n        return date && isWeekValid(date, this.state.week) && \"\".concat(getWeekYear(date), \"ThuW\").concat(this.state.week);\n\n      case 'WeeklySaturday':\n        if (date) {\n          this.setState({\n            invalidWeek: !isWeekValid(date, this.state.week)\n          });\n        }\n\n        return date && isWeekValid(date, this.state.week) && \"\".concat(getWeekYear(date), \"SatW\").concat(this.state.week);\n\n      case 'WeeklySunday':\n        if (date) {\n          this.setState({\n            invalidWeek: !isWeekValid(date, this.state.week)\n          });\n        }\n\n        return date && isWeekValid(date, this.state.week) && \"\".concat(getWeekYear(date), \"SunW\").concat(this.state.week);\n\n      case 'BiWeekly':\n        if (date) {\n          this.setState({\n            invalidBiWeek: !isWeekValid(date, biWeekToWeek(this.state.biWeek))\n          });\n        }\n\n        return this.state.year && this.state.biWeek && \"\".concat(this.state.year, \"BiW\").concat(this.state.biWeek);\n\n      case 'Monthly':\n        return this.state.year && this.state.month && \"\".concat(this.state.year).concat(this.state.month);\n\n      case 'BiMonthly':\n        return this.state.year && this.state.biMonth && \"\".concat(this.state.year, \"0\").concat(this.state.biMonth, \"B\");\n\n      case 'Quarterly':\n        return this.state.year && this.state.quarter && \"\".concat(this.state.year, \"Q\").concat(this.state.quarter);\n\n      case 'SixMonthly':\n        return this.state.year && this.state.sixMonth && \"\".concat(this.state.year, \"S\").concat(this.state.sixMonth);\n\n      case 'SixMonthlyApril':\n        return this.state.year && this.state.sixMonth && \"\".concat(this.state.year, \"AprilS\").concat(this.state.sixMonth);\n\n      case 'SixMonthlyNov':\n        return this.state.year && this.state.sixMonth && \"\".concat(this.state.year, \"NovS\").concat(this.state.sixMonth);\n\n      case 'Yearly':\n        return this.state.year;\n\n      case 'FinancialApril':\n        return this.state.year && \"\".concat(this.state.year, \"April\");\n\n      case 'FinancialJuly':\n        return this.state.year && \"\".concat(this.state.year, \"July\");\n\n      case 'FinancialOct':\n        return this.state.year && \"\".concat(this.state.year, \"Oct\");\n\n      default:\n        return false;\n    }\n  }\n\n  handleChange() {\n    if (this.getPeriod()) {\n      this.props.onPickPeriod(this.getPeriod());\n    }\n  }\n\n  renderOptionPicker(name, options) {\n    const changeState = (e, i, value) => this.setState({\n      [name]: value\n    }, this.handleChange);\n\n    const isInvalid = name === 'week' && this.state.invalidWeek || name === 'biWeek' && this.state.invalidBiWeek;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: 'inline-block'\n      },\n      \"data-test\": \"period-picker-option-\".concat(name)\n    }, /*#__PURE__*/React.createElement(SelectField, {\n      value: this.state[name],\n      onChange: changeState,\n      style: styles[name],\n      floatingLabelText: this.getTranslation(name),\n      floatingLabelStyle: isInvalid ? {\n        color: 'red'\n      } : {}\n    }, Object.keys(options).sort().map(value => /*#__PURE__*/React.createElement(MenuItem, {\n      key: value,\n      value: value,\n      primaryText: /[^0-9]/.test(options[value]) && name !== 'biWeek' ? this.getTranslation(options[value]) : options[value]\n    }))));\n  }\n\n  renderYearPicker() {\n    const years = {};\n    const currentYear = new Date().getFullYear();\n\n    for (let year = 2014; year < currentYear + 5; year++) {\n      years[year] = year;\n    }\n\n    return this.renderOptionPicker('year', years);\n  }\n\n  renderMonthPicker() {\n    const months = {\n      '01': 'jan',\n      '02': 'feb',\n      '03': 'mar',\n      '04': 'apr',\n      '05': 'may',\n      '06': 'jun',\n      '07': 'jul',\n      '08': 'aug',\n      '09': 'sep',\n      10: 'oct',\n      11: 'nov',\n      12: 'dec'\n    };\n    return this.renderOptionPicker('month', months);\n  }\n\n  renderWeekPicker() {\n    const weeks = {};\n    const weekLimit = 53;\n\n    for (let week = 1; week <= weekLimit; week++) {\n      weeks[\"0\".concat(week).substr(-2)] = week;\n    }\n\n    return this.renderOptionPicker('week', weeks);\n  }\n\n  renderBiWeekPicker() {\n    const biWeeks = {};\n    const biWeekLimit = 27;\n    const prefix = this.getTranslation('biWeek');\n\n    for (let biWeek = 1; biWeek <= biWeekLimit; biWeek++) {\n      biWeeks[\"0\".concat(biWeek).substr(-2)] = \"\".concat(prefix, \" \").concat(biWeek);\n    }\n\n    return this.renderOptionPicker('biWeek', biWeeks);\n  }\n\n  renderBiMonthPicker() {\n    const biMonths = {\n      1: 'jan-feb',\n      2: 'mar-apr',\n      3: 'may-jun',\n      4: 'jul-aug',\n      5: 'sep-oct',\n      6: 'nov-dec'\n    };\n    return this.renderOptionPicker('biMonth', biMonths);\n  }\n\n  renderQuarterPicker() {\n    const quarters = {\n      1: 'Q1',\n      2: 'Q2',\n      3: 'Q3',\n      4: 'Q4'\n    };\n    return this.renderOptionPicker('quarter', quarters);\n  }\n\n  render() {\n    const setDateState = (nothing, date) => {\n      const year = getYear(date);\n      const month = getTwoDigitMonth(date);\n      this.setState({\n        date,\n        year,\n        month\n      }, this.handleChange);\n    };\n\n    switch (this.props.periodType) {\n      case 'Daily':\n        return /*#__PURE__*/React.createElement(DatePicker, {\n          floatingLabelText: this.getTranslation('day'),\n          onChange: setDateState,\n          autoOk: true,\n          container: \"inline\",\n          style: styles.datePicker\n        });\n\n      case 'Weekly':\n      case 'WeeklyWednesday':\n      case 'WeeklyThursday':\n      case 'WeeklySaturday':\n      case 'WeeklySunday':\n        return /*#__PURE__*/React.createElement(\"div\", {\n          style: styles.line\n        }, this.renderYearPicker(), this.renderWeekPicker());\n\n      case 'BiWeekly':\n        return /*#__PURE__*/React.createElement(\"div\", {\n          style: styles.line\n        }, this.renderYearPicker(), this.renderBiWeekPicker());\n\n      case 'Monthly':\n        return /*#__PURE__*/React.createElement(\"div\", {\n          style: styles.line\n        }, this.renderYearPicker(), this.renderMonthPicker());\n\n      case 'BiMonthly':\n        return /*#__PURE__*/React.createElement(\"div\", {\n          style: styles.line\n        }, this.renderYearPicker(), this.renderBiMonthPicker());\n\n      case 'Quarterly':\n        return /*#__PURE__*/React.createElement(\"div\", {\n          style: styles.line\n        }, this.renderYearPicker(), this.renderQuarterPicker());\n\n      case 'SixMonthly':\n        return /*#__PURE__*/React.createElement(\"div\", {\n          style: styles.line\n        }, this.renderYearPicker(), this.renderOptionPicker('sixMonth', {\n          1: 'jan-jun',\n          2: 'jul-dec'\n        }));\n\n      case 'SixMonthlyApril':\n        return /*#__PURE__*/React.createElement(\"div\", {\n          style: styles.line\n        }, this.renderYearPicker(), this.renderOptionPicker('sixMonth', {\n          1: 'apr-sep',\n          2: 'oct-mar'\n        }));\n\n      case 'SixMonthlyNov':\n        return /*#__PURE__*/React.createElement(\"div\", {\n          style: styles.line\n        }, this.renderYearPicker(), this.renderOptionPicker('sixMonth', {\n          1: 'nov-apr',\n          2: 'may-oct'\n        }));\n\n      case 'Yearly':\n      case 'FinancialApril':\n      case 'FinancialJuly':\n      case 'FinancialOct':\n        return /*#__PURE__*/React.createElement(\"div\", {\n          style: styles.line\n        }, this.renderYearPicker());\n\n      default:\n        return null;\n    }\n  }\n\n}\n\nPeriodPicker.propTypes = {\n  periodType: PropTypes.oneOf(['Daily', 'Weekly', 'WeeklyWednesday', 'WeeklyThursday', 'WeeklySaturday', 'WeeklySunday', 'BiWeekly', 'Monthly', 'BiMonthly', 'Quarterly', 'SixMonthly', 'SixMonthlyApril', 'SixMonthlyNov', 'Yearly', 'FinancialApril', 'FinancialJuly', 'FinancialOct']).isRequired,\n  onPickPeriod: PropTypes.func.isRequired\n};\nexport default PeriodPicker;","import i18n from '@dhis2/d2-i18n';\nimport SelectField from 'd2-ui/lib/select-field/SelectField';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport styles from './AddLockExceptionForm.module.css';\nimport OrganisationUnitSelectionCard from './OrganisationUnitSelectionCard';\nimport PeriodPicker from './PeriodPicker';\nconst d2UiSelectStyleOverride = {\n  minWidth: 360,\n  marginRight: 20\n};\n\nconst AddLockExceptionForm = ({\n  dataSets,\n  groups,\n  levels,\n  updateSelectedDataSetId,\n  updateSelectedOrgUnits,\n  updateSelectedPeriodId\n}) => {\n  const [selected, setSelected] = useState([]);\n  const [selectedDataSet, setSelectedDataSet] = useState(null);\n\n  const handleDataSetChange = async dataSet => {\n    const dataSetId = dataSet.id;\n\n    if (selectedDataSet !== null && dataSetId === selectedDataSet.id) {\n      return;\n    }\n\n    updateSelectedDataSetId(dataSetId);\n    setSelected([]);\n    setSelectedDataSet(dataSet);\n  };\n\n  const handlePeriodChange = periodId => {\n    updateSelectedPeriodId(periodId);\n  };\n\n  const handleSelectionUpdate = newSelection => {\n    setSelected(newSelection);\n    updateSelectedOrgUnits(newSelection);\n  };\n\n  const dataSetItems = dataSets.map(dataSet => ({\n    id: dataSet.id,\n    name: dataSet.displayName,\n    periodType: dataSet.periodType\n  }));\n  let dataSetSelectLabel = i18n.t('Select a data set');\n  let dataSetSelectValue = null;\n\n  if (selectedDataSet) {\n    dataSetSelectLabel = i18n.t('Data set');\n    dataSetSelectValue = selectedDataSet.id;\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.selectsContainer\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    \"data-test\": \"add-lock-exception-select-data-set\"\n  }, /*#__PURE__*/React.createElement(SelectField, {\n    style: d2UiSelectStyleOverride,\n    label: dataSetSelectLabel,\n    items: dataSetItems,\n    onChange: handleDataSetChange,\n    value: dataSetSelectValue\n  })), selectedDataSet && /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(PeriodPicker, {\n    periodType: selectedDataSet.periodType,\n    onPickPeriod: handlePeriodChange\n  }))), selectedDataSet && /*#__PURE__*/React.createElement(OrganisationUnitSelectionCard, {\n    dataSetId: selectedDataSet.id,\n    levels: levels,\n    groups: groups,\n    selected: selected,\n    onSelectionUpdate: handleSelectionUpdate\n  }));\n};\n\nAddLockExceptionForm.propTypes = {\n  dataSets: PropTypes.array.isRequired,\n  groups: PropTypes.oneOfType([PropTypes.object, PropTypes.array]).isRequired,\n  levels: PropTypes.oneOfType([PropTypes.object, PropTypes.array]).isRequired,\n  updateSelectedDataSetId: PropTypes.func.isRequired,\n  updateSelectedOrgUnits: PropTypes.func.isRequired,\n  updateSelectedPeriodId: PropTypes.func.isRequired\n};\nexport default AddLockExceptionForm;","import { useDataQuery, useDataMutation, useAlert } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Card, CenteredContent, NoticeBox, Button, CircularLoader } from '@dhis2/ui';\nimport classnames from 'classnames';\nimport FontIcon from 'material-ui/FontIcon';\nimport React, { useState } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport lockExceptionsStyles from '../lock-exceptions/LockExceptions.module.css';\nimport styles from './AddLockException.module.css';\nimport AddLockExceptionForm from './AddLockExceptionForm/AddLockExceptionForm';\nconst query = {\n  levels: {\n    resource: 'organisationUnitLevels',\n    params: {\n      fields: 'id,level,displayName',\n      paging: false,\n      order: 'level:asc'\n    }\n  },\n  groups: {\n    resource: 'organisationUnitGroups',\n    params: {\n      fields: 'id,displayName',\n      paging: false\n    }\n  },\n  dataSets: {\n    resource: 'dataSets',\n    params: {\n      fields: 'id,displayName,periodType',\n      paging: false\n    }\n  }\n};\nconst mutation = {\n  resource: 'lockExceptions',\n  type: 'create',\n  params: params => params\n};\n\nconst AddLockException = () => {\n  const history = useHistory();\n  const dataQuery = useDataQuery(query);\n  const successAlert = useAlert(i18n.t('Lock exception added'), {\n    success: true\n  });\n  const errorAlert = useAlert(({\n    error\n  }) => i18n.t('Error adding lock exception: {{error}}', {\n    error,\n    nsSeparator: null\n  }), {\n    critical: true\n  });\n  const [mutate, dataMutation] = useDataMutation(mutation, {\n    onComplete: () => {\n      successAlert.show();\n      history.push('/lock-exception');\n    },\n    onError: error => {\n      errorAlert.show({\n        error\n      });\n    }\n  });\n  const [selectedOrgUnits, setSelectedOrgUnits] = useState([]);\n  const [selectedDataSetId, setSelectedDataSetId] = useState(null);\n  const [selectedPeriodId, setSelectedPeriodId] = useState(null);\n\n  const handleAdd = () => {\n    const orgUnitIds = selectedOrgUnits.map(orgUnitPath => {\n      const splitOrgUnitPath = orgUnitPath.split('/');\n      return splitOrgUnitPath[splitOrgUnitPath.length - 1];\n    });\n    mutate({\n      ou: \"[\".concat(orgUnitIds.join(','), \"]\"),\n      pe: selectedPeriodId,\n      ds: selectedDataSetId\n    });\n  };\n\n  const isAddActionDisabled = dataMutation.loading || !(selectedOrgUnits.length > 0 && selectedDataSetId && selectedPeriodId);\n\n  if (dataQuery.loading) {\n    return /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null));\n  }\n\n  if (dataQuery.error) {\n    return /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(NoticeBox, {\n      error: true\n    }, dataQuery.error.message));\n  }\n\n  const {\n    levels: {\n      organisationUnitLevels\n    },\n    groups: {\n      organisationUnitGroups\n    },\n    dataSets: {\n      dataSets\n    }\n  } = dataQuery.data;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: lockExceptionsStyles.headerContainer\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/lock-exceptions\"\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    title: i18n.t('Go back to all lock exceptions')\n  }, /*#__PURE__*/React.createElement(FontIcon, {\n    className: classnames('material-icons', lockExceptionsStyles.backArrowIcon)\n  }, \"arrow_back\"))), /*#__PURE__*/React.createElement(\"h1\", {\n    className: lockExceptionsStyles.header\n  }, /*#__PURE__*/React.createElement(\"span\", null, i18n.t('Lock Exception')), /*#__PURE__*/React.createElement(\"span\", {\n    className: lockExceptionsStyles.headerDivider\n  }, ' ', \"|\", ' '), /*#__PURE__*/React.createElement(\"span\", {\n    className: lockExceptionsStyles.subHeader\n  }, i18n.t('Add lock exception')))), /*#__PURE__*/React.createElement(Card, {\n    className: styles.card\n  }, /*#__PURE__*/React.createElement(AddLockExceptionForm, {\n    levels: organisationUnitLevels,\n    groups: organisationUnitGroups,\n    dataSets: dataSets,\n    updateSelectedOrgUnits: setSelectedOrgUnits,\n    updateSelectedDataSetId: setSelectedDataSetId,\n    updateSelectedPeriodId: setSelectedPeriodId\n  }), /*#__PURE__*/React.createElement(Button, {\n    className: styles.addLockExceptionButton,\n    primary: true,\n    disabled: isAddActionDisabled,\n    onClick: handleAdd\n  }, dataMutation.loading ? /*#__PURE__*/React.createElement(React.Fragment, null, i18n.t('Adding lock exception...'), /*#__PURE__*/React.createElement(CircularLoader, {\n    small: true\n  })) : i18n.t('Add lock exception'))));\n};\n\nexport default AddLockException;","import i18n from '@dhis2/d2-i18n';\nimport { Button, Table, TableHead, TableRowHead, TableCellHead, TableBody, TableRow, TableCell } from '@dhis2/ui';\nimport FontIcon from 'material-ui/FontIcon';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nconst columnLabels = {\n  dataSet: i18n.t('Data set'),\n  period: i18n.t('Period'),\n  organisationUnit: i18n.t('Organisation unit')\n};\n\nconst LockExceptionsTable = ({\n  columns,\n  rows,\n  atBatchDeletionPage,\n  onRemoveLockException\n}) => /*#__PURE__*/React.createElement(Table, null, /*#__PURE__*/React.createElement(TableHead, null, /*#__PURE__*/React.createElement(TableRowHead, null, columns.map(column => /*#__PURE__*/React.createElement(TableCellHead, {\n  key: column\n}, columnLabels[column])), /*#__PURE__*/React.createElement(TableCellHead, null))), /*#__PURE__*/React.createElement(TableBody, null, rows.map((row, index) => /*#__PURE__*/React.createElement(TableRow, {\n  key: index\n}, columns.map(column => /*#__PURE__*/React.createElement(TableCell, {\n  key: column\n}, row[column])), /*#__PURE__*/React.createElement(TableCell, null, /*#__PURE__*/React.createElement(Button, {\n  small: true,\n  secondary: true,\n  onClick: () => onRemoveLockException(row)\n}, /*#__PURE__*/React.createElement(\"span\", {\n  title: atBatchDeletionPage ? i18n.t('Batch delete lock exceptions') : i18n.t('Remove lock exception')\n}, /*#__PURE__*/React.createElement(FontIcon, {\n  className: \"material-icons\"\n}, \"delete\"))))))));\n\nLockExceptionsTable.propTypes = {\n  atBatchDeletionPage: PropTypes.bool.isRequired,\n  columns: PropTypes.array.isRequired,\n  rows: PropTypes.array.isRequired,\n  onRemoveLockException: PropTypes.func.isRequired\n};\nexport default LockExceptionsTable;","import { useAlert, useDataMutation } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Modal, ModalTitle, ModalContent, ModalActions, ButtonStrip, Button, CircularLoader } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nconst mutation = {\n  resource: 'lockExceptions',\n  type: 'delete',\n  params: params => params\n};\n\nconst RemoveLockExceptionModal = ({\n  lockException,\n  onRemove,\n  onClose\n}) => {\n  const successAlert = useAlert(i18n.t('Lock exception removed'), {\n    success: true\n  });\n  const errorAlert = useAlert(({\n    error\n  }) => i18n.t('Error removing lock exception: {{error}}', {\n    error,\n    nsSeparator: null\n  }), {\n    critical: true\n  });\n  const [mutate, {\n    loading\n  }] = useDataMutation(mutation, {\n    onComplete: () => {\n      successAlert.show();\n      onRemove();\n      onClose();\n    },\n    onError: error => errorAlert.show({\n      error\n    })\n  });\n\n  const handleRemoveLockException = () => {\n    const params = {\n      pe: lockException.periodId,\n      ds: lockException.dataSetId\n    };\n\n    if (lockException.organisationUnitId) {\n      params.ou = lockException.organisationUnitId;\n    }\n\n    mutate(params);\n  };\n\n  return /*#__PURE__*/React.createElement(Modal, {\n    onClose: onClose\n  }, /*#__PURE__*/React.createElement(ModalTitle, null, i18n.t('Remove lock exception')), /*#__PURE__*/React.createElement(ModalContent, null, i18n.t('Are you sure you want to remove this lock exception?')), /*#__PURE__*/React.createElement(ModalActions, null, /*#__PURE__*/React.createElement(ButtonStrip, null, /*#__PURE__*/React.createElement(Button, {\n    disabled: loading,\n    onClick: onClose\n  }, i18n.t('No, cancel')), /*#__PURE__*/React.createElement(Button, {\n    destructive: true,\n    disabled: loading,\n    onClick: handleRemoveLockException\n  }, loading ? /*#__PURE__*/React.createElement(React.Fragment, null, i18n.t('Removing lock exception...'), /*#__PURE__*/React.createElement(CircularLoader, {\n    small: true\n  })) : i18n.t('Yes, remove lock exception')))));\n};\n\nRemoveLockExceptionModal.propTypes = {\n  lockException: PropTypes.object.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onRemove: PropTypes.func.isRequired\n};\nexport default RemoveLockExceptionModal;","export const parseLockExceptions = lockExceptionResponse => lockExceptionResponse.map(({\n  dataSet,\n  period,\n  organisationUnit\n}) => {\n  const row = {\n    period: period.displayName,\n    periodId: period.id,\n    dataSet: dataSet.displayName,\n    dataSetId: dataSet.id\n  };\n\n  if (organisationUnit) {\n    row.organisationUnit = organisationUnit.displayName;\n    row.organisationUnitId = organisationUnit.id;\n  }\n\n  return row;\n});","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { CenteredContent, CircularLoader, NoticeBox } from '@dhis2/ui';\nimport classnames from 'classnames';\nimport FontIcon from 'material-ui/FontIcon';\nimport React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport LockExceptionsTable from '../../components/LockExceptionsTable/LockExceptionsTable';\nimport RemoveLockExceptionModal from '../../components/RemoveLockExceptionModal/RemoveLockExceptionModal';\nimport { parseLockExceptions } from '../../parse-lock-exceptions';\nimport lockExceptionsStyles from '../lock-exceptions/LockExceptions.module.css';\nconst query = {\n  batchedLockExceptions: {\n    resource: 'lockExceptions/combinations',\n    params: {\n      fields: 'name,period[id,displayName],dataSet[id,displayName]'\n    }\n  }\n};\n\nconst BatchDeleteLockExceptions = () => {\n  const {\n    loading,\n    error,\n    data,\n    refetch\n  } = useDataQuery(query);\n  const [removeLockExceptionModal, setRemoveLockExceptionModal] = useState({\n    visible: false,\n    lockException: null\n  });\n  const lockExceptions = data && parseLockExceptions(data.batchedLockExceptions.lockExceptions);\n\n  const handleShowRemoveLockExceptionModal = lockException => {\n    setRemoveLockExceptionModal({\n      visible: true,\n      lockException\n    });\n  };\n\n  const handleCloseRemoveLockExceptionModal = () => {\n    setRemoveLockExceptionModal({\n      visible: false,\n      lockException: null\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: lockExceptionsStyles.headerContainer\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/lock-exceptions\"\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    title: i18n.t('Go back to all lock exceptions')\n  }, /*#__PURE__*/React.createElement(FontIcon, {\n    className: classnames('material-icons', lockExceptionsStyles.backArrowIcon)\n  }, \"arrow_back\"))), /*#__PURE__*/React.createElement(\"h1\", {\n    className: lockExceptionsStyles.header\n  }, /*#__PURE__*/React.createElement(\"span\", null, i18n.t('Lock Exception')), /*#__PURE__*/React.createElement(\"span\", {\n    className: lockExceptionsStyles.headerDivider\n  }, ' ', \"|\", ' '), /*#__PURE__*/React.createElement(\"span\", {\n    className: lockExceptionsStyles.subHeader\n  }, i18n.t('Batch Deletion')))), error ? /*#__PURE__*/React.createElement(NoticeBox, {\n    error: true\n  }, error.message) : loading ? /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null)) : lockExceptions.length > 0 ? /*#__PURE__*/React.createElement(LockExceptionsTable, {\n    columns: ['dataSet', 'period'],\n    rows: lockExceptions,\n    onRemoveLockException: handleShowRemoveLockExceptionModal,\n    atBatchDeletionPage: true\n  }) : /*#__PURE__*/React.createElement(\"em\", null, i18n.t('No lock exceptions to show.')), removeLockExceptionModal.visible && /*#__PURE__*/React.createElement(RemoveLockExceptionModal, {\n    lockException: removeLockExceptionModal.lockException,\n    onRemove: refetch,\n    onClose: handleCloseRemoveLockExceptionModal\n  }));\n};\n\nexport default BatchDeleteLockExceptions;","import i18n from '@dhis2/d2-i18n';\nexport const i18nKeys = {\n  dataIntegrity: {\n    title: i18n.t('Data Integrity'),\n    label: i18n.t('Data Integrity'),\n    description: i18n.t('Run data integrity checks and unveil anomalies and problems in the metadata setup.'),\n    actionText: i18n.t('Check data integrity'),\n    unexpectedError: i18n.t('An unexpected error happened during data integrity checks')\n  },\n  maintenance: {\n    title: i18n.t('Maintenance'),\n    label: i18n.t('Maintenance'),\n    description: i18n.t('Perform maintenance tasks and generate resource database tables for the organisation unit hierarchy and group set structure.'),\n    actionText: i18n.t('Perform maintenance'),\n    checkboxes: {\n      analyticsTableClear: i18n.t('Clear analytics tables'),\n      analyticsTableAnalyze: i18n.t('Analyze analytics tables'),\n      zeroDataValueRemoval: i18n.t('Remove zero data values'),\n      softDeletedDataValueRemoval: i18n.t('Permanently remove soft deleted data values'),\n      softDeletedEventRemoval: i18n.t('Permanently remove soft deleted events'),\n      softDeletedEnrollmentRemoval: i18n.t('Permanently remove soft deleted enrollments'),\n      softDeletedTrackedEntityInstanceRemoval: i18n.t('Permanently remove soft deleted tracked entity instances'),\n      periodPruning: i18n.t('Prune periods'),\n      expiredInvitationsClear: i18n.t('Remove expired invitations'),\n      sqlViewsDrop: i18n.t('Drop SQL views'),\n      sqlViewsCreate: i18n.t('Create SQL views'),\n      categoryOptionComboUpdate: i18n.t('Update category option combinations'),\n      ouPathsUpdate: i18n.t('Update organisation unit paths'),\n      cacheClear: i18n.t('Clear application cache'),\n      appReload: i18n.t('Reload apps')\n    }\n  },\n  resourceTables: {\n    title: i18n.t('Resource Tables'),\n    label: i18n.t('Resource Tables'),\n    description: i18n.t('Generate resource database tables for the organisation unit hierarchy and group set structure among others.'),\n    actionText: i18n.t('Generate Resource Tables'),\n    unexpectedError: i18n.t('An unexpected error happened during operation'),\n    tables: {\n      organisationUnitStructure: i18n.t('Organisation unit structure'),\n      organistionUnitCategoryOptionCombo: i18n.t('Organisation unit category option combo'),\n      categoryOptionGroupSetStructure: i18n.t('Category option group set structure'),\n      dataElementGroupSetStructure: i18n.t('Data element group set structure'),\n      indicatorGroupSetStructure: i18n.t('Indicator group set structure'),\n      organisationUnitGroupSetStructure: i18n.t('Organisation unit group set structure'),\n      categoryStructure: i18n.t('Category structure'),\n      dataElementCategoryOptionComboName: i18n.t('Data element category option combo name'),\n      dataElementStructure: i18n.t('Data element structure'),\n      periodStructure: i18n.t('Period structure'),\n      dataPeriodStructure: i18n.t('Date period structure'),\n      dataElementCategoryOptionCombinations: i18n.t('Data element category option combinations')\n    }\n  },\n  analytics: {\n    title: i18n.t('Analytics tables management'),\n    label: i18n.t('Analytics Tables'),\n    description: i18n.t('The data mart is a set of tables in the DHIS database which is used by all reporting and analysis tools to retrieve data from.'),\n    actionText: i18n.t('Analytics tables update'),\n    unexpectedError: i18n.t('An unexpected error happened during maintenance'),\n    checkboxes: {\n      skipAggregate: i18n.t('Skip generation of aggregate data and completeness data'),\n      skipResourceTables: i18n.t('Skip generation of resource tables'),\n      skipEvents: i18n.t('Skip generation of event data'),\n      skipEnrollment: i18n.t('Skip generation of enrollment data')\n    }\n  },\n  dataStatistics: {\n    title: i18n.t('Data Statistics'),\n    label: i18n.t('Data Statistics'),\n    description: i18n.t('Browse the number of objects in the database, like data elements, indicators, data sets and data values.'),\n    actionText: i18n.t('Overview Data Statistics')\n  },\n  lockExceptions: {\n    title: i18n.t('Lock Exception Management'),\n    label: i18n.t('Lock Exception'),\n    description: i18n.t('Add or remove exceptions to the the standard rules for locking of data entry forms.'),\n    actionText: i18n.t('Lock Exception Management')\n  },\n  minMaxValueGeneration: {\n    title: i18n.t('Min-Max Value Generation'),\n    label: i18n.t('Min-Max Value Generation'),\n    description: i18n.t('Generate min-max values which can be used for data validation during data entry and validation processes.'),\n    actionText: i18n.t('Generate Min-Max Values')\n  }\n};\nexport default i18nKeys;","/* Notification Table Styles */\nexport const INFO_LEVEL = 'INFO';\nexport const ERROR_LEVEL = 'ERROR';\nexport const SUCCESS_LEVEL = 'SUCCESS';\nexport const SUCCESS_COLOR = '#8ac542';\nexport const INFO_COLOR = '#000000';\nexport const ERROR_COLOR = '#ff0000';\nexport const ERROR_NOTIFICATION_ICON = 'error';\nexport const SUCCESS_NOTIFICATION_ICON = 'check';\nconst FONT_SIZE = 14;\nexport const notificationsTableStyles = {\n  iconStyle: {\n    fontSize: FONT_SIZE\n  },\n  rowStyle: {\n    fontSize: FONT_SIZE,\n    height: 48\n  },\n  evenRowStyle: {\n    backgroundColor: '#fafafa'\n  },\n  timeColumnStyle: {\n    width: '20%'\n  },\n  messageColumnStyle: {\n    width: '80%'\n  },\n  successStyle: {\n    color: SUCCESS_COLOR,\n    iconColor: SUCCESS_COLOR,\n    fontWeight: 'bold'\n  },\n  errorStyle: {\n    color: ERROR_COLOR,\n    iconColor: ERROR_COLOR,\n    fontWeight: 'bold'\n  },\n  infoStyle: {\n    color: INFO_COLOR,\n    iconColor: SUCCESS_COLOR\n  }\n};\nconst notificationStyles = {};\nnotificationStyles[SUCCESS_LEVEL] = {\n  color: SUCCESS_COLOR,\n  icon: SUCCESS_NOTIFICATION_ICON,\n  row: Object.assign({}, notificationsTableStyles.rowStyle, notificationsTableStyles.successStyle)\n};\nnotificationStyles[ERROR_LEVEL] = {\n  color: ERROR_COLOR,\n  icon: ERROR_NOTIFICATION_ICON,\n  row: Object.assign({}, notificationsTableStyles.rowStyle, notificationsTableStyles.errorStyle)\n};\nnotificationStyles[INFO_LEVEL] = {\n  color: INFO_COLOR,\n  icon: SUCCESS_NOTIFICATION_ICON,\n  iconColor: SUCCESS_COLOR,\n  row: Object.assign({}, notificationsTableStyles.rowStyle, notificationsTableStyles.infoStyle)\n};\nexport const notificationStylesInfo = notificationStyles;\n/* helper methods */\n\n/* FIXME think of using an third party library for that, converting for a standard time format defined by design team */\n\nexport const formatDateFromServer = dateFromServer => {\n  if (dateFromServer) {\n    return \"\".concat(dateFromServer.slice(0, 10), \" \").concat(dateFromServer.slice(11, 19));\n  }\n\n  return '';\n};","import { Table, TableBody, TableRow, TableRowColumn, FontIcon } from 'material-ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { notificationsTableStyles, notificationStylesInfo, formatDateFromServer } from './notifications-table.conf';\nimport './style.css';\n\nconst NotificationsTable = ({\n  notifications,\n  animateIncomplete\n}) => {\n  const done = notifications.some(n => n.completed);\n\n  const renderNotificationIcon = notification => {\n    const notificationIconInfo = notificationStylesInfo[notification.level];\n\n    if (notificationIconInfo && notificationIconInfo.icon && notification.completed) {\n      return /*#__PURE__*/React.createElement(FontIcon, {\n        className: \"material-icons\",\n        style: notificationsTableStyles.iconStyle,\n        color: notificationIconInfo.iconColor\n      }, notificationIconInfo.icon);\n    } else if (animateIncomplete && !notification.completed && !done) {\n      return /*#__PURE__*/React.createElement(\"span\", {\n        className: \"notification-icon-busy\"\n      }, \"...\");\n    }\n\n    return null;\n  };\n\n  const renderNotificationRow = (notification, index) => /*#__PURE__*/React.createElement(TableRow, {\n    key: index,\n    displayBorder: false,\n    style: Object.assign({}, notificationStylesInfo[notification.level].row, (index + 1) % 2 === 0 ? notificationsTableStyles.evenRowStyle : {})\n  }, /*#__PURE__*/React.createElement(TableRowColumn, {\n    style: notificationsTableStyles.timeColumnStyle\n  }, formatDateFromServer(notification.time)), /*#__PURE__*/React.createElement(TableRowColumn, {\n    style: notificationsTableStyles.messageColumnStyle\n  }, notification.message, \" \", renderNotificationIcon(notification)));\n\n  if (notifications && notifications.length > 0) {\n    return /*#__PURE__*/React.createElement(Table, {\n      selectable: false\n    }, /*#__PURE__*/React.createElement(TableBody, {\n      displayRowCheckbox: false\n    }, notifications.map(renderNotificationRow)));\n  }\n\n  return null;\n};\n\nNotificationsTable.propTypes = {\n  notifications: PropTypes.arrayOf(PropTypes.shape({\n    completed: PropTypes.bool,\n    level: PropTypes.string,\n    message: PropTypes.string,\n    time: PropTypes.string,\n    uid: PropTypes.string\n  })).isRequired,\n  animateIncomplete: PropTypes.bool\n};\nexport default NotificationsTable;","//------------------------------------------------------------------------------\n// <auto-generated>\n// This code was generated by d2-i18n-generate.\n//\n// Changes to this file may cause incorrect behavior and will be lost if\n// the code is regenerated.\n// </auto-generated>\n//------------------------------------------------------------------------------\nimport i18n from '@dhis2/d2-i18n';\nimport arTranslations from './ar/translations.json';\nimport ar_EGTranslations from './ar_EG/translations.json';\nimport ar_IQTranslations from './ar_IQ/translations.json';\nimport ar_SDTranslations from './ar_SD/translations.json';\nimport bnTranslations from './bn/translations.json';\nimport ckbTranslations from './ckb/translations.json';\nimport csTranslations from './cs/translations.json';\nimport daTranslations from './da/translations.json';\nimport enTranslations from './en/translations.json';\nimport esTranslations from './es/translations.json';\nimport frTranslations from './fr/translations.json';\nimport idTranslations from './id/translations.json';\nimport kmTranslations from './km/translations.json';\nimport loTranslations from './lo/translations.json';\nimport mnTranslations from './mn/translations.json';\nimport myTranslations from './my/translations.json';\nimport nbTranslations from './nb/translations.json';\nimport neTranslations from './ne/translations.json';\nimport prsTranslations from './prs/translations.json';\nimport psTranslations from './ps/translations.json';\nimport ptTranslations from './pt/translations.json';\nimport pt_BRTranslations from './pt_BR/translations.json';\nimport ruTranslations from './ru/translations.json';\nimport rwTranslations from './rw/translations.json';\nimport svTranslations from './sv/translations.json';\nimport tetTranslations from './tet/translations.json';\nimport tgTranslations from './tg/translations.json';\nimport ukTranslations from './uk/translations.json';\nimport urTranslations from './ur/translations.json';\nimport uzTranslations from './uz/translations.json';\nimport uz_CyrlTranslations from './uz_Cyrl/translations.json';\nimport uz_LatnTranslations from './uz_Latn/translations.json';\nimport viTranslations from './vi/translations.json';\nimport zhTranslations from './zh/translations.json';\nimport zh_CNTranslations from './zh_CN/translations.json';\nconst namespace = 'default';\ni18n.addResources('ar', namespace, arTranslations);\ni18n.addResources('ar_EG', namespace, ar_EGTranslations);\ni18n.addResources('ar_IQ', namespace, ar_IQTranslations);\ni18n.addResources('ar_SD', namespace, ar_SDTranslations);\ni18n.addResources('bn', namespace, bnTranslations);\ni18n.addResources('ckb', namespace, ckbTranslations);\ni18n.addResources('cs', namespace, csTranslations);\ni18n.addResources('da', namespace, daTranslations);\ni18n.addResources('en', namespace, enTranslations);\ni18n.addResources('es', namespace, esTranslations);\ni18n.addResources('fr', namespace, frTranslations);\ni18n.addResources('id', namespace, idTranslations);\ni18n.addResources('km', namespace, kmTranslations);\ni18n.addResources('lo', namespace, loTranslations);\ni18n.addResources('mn', namespace, mnTranslations);\ni18n.addResources('my', namespace, myTranslations);\ni18n.addResources('nb', namespace, nbTranslations);\ni18n.addResources('ne', namespace, neTranslations);\ni18n.addResources('prs', namespace, prsTranslations);\ni18n.addResources('ps', namespace, psTranslations);\ni18n.addResources('pt', namespace, ptTranslations);\ni18n.addResources('pt_BR', namespace, pt_BRTranslations);\ni18n.addResources('ru', namespace, ruTranslations);\ni18n.addResources('rw', namespace, rwTranslations);\ni18n.addResources('sv', namespace, svTranslations);\ni18n.addResources('tet', namespace, tetTranslations);\ni18n.addResources('tg', namespace, tgTranslations);\ni18n.addResources('uk', namespace, ukTranslations);\ni18n.addResources('ur', namespace, urTranslations);\ni18n.addResources('uz', namespace, uzTranslations);\ni18n.addResources('uz_Cyrl', namespace, uz_CyrlTranslations);\ni18n.addResources('uz_Latn', namespace, uz_LatnTranslations);\ni18n.addResources('vi', namespace, viTranslations);\ni18n.addResources('zh', namespace, zhTranslations);\ni18n.addResources('zh_CN', namespace, zh_CNTranslations);\nexport default i18n;","import { useConfig } from '@dhis2/app-runtime';\nimport { IconButton } from 'material-ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport i18n from '../../locales';\nimport { getDocsKeyForSection } from '../../pages/sections.conf';\n\nconst getDocsVersion = ({\n  major,\n  minor,\n  tag\n}) => {\n  if (tag === 'SNAPSHOT') {\n    return 'master';\n  }\n\n  return \"\".concat(major).concat(minor);\n};\n\nconst DocsLink = ({\n  sectionKey\n}) => {\n  const {\n    serverVersion\n  } = useConfig();\n  const docsVersion = getDocsVersion(serverVersion);\n  const docsKey = getDocsKeyForSection(sectionKey);\n  return /*#__PURE__*/React.createElement(IconButton, {\n    className: \"helper-icon\",\n    iconStyle: {\n      color: '#276696'\n    },\n    href: \"https://docs.dhis2.org/en/use/user-guides/dhis-core-version-\".concat(docsVersion, \"/maintaining-the-system/data-administration.html#\").concat(docsKey),\n    target: \"_blank\",\n    rel: \"noopener noreferrer\",\n    tooltip: i18n.t('Open user guide'),\n    tooltipPosition: \"bottom-center\",\n    iconClassName: \"material-icons\"\n  }, \"help\");\n};\n\nDocsLink.propTypes = {\n  sectionKey: PropTypes.string.isRequired\n};\nexport default DocsLink;","import PropTypes from 'prop-types';\nimport React from 'react';\nimport DocsLink from '../DocsLink/DocsLink';\nimport styles from './PageHeader.module.css';\n\nconst PageHeader = ({\n  title,\n  sectionKey\n}) => /*#__PURE__*/React.createElement(\"header\", {\n  className: styles.header\n}, /*#__PURE__*/React.createElement(\"h1\", {\n  className: styles.headerTitle\n}, title), /*#__PURE__*/React.createElement(DocsLink, {\n  sectionKey: sectionKey\n}));\n\nPageHeader.propTypes = {\n  sectionKey: PropTypes.string.isRequired,\n  title: PropTypes.string.isRequired\n};\nexport default PageHeader;","export const getUpdatedNotifications = taskNotifications => {\n  const lastIndex = taskNotifications.length - 1; // Reverse to sort oldest-newest\n  // Assumption: all tasks are completed, apart from the last one,\n  // which is the in-progress task.\n  // Exception is when the most recent task comes back as completed\n  // this indicates the entire process is done, so we respect that completed status.\n\n  return [...taskNotifications].reverse().map((x, i) => ({ ...x,\n    completed: x.completed || i < lastIndex\n  }));\n};","import i18n from '@dhis2/d2-i18n';\nimport { i18nKeys } from '../../i18n-keys';\nexport const DEFAULT_LAST_YEARS = '-1';\nexport const LAST_YEARS_INPUT_KEY = 'lastYears';\nconst LAST_YEAR = 10;\nconst FIRST_YEAR = 1;\nconst lastYearValues = [{\n  key: DEFAULT_LAST_YEARS,\n  value: DEFAULT_LAST_YEARS,\n  displayName: i18n.t('All')\n}];\n/* Last years dropdown options */\n\nfor (let i = FIRST_YEAR; i <= LAST_YEAR; i++) {\n  lastYearValues.push({\n    key: String(i),\n    value: String(i),\n    displayName: String(i)\n  });\n}\n\nexport const lastYearElements = lastYearValues;\n/* Form checkboxes */\n\nexport const analyticsCheckboxes = ['skipAggregate', 'skipResourceTables', 'skipEvents', 'skipEnrollment'].map(key => ({\n  key,\n  label: i18nKeys.analytics.checkboxes[key]\n}));","import { useRef, useEffect } from 'react';\nexport const usePoll = (fn, pollInterval) => {\n  const intervalId = useRef(null);\n\n  const cancel = () => {\n    if (intervalId.current) {\n      clearInterval(intervalId.current);\n    }\n  };\n\n  const start = (...args) => {\n    cancel();\n    intervalId.current = setInterval(() => fn(...args), pollInterval);\n  };\n\n  useEffect(() => {\n    return cancel;\n  }, []);\n  return {\n    start,\n    cancel\n  };\n};","import { useDataQuery } from '@dhis2/app-runtime';\nimport { useEffect } from 'react';\nimport { usePoll } from '../../hooks/use-poll';\nconst pollQuery = {\n  poll: {\n    resource: 'system/tasks/ANALYTICS_TABLE',\n    id: ({\n      jobId\n    }) => jobId\n  }\n};\nexport const useAnalyticsPoll = () => {\n  const {\n    refetch,\n    error,\n    data\n  } = useDataQuery(pollQuery, {\n    lazy: true\n  });\n  const PULL_INTERVAL = 3000;\n  const poll = usePoll(jobId => {\n    refetch({\n      jobId\n    });\n  }, PULL_INTERVAL);\n  useEffect(() => {\n    if (data !== null && data !== void 0 && data.poll.some(t => t.completed)) {\n      poll.cancel();\n    }\n  }, [data]);\n  return { ...poll,\n    error,\n    data: data === null || data === void 0 ? void 0 : data.poll\n  };\n};","import { useDataMutation } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Button, Card, Checkbox, SingleSelectField, SingleSelectOption, NoticeBox, CircularLoader } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useEffect, useState } from 'react';\nimport NotificationsTable from '../../components/NotificationsTable/NotificationsTable';\nimport PageHeader from '../../components/PageHeader/PageHeader';\nimport { getUpdatedNotifications } from '../../get-updated-notifications';\nimport { i18nKeys } from '../../i18n-keys';\nimport { DEFAULT_LAST_YEARS, LAST_YEARS_INPUT_KEY, lastYearElements } from './analytics.conf';\nimport styles from './Analytics.module.css';\nimport { useAnalyticsPoll } from './use-analytics-poll';\nimport { useCheckboxes } from './use-checkboxes';\nconst startAnalyticsTablesGenerationMutation = {\n  resource: 'resourceTables/analytics',\n  type: 'create',\n  params: params => params\n};\n\nconst Analytics = ({\n  sectionKey\n}) => {\n  const {\n    checkboxes,\n    toggleCheckbox\n  } = useCheckboxes();\n  const [lastYears, setLastYears] = useState(DEFAULT_LAST_YEARS);\n  const [startAnalyticsTablesGeneration, {\n    loading,\n    error,\n    data\n  }] = useDataMutation(startAnalyticsTablesGenerationMutation);\n  const poll = useAnalyticsPoll();\n  const notifications = poll.data ? getUpdatedNotifications(poll.data) : [];\n  const isPolling = data && (!poll.data || !notifications.some(n => n.completed));\n  useEffect(() => {\n    if (loading || !data) {\n      return;\n    }\n\n    const {\n      id: jobId\n    } = data.response;\n    poll.start(jobId);\n  }, [loading, data]);\n\n  const handleStartAnalyticsTablesGeneration = () => {\n    const params = {};\n\n    for (const [key, checked] of Object.entries(checkboxes)) {\n      if (checked) {\n        params[key] = true;\n      }\n    }\n\n    if (lastYears !== DEFAULT_LAST_YEARS) {\n      params[LAST_YEARS_INPUT_KEY] = lastYears;\n    }\n\n    startAnalyticsTablesGeneration(params);\n  };\n\n  const handleLastYearsChange = ({\n    selected\n  }) => {\n    setLastYears(selected);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(PageHeader, {\n    title: i18nKeys.analytics.title,\n    sectionKey: sectionKey\n  }), /*#__PURE__*/React.createElement(Card, {\n    className: styles.card\n  }, (error || poll.error) && /*#__PURE__*/React.createElement(NoticeBox, {\n    className: styles.noticeBox,\n    error: true\n  }, (error === null || error === void 0 ? void 0 : error.message) || poll.error.message), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.form\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.checkboxes\n  }, Object.entries(checkboxes).map(([key, {\n    label,\n    checked\n  }]) => /*#__PURE__*/React.createElement(Checkbox, {\n    key: key,\n    className: styles.checkbox,\n    label: label,\n    checked: checked,\n    onChange: () => {\n      toggleCheckbox(key);\n    },\n    disabled: loading || isPolling\n  }))), /*#__PURE__*/React.createElement(SingleSelectField, {\n    className: styles.lastYearsSelect,\n    label: i18n.t('Number of last years of data to include'),\n    selected: lastYears,\n    onChange: handleLastYearsChange,\n    disabled: loading || isPolling\n  }, lastYearElements.map(item => /*#__PURE__*/React.createElement(SingleSelectOption, {\n    key: item.key,\n    label: item.displayName,\n    value: item.value\n  })))), /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    onClick: handleStartAnalyticsTablesGeneration,\n    disabled: loading || isPolling\n  }, loading || isPolling ? /*#__PURE__*/React.createElement(React.Fragment, null, i18n.t('Exporting...'), /*#__PURE__*/React.createElement(CircularLoader, {\n    small: true\n  })) : i18n.t('Start export')), notifications.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.notificationsTable\n  }, /*#__PURE__*/React.createElement(NotificationsTable, {\n    notifications: notifications,\n    animateIncomplete: true\n  }))));\n};\n\nAnalytics.propTypes = {\n  sectionKey: PropTypes.string.isRequired\n};\nexport default Analytics;","import { useState } from 'react';\nimport { analyticsCheckboxes } from './analytics.conf';\nexport const useCheckboxes = () => {\n  const [checkboxes, setCheckboxes] = useState(() => {\n    const checkboxes = {};\n    analyticsCheckboxes.forEach(checkbox => {\n      checkboxes[checkbox.key] = {\n        checked: false,\n        label: checkbox.label\n      };\n    });\n    return checkboxes;\n  });\n\n  const toggleCheckbox = key => {\n    setCheckboxes({ ...checkboxes,\n      [key]: { ...checkboxes[key],\n        checked: !checkboxes[key].checked\n      }\n    });\n  };\n\n  return {\n    checkboxes,\n    toggleCheckbox\n  };\n};","import i18n from '@dhis2/d2-i18n';\nimport { colors } from '@dhis2/ui';\nimport { FontIcon } from 'material-ui';\nimport { Card, CardText, CardHeader } from 'material-ui/Card';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './IssueCard.module.css';\n\nconst Content = ({\n  content\n}) => {\n  const renderValue = value => Array.isArray(value) ? value.join(', ') : value;\n\n  if (Array.isArray(content)) {\n    return content.map(element => /*#__PURE__*/React.createElement(\"p\", {\n      key: element\n    }, renderValue(element)));\n  } else {\n    return Object.entries(content).map(([element, value]) => /*#__PURE__*/React.createElement(\"div\", {\n      key: element\n    }, /*#__PURE__*/React.createElement(\"h4\", null, element), /*#__PURE__*/React.createElement(\"p\", null, renderValue(value))));\n  }\n};\n\nconst jsStyles = {\n  titleStyle: {\n    fontSize: 16,\n    fontWeight: 'normal'\n  }\n};\nconst errorStyles = {\n  titleColor: colors.red600,\n  openIcon: 'keyboard_arrow_up',\n  closeIcon: 'keyboard_arrow_down',\n  iconStyle: {}\n};\nconst noErrorStyles = {\n  titleColor: colors.green600,\n  openIcon: 'done',\n  closeIcon: 'done',\n  iconStyle: {\n    color: colors.green600,\n    cursor: 'auto'\n  }\n};\n\nconst countElements = content => {\n  const sum = arr => arr.reduce((acc, element) => {\n    return acc + countElements(element);\n  }, 0);\n\n  if (Array.isArray(content)) {\n    return sum(content);\n  } else if (typeof content === 'object') {\n    return sum(Object.values(content));\n  } else {\n    return 1;\n  }\n};\n\nconst IssueCard = ({\n  title,\n  content\n}) => {\n  const elementsCount = countElements(content);\n  const expandable = elementsCount > 0;\n  const {\n    titleColor,\n    openIcon,\n    closeIcon,\n    iconStyle\n  } = elementsCount > 0 ? errorStyles : noErrorStyles;\n  const openFontIcon = /*#__PURE__*/React.createElement(FontIcon, {\n    className: \"material-icons\"\n  }, openIcon);\n  const closeFontIcon = /*#__PURE__*/React.createElement(FontIcon, {\n    className: \"material-icons\"\n  }, closeIcon);\n  return /*#__PURE__*/React.createElement(Card, {\n    className: styles.card\n  }, /*#__PURE__*/React.createElement(CardHeader, {\n    title: /*#__PURE__*/React.createElement(\"div\", {\n      \"data-test\": \"issue-card-title\"\n    }, elementsCount > 0 ? i18n.t('{{issueTitle}} ({{issueElementsCount}})', {\n      issueTitle: title,\n      issueElementsCount: elementsCount\n    }) : title),\n    titleColor: titleColor,\n    titleStyle: jsStyles.titleStyle,\n    actAsExpander: expandable,\n    showExpandableButton: true,\n    closeIcon: closeFontIcon,\n    openIcon: openFontIcon,\n    iconStyle: iconStyle\n  }), elementsCount > 0 && /*#__PURE__*/React.createElement(CardText, {\n    className: styles.cardText,\n    expandable: expandable\n  }, /*#__PURE__*/React.createElement(Content, {\n    content: content\n  })));\n};\n\nIssueCard.propTypes = {\n  title: PropTypes.string.isRequired,\n  content: PropTypes.oneOfType([PropTypes.array, PropTypes.object])\n};\nIssueCard.defaultProps = {\n  content: []\n};\nexport default IssueCard;","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport IssueCard from './IssueCard';\nimport styles from './Issues.module.css';\nconst controls = {\n  dataElementsWithoutDataSet: i18n.t('Data elements without data set'),\n  dataElementsWithoutGroups: i18n.t('Data elements without groups'),\n  dataElementsViolatingExclusiveGroupSets: i18n.t('Data elements violating exclusive group sets'),\n  dataElementsAssignedToDataSetsWithDifferentPeriodTypes: i18n.t('Data elements assigned to data sets with different period types'),\n  dataSetsNotAssignedToOrganisationUnits: i18n.t('Data sets not assigned to organisation units'),\n  indicatorsWithIdenticalFormulas: i18n.t('Indicators with identical formulas'),\n  indicatorsWithoutGroups: i18n.t('Indicators without groups'),\n  invalidIndicatorNumerators: i18n.t('Invalid indicator numerators'),\n  invalidIndicatorDenominators: i18n.t('Invalid indicator denominators'),\n  indicatorsViolatingExclusiveGroupSets: i18n.t('Indicators violating exclusive group sets'),\n  organisationUnitsWithCyclicReferences: i18n.t('Organisation units with cyclic references'),\n  orphanedOrganisationUnits: i18n.t('Orphaned organisation units'),\n  organisationUnitsWithoutGroups: i18n.t('Organisation units without groups'),\n  organisationUnitsViolatingExclusiveGroupSets: i18n.t('Organisation units violating exclusive group sets'),\n  organisationUnitGroupsWithoutGroupSets: i18n.t('Organisation unit groups without group sets'),\n  validationRulesWithoutGroups: i18n.t('Validation rules without groups'),\n  invalidValidationRuleLeftSideExpressions: i18n.t('Invalid validation rule left side expressions'),\n  invalidValidationRuleRightSideExpressions: i18n.t('Invalid validation rule right side expressions'),\n  invalidProgramIndicatorExpressions: i18n.t('Invalid program indicator expressions'),\n  invalidProgramIndicatorFilters: i18n.t('Invalid program indicator filters'),\n  dataElementsInDataSetNotInForm: i18n.t('There are data elements in the form, but not in the form or sections'),\n  invalidCategoryCombos: i18n.t('Invalid category combinations'),\n  duplicatePeriods: i18n.t('Duplicate periods'),\n  programRulesWithNoCondition: i18n.t('Program rules with no condition'),\n  programRulesWithNoAction: i18n.t('Program rules with no action'),\n  programRulesWithNoPriority: i18n.t('Program rules with no priority'),\n  programRuleVariablesWithNoDataElement: i18n.t('Program rule variables with no data element'),\n  programRuleVariablesWithNoAttribute: i18n.t('Program rule variables with no attribute'),\n  programRuleActionsWithNoDataObject: i18n.t('Program rule actions with no data object'),\n  programRuleActionsWithNoNotification: i18n.t('Program rule actions with no notification'),\n  programRuleActionsWithNoSectionId: i18n.t('Program rule actions with no section id'),\n  programRuleActionsWithNoStageId: i18n.t('Program rule actions with no stage id'),\n  programIndicatorsWithNoExpression: i18n.t('Program indicators with no expression')\n};\n\nconst Issues = ({\n  issues\n}) => {\n  const errorElementskeys = Object.keys(issues);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.issues\n  }, errorElementskeys.map(element => {\n    const label = controls[element];\n\n    if (!label) {\n      return null;\n    }\n\n    return /*#__PURE__*/React.createElement(IssueCard, {\n      key: element,\n      title: label,\n      content: issues[element]\n    });\n  }), Object.keys(controls).filter(element => !errorElementskeys.includes(element)).map(element => /*#__PURE__*/React.createElement(IssueCard, {\n    key: element,\n    title: controls[element]\n  })));\n};\n\nIssues.propTypes = {\n  issues: PropTypes.object.isRequired\n};\nexport default Issues;","import { useDataQuery } from '@dhis2/app-runtime';\nimport { useEffect } from 'react';\nimport { usePoll } from '../../hooks/use-poll';\nconst pollQuery = {\n  poll: {\n    resource: 'system/taskSummaries/DATA_INTEGRITY',\n    id: ({\n      jobId\n    }) => jobId\n  }\n};\nexport const useDataIntegrityPoll = () => {\n  const {\n    refetch,\n    error,\n    data\n  } = useDataQuery(pollQuery, {\n    lazy: true\n  });\n  const PULL_INTERVAL = 3000;\n  const poll = usePoll(jobId => {\n    refetch({\n      jobId\n    });\n  }, PULL_INTERVAL);\n  useEffect(() => {\n    if (data !== null && data !== void 0 && data.poll) {\n      poll.cancel();\n    }\n  }, [data]);\n  return { ...poll,\n    error,\n    data: data === null || data === void 0 ? void 0 : data.poll\n  };\n};","import { useDataMutation } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Button, CircularLoader, NoticeBox } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport PageHeader from '../../components/PageHeader/PageHeader';\nimport { i18nKeys } from '../../i18n-keys';\nimport Issues from './Issues/Issues';\nimport { useDataIntegrityPoll } from './use-data-integrity-poll';\nconst startDataIntegrityCheckMutation = {\n  resource: 'dataIntegrity',\n  type: 'create'\n};\n\nconst DataIntegrity = ({\n  sectionKey\n}) => {\n  var _poll$error;\n\n  const [handleStartDataIntegrityCheck, {\n    loading,\n    error,\n    data\n  }] = useDataMutation(startDataIntegrityCheckMutation);\n  const poll = useDataIntegrityPoll();\n  const isPolling = data && !poll.data;\n  useEffect(() => {\n    if (loading || !data) {\n      return;\n    }\n\n    const {\n      id: jobId\n    } = data.response;\n    poll.start(jobId);\n  }, [loading, data]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(PageHeader, {\n    sectionKey: sectionKey,\n    title: i18nKeys.dataIntegrity.title\n  }), (error || poll.error) && /*#__PURE__*/React.createElement(NoticeBox, {\n    error: true\n  }, (error === null || error === void 0 ? void 0 : error.message) || ((_poll$error = poll.error) === null || _poll$error === void 0 ? void 0 : _poll$error.message)), poll.data && /*#__PURE__*/React.createElement(Issues, {\n    issues: poll.data\n  }), /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    disabled: loading || isPolling,\n    onClick: handleStartDataIntegrityCheck\n  }, loading || isPolling ? /*#__PURE__*/React.createElement(React.Fragment, null, i18n.t('Checking data integrity...'), /*#__PURE__*/React.createElement(CircularLoader, {\n    small: true\n  })) : i18n.t('Run integrity checks')));\n};\n\nDataIntegrity.propTypes = {\n  sectionKey: PropTypes.string.isRequired\n};\nexport default DataIntegrity;","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nconst FormattedNumber = props => /*#__PURE__*/React.createElement(\"span\", null, new Intl.NumberFormat(i18n.language).format(props.value));\n\nFormattedNumber.propTypes = {\n  value: PropTypes.number.isRequired\n};\nexport default FormattedNumber;","import { Table, TableBody, TableCell, TableCellHead, TableHead, TableRow, TableRowHead } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport FormattedNumber from '../../components/FormattedNumber/FormattedNumber';\n\nconst DataStatisticsTable = ({\n  elements,\n  label\n}) => /*#__PURE__*/React.createElement(Table, {\n  suppressZebraStriping: true\n}, /*#__PURE__*/React.createElement(TableHead, null, /*#__PURE__*/React.createElement(TableRowHead, null, /*#__PURE__*/React.createElement(TableCellHead, null, label), /*#__PURE__*/React.createElement(TableCellHead, null))), /*#__PURE__*/React.createElement(TableBody, null, elements.map(element => /*#__PURE__*/React.createElement(TableRow, {\n  key: element.label\n}, /*#__PURE__*/React.createElement(TableCell, null, element.label), /*#__PURE__*/React.createElement(TableCell, null, /*#__PURE__*/React.createElement(FormattedNumber, {\n  value: element.count\n}))))));\n\nDataStatisticsTable.propTypes = {\n  elements: PropTypes.array.isRequired,\n  label: PropTypes.string.isRequired\n};\nexport default DataStatisticsTable;","export const OBJECT_COUNTS_KEY = 'objectCounts';\nexport const ACTIVE_USERS_KEY = 'activeUsers';\nexport const USER_INVITATIONS_KEY = 'userInvitations';\nexport const DATA_VALUE_COUNT_KEY = 'dataValueCount';\nexport const EVENT_COUNT_KEY = 'eventCount';\nexport const PENDING_INVITATION_ALL_KEY = 'all';\nexport const EXPIRED_INVITATION_KEY = 'expired';","import i18n from '@dhis2/d2-i18n';\nimport { OBJECT_COUNTS_KEY, ACTIVE_USERS_KEY, USER_INVITATIONS_KEY, DATA_VALUE_COUNT_KEY, EVENT_COUNT_KEY, PENDING_INVITATION_ALL_KEY, EXPIRED_INVITATION_KEY } from './table-keys';\nconst objectLabels = {\n  indicator: i18n.t('Indicators'),\n  period: i18n.t('Periods'),\n  visualization: i18n.t('Visualization'),\n  programStageInstance: i18n.t('Events'),\n  organisationUnit: i18n.t('Organisation units'),\n  validationRule: i18n.t('Validation rules'),\n  dataValue: i18n.t('Data values'),\n  program: i18n.t('Programs'),\n  dataElement: i18n.t('Data elements'),\n  organisationUnitGroup: i18n.t('Organisation unit groups'),\n  trackedEntityInstance: i18n.t('Tracked entity instances'),\n  reportTable: i18n.t('Pivot tables'),\n  programInstance: i18n.t('Program instances'),\n  indicatorType: i18n.t('Indicator types'),\n  dataSet: i18n.t('Data sets'),\n  userGroup: i18n.t('User groups'),\n  user: i18n.t('Users'),\n  map: i18n.t('Maps'),\n  indicatorGroup: i18n.t('Indicator groups'),\n  chart: i18n.t('Charts'),\n  dataElementGroup: i18n.t('Data element groups'),\n  dashboard: i18n.t('Dashboards')\n};\n\nconst translatedTimeLabelFromIntProperty = key => {\n  const intProperty = parseInt(key, 10);\n\n  if (intProperty === 1) {\n    return i18n.t('Today');\n  } else if (intProperty > 0) {\n    return i18n.t('Last {{days}} days', {\n      days: intProperty\n    });\n  } else {\n    return i18n.t('Last hour');\n  }\n};\n\nconst objectCountsTableFromResponse = objectCountsResponse => {\n  if (!objectCountsResponse) {\n    return null;\n  }\n\n  return {\n    label: i18n.t('Object type'),\n    elements: Object.entries(objectCountsResponse).map(([key, count]) => ({\n      label: objectLabels[key] || key,\n      count\n    }))\n  };\n};\n\nconst activeUsersTableFromResponse = activeUsersResponse => {\n  if (!activeUsersResponse) {\n    return null;\n  }\n\n  return {\n    label: i18n.t('Users logged in'),\n    elements: Object.entries(activeUsersResponse).map(([key, count]) => ({\n      label: translatedTimeLabelFromIntProperty(key),\n      count\n    }))\n  };\n};\n\nconst userInvitationsTableFromResponse = userInvitationsResponse => {\n  if (!userInvitationsResponse) {\n    return null;\n  }\n\n  const userInvitationsTable = {\n    label: i18n.t('User account invitations'),\n    elements: []\n  };\n\n  if (Object.hasOwnProperty.call(userInvitationsResponse, PENDING_INVITATION_ALL_KEY)) {\n    userInvitationsTable.elements.push({\n      label: i18n.t('Pending invitations'),\n      count: userInvitationsResponse[PENDING_INVITATION_ALL_KEY]\n    });\n  }\n\n  if (Object.hasOwnProperty.call(userInvitationsResponse, EXPIRED_INVITATION_KEY)) {\n    userInvitationsTable.elements.push({\n      label: i18n.t('Expired invitations'),\n      count: userInvitationsResponse[EXPIRED_INVITATION_KEY]\n    });\n  }\n\n  return userInvitationsTable;\n};\n\nconst dataValueCountsTableFromResponse = dataValueCountsResponse => {\n  if (!dataValueCountsResponse) {\n    return null;\n  }\n\n  return {\n    label: i18n.t('Data values'),\n    elements: Object.entries(dataValueCountsResponse).map(([key, count]) => ({\n      label: translatedTimeLabelFromIntProperty(key),\n      count\n    }))\n  };\n};\n\nconst eventCountsTableFromResponse = eventCountsResponse => {\n  if (!eventCountsResponse) {\n    return null;\n  }\n\n  return {\n    label: i18n.t('Events'),\n    elements: Object.entries(eventCountsResponse).map(([key, count]) => ({\n      label: translatedTimeLabelFromIntProperty(key),\n      count\n    }))\n  };\n};\n\nexport const parseTables = response => ({\n  [OBJECT_COUNTS_KEY]: objectCountsTableFromResponse(response[OBJECT_COUNTS_KEY]),\n  [ACTIVE_USERS_KEY]: activeUsersTableFromResponse(response[ACTIVE_USERS_KEY]),\n  [USER_INVITATIONS_KEY]: userInvitationsTableFromResponse(response[USER_INVITATIONS_KEY]),\n  [DATA_VALUE_COUNT_KEY]: dataValueCountsTableFromResponse(response[DATA_VALUE_COUNT_KEY]),\n  [EVENT_COUNT_KEY]: eventCountsTableFromResponse(response[EVENT_COUNT_KEY])\n});","import { useDataQuery } from '@dhis2/app-runtime';\nimport { Card, NoticeBox, CircularLoader, CenteredContent } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport PageHeader from '../../components/PageHeader/PageHeader';\nimport { i18nKeys } from '../../i18n-keys';\nimport styles from './DataStatistics.module.css';\nimport DataStatisticsTable from './DataStatisticsTable';\nimport { parseTables } from './parse-tables';\nimport { OBJECT_COUNTS_KEY, ACTIVE_USERS_KEY, USER_INVITATIONS_KEY, DATA_VALUE_COUNT_KEY, EVENT_COUNT_KEY } from './table-keys';\n\nconst TableCard = ({\n  label,\n  elements\n}) => /*#__PURE__*/React.createElement(Card, {\n  className: styles.card\n}, /*#__PURE__*/React.createElement(DataStatisticsTable, {\n  label: label,\n  elements: elements\n}));\n\nTableCard.propTypes = {\n  elements: PropTypes.array.isRequired,\n  label: PropTypes.string.isRequired\n};\nconst query = {\n  dataSummary: {\n    resource: 'dataSummary'\n  }\n};\n\nconst DataStatistics = ({\n  sectionKey\n}) => {\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(query);\n\n  if (loading) {\n    return /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null));\n  }\n\n  if (error) {\n    return /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(NoticeBox, {\n      error: true\n    }, error.message));\n  }\n\n  const tables = parseTables(data.dataSummary);\n\n  const renderTable = key => {\n    if (tables[key] === null) {\n      return null;\n    }\n\n    return /*#__PURE__*/React.createElement(TableCard, {\n      label: tables[key].label,\n      elements: tables[key].elements\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(PageHeader, {\n    sectionKey: sectionKey,\n    title: i18nKeys.dataStatistics.title\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-6\"\n  }, renderTable(OBJECT_COUNTS_KEY)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-6\"\n  }, renderTable(USER_INVITATIONS_KEY), renderTable(DATA_VALUE_COUNT_KEY), renderTable(EVENT_COUNT_KEY), renderTable(ACTIVE_USERS_KEY))));\n};\n\nDataStatistics.propTypes = {\n  sectionKey: PropTypes.string.isRequired\n};\nexport default DataStatistics;","import { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { CenteredContent, CircularLoader, NoticeBox, Button, Pagination, ButtonStrip } from '@dhis2/ui';\nimport classnames from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport LockExceptionsTable from '../../components/LockExceptionsTable/LockExceptionsTable';\nimport PageHeader from '../../components/PageHeader/PageHeader';\nimport RemoveLockExceptionModal from '../../components/RemoveLockExceptionModal/RemoveLockExceptionModal';\nimport { i18nKeys } from '../../i18n-keys';\nimport { parseLockExceptions } from '../../parse-lock-exceptions';\nimport styles from './LockExceptions.module.css';\nconst query = {\n  lockExceptions: {\n    resource: 'lockExceptions',\n    params: params => ({ ...params,\n      fields: 'name,period[id,displayName],organisationUnit[id,displayName],dataSet[id,displayName]',\n      order: 'name:asc'\n    })\n  }\n};\n\nconst LockExceptions = ({\n  sectionKey\n}) => {\n  const [page, setPage] = useState(1);\n  const [pageSize, setPageSize] = useState(20);\n  const {\n    loading,\n    called,\n    error,\n    data,\n    refetch\n  } = useDataQuery(query, {\n    lazy: true\n  });\n  const [removeLockExceptionModal, setRemoveLockExceptionModal] = useState({\n    visible: false,\n    lockException: null\n  });\n  useEffect(() => {\n    refetch({\n      page,\n      pageSize\n    });\n  }, [page, pageSize]);\n  const lockExceptions = data && parseLockExceptions(data.lockExceptions.lockExceptions);\n\n  const renderPagination = () => {\n    const {\n      total,\n      pageCount\n    } = data.lockExceptions.pager;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.pagination\n    }, /*#__PURE__*/React.createElement(Pagination, {\n      total: total,\n      pageCount: pageCount,\n      page: page,\n      pageSize: pageSize,\n      onPageSizeChange: pageSize => {\n        setPage(1);\n        setPageSize(pageSize);\n      },\n      onPageChange: page => setPage(page)\n    }));\n  };\n\n  const handleShowRemoveLockExceptionModal = lockException => {\n    setRemoveLockExceptionModal({\n      visible: true,\n      lockException\n    });\n  };\n\n  const handleCloseRemoveLockExceptionModal = () => {\n    setRemoveLockExceptionModal({\n      visible: false,\n      lockException: null\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.lockExceptions\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classnames(styles.headerContainer, styles.flexSpaceBetween)\n  }, /*#__PURE__*/React.createElement(PageHeader, {\n    sectionKey: sectionKey,\n    title: i18nKeys.lockExceptions.title\n  }), /*#__PURE__*/React.createElement(ButtonStrip, null, /*#__PURE__*/React.createElement(Link, {\n    to: \"/lock-exception/add\",\n    tabIndex: \"-1\"\n  }, /*#__PURE__*/React.createElement(Button, {\n    primary: true\n  }, i18n.t('Add lock exception'))), /*#__PURE__*/React.createElement(Link, {\n    to: \"/lock-exception/batch-deletion\",\n    tabIndex: \"-1\"\n  }, /*#__PURE__*/React.createElement(Button, null, i18n.t('Batch deletion'))))), error ? /*#__PURE__*/React.createElement(NoticeBox, {\n    error: true\n  }, error.message) : loading || !called ? /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null)) : lockExceptions.length > 0 ? /*#__PURE__*/React.createElement(React.Fragment, null, renderPagination(), /*#__PURE__*/React.createElement(LockExceptionsTable, {\n    columns: ['organisationUnit', 'dataSet', 'period'],\n    rows: lockExceptions,\n    onRemoveLockException: handleShowRemoveLockExceptionModal,\n    atBatchDeletionPage: false\n  }), renderPagination()) : /*#__PURE__*/React.createElement(\"em\", null, i18n.t('No lock exceptions to show.')), removeLockExceptionModal.visible && /*#__PURE__*/React.createElement(RemoveLockExceptionModal, {\n    lockException: removeLockExceptionModal.lockException,\n    onRemove: refetch,\n    onClose: handleCloseRemoveLockExceptionModal\n  }));\n};\n\nLockExceptions.propTypes = {\n  sectionKey: PropTypes.string.isRequired\n};\nexport default LockExceptions;","import { Checkbox } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { i18nKeys } from '../../i18n-keys';\nimport styles from './Checkboxes.module.css';\n\nconst Checkboxes = ({\n  checkboxes,\n  toggleCheckbox,\n  disabled\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  className: styles.checkboxes\n}, Object.entries(checkboxes).map(([key, checked]) => /*#__PURE__*/React.createElement(Checkbox, {\n  key: key,\n  className: styles.checkbox,\n  label: i18nKeys.maintenance.checkboxes[key],\n  checked: checked,\n  onChange: () => toggleCheckbox(key),\n  disabled: disabled\n})));\n\nCheckboxes.propTypes = {\n  checkboxes: PropTypes.object.isRequired,\n  disabled: PropTypes.bool.isRequired,\n  toggleCheckbox: PropTypes.func.isRequired\n};\nexport default Checkboxes;","import { useState } from 'react';\nimport { i18nKeys } from '../../i18n-keys';\nexport const useCheckboxes = () => {\n  const [checkboxes, setCheckboxes] = useState(() => {\n    const checkboxes = {};\n\n    for (const key of Object.keys(i18nKeys.maintenance.checkboxes)) {\n      checkboxes[key] = false;\n    }\n\n    return checkboxes;\n  });\n\n  const toggleCheckbox = key => {\n    setCheckboxes({ ...checkboxes,\n      [key]: !checkboxes[key]\n    });\n  };\n\n  return {\n    checkboxes,\n    toggleCheckbox\n  };\n};","import { useDataMutation, useAlert } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Card, Button, CircularLoader } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport PageHeader from '../../components/PageHeader/PageHeader';\nimport { i18nKeys } from '../../i18n-keys';\nimport Checkboxes from './Checkboxes';\nimport styles from './Maintenance.module.css';\nimport { useCheckboxes } from './use-checkboxes';\nconst mutation = {\n  resource: 'maintenance',\n  type: 'create',\n  params: params => params\n};\n\nconst Maintenance = ({\n  sectionKey\n}) => {\n  const {\n    checkboxes,\n    toggleCheckbox\n  } = useCheckboxes();\n  const successAlert = useAlert(i18n.t('Maintenance done'), {\n    success: true\n  });\n  const errorAlert = useAlert(({\n    error\n  }) => error.message, {\n    critical: true\n  });\n  const [mutate, {\n    loading\n  }] = useDataMutation(mutation, {\n    onComplete: () => successAlert.show(),\n    onError: error => errorAlert.show({\n      error\n    })\n  });\n\n  const handlePerformMaintenance = async () => {\n    const params = {};\n\n    for (const [key, checked] of Object.entries(checkboxes)) {\n      if (checked) {\n        params[key] = true;\n      }\n    }\n\n    mutate(params);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(PageHeader, {\n    sectionKey: sectionKey,\n    title: i18nKeys.maintenance.title\n  }), /*#__PURE__*/React.createElement(Card, {\n    className: styles.card\n  }, /*#__PURE__*/React.createElement(Checkboxes, {\n    checkboxes: checkboxes,\n    toggleCheckbox: toggleCheckbox,\n    disabled: loading\n  }), /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    disabled: loading || !Object.values(checkboxes).some(checked => checked),\n    onClick: handlePerformMaintenance\n  }, loading ? /*#__PURE__*/React.createElement(React.Fragment, null, i18n.t('Performing maintenance...'), /*#__PURE__*/React.createElement(CircularLoader, {\n    small: true\n  })) : i18n.t('Perform maintenance'))));\n};\n\nMaintenance.propTypes = {\n  sectionKey: PropTypes.string.isRequired\n};\nexport default Maintenance;","import { useAlert, useDataQuery, useDataMutation } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { CenteredContent, CircularLoader, NoticeBox, OrganisationUnitTree, ButtonStrip, Button, Card } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState, useRef } from 'react';\nimport PageHeader from '../../components/PageHeader/PageHeader';\nimport { i18nKeys } from '../../i18n-keys';\nimport styles from './MinMaxValueGeneration.module.css';\nconst MIN_MAX_VALUE_ENDPOINT = '/minMaxValues';\n\nconst organisationIdFromPath = path => {\n  const last = array => array[array.length - 1];\n\n  return last(path.split('/'));\n};\n\nconst query = {\n  organisationUnits: {\n    resource: 'organisationUnits',\n    params: {\n      fields: 'id',\n      paging: false,\n      level: 1\n    }\n  },\n  dataSets: {\n    resource: 'dataSets',\n    params: {\n      fields: 'id,displayName',\n      paging: false\n    }\n  }\n};\nconst generateMinMaxValueMutation = {\n  resource: MIN_MAX_VALUE_ENDPOINT,\n  type: 'create',\n  data: data => data\n};\nconst removeMinMaxValueMutation = {\n  resource: MIN_MAX_VALUE_ENDPOINT,\n  type: 'delete',\n  id: ({\n    id\n  }) => id,\n  params: ({\n    ds\n  }) => ({\n    ds\n  })\n};\n\nconst MinMaxValueGeneration = ({\n  sectionKey\n}) => {\n  const successAlert = useAlert(({\n    message\n  }) => message, {\n    success: true\n  });\n  const errorAlert = useAlert(({\n    error\n  }) => error.message, {\n    critical: true\n  });\n  const {\n    loading,\n    error,\n    data\n  } = useDataQuery(query);\n  const [generateMinMaxValue] = useDataMutation(generateMinMaxValueMutation, {\n    onComplete: () => {\n      successAlert.show({\n        message: i18n.t('Min-max values generated')\n      });\n    },\n    onError: error => {\n      errorAlert.show({\n        error\n      });\n    }\n  });\n  const [removeMinMaxValue] = useDataMutation(removeMinMaxValueMutation, {\n    onComplete: () => {\n      successAlert.show({\n        message: i18n.t('Min-max values removed')\n      });\n    },\n    onError: error => {\n      errorAlert.show({\n        error\n      });\n    }\n  });\n  const [selectedOrganisationUnit, setSelectedOrganisationUnit] = useState(null);\n  const [selectedDataSets, setSelectedDataSets] = useState([]);\n  const dataSetsSelectRef = useRef(null);\n  const formValid = selectedDataSets.length > 0 && selectedOrganisationUnit !== null;\n\n  const handleDataSetsSelectClick = () => {\n    setSelectedDataSets(Array.from(dataSetsSelectRef.current.selectedOptions).map(({\n      value\n    }) => value));\n  };\n\n  const handleOrganisationUnitChange = ({\n    path,\n    checked\n  }) => {\n    if (checked) {\n      setSelectedOrganisationUnit({\n        path,\n        id: organisationIdFromPath(path)\n      });\n    } else {\n      setSelectedOrganisationUnit(null);\n    }\n  };\n\n  const handleGenerateMinMaxValue = async () => {\n    successAlert.show({\n      message: i18n.t('Generating min-max values...')\n    });\n    generateMinMaxValue({\n      organisationUnit: selectedOrganisationUnit.id,\n      dataSets: selectedDataSets\n    });\n  };\n\n  const handleRemoveMinMaxValue = async () => {\n    successAlert.show({\n      message: i18n.t('Removing min-max values...')\n    });\n    removeMinMaxValue({\n      id: selectedOrganisationUnit.id,\n      ds: selectedDataSets\n    });\n  };\n\n  if (loading) {\n    return /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null));\n  }\n\n  if (error) {\n    return /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(NoticeBox, {\n      error: true\n    }, error.message));\n  }\n\n  const {\n    organisationUnits: {\n      organisationUnits\n    },\n    dataSets: {\n      dataSets\n    }\n  } = data;\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(PageHeader, {\n    sectionKey: sectionKey,\n    title: i18nKeys.minMaxValueGeneration.title\n  }), /*#__PURE__*/React.createElement(Card, {\n    className: styles.card\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.left\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.label\n  }, i18n.t('Data set')), /*#__PURE__*/React.createElement(\"select\", {\n    multiple: true,\n    onClick: handleDataSetsSelectClick,\n    className: styles.select,\n    ref: dataSetsSelectRef\n  }, dataSets.map(item => /*#__PURE__*/React.createElement(\"option\", {\n    key: item.id,\n    value: item.id,\n    className: styles.options\n  }, item.displayName)))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.right\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.label\n  }, i18n.t('Organisation unit')), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.tree\n  }, /*#__PURE__*/React.createElement(OrganisationUnitTree, {\n    roots: organisationUnits.map(r => r.id),\n    singleSelection: true,\n    selected: selectedOrganisationUnit ? [selectedOrganisationUnit.path] : [],\n    onChange: handleOrganisationUnitChange\n  })))), /*#__PURE__*/React.createElement(ButtonStrip, null, /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    onClick: handleGenerateMinMaxValue,\n    disabled: !formValid\n  }, i18n.t('Generate min-max values')), /*#__PURE__*/React.createElement(Button, {\n    destructive: true,\n    onClick: handleRemoveMinMaxValue,\n    disabled: !formValid\n  }, i18n.t('Remove min-max values')))));\n};\n\nMinMaxValueGeneration.propTypes = {\n  sectionKey: PropTypes.string.isRequired\n};\nexport default MinMaxValueGeneration;","import { useDataQuery } from '@dhis2/app-runtime';\nimport { useEffect } from 'react';\nimport { usePoll } from '../../hooks/use-poll';\nconst pollQuery = {\n  poll: {\n    resource: 'system/tasks/RESOURCE_TABLE',\n    id: ({\n      jobId\n    }) => jobId\n  }\n};\nexport const useResourceTablesPoll = () => {\n  const {\n    refetch,\n    error,\n    data\n  } = useDataQuery(pollQuery, {\n    lazy: true\n  });\n  const PULL_INTERVAL = 3000;\n  const poll = usePoll(jobId => {\n    refetch({\n      jobId\n    });\n  }, PULL_INTERVAL);\n  useEffect(() => {\n    if (data !== null && data !== void 0 && data.poll.some(t => t.completed)) {\n      poll.cancel();\n    }\n  }, [data]);\n  return { ...poll,\n    error,\n    data: data === null || data === void 0 ? void 0 : data.poll\n  };\n};","import { useDataMutation } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Card, Button, NoticeBox, CircularLoader } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport NotificationsTable from '../../components/NotificationsTable/NotificationsTable';\nimport PageHeader from '../../components/PageHeader/PageHeader';\nimport { getUpdatedNotifications } from '../../get-updated-notifications';\nimport { i18nKeys } from '../../i18n-keys';\nimport styles from './ResourceTables.module.css';\nimport { useResourceTablesPoll } from './use-resource-tables-poll';\nconst tables = [{\n  key: 'organisationUnitStructure',\n  name: '_orgunitstructure'\n}, {\n  key: 'organistionUnitCategoryOptionCombo',\n  name: '_orgunitstructure'\n}, {\n  key: 'categoryOptionGroupSetStructure',\n  name: '_categoryoptiongroupsetstructure'\n}, {\n  key: 'dataElementGroupSetStructure',\n  name: '_dataelementgroupsetstructure'\n}, {\n  key: 'indicatorGroupSetStructure',\n  name: '_indicatorgroupsetstructure'\n}, {\n  key: 'organisationUnitGroupSetStructure',\n  name: '_organisationunitgroupsetstructure'\n}, {\n  key: 'categoryStructure',\n  name: '_categorystructure'\n}, {\n  key: 'dataElementCategoryOptionComboName',\n  name: '_categoryoptioncomboname'\n}, {\n  key: 'dataElementStructure',\n  name: '_dataelementstructure'\n}, {\n  key: 'periodStructure',\n  name: '_periodstructure'\n}, {\n  key: 'dataPeriodStructure',\n  name: '_dateperiodstructure'\n}, {\n  key: 'dataElementCategoryOptionCombinations',\n  name: '_dataelementcategoryoptioncombo'\n}];\nconst startResourceTablesGenerationMutation = {\n  resource: 'resourceTables',\n  type: 'create'\n};\n\nconst ResourceTable = ({\n  sectionKey\n}) => {\n  const [handleStartResourceTablesGeneration, {\n    loading,\n    error,\n    data\n  }] = useDataMutation(startResourceTablesGenerationMutation);\n  const poll = useResourceTablesPoll();\n  const notifications = poll.data ? getUpdatedNotifications(poll.data) : [];\n  const isPolling = data && (!poll.data || !notifications.some(n => n.completed));\n  useEffect(() => {\n    if (loading || !data) {\n      return;\n    }\n\n    const {\n      id: jobId\n    } = data.response;\n    poll.start(jobId);\n  }, [loading, data]);\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(PageHeader, {\n    title: i18nKeys.resourceTables.title,\n    sectionKey: sectionKey\n  }), /*#__PURE__*/React.createElement(Card, {\n    className: styles.card\n  }, (error || poll.error) && /*#__PURE__*/React.createElement(NoticeBox, {\n    className: styles.noticeBox,\n    error: true\n  }, (error === null || error === void 0 ? void 0 : error.message) || poll.error.message), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.description\n  }, tables.map(table => /*#__PURE__*/React.createElement(\"div\", {\n    key: table.key\n  }, i18nKeys.resourceTables.tables[table.key], /*#__PURE__*/React.createElement(\"span\", {\n    title: \"Table name\",\n    className: styles.tableName\n  }, \"(\", table.name, \")\")))), /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    onClick: handleStartResourceTablesGeneration,\n    disabled: loading || isPolling\n  }, loading || isPolling ? /*#__PURE__*/React.createElement(React.Fragment, null, i18n.t('Generating tables...'), /*#__PURE__*/React.createElement(CircularLoader, {\n    small: true\n  })) : i18n.t('Generate tables')), notifications.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.notificationsTable\n  }, /*#__PURE__*/React.createElement(NotificationsTable, {\n    notifications: notifications,\n    animateIncomplete: true\n  }))));\n};\n\nResourceTable.propTypes = {\n  sectionKey: PropTypes.string.isRequired\n};\nexport default ResourceTable;","import { i18nKeys } from '../i18n-keys';\nimport Analytics from './analytics/Analytics';\nimport DataIntegrity from './data-integrity/DataIntegrity';\nimport DataStatistics from './data-statistics/DataStatistics';\nimport LockExceptions from './lock-exceptions/LockExceptions';\nimport Maintenance from './maintenance/Maintenance';\nimport MinMaxValueGeneration from './min-max-value-generation/MinMaxValueGeneration';\nimport ResourceTables from './resource-tables/ResourceTables';\nexport const sections = [{\n  key: 'dataIntegrity',\n  path: '/data-integrity',\n  component: DataIntegrity,\n  info: {\n    label: i18nKeys.dataIntegrity.label,\n    icon: 'link',\n    description: i18nKeys.dataIntegrity.description,\n    actionText: i18nKeys.dataIntegrity.actionText,\n    docs: 'dataAdmin_dataIntegrity'\n  }\n}, {\n  key: 'maintenance',\n  path: '/maintenance',\n  component: Maintenance,\n  info: {\n    label: i18nKeys.maintenance.label,\n    icon: 'settings',\n    description: i18nKeys.maintenance.description,\n    actionText: i18nKeys.maintenance.actionText,\n    docs: 'data_admin_maintenance'\n  }\n}, {\n  key: 'resourceTables',\n  path: '/resourceTables',\n  component: ResourceTables,\n  info: {\n    label: i18nKeys.resourceTables.label,\n    icon: 'view_list',\n    description: i18nKeys.resourceTables.description,\n    actionText: i18nKeys.resourceTables.actionText,\n    docs: 'dataAdmin_resourceTables'\n  }\n}, {\n  key: 'analytics',\n  path: '/analytics',\n  component: Analytics,\n  info: {\n    label: i18nKeys.analytics.label,\n    icon: 'multiline_chart',\n    description: i18nKeys.analytics.description,\n    actionText: i18nKeys.analytics.actionText,\n    docs: 'analytics_tables_management'\n  }\n}, {\n  key: 'statistics',\n  path: '/data-statistics',\n  component: DataStatistics,\n  info: {\n    label: i18nKeys.dataStatistics.label,\n    icon: 'timeline',\n    description: i18nKeys.dataStatistics.description,\n    actionText: i18nKeys.dataStatistics.actionText,\n    docs: 'dataAdmin_dataStatistics'\n  }\n}, {\n  key: 'lock',\n  path: '/lock-exceptions',\n  component: LockExceptions,\n  info: {\n    label: i18nKeys.lockExceptions.label,\n    icon: 'lock',\n    description: i18nKeys.lockExceptions.description,\n    actionText: i18nKeys.lockExceptions.actionText,\n    docs: 'dataAdmin_lockException'\n  }\n}, {\n  key: 'minMax',\n  path: '/min-max-value-generation',\n  component: MinMaxValueGeneration,\n  info: {\n    label: i18nKeys.minMaxValueGeneration.label,\n    icon: 'compare_arrows',\n    description: i18nKeys.minMaxValueGeneration.description,\n    actionText: i18nKeys.minMaxValueGeneration.actionText,\n    docs: 'dataAdmin_minMaxValueGeneration'\n  }\n}];\nexport const getDocsKeyForSection = sectionKey => {\n  var _sections$find;\n\n  return ((_sections$find = sections.find(section => section.key === sectionKey)) === null || _sections$find === void 0 ? void 0 : _sections$find.info.docs) || '';\n};","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport classNames from 'classnames';\nimport FontIcon from 'material-ui/FontIcon';\nimport { GridTile } from 'material-ui/GridList';\nimport PropTypes from 'prop-types';\nimport React, { PureComponent } from 'react';\nimport { Link } from 'react-router-dom';\nimport styles from './GridSection.module.css';\n\nclass GridSection extends PureComponent {\n  render() {\n    return /*#__PURE__*/React.createElement(Link, {\n      to: this.props.section.path\n    }, /*#__PURE__*/React.createElement(GridTile, {\n      key: this.props.section.key,\n      className: classNames('section', styles.gridElement)\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: classNames('row', styles.gridTitleBar)\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: classNames('section-title', styles.gridTitleDescription)\n    }, this.props.section.info.label), /*#__PURE__*/React.createElement(FontIcon, {\n      className: classNames('material-icons', 'icon', styles.gridIcon)\n    }, this.props.section.info.icon)), /*#__PURE__*/React.createElement(\"span\", {\n      className: classNames('section-description', 'row', styles.gridDescription)\n    }, this.props.section.info.description), /*#__PURE__*/React.createElement(\"span\", {\n      className: classNames('section-action-text', 'row', styles.gridActionText)\n    }, this.props.section.info.actionText)));\n  }\n\n}\n\n_defineProperty(GridSection, \"propTypes\", {\n  section: PropTypes.shape({\n    info: PropTypes.shape({\n      actionText: PropTypes.string,\n      description: PropTypes.string,\n      icon: PropTypes.string,\n      label: PropTypes.string\n    }),\n    key: PropTypes.string,\n    path: PropTypes.string\n  }).isRequired\n});\n\nexport default GridSection;","import classNames from 'classnames';\nimport React from 'react';\nimport { sections } from '../sections.conf';\nimport GridSection from './grid-section/GridSection';\nimport styles from './Home.module.css';\nimport './grid.css';\n\nconst Home = () => {\n  const gridElements = sections.map(section => /*#__PURE__*/React.createElement(\"div\", {\n    key: section.key,\n    className: classNames('col-sm-12 col-md-6 col-lg-4', styles.gridContainer)\n  }, /*#__PURE__*/React.createElement(GridSection, {\n    key: section.key,\n    section: section\n  })));\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: \"grid-list-id\",\n    className: \"row\"\n  }, gridElements);\n};\n\nexport default Home;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from 'react';\nimport { Switch, Route, Redirect } from 'react-router-dom';\nimport AddLockException from '../../pages/add-lock-exception/AddLockException.js';\nimport BatchDeleteLockExceptions from '../../pages/batch-delete-lock-exceptions/BatchDeleteLockExceptions';\nimport Home from '../../pages/home/Home';\nimport { sections } from '../../pages/sections.conf';\n\nconst Routes = () => /*#__PURE__*/React.createElement(Switch, null, /*#__PURE__*/React.createElement(Route, {\n  exact: true,\n  path: \"/\",\n  component: Home\n}), sections.map(section => /*#__PURE__*/React.createElement(Route, {\n  key: section.key,\n  exact: true,\n  path: section.path,\n  component: props => /*#__PURE__*/React.createElement(section.component, _extends({\n    sectionKey: section.key\n  }, props))\n})), /*#__PURE__*/React.createElement(Route, {\n  path: \"/lock-exception/batch-deletion\",\n  component: BatchDeleteLockExceptions\n}), /*#__PURE__*/React.createElement(Route, {\n  path: \"/lock-exception/add\",\n  component: AddLockException\n}), /*#__PURE__*/React.createElement(Redirect, {\n  from: \"*\",\n  to: \"/\"\n}));\n\nexport default Routes;","import { PropTypes } from '@dhis2/prop-types';\nimport { Menu, MenuItem } from '@dhis2/ui';\nimport React from 'react';\nimport { useHistory, useRouteMatch } from 'react-router-dom';\nimport { sections } from '../../pages/sections.conf';\nimport styles from './Sidebar.module.css';\n\nconst SidebarItem = ({\n  label,\n  path\n}) => {\n  const history = useHistory();\n  const isActive = !!useRouteMatch(path);\n\n  const navigateToPath = () => history.push(path);\n\n  return /*#__PURE__*/React.createElement(MenuItem, {\n    className: styles.sidebarItem,\n    onClick: navigateToPath,\n    active: isActive,\n    label: label\n  });\n};\n\nSidebarItem.propTypes = {\n  label: PropTypes.string.isRequired,\n  path: PropTypes.string.isRequired\n};\n\nconst Sidebar = () => /*#__PURE__*/React.createElement(Menu, null, sections.map(section => /*#__PURE__*/React.createElement(SidebarItem, {\n  key: section.key,\n  label: section.info.label,\n  path: section.path\n})));\n\nexport default Sidebar;","import { blue100, blue700, grey100, grey400, orange500, orangeA200, darkBlack, white } from 'material-ui/styles/colors';\nimport getMuiTheme from 'material-ui/styles/getMuiTheme';\nimport Spacing from 'material-ui/styles/spacing';\nimport { fade } from 'material-ui/utils/colorManipulator';\nconst theme = {\n  spacing: Spacing,\n  fontFamily: 'Roboto, sans-serif',\n  palette: {\n    primary1Color: '#004ba0',\n    primary2Color: blue700,\n    primary3Color: blue100,\n    accent1Color: orange500,\n    accent2Color: grey100,\n    accent3Color: orangeA200,\n    textColor: darkBlack,\n    alternateTextColor: white,\n    canvasColor: white,\n    borderColor: grey400,\n    disabledColor: fade(darkBlack, 0.3)\n  }\n};\nconst muiTheme = getMuiTheme(theme);\nexport default muiTheme;","import { useD2 } from '@dhis2/app-runtime-adapter-d2';\nimport { CssVariables } from '@dhis2/ui';\nimport { MuiThemeProvider } from 'material-ui/styles';\nimport React from 'react';\nimport { HashRouter } from 'react-router-dom';\nimport styles from './App.module.css';\nimport Routes from './components/Routes/Routes';\nimport Sidebar from './components/Sidebar/Sidebar';\nimport muiTheme from './theme';\nimport 'material-design-icons-iconfont';\nimport './locales';\n\nconst App = () => {\n  const {\n    d2\n  } = useD2();\n\n  if (!d2) {\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(HashRouter, null, /*#__PURE__*/React.createElement(CssVariables, {\n    spacers: true,\n    colors: true\n  }), /*#__PURE__*/React.createElement(MuiThemeProvider, {\n    muiTheme: muiTheme\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.sidebar\n  }, /*#__PURE__*/React.createElement(Sidebar, null)), /*#__PURE__*/React.createElement(\"main\", {\n    className: styles.content\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.contentWrapper\n  }, /*#__PURE__*/React.createElement(Routes, null))))));\n};\n\nexport default App;"],"sourceRoot":""}