{"version":3,"sources":["D2App/App.module.css","D2App/components/PageHeader/PageHeader.module.css","D2App/pages/analytics/Analytics.module.css","D2App/pages/data-integrity/Issues/IssueCard.module.css","D2App/pages/data-integrity/Issues/Issues.module.css","D2App/pages/data-statistics/DataStatistics.module.css","D2App/pages/lock-exception/AddLockExceptionForm.module.css","D2App/pages/lock-exception/LockException.module.css","D2App/pages/maintenance/Checkboxes.module.css","D2App/pages/maintenance/Maintenance.module.css","D2App/pages/min-max-value-generation/MinMaxValueGeneration.module.css","D2App/pages/resource-tables/ResourceTables.module.css","D2App/pages/home/grid-section/GridSection.module.css","D2App/pages/home/Home.module.css","D2App/components/Sidebar/Sidebar.module.css","D2App/i18n-keys.js","D2App/components/notifications-table/notifications-table.conf.js","D2App/components/notifications-table/NotificationsTable.js","D2App/locales/index.js","D2App/components/DocsLink/DocsLink.js","D2App/components/PageHeader/PageHeader.js","D2App/pages/analytics/analytics.conf.js","D2App/pages/analytics/Analytics.js","D2App/pages/data-integrity/Issues/IssueCard.js","D2App/pages/data-integrity/Issues/Issues.js","D2App/hooks/use-poll.js","D2App/pages/data-integrity/use-data-integrity-poll.js","D2App/pages/data-integrity/DataIntegrity.js","D2App/components/FormattedNumber/FormattedNumber.js","D2App/pages/data-statistics/DataStatisticsTable.js","D2App/pages/data-statistics/DataStatistics.js","D2App/pages/lock-exception/OrgUnitTree/TreeView.component.js","D2App/pages/lock-exception/OrgUnitTree/index.js","D2App/pages/lock-exception/PeriodPicker.js","D2App/pages/lock-exception/AddLockExceptionForm.js","D2App/pages/lock-exception/AddLockExceptionModal.js","D2App/pages/lock-exception/LockExceptionsTable.js","D2App/pages/lock-exception/RemoveLockExceptionModal.js","D2App/pages/lock-exception/LockException.js","D2App/pages/maintenance/Checkboxes.js","D2App/pages/maintenance/use-checkboxes.js","D2App/pages/maintenance/Maintenance.js","D2App/with-alerts.js","D2App/pages/min-max-value-generation/MinMaxValueGeneration.js","D2App/pages/resource-tables/resource-tables.conf.js","D2App/pages/resource-tables/ResourceTables.js","D2App/pages/sections.conf.js","D2App/pages/home/grid-section/GridSection.js","D2App/pages/home/Home.js","D2App/components/Routes/Routes.js","D2App/components/Sidebar/Sidebar.js","D2App/theme.js","D2App/App.js"],"names":["module","exports","i18nKeys","dataIntegrity","title","i18n","t","label","description","actionText","unexpectedError","maintenance","checkboxes","analyticsTableClear","analyticsTableAnalyze","zeroDataValueRemoval","softDeletedDataValueRemoval","softDeletedEventRemoval","softDeletedEnrollmentRemoval","softDeletedTrackedEntityInstanceRemoval","periodPruning","expiredInvitationsClear","sqlViewsDrop","sqlViewsCreate","categoryOptionComboUpdate","ouPathsUpdate","cacheClear","appReload","resourceTables","tables","organisationUnitStructure","organistionUnitCategoryOptionCombo","categoryOptionGroupSetStructure","dataElementGroupSetStructure","indicatorGroupSetStructure","organisationUnitGroupSetStructure","categoryStructure","dataElementCategoryOptionComboName","dataElementStructure","periodStructure","dataPeriodStructure","dataElementCategoryOptionCombinations","analytics","skipAggregate","skipResourceTables","skipEvents","skipEnrollment","dataStatistics","lockException","minMaxValueGeneration","SUCCESS_COLOR","INFO_COLOR","ERROR_COLOR","SUCCESS_NOTIFICATION_ICON","notificationsTableStyles","iconStyle","fontSize","rowStyle","height","evenRowStyle","backgroundColor","timeColumnStyle","width","messageColumnStyle","successStyle","color","iconColor","fontWeight","errorStyle","infoStyle","notificationStyles","icon","row","Object","assign","notificationStylesInfo","NotificationsTable","notifications","animateIncomplete","renderNotificationRow","notification","index","React","createElement","TableRow","key","displayBorder","style","level","TableRowColumn","dateFromServer","time","concat","slice","message","notificationIconInfo","completed","FontIcon","className","renderNotificationIcon","length","Table","selectable","TableBody","displayRowCheckbox","map","namespace","addResources","arTranslations","ar_EGTranslations","ar_IQTranslations","ar_SDTranslations","bnTranslations","ckbTranslations","csTranslations","daTranslations","enTranslations","esTranslations","frTranslations","idTranslations","kmTranslations","loTranslations","mnTranslations","myTranslations","nbTranslations","neTranslations","prsTranslations","psTranslations","ptTranslations","pt_BRTranslations","ruTranslations","rwTranslations","svTranslations","tetTranslations","tgTranslations","ukTranslations","urTranslations","uzTranslations","uz_CyrlTranslations","uz_LatnTranslations","viTranslations","zhTranslations","zh_CNTranslations","DocsLink","sectionKey","serverVersion","useConfig","docsVersion","major","minor","tag","getDocsVersion","docsKey","getDocsKeyForSection","IconButton","href","target","rel","tooltip","tooltipPosition","iconClassName","PageHeader","styles","header","headerTitle","ANALYTIC_TABLES_TASK_SUMMARY_ENDPOINT","DEFAULT_LAST_YEARS","lastYearValues","value","displayName","i","push","String","lastYearElements","analyticsCheckboxes","_defineProperty","obj","defineProperty","enumerable","configurable","writable","Analytics","Component","constructor","super","this","intervalId","setInterval","requestTaskProgress","async","api","getD2Instance","Api","getApi","formData","buildFormData","setLoadingPageState","response","post","setState","taskId","id","startTaskProgressPolling","error","setLoadedPageWithErrorState","taskSummaryResponse","get","getActiveTaskIdFromSummary","getUpdatedNotifications","taskNotifications","state","isTaskCompleted","stopTaskProgressPolling","unsetLoadingPageState","lastYears","forEach","checkbox","loading","componentWillUnmount","clearInterval","console","messageError","lastIndex","reverse","x","entries","reduce","currLatestTask","firstTaskNotification","Date","FormData","checked","append","render","props","Card","card","NoticeBox","noticeBox","form","Checkbox","onChange","toggleCheckbox","disabled","SingleSelectField","lastYearsSelect","selected","handleLastYearsChange","item","SingleSelectOption","Button","primary","onClick","initAnalyticsTablesGeneration","Fragment","CircularLoader","small","PropTypes","string","isRequired","Content","content","renderValue","Array","isArray","join","element","jsStyles","titleStyle","errorStyles","titleColor","colors","red600","openIcon","closeIcon","noErrorStyles","green600","cursor","countElements","sum","arr","acc","values","IssueCard","elementsCount","expandable","openFontIcon","closeFontIcon","CardHeader","issueTitle","issueElementsCount","actAsExpander","showExpandableButton","CardText","cardText","defaultProps","controls","dataElementsWithoutDataSet","dataElementsWithoutGroups","dataElementsViolatingExclusiveGroupSets","dataElementsAssignedToDataSetsWithDifferentPeriodTypes","dataSetsNotAssignedToOrganisationUnits","indicatorsWithIdenticalFormulas","indicatorsWithoutGroups","invalidIndicatorNumerators","invalidIndicatorDenominators","indicatorsViolatingExclusiveGroupSets","organisationUnitsWithCyclicReferences","orphanedOrganisationUnits","organisationUnitsWithoutGroups","organisationUnitsViolatingExclusiveGroupSets","organisationUnitGroupsWithoutGroupSets","validationRulesWithoutGroups","invalidValidationRuleLeftSideExpressions","invalidValidationRuleRightSideExpressions","invalidProgramIndicatorExpressions","invalidProgramIndicatorFilters","dataElementsInDataSetNotInForm","invalidCategoryCombos","duplicatePeriods","programRulesWithNoCondition","programRulesWithNoAction","programRulesWithNoPriority","programRuleVariablesWithNoDataElement","programRuleVariablesWithNoAttribute","programRuleActionsWithNoDataObject","programRuleActionsWithNoNotification","programRuleActionsWithNoSectionId","programRuleActionsWithNoStageId","programIndicatorsWithNoExpression","Issues","issues","errorElementskeys","keys","filter","includes","pollQuery","poll","resource","jobId","useDataIntegrityPoll","refetch","data","useDataQuery","lazy","fn","pollInterval","useRef","cancel","current","useEffect","start","args","usePoll","startDataIntegrityCheckMutation","type","DataIntegrity","_poll$error","handleStartDataIntegrityCheck","useDataMutation","isPolling","FormattedNumber","Intl","NumberFormat","language","format","DataStatisticsTable","elements","suppressZebraStriping","TableHead","TableRowHead","TableCellHead","TableCell","count","OBJECT_COUNTS_KEY","ACTIVE_USERS_KEY","USER_INVITATIONS_KEY","DATA_VALUE_COUNT_KEY","EVENT_COUNT_KEY","EXPIRED_INVITATION_KEY","objectLabels","indicator","period","visualization","programStageInstance","organisationUnit","validationRule","dataValue","program","dataElement","organisationUnitGroup","trackedEntityInstance","reportTable","programInstance","indicatorType","dataSet","userGroup","user","indicatorGroup","chart","dataElementGroup","dashboard","TableCard","translatedTimeLabelFromIntProperty","intProperty","parseInt","days","userInvitationsTableFromResponse","userInvitationsResponse","userInvitationsTable","hasOwnProperty","call","DataStatistics","objectCountsResponse","activeUsersResponse","dataValueCountsResponse","eventCountsResponse","componentDidMount","loadDataStatistics","renderTable","renderTables","CenteredContent","TreeView","e","undefined","stopPropagation","collapsed","initiallyExpanded","hasBeenExpanded","toggleCollapsed","onExpand","UNSAFE_componentWillReceiveProps","newProps","tree","marginLeft","whiteSpace","itemLabel","display","position","arrow","left","top","paddingLeft","textAlign","arrowSymbol","transition","transform","clickTarget","children","bind","handleClick","persistent","progress","progressBar","spacer","outline","ouContainer","borderColor","borderStyle","borderWidth","borderRightWidth","borderRadius","background","currentOuContainer","memberCount","OrgUnitTree","root","hasUnloadedData","toArray","sort","a","b","localeCompare","loadChildren","handleSelectClick","some","ou","idsThatShouldBeReloaded","setChildState","onChildrenLoaded","indexOf","load","fields","forceReloadChildren","then","onSelectClick","shouldIncludeOrgUnit","orgUnit","orgUnitsPathsToInclude","renderChild","expandedProp","currentRoot","onChangeCurrentRoot","labelStyle","selectedLabelStyle","hideCheckboxes","hideMemberCount","renderChildren","LinearProgress","currentOu","hasChildren","isSelectable","pathRegEx","RegExp","memberRegEx","isSelected","test","isCurrentRoot","isInitiallyExpanded","canBecomeCurrentRoot","ouContainerStyle","role","tabIndex","readOnly","datePicker","year","marginRight","month","week","biWeek","biMonth","quarter","sixMonth","line","marginTop","getYear","date","getFullYear","toString","getTwoDigitMonth","getMonth","formattedDate","day","getDate","getTwoDigitDay","getWeekYear","setDate","getDay","isWeekValid","is53WeekISOYear","Number","biWeekToWeek","biWeekStr","PeriodPicker","context","getTranslation","d2","componentDidUpdate","prevProps","periodType","handleChange","getPeriod","getFirstDateOfWeek","invalidWeek","invalidBiWeek","onPickPeriod","renderOptionPicker","name","options","isInvalid","SelectField","floatingLabelText","floatingLabelStyle","MenuItem","primaryText","renderYearPicker","years","currentYear","renderMonthPicker","10","11","12","renderWeekPicker","weeks","substr","renderBiWeekPicker","biWeeks","prefix","renderBiMonthPicker","1","2","3","4","5","6","renderQuarterPicker","setDateState","nothing","DatePicker","autoOk","container","d2UiSelectStyleOverride","minWidth","AddLockExceptionForm","dataSetId","updateSelectedDataSetId","rootWithMembers","rootWithDataSetMembers","dataSetMembers","Promise","all","models","organisationUnits","list","paging","memberCollection","memberObject","dataSets","orgUnitPaths","path","periodId","updateSelectedPeriodId","newSelection","updateSelectedOrgUnits","event","splice","fixD2Translations","getChildContext","translations","data_set","organisation_unit","organisation_unit_group","organisation_unit_level","select","deselect","select_all","deselect_all","show","remove","actions","jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec","Q1","Q2","Q3","Q4","renderOrganisationUnitSelectionCard","organisationUnitSelectionCard","organisationUnitTree","handleOrgUnitClick","handleChangeRoot","right","organisationUnitName","OrgUnitSelectByLevel","levels","onUpdateSelection","handleSelectionUpdate","OrgUnitSelectByGroup","groups","OrgUnitSelectAll","dataSetItems","dataSetSelectLabel","dataSetSelectValue","selectsContainer","items","handleDataSetChange","handlePeriodChange","object","array","oneOfType","func","AddLockExceptionModal","onAdd","onClose","successAlert","useAlert","success","errorAlert","nsSeparator","critical","isLoading","setIsLoading","useState","selectedOrgUnits","setSelectedOrgUnits","selectedDataSetId","setSelectedDataSetId","selectedPeriodId","setSelectedPeriodId","useD2","isAddActionDisabled","Dialog","ButtonStrip","end","open","contentStyle","maxWidth","bodyStyle","overflowY","onRequestClose","columnLabels","LockExceptionsTable","columns","rows","atBatchDeletionPage","onRemoveLockException","column","secondary","RemoveLockExceptionModal","onRemove","Modal","ModalTitle","ModalContent","ModalActions","destructive","LockException","loaded","pager","initialPager","addLockExceptionModal","isVisible","removeLockExceptionModal","userAction","url","page","pageSize","lockExceptions","prepareLockExceptionsResponseToDataTable","loadLockExceptionsForPager","loadLockExceptionCombinations","organisationUnitId","delete","le","organisationUnitLevel","order","orgUnitIds","orgUnitPath","splitOrgUnitPath","split","lockExceptionResponse","dataTableColumns","renderHeader","headerContainer","backToLockExceptions","classnames","backArrowIcon","headerDivider","subHeader","flexSpaceBetween","handleShowAddLockExceptionModal","areActionsDisabled","goToBatchDeletionPage","renderPagination","paginationProps","onPageSizeChange","handlePageSizeChange","onPageChange","handlePageChange","pagination","Pagination","_this$state$lockExcep","handleShowRemoveLockExceptionModal","renderAddLockExceptionModal","handleAddLockException","handleCloseAddLockExceptionModal","renderRemoveLockExceptionModal","handleRemoveLockException","handleCloseRemoveLockExceptionModal","total","pageCount","Checkboxes","mutation","params","Maintenance","setCheckboxes","useCheckboxes","mutate","onComplete","onError","_extends","arguments","source","prototype","apply","MIN_MAX_VALUE_ENDPOINT","organisationIdFromPath","MinMaxValueGeneration","selectedOrganisationUnit","roots","dataSetsSelectedCount","rootsResponse","dataSetsResponse","ref","dataSetsSelect","selectedOptions","from","alert","getDataSetIds","dataSetIds","loadData","isUserInteractionDisabled","renderForm","multiple","dataSetsSelectClick","dataSetsSelectRef","OrganisationUnitTree","r","singleSelection","handleOrganisationUnitChange","handleGenerateMinMaxValue","isFormValid","handleRemoveMinMaxValue","withAlerts","RESOURCE_TABLES_TASK_SUMMARY_ENDPOINT","ResourceTable","resourcetables","_this$state$notificat","table","tableName","initResourceTablesGeneration","sections","component","info","docs","ResourceTables","_sections$find","find","section","GridSection","PureComponent","Link","to","GridTile","classNames","gridElement","gridTitleBar","gridTitleDescription","gridIcon","gridDescription","gridActionText","shape","Home","gridElements","gridContainer","Routes","Switch","Route","exact","Redirect","SidebarItem","history","useHistory","isActive","useRouteMatch","sidebarItem","active","Sidebar","Menu","theme","spacing","Spacing","fontFamily","palette","primary1Color","primary2Color","blue700","primary3Color","blue100","accent1Color","orange500","accent2Color","grey100","accent3Color","orangeA200","textColor","darkBlack","alternateTextColor","white","canvasColor","grey400","disabledColor","fade","muiTheme","getMuiTheme","App","HashRouter","CssVariables","spacers","MuiThemeProvider","sidebar","contentWrapper"],"mappings":"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","file":"static/js/app.66044b1e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"App_container__2zgzu\",\"sidebar\":\"App_sidebar__10tAV\",\"content\":\"App_content__3I8HS\",\"contentWrapper\":\"App_contentWrapper__28dVZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"PageHeader_header__1jM0V\",\"headerTitle\":\"PageHeader_headerTitle__1KEEp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"Analytics_card__yDnHd\",\"form\":\"Analytics_form__1kWco\",\"checkboxes\":\"Analytics_checkboxes__3x3kH\",\"noticeBox\":\"Analytics_noticeBox__33LKk\",\"checkbox\":\"Analytics_checkbox__iwSjP\",\"lastYearsSelect\":\"Analytics_lastYearsSelect__1u-Al\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"IssueCard_card__3_lBo\",\"cardText\":\"IssueCard_cardText__2KnBC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"issues\":\"Issues_issues__24Dvb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"DataStatistics_card__-usL2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"selectsContainer\":\"AddLockExceptionForm_selectsContainer__1FfO9\",\"organisationUnitTree\":\"AddLockExceptionForm_organisationUnitTree__2Vu3S\",\"right\":\"AddLockExceptionForm_right__3MHtt\",\"organisationUnitSelectionCard\":\"AddLockExceptionForm_organisationUnitSelectionCard__13mBr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pagination\":\"LockException_pagination__386cw\",\"headerContainer\":\"LockException_headerContainer__3IVXu\",\"header\":\"LockException_header__3DHeL\",\"flexSpaceBetween\":\"LockException_flexSpaceBetween__1gFwr\",\"lockExceptions\":\"LockException_lockExceptions__31sPL\",\"lockExceptionsHeader\":\"LockException_lockExceptionsHeader__2K7Nm\",\"lockExceptionDialog\":\"LockException_lockExceptionDialog__3Facz\",\"marginForAddButton\":\"LockException_marginForAddButton__3L837\",\"backArrowIcon\":\"LockException_backArrowIcon__3o-BP\",\"headerDivider\":\"LockException_headerDivider__98yTN\",\"subHeader\":\"LockException_subHeader__3h-v4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"checkboxes\":\"Checkboxes_checkboxes__37c7z\",\"checkbox\":\"Checkboxes_checkbox__1sczJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"Maintenance_card__1RUV7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"MinMaxValueGeneration_card__3HhUq\",\"header\":\"MinMaxValueGeneration_header__3aa-o\",\"container\":\"MinMaxValueGeneration_container__1KXr1\",\"label\":\"MinMaxValueGeneration_label__Zpg4R\",\"left\":\"MinMaxValueGeneration_left___Z-17\",\"right\":\"MinMaxValueGeneration_right__3Nvgn\",\"tree\":\"MinMaxValueGeneration_tree__1LuaX\",\"select\":\"MinMaxValueGeneration_select__3RB4a\",\"options\":\"MinMaxValueGeneration_options__XH-P_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"ResourceTables_card__1Xjck\",\"description\":\"ResourceTables_description__3ojib\",\"tableName\":\"ResourceTables_tableName__3eEPw\",\"noticeBox\":\"ResourceTables_noticeBox__2-ZOw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gridElement\":\"GridSection_gridElement__dFN30\",\"gridTitleBar\":\"GridSection_gridTitleBar__iuWB9\",\"gridTitleDescription\":\"GridSection_gridTitleDescription__OBU6O\",\"gridIcon\":\"GridSection_gridIcon__1BcuZ\",\"gridDescription\":\"GridSection_gridDescription__3BQ6R\",\"gridActionText\":\"GridSection_gridActionText__2cTCc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gridContainer\":\"Home_gridContainer__3mcNn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sidebarItem\":\"Sidebar_sidebarItem__3GXPY\"};","import i18n from '@dhis2/d2-i18n';\nexport const i18nKeys = {\n  dataIntegrity: {\n    title: i18n.t('Data Integrity'),\n    label: i18n.t('Data Integrity'),\n    description: i18n.t('Run data integrity checks and unveil anomalies and problems in the metadata setup.'),\n    actionText: i18n.t('Check data integrity'),\n    unexpectedError: i18n.t('An unexpected error happened during data integrity checks')\n  },\n  maintenance: {\n    title: i18n.t('Maintenance'),\n    label: i18n.t('Maintenance'),\n    description: i18n.t('Perform maintenance tasks and generate resource database tables for the organisation unit hierarchy and group set structure.'),\n    actionText: i18n.t('Perform maintenance'),\n    checkboxes: {\n      analyticsTableClear: i18n.t('Clear analytics tables'),\n      analyticsTableAnalyze: i18n.t('Analyze analytics tables'),\n      zeroDataValueRemoval: i18n.t('Remove zero data values'),\n      softDeletedDataValueRemoval: i18n.t('Permanently remove soft deleted data values'),\n      softDeletedEventRemoval: i18n.t('Permanently remove soft deleted events'),\n      softDeletedEnrollmentRemoval: i18n.t('Permanently remove soft deleted enrollments'),\n      softDeletedTrackedEntityInstanceRemoval: i18n.t('Permanently remove soft deleted tracked entity instances'),\n      periodPruning: i18n.t('Prune periods'),\n      expiredInvitationsClear: i18n.t('Remove expired invitations'),\n      sqlViewsDrop: i18n.t('Drop SQL views'),\n      sqlViewsCreate: i18n.t('Create SQL views'),\n      categoryOptionComboUpdate: i18n.t('Update category option combinations'),\n      ouPathsUpdate: i18n.t('Update organisation unit paths'),\n      cacheClear: i18n.t('Clear application cache'),\n      appReload: i18n.t('Reload apps')\n    }\n  },\n  resourceTables: {\n    title: i18n.t('Resource Tables'),\n    label: i18n.t('Resource Tables'),\n    description: i18n.t('Generate resource database tables for the organisation unit hierarchy and group set structure among others.'),\n    actionText: i18n.t('Generate Resource Tables'),\n    unexpectedError: i18n.t('An unexpected error happened during operation'),\n    tables: {\n      organisationUnitStructure: i18n.t('Organisation unit structure'),\n      organistionUnitCategoryOptionCombo: i18n.t('Organisation unit category option combo'),\n      categoryOptionGroupSetStructure: i18n.t('Category option group set structure'),\n      dataElementGroupSetStructure: i18n.t('Data element group set structure'),\n      indicatorGroupSetStructure: i18n.t('Indicator group set structure'),\n      organisationUnitGroupSetStructure: i18n.t('Organisation unit group set structure'),\n      categoryStructure: i18n.t('Category structure'),\n      dataElementCategoryOptionComboName: i18n.t('Data element category option combo name'),\n      dataElementStructure: i18n.t('Data element structure'),\n      periodStructure: i18n.t('Period structure'),\n      dataPeriodStructure: i18n.t('Date period structure'),\n      dataElementCategoryOptionCombinations: i18n.t('Data element category option combinations')\n    }\n  },\n  analytics: {\n    title: i18n.t('Analytics tables management'),\n    label: i18n.t('Analytics Tables'),\n    description: i18n.t('The data mart is a set of tables in the DHIS database which is used by all reporting and analysis tools to retrieve data from.'),\n    actionText: i18n.t('Analytics tables update'),\n    unexpectedError: i18n.t('An unexpected error happened during maintenance'),\n    checkboxes: {\n      skipAggregate: i18n.t('Skip generation of aggregate data and completeness data'),\n      skipResourceTables: i18n.t('Skip generation of resource tables'),\n      skipEvents: i18n.t('Skip generation of event data'),\n      skipEnrollment: i18n.t('Skip generation of enrollment data')\n    }\n  },\n  dataStatistics: {\n    title: i18n.t('Data Statistics'),\n    label: i18n.t('Data Statistics'),\n    description: i18n.t('Browse the number of objects in the database, like data elements, indicators, data sets and data values.'),\n    actionText: i18n.t('Overview Data Statistics')\n  },\n  lockException: {\n    title: i18n.t('Lock Exception Management'),\n    label: i18n.t('Lock Exception'),\n    description: i18n.t('Add or remove exceptions to the the standard rules for locking of data entry forms.'),\n    actionText: i18n.t('Lock Exception Management')\n  },\n  minMaxValueGeneration: {\n    title: i18n.t('Min-Max Value Generation'),\n    label: i18n.t('Min-Max Value Generation'),\n    description: i18n.t('Generate min-max values which can be used for data validation during data entry and validation processes.'),\n    actionText: i18n.t('Generate Min-Max Values')\n  }\n};\nexport default i18nKeys;","/* Notification Table Styles */\nexport const INFO_LEVEL = 'INFO';\nexport const ERROR_LEVEL = 'ERROR';\nexport const SUCCESS_LEVEL = 'SUCCESS';\nexport const SUCCESS_COLOR = '#8ac542';\nexport const INFO_COLOR = '#000000';\nexport const ERROR_COLOR = '#ff0000';\nexport const ERROR_NOTIFICATION_ICON = 'error';\nexport const SUCCESS_NOTIFICATION_ICON = 'check';\nconst FONT_SIZE = 14;\nexport const notificationsTableStyles = {\n  iconStyle: {\n    fontSize: FONT_SIZE\n  },\n  rowStyle: {\n    fontSize: FONT_SIZE,\n    height: 48\n  },\n  evenRowStyle: {\n    backgroundColor: '#fafafa'\n  },\n  timeColumnStyle: {\n    width: '20%'\n  },\n  messageColumnStyle: {\n    width: '80%'\n  },\n  successStyle: {\n    color: SUCCESS_COLOR,\n    iconColor: SUCCESS_COLOR,\n    fontWeight: 'bold'\n  },\n  errorStyle: {\n    color: ERROR_COLOR,\n    iconColor: ERROR_COLOR,\n    fontWeight: 'bold'\n  },\n  infoStyle: {\n    color: INFO_COLOR,\n    iconColor: SUCCESS_COLOR\n  }\n};\nconst notificationStyles = {};\nnotificationStyles[SUCCESS_LEVEL] = {\n  color: SUCCESS_COLOR,\n  icon: SUCCESS_NOTIFICATION_ICON,\n  row: Object.assign({}, notificationsTableStyles.rowStyle, notificationsTableStyles.successStyle)\n};\nnotificationStyles[ERROR_LEVEL] = {\n  color: ERROR_COLOR,\n  icon: ERROR_NOTIFICATION_ICON,\n  row: Object.assign({}, notificationsTableStyles.rowStyle, notificationsTableStyles.errorStyle)\n};\nnotificationStyles[INFO_LEVEL] = {\n  color: INFO_COLOR,\n  icon: SUCCESS_NOTIFICATION_ICON,\n  iconColor: SUCCESS_COLOR,\n  row: Object.assign({}, notificationsTableStyles.rowStyle, notificationsTableStyles.infoStyle)\n};\nexport const notificationStylesInfo = notificationStyles;\n/* helper methods */\n\n/* FIXME think of using an third party library for that, converting for a standard time format defined by design team */\n\nexport const formatDateFromServer = dateFromServer => {\n  if (dateFromServer) {\n    return \"\".concat(dateFromServer.slice(0, 10), \" \").concat(dateFromServer.slice(11, 19));\n  }\n\n  return '';\n};","import { Table, TableBody, TableRow, TableRowColumn, FontIcon } from 'material-ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { notificationsTableStyles, notificationStylesInfo, formatDateFromServer } from './notifications-table.conf';\nimport './style.css';\n\nconst NotificationsTable = ({\n  notifications,\n  animateIncomplete\n}) => {\n  const renderNotificationIcon = notification => {\n    const notificationIconInfo = notificationStylesInfo[notification.level];\n\n    if (notificationIconInfo && notificationIconInfo.icon && notification.completed) {\n      return /*#__PURE__*/React.createElement(FontIcon, {\n        className: \"material-icons\",\n        style: notificationsTableStyles.iconStyle,\n        color: notificationIconInfo.iconColor\n      }, notificationIconInfo.icon);\n    } else if (animateIncomplete && !notification.completed) {\n      return /*#__PURE__*/React.createElement(\"span\", {\n        className: \"notification-icon-busy\"\n      }, \"...\");\n    }\n\n    return null;\n  };\n\n  const renderNotificationRow = (notification, index) => /*#__PURE__*/React.createElement(TableRow, {\n    key: index,\n    displayBorder: false,\n    style: Object.assign({}, notificationStylesInfo[notification.level].row, (index + 1) % 2 === 0 ? notificationsTableStyles.evenRowStyle : {})\n  }, /*#__PURE__*/React.createElement(TableRowColumn, {\n    style: notificationsTableStyles.timeColumnStyle\n  }, formatDateFromServer(notification.time)), /*#__PURE__*/React.createElement(TableRowColumn, {\n    style: notificationsTableStyles.messageColumnStyle\n  }, notification.message, \" \", renderNotificationIcon(notification)));\n\n  if (notifications && notifications.length > 0) {\n    return /*#__PURE__*/React.createElement(Table, {\n      selectable: false\n    }, /*#__PURE__*/React.createElement(TableBody, {\n      displayRowCheckbox: false\n    }, notifications.map(renderNotificationRow)));\n  }\n\n  return null;\n};\n\nNotificationsTable.propTypes = {\n  notifications: PropTypes.arrayOf(PropTypes.shape({\n    completed: PropTypes.bool,\n    level: PropTypes.string,\n    message: PropTypes.string,\n    time: PropTypes.string,\n    uid: PropTypes.string\n  })).isRequired,\n  animateIncomplete: PropTypes.bool\n};\nexport default NotificationsTable;","//------------------------------------------------------------------------------\n// <auto-generated>\n// This code was generated by d2-i18n-generate.\n//\n// Changes to this file may cause incorrect behavior and will be lost if\n// the code is regenerated.\n// </auto-generated>\n//------------------------------------------------------------------------------\nimport i18n from '@dhis2/d2-i18n';\nimport arTranslations from './ar/translations.json';\nimport ar_EGTranslations from './ar_EG/translations.json';\nimport ar_IQTranslations from './ar_IQ/translations.json';\nimport ar_SDTranslations from './ar_SD/translations.json';\nimport bnTranslations from './bn/translations.json';\nimport ckbTranslations from './ckb/translations.json';\nimport csTranslations from './cs/translations.json';\nimport daTranslations from './da/translations.json';\nimport enTranslations from './en/translations.json';\nimport esTranslations from './es/translations.json';\nimport frTranslations from './fr/translations.json';\nimport idTranslations from './id/translations.json';\nimport kmTranslations from './km/translations.json';\nimport loTranslations from './lo/translations.json';\nimport mnTranslations from './mn/translations.json';\nimport myTranslations from './my/translations.json';\nimport nbTranslations from './nb/translations.json';\nimport neTranslations from './ne/translations.json';\nimport prsTranslations from './prs/translations.json';\nimport psTranslations from './ps/translations.json';\nimport ptTranslations from './pt/translations.json';\nimport pt_BRTranslations from './pt_BR/translations.json';\nimport ruTranslations from './ru/translations.json';\nimport rwTranslations from './rw/translations.json';\nimport svTranslations from './sv/translations.json';\nimport tetTranslations from './tet/translations.json';\nimport tgTranslations from './tg/translations.json';\nimport ukTranslations from './uk/translations.json';\nimport urTranslations from './ur/translations.json';\nimport uzTranslations from './uz/translations.json';\nimport uz_CyrlTranslations from './uz_Cyrl/translations.json';\nimport uz_LatnTranslations from './uz_Latn/translations.json';\nimport viTranslations from './vi/translations.json';\nimport zhTranslations from './zh/translations.json';\nimport zh_CNTranslations from './zh_CN/translations.json';\nconst namespace = 'default';\ni18n.addResources('ar', namespace, arTranslations);\ni18n.addResources('ar_EG', namespace, ar_EGTranslations);\ni18n.addResources('ar_IQ', namespace, ar_IQTranslations);\ni18n.addResources('ar_SD', namespace, ar_SDTranslations);\ni18n.addResources('bn', namespace, bnTranslations);\ni18n.addResources('ckb', namespace, ckbTranslations);\ni18n.addResources('cs', namespace, csTranslations);\ni18n.addResources('da', namespace, daTranslations);\ni18n.addResources('en', namespace, enTranslations);\ni18n.addResources('es', namespace, esTranslations);\ni18n.addResources('fr', namespace, frTranslations);\ni18n.addResources('id', namespace, idTranslations);\ni18n.addResources('km', namespace, kmTranslations);\ni18n.addResources('lo', namespace, loTranslations);\ni18n.addResources('mn', namespace, mnTranslations);\ni18n.addResources('my', namespace, myTranslations);\ni18n.addResources('nb', namespace, nbTranslations);\ni18n.addResources('ne', namespace, neTranslations);\ni18n.addResources('prs', namespace, prsTranslations);\ni18n.addResources('ps', namespace, psTranslations);\ni18n.addResources('pt', namespace, ptTranslations);\ni18n.addResources('pt_BR', namespace, pt_BRTranslations);\ni18n.addResources('ru', namespace, ruTranslations);\ni18n.addResources('rw', namespace, rwTranslations);\ni18n.addResources('sv', namespace, svTranslations);\ni18n.addResources('tet', namespace, tetTranslations);\ni18n.addResources('tg', namespace, tgTranslations);\ni18n.addResources('uk', namespace, ukTranslations);\ni18n.addResources('ur', namespace, urTranslations);\ni18n.addResources('uz', namespace, uzTranslations);\ni18n.addResources('uz_Cyrl', namespace, uz_CyrlTranslations);\ni18n.addResources('uz_Latn', namespace, uz_LatnTranslations);\ni18n.addResources('vi', namespace, viTranslations);\ni18n.addResources('zh', namespace, zhTranslations);\ni18n.addResources('zh_CN', namespace, zh_CNTranslations);\nexport default i18n;","import { useConfig } from '@dhis2/app-runtime';\nimport { IconButton } from 'material-ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport i18n from '../../locales';\nimport { getDocsKeyForSection } from '../../pages/sections.conf';\n\nconst getDocsVersion = ({\n  major,\n  minor,\n  tag\n}) => {\n  if (tag === 'SNAPSHOT') {\n    return 'master';\n  }\n\n  return \"\".concat(major).concat(minor);\n};\n\nconst DocsLink = ({\n  sectionKey\n}) => {\n  const {\n    serverVersion\n  } = useConfig();\n  const docsVersion = getDocsVersion(serverVersion);\n  const docsKey = getDocsKeyForSection(sectionKey);\n  return /*#__PURE__*/React.createElement(IconButton, {\n    className: \"helper-icon\",\n    iconStyle: {\n      color: '#276696'\n    },\n    href: \"https://docs.dhis2.org/en/use/user-guides/dhis-core-version-\".concat(docsVersion, \"/maintaining-the-system/data-administration.html#\").concat(docsKey),\n    target: \"_blank\",\n    rel: \"noopener noreferrer\",\n    tooltip: i18n.t('Open user guide'),\n    tooltipPosition: \"bottom-center\",\n    iconClassName: \"material-icons\"\n  }, \"help\");\n};\n\nDocsLink.propTypes = {\n  sectionKey: PropTypes.string.isRequired\n};\nexport default DocsLink;","import PropTypes from 'prop-types';\nimport React from 'react';\nimport DocsLink from '../DocsLink/DocsLink';\nimport styles from './PageHeader.module.css';\n\nconst PageHeader = ({\n  title,\n  sectionKey\n}) => /*#__PURE__*/React.createElement(\"header\", {\n  className: styles.header\n}, /*#__PURE__*/React.createElement(\"h1\", {\n  className: styles.headerTitle\n}, title), /*#__PURE__*/React.createElement(DocsLink, {\n  sectionKey: sectionKey\n}));\n\nPageHeader.propTypes = {\n  sectionKey: PropTypes.string.isRequired,\n  title: PropTypes.string.isRequired\n};\nexport default PageHeader;","import i18n from '@dhis2/d2-i18n';\nimport { i18nKeys } from '../../i18n-keys';\nexport const ANALYTICS_TABLES_ENDPOINT = 'resourceTables/analytics';\nexport const PULL_INTERVAL = 5000;\nexport const ANALYTIC_TABLES_TASK_SUMMARY_ENDPOINT = 'system/tasks/ANALYTICS_TABLE';\nexport const DEFAULT_LAST_YEARS = '-1';\nexport const LAST_YEARS_INPUT_KEY = 'lastYears';\nconst LAST_YEAR = 10;\nconst FIRST_YEAR = 1;\nconst lastYearValues = [{\n  key: DEFAULT_LAST_YEARS,\n  value: DEFAULT_LAST_YEARS,\n  displayName: i18n.t('All')\n}];\n/* Last years dropdown options */\n\nfor (let i = FIRST_YEAR; i <= LAST_YEAR; i++) {\n  lastYearValues.push({\n    key: String(i),\n    value: String(i),\n    displayName: String(i)\n  });\n}\n\nexport const lastYearElements = lastYearValues;\n/* Form checkboxes */\n\nexport const analyticsCheckboxes = ['skipAggregate', 'skipResourceTables', 'skipEvents', 'skipEnrollment'].map(key => ({\n  key,\n  label: i18nKeys.analytics.checkboxes[key]\n}));","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport i18n from '@dhis2/d2-i18n';\nimport { Button, Card, Checkbox, SingleSelectField, SingleSelectOption, NoticeBox, CircularLoader } from '@dhis2/ui';\nimport { getInstance as getD2Instance } from 'd2';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport NotificationsTable from '../../components/notifications-table/NotificationsTable';\nimport PageHeader from '../../components/PageHeader/PageHeader';\nimport { i18nKeys } from '../../i18n-keys';\nimport { PULL_INTERVAL, ANALYTICS_TABLES_ENDPOINT, ANALYTIC_TABLES_TASK_SUMMARY_ENDPOINT, DEFAULT_LAST_YEARS, LAST_YEARS_INPUT_KEY, analyticsCheckboxes, lastYearElements } from '../analytics/analytics.conf';\nimport styles from './Analytics.module.css';\n\nclass Analytics extends Component {\n  constructor() {\n    super();\n\n    _defineProperty(this, \"startTaskProgressPolling\", () => {\n      this.intervalId = setInterval(() => {\n        this.requestTaskProgress();\n      }, PULL_INTERVAL);\n    });\n\n    _defineProperty(this, \"initAnalyticsTablesGeneration\", async () => {\n      const d2 = await getD2Instance();\n      const api = d2.Api.getApi();\n      const formData = this.buildFormData();\n      this.setLoadingPageState();\n\n      try {\n        const {\n          response\n        } = await api.post(ANALYTICS_TABLES_ENDPOINT, formData);\n\n        if (response) {\n          this.setState({\n            taskId: response.id\n          }, this.startTaskProgressPolling);\n        }\n      } catch (error) {\n        this.setLoadedPageWithErrorState(error);\n      }\n    });\n\n    _defineProperty(this, \"requestTaskSummary\", async () => {\n      const d2 = await getD2Instance();\n      const api = d2.Api.getApi();\n\n      try {\n        const taskSummaryResponse = await api.get(ANALYTIC_TABLES_TASK_SUMMARY_ENDPOINT);\n        const taskId = this.getActiveTaskIdFromSummary(taskSummaryResponse);\n\n        if (taskId) {\n          this.setLoadingPageState();\n          this.setState({\n            taskId,\n            notifications: this.getUpdatedNotifications(taskSummaryResponse[taskId])\n          }, this.startTaskProgressPolling);\n        }\n      } catch (error) {\n        this.setLoadedPageWithErrorState(error);\n      }\n    });\n\n    _defineProperty(this, \"requestTaskProgress\", async () => {\n      const d2 = await getD2Instance();\n      const api = d2.Api.getApi();\n\n      try {\n        const taskNotifications = await api.get(\"\".concat(ANALYTIC_TABLES_TASK_SUMMARY_ENDPOINT, \"/\").concat(this.state.taskId));\n        const completed = this.isTaskCompleted(taskNotifications);\n\n        if (completed) {\n          this.stopTaskProgressPolling();\n          this.unsetLoadingPageState();\n        }\n\n        this.setState({\n          notifications: this.getUpdatedNotifications(taskNotifications)\n        });\n      } catch (error) {\n        this.setLoadedPageWithErrorState(error);\n      }\n    });\n\n    _defineProperty(this, \"handleLastYearsChange\", lastYears => {\n      this.setState({\n        lastYears\n      });\n    });\n\n    _defineProperty(this, \"toggleCheckbox\", key => {\n      this.setState({\n        checkboxes: { ...this.state.checkboxes,\n          [key]: !this.state.checkboxes[key]\n        }\n      });\n    });\n\n    const checkboxes = {};\n    analyticsCheckboxes.forEach(checkbox => {\n      checkboxes[checkbox.key] = false;\n    });\n    this.state = {\n      loading: false,\n      error: null,\n      checkboxes,\n      lastYears: DEFAULT_LAST_YEARS,\n      taskId: null,\n      notifications: []\n    };\n    this.intervalId = null;\n  }\n\n  componentWillUnmount() {\n    this.stopTaskProgressPolling();\n  }\n  /*\n   * Polling\n   */\n\n\n  stopTaskProgressPolling() {\n    clearInterval(this.intervalId);\n    this.intervalId = null;\n  }\n  /*\n   * State utilities\n   */\n\n\n  setLoadingPageState() {\n    this.setState({\n      loading: true,\n      error: null,\n      notifications: []\n    });\n  }\n\n  unsetLoadingPageState() {\n    this.setState({\n      loading: false\n    });\n  }\n\n  setLoadedPageWithErrorState(error) {\n    console.error(error);\n    const messageError = error && error.message ? error.message : i18nKeys.analytics.unexpectedError;\n    this.stopTaskProgressPolling();\n    this.setState({\n      error: messageError,\n      loading: false\n    });\n  }\n  /*\n   * API requests\n   */\n\n\n  /*\n   * Task notification helpers\n   */\n  getUpdatedNotifications(taskNotifications = []) {\n    // Notification table needs to be updated when new tasks are added\n    if (taskNotifications.length <= this.state.notifications.length) {\n      return this.state.notifications;\n    }\n\n    const lastIndex = taskNotifications.length - 1; // Reverse to sort oldest-newest\n    // Assumption: all tasks are completed, apart from the last one,\n    // which is the in-progress task.\n    // Exception is when the most recent task comes back as completed\n    // this indicates the entire process is done, so we respect that completed status.\n\n    return taskNotifications.reverse().map((x, i) => ({ ...x,\n      completed: x.completed || i < lastIndex\n    }));\n  }\n\n  getActiveTaskIdFromSummary(taskSummaryResponse) {\n    const {\n      taskId\n    } = Object.entries(taskSummaryResponse).reduce((currLatestTask, [taskId, taskNotifications]) => {\n      // First notification is last array item, so its timestamp\n      // represents the task start\n      const firstTaskNotification = taskNotifications[taskNotifications.length - 1];\n      const time = new Date(firstTaskNotification.time);\n\n      if (!this.isTaskCompleted(taskNotifications) && time > currLatestTask.time) {\n        return {\n          taskId,\n          time\n        };\n      }\n\n      return currLatestTask;\n    }, {\n      taskId: null,\n      time: new Date(0)\n    });\n    return taskId;\n  }\n\n  isTaskCompleted(taskNotifications) {\n    // First array item is most recent notification, which can be used to\n    // read the completed prop for the entire task\n    return taskNotifications[0].completed;\n  }\n\n  buildFormData() {\n    const formData = new FormData();\n\n    for (const [key, checked] of Object.entries(this.state.checkboxes)) {\n      formData.append(key, checked);\n    }\n\n    if (this.state.lastYears !== DEFAULT_LAST_YEARS) {\n      formData.append(LAST_YEARS_INPUT_KEY, this.state.lastYears);\n    }\n\n    return formData;\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(PageHeader, {\n      sectionKey: this.props.sectionKey,\n      title: i18nKeys.analytics.title\n    }), /*#__PURE__*/React.createElement(Card, {\n      className: styles.card\n    }, this.state.error && /*#__PURE__*/React.createElement(NoticeBox, {\n      className: styles.noticeBox,\n      error: true\n    }, this.state.error), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.form\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.checkboxes\n    }, analyticsCheckboxes.map(checkbox => /*#__PURE__*/React.createElement(Checkbox, {\n      key: checkbox.key,\n      className: styles.checkbox,\n      label: checkbox.label,\n      checked: this.state.checkboxes[checkbox.key],\n      onChange: () => this.toggleCheckbox(checkbox.key),\n      disabled: this.state.loading\n    }))), /*#__PURE__*/React.createElement(SingleSelectField, {\n      className: styles.lastYearsSelect,\n      label: i18n.t('Number of last years of data to include'),\n      selected: this.state.lastYears,\n      onChange: ({\n        selected\n      }) => this.handleLastYearsChange(selected),\n      disabled: this.state.loading\n    }, lastYearElements.map(item => /*#__PURE__*/React.createElement(SingleSelectOption, {\n      key: item.key,\n      label: item.displayName,\n      value: item.value\n    })))), /*#__PURE__*/React.createElement(Button, {\n      primary: true,\n      onClick: this.initAnalyticsTablesGeneration,\n      disabled: this.state.loading\n    }, this.state.loading ? /*#__PURE__*/React.createElement(React.Fragment, null, i18n.t('Exporting...'), /*#__PURE__*/React.createElement(CircularLoader, {\n      small: true\n    })) : i18n.t('Start export'))), (this.state.notifications || []).length > 0 && /*#__PURE__*/React.createElement(Card, {\n      className: styles.card\n    }, /*#__PURE__*/React.createElement(NotificationsTable, {\n      notifications: this.state.notifications,\n      animateIncomplete: true\n    })));\n  }\n\n}\n\n_defineProperty(Analytics, \"propTypes\", {\n  sectionKey: PropTypes.string.isRequired\n});\n\nexport default Analytics;","import i18n from '@dhis2/d2-i18n';\nimport { colors } from '@dhis2/ui';\nimport { FontIcon } from 'material-ui';\nimport { Card, CardText, CardHeader } from 'material-ui/Card';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport styles from './IssueCard.module.css';\n\nconst Content = ({\n  content\n}) => {\n  const renderValue = value => Array.isArray(value) ? value.join(', ') : value;\n\n  if (Array.isArray(content)) {\n    return content.map(element => /*#__PURE__*/React.createElement(\"p\", {\n      key: element\n    }, renderValue(element)));\n  } else {\n    return Object.entries(content).map(([element, value]) => /*#__PURE__*/React.createElement(\"div\", {\n      key: element\n    }, /*#__PURE__*/React.createElement(\"h4\", null, element), /*#__PURE__*/React.createElement(\"p\", null, renderValue(value))));\n  }\n};\n\nconst jsStyles = {\n  titleStyle: {\n    fontSize: 16,\n    fontWeight: 'normal'\n  }\n};\nconst errorStyles = {\n  titleColor: colors.red600,\n  openIcon: 'keyboard_arrow_up',\n  closeIcon: 'keyboard_arrow_down',\n  iconStyle: {}\n};\nconst noErrorStyles = {\n  titleColor: colors.green600,\n  openIcon: 'done',\n  closeIcon: 'done',\n  iconStyle: {\n    color: colors.green600,\n    cursor: 'auto'\n  }\n};\n\nconst countElements = content => {\n  const sum = arr => arr.reduce((acc, element) => {\n    return acc + countElements(element);\n  }, 0);\n\n  if (Array.isArray(content)) {\n    return sum(content);\n  } else if (typeof content === 'object') {\n    return sum(Object.values(content));\n  } else {\n    return 1;\n  }\n};\n\nconst IssueCard = ({\n  title,\n  content\n}) => {\n  const elementsCount = countElements(content);\n  const expandable = elementsCount > 0;\n  const {\n    titleColor,\n    openIcon,\n    closeIcon,\n    iconStyle\n  } = elementsCount > 0 ? errorStyles : noErrorStyles;\n  const openFontIcon = /*#__PURE__*/React.createElement(FontIcon, {\n    className: \"material-icons\"\n  }, openIcon);\n  const closeFontIcon = /*#__PURE__*/React.createElement(FontIcon, {\n    className: \"material-icons\"\n  }, closeIcon);\n  return /*#__PURE__*/React.createElement(Card, {\n    className: styles.card\n  }, /*#__PURE__*/React.createElement(CardHeader, {\n    title: /*#__PURE__*/React.createElement(\"div\", {\n      \"data-test\": \"issue-card-title\"\n    }, elementsCount > 0 ? i18n.t('{{issueTitle}} ({{issueElementsCount}})', {\n      issueTitle: title,\n      issueElementsCount: elementsCount\n    }) : title),\n    titleColor: titleColor,\n    titleStyle: jsStyles.titleStyle,\n    actAsExpander: expandable,\n    showExpandableButton: true,\n    closeIcon: closeFontIcon,\n    openIcon: openFontIcon,\n    iconStyle: iconStyle\n  }), elementsCount > 0 && /*#__PURE__*/React.createElement(CardText, {\n    className: styles.cardText,\n    expandable: expandable\n  }, /*#__PURE__*/React.createElement(Content, {\n    content: content\n  })));\n};\n\nIssueCard.propTypes = {\n  title: PropTypes.string.isRequired,\n  content: PropTypes.oneOfType([PropTypes.array, PropTypes.object])\n};\nIssueCard.defaultProps = {\n  content: []\n};\nexport default IssueCard;","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport IssueCard from './IssueCard';\nimport styles from './Issues.module.css';\nconst controls = {\n  dataElementsWithoutDataSet: i18n.t('Data elements without data set'),\n  dataElementsWithoutGroups: i18n.t('Data elements without groups'),\n  dataElementsViolatingExclusiveGroupSets: i18n.t('Data elements violating exclusive group sets'),\n  dataElementsAssignedToDataSetsWithDifferentPeriodTypes: i18n.t('Data elements assigned to data sets with different period types'),\n  dataSetsNotAssignedToOrganisationUnits: i18n.t('Data sets not assigned to organisation units'),\n  indicatorsWithIdenticalFormulas: i18n.t('Indicators with identical formulas'),\n  indicatorsWithoutGroups: i18n.t('Indicators without groups'),\n  invalidIndicatorNumerators: i18n.t('Invalid indicator numerators'),\n  invalidIndicatorDenominators: i18n.t('Invalid indicator denominators'),\n  indicatorsViolatingExclusiveGroupSets: i18n.t('Indicators violating exclusive group sets'),\n  organisationUnitsWithCyclicReferences: i18n.t('Organisation units with cyclic references'),\n  orphanedOrganisationUnits: i18n.t('Orphaned organisation units'),\n  organisationUnitsWithoutGroups: i18n.t('Organisation units without groups'),\n  organisationUnitsViolatingExclusiveGroupSets: i18n.t('Organisation units violating exclusive group sets'),\n  organisationUnitGroupsWithoutGroupSets: i18n.t('Organisation unit groups without group sets'),\n  validationRulesWithoutGroups: i18n.t('Validation rules without groups'),\n  invalidValidationRuleLeftSideExpressions: i18n.t('Invalid validation rule left side expressions'),\n  invalidValidationRuleRightSideExpressions: i18n.t('Invalid validation rule right side expressions'),\n  invalidProgramIndicatorExpressions: i18n.t('Invalid program indicator expressions'),\n  invalidProgramIndicatorFilters: i18n.t('Invalid program indicator filters'),\n  dataElementsInDataSetNotInForm: i18n.t('There are data elements in the form, but not in the form or sections'),\n  invalidCategoryCombos: i18n.t('Invalid category combinations'),\n  duplicatePeriods: i18n.t('Duplicate periods'),\n  programRulesWithNoCondition: i18n.t('Program rules with no condition'),\n  programRulesWithNoAction: i18n.t('Program rules with no action'),\n  programRulesWithNoPriority: i18n.t('Program rules with no priority'),\n  programRuleVariablesWithNoDataElement: i18n.t('Program rule variables with no data element'),\n  programRuleVariablesWithNoAttribute: i18n.t('Program rule variables with no attribute'),\n  programRuleActionsWithNoDataObject: i18n.t('Program rule actions with no data object'),\n  programRuleActionsWithNoNotification: i18n.t('Program rule actions with no notification'),\n  programRuleActionsWithNoSectionId: i18n.t('Program rule actions with no section id'),\n  programRuleActionsWithNoStageId: i18n.t('Program rule actions with no stage id'),\n  programIndicatorsWithNoExpression: i18n.t('Program indicators with no expression')\n};\n\nconst Issues = ({\n  issues\n}) => {\n  const errorElementskeys = Object.keys(issues);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.issues\n  }, errorElementskeys.map(element => {\n    const label = controls[element];\n\n    if (!label) {\n      return null;\n    }\n\n    return /*#__PURE__*/React.createElement(IssueCard, {\n      key: element,\n      title: label,\n      content: issues[element]\n    });\n  }), Object.keys(controls).filter(element => !errorElementskeys.includes(element)).map(element => /*#__PURE__*/React.createElement(IssueCard, {\n    key: element,\n    title: controls[element]\n  })));\n};\n\nIssues.propTypes = {\n  issues: PropTypes.object.isRequired\n};\nexport default Issues;","import { useRef, useEffect } from 'react';\nexport const usePoll = (fn, pollInterval) => {\n  const intervalId = useRef(null);\n\n  const start = (...args) => {\n    intervalId.current = setInterval(() => fn(...args), pollInterval);\n  };\n\n  const cancel = () => {\n    if (intervalId.current) {\n      clearInterval(intervalId.current);\n    }\n  };\n\n  useEffect(() => {\n    return cancel;\n  }, []);\n  return {\n    start,\n    cancel\n  };\n};","import { useDataQuery } from '@dhis2/app-runtime';\nimport { useEffect } from 'react';\nimport { usePoll } from '../../hooks/use-poll';\nconst pollQuery = {\n  poll: {\n    resource: 'system/taskSummaries/DATA_INTEGRITY',\n    id: ({\n      jobId\n    }) => jobId\n  }\n};\nexport const useDataIntegrityPoll = () => {\n  const {\n    refetch,\n    error,\n    data\n  } = useDataQuery(pollQuery, {\n    lazy: true\n  });\n  const PULL_INTERVAL = 3000;\n  const poll = usePoll(jobId => {\n    refetch({\n      jobId\n    });\n  }, PULL_INTERVAL);\n  useEffect(() => {\n    if (data !== null && data !== void 0 && data.poll) {\n      poll.cancel();\n    }\n  }, [data]);\n  return { ...poll,\n    error,\n    data: data === null || data === void 0 ? void 0 : data.poll\n  };\n};","import { useDataMutation } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Button, CircularLoader, NoticeBox } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport PageHeader from '../../components/PageHeader/PageHeader';\nimport { i18nKeys } from '../../i18n-keys';\nimport Issues from './Issues/Issues';\nimport { useDataIntegrityPoll } from './use-data-integrity-poll';\nconst startDataIntegrityCheckMutation = {\n  resource: 'dataIntegrity',\n  type: 'create'\n};\n\nconst DataIntegrity = ({\n  sectionKey\n}) => {\n  var _poll$error;\n\n  const [handleStartDataIntegrityCheck, {\n    loading,\n    error,\n    data\n  }] = useDataMutation(startDataIntegrityCheckMutation);\n  const poll = useDataIntegrityPoll();\n  const isPolling = data && !poll.data;\n  useEffect(() => {\n    if (loading || !data) {\n      return;\n    }\n\n    const {\n      id: jobId\n    } = data.response;\n    poll.start(jobId);\n  }, [loading, data]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(PageHeader, {\n    sectionKey: sectionKey,\n    title: i18nKeys.dataIntegrity.title\n  }), (error || poll.error) && /*#__PURE__*/React.createElement(NoticeBox, {\n    error: true\n  }, (error === null || error === void 0 ? void 0 : error.message) || ((_poll$error = poll.error) === null || _poll$error === void 0 ? void 0 : _poll$error.message)), poll.data && /*#__PURE__*/React.createElement(Issues, {\n    issues: poll.data\n  }), /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    disabled: loading || isPolling,\n    onClick: handleStartDataIntegrityCheck\n  }, loading || isPolling ? /*#__PURE__*/React.createElement(React.Fragment, null, i18n.t('Checking data integrity...'), /*#__PURE__*/React.createElement(CircularLoader, {\n    small: true\n  })) : i18n.t('Run integrity checks')));\n};\n\nDataIntegrity.propTypes = {\n  sectionKey: PropTypes.string.isRequired\n};\nexport default DataIntegrity;","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nconst FormattedNumber = props => /*#__PURE__*/React.createElement(\"span\", null, new Intl.NumberFormat(i18n.language).format(props.value));\n\nFormattedNumber.propTypes = {\n  value: PropTypes.number.isRequired\n};\nexport default FormattedNumber;","import { Table, TableBody, TableCell, TableCellHead, TableHead, TableRow, TableRowHead } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport FormattedNumber from '../../components/FormattedNumber/FormattedNumber';\n\nconst DataStatisticsTable = ({\n  elements,\n  label\n}) => /*#__PURE__*/React.createElement(Table, {\n  suppressZebraStriping: true\n}, /*#__PURE__*/React.createElement(TableHead, null, /*#__PURE__*/React.createElement(TableRowHead, null, /*#__PURE__*/React.createElement(TableCellHead, null, label), /*#__PURE__*/React.createElement(TableCellHead, null))), /*#__PURE__*/React.createElement(TableBody, null, elements.map(element => /*#__PURE__*/React.createElement(TableRow, {\n  key: element.label\n}, /*#__PURE__*/React.createElement(TableCell, null, element.label), /*#__PURE__*/React.createElement(TableCell, null, /*#__PURE__*/React.createElement(FormattedNumber, {\n  value: element.count\n}))))));\n\nDataStatisticsTable.propTypes = {\n  elements: PropTypes.array.isRequired,\n  label: PropTypes.string.isRequired\n};\nexport default DataStatisticsTable;","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport i18n from '@dhis2/d2-i18n';\nimport { Card, NoticeBox, CircularLoader, CenteredContent } from '@dhis2/ui';\nimport { getInstance as getD2Instance } from 'd2';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport PageHeader from '../../components/PageHeader/PageHeader';\nimport { i18nKeys } from '../../i18n-keys';\nimport styles from './DataStatistics.module.css';\nimport DataStatisticsTable from './DataStatisticsTable';\nconst OBJECT_COUNTS_KEY = 'objectCounts';\nconst ACTIVE_USERS_KEY = 'activeUsers';\nconst USER_INVITATIONS_KEY = 'userInvitations';\nconst DATA_VALUE_COUNT_KEY = 'dataValueCount';\nconst EVENT_COUNT_KEY = 'eventCount';\nconst PENDING_INVITATION_ALL_KEY = 'all';\nconst EXPIRED_INVITATION_KEY = 'expired';\nconst objectLabels = {\n  indicator: i18n.t('Indicators'),\n  period: i18n.t('Periods'),\n  visualization: i18n.t('Visualization'),\n  programStageInstance: i18n.t('Events'),\n  organisationUnit: i18n.t('Organisation units'),\n  validationRule: i18n.t('Validation rules'),\n  dataValue: i18n.t('Data values'),\n  program: i18n.t('Programs'),\n  dataElement: i18n.t('Data elements'),\n  organisationUnitGroup: i18n.t('Organisation unit groups'),\n  trackedEntityInstance: i18n.t('Tracked entity instances'),\n  reportTable: i18n.t('Pivot tables'),\n  programInstance: i18n.t('Program instances'),\n  indicatorType: i18n.t('Indicator types'),\n  dataSet: i18n.t('Data sets'),\n  userGroup: i18n.t('User groups'),\n  user: i18n.t('Users'),\n  map: i18n.t('Maps'),\n  indicatorGroup: i18n.t('Indicator groups'),\n  chart: i18n.t('Charts'),\n  dataElementGroup: i18n.t('Data element groups'),\n  dashboard: i18n.t('Dashboards')\n};\n\nconst TableCard = ({\n  label,\n  elements\n}) => /*#__PURE__*/React.createElement(Card, {\n  className: styles.card\n}, /*#__PURE__*/React.createElement(DataStatisticsTable, {\n  label: label,\n  elements: elements\n}));\n\nTableCard.propTypes = {\n  elements: PropTypes.array.isRequired,\n  label: PropTypes.string.isRequired\n};\n\nconst translatedTimeLabelFromIntProperty = key => {\n  const intProperty = parseInt(key, 10);\n\n  if (intProperty === 1) {\n    return i18n.t('Today');\n  } else if (intProperty > 0) {\n    return i18n.t('Last {{days}} days', {\n      days: intProperty\n    });\n  } else {\n    return i18n.t('Last hour');\n  }\n};\n\nconst objectCountsTableFromResponse = objectCountsResponse => {\n  if (!objectCountsResponse) {\n    return null;\n  }\n\n  return {\n    label: i18n.t('Object type'),\n    elements: Object.entries(objectCountsResponse).map(([key, count]) => ({\n      label: objectLabels[key] || key,\n      count\n    }))\n  };\n};\n\nconst activeUsersTableFromResponse = activeUsersResponse => {\n  if (!activeUsersResponse) {\n    return null;\n  }\n\n  return {\n    label: i18n.t('Users logged in'),\n    elements: Object.entries(activeUsersResponse).map(([key, count]) => ({\n      label: translatedTimeLabelFromIntProperty(key),\n      count\n    }))\n  };\n};\n\nconst userInvitationsTableFromResponse = userInvitationsResponse => {\n  if (!userInvitationsResponse) {\n    return null;\n  }\n\n  const userInvitationsTable = {\n    label: i18n.t('User account invitations'),\n    elements: []\n  };\n\n  if (Object.hasOwnProperty.call(userInvitationsResponse, PENDING_INVITATION_ALL_KEY)) {\n    userInvitationsTable.elements.push({\n      label: i18n.t('Pending invitations'),\n      count: userInvitationsResponse[PENDING_INVITATION_ALL_KEY]\n    });\n  }\n\n  if (Object.hasOwnProperty.call(userInvitationsResponse, EXPIRED_INVITATION_KEY)) {\n    userInvitationsTable.elements.push({\n      label: i18n.t('Expired invitations'),\n      count: userInvitationsResponse[EXPIRED_INVITATION_KEY]\n    });\n  }\n\n  return userInvitationsTable;\n};\n\nconst dataValueCountsTableFromResponse = dataValueCountsResponse => {\n  if (!dataValueCountsResponse) {\n    return null;\n  }\n\n  return {\n    label: i18n.t('Data values'),\n    elements: Object.entries(dataValueCountsResponse).map(([key, count]) => ({\n      label: translatedTimeLabelFromIntProperty(key),\n      count\n    }))\n  };\n};\n\nconst eventCountsTableFromResponse = eventCountsResponse => {\n  if (!eventCountsResponse) {\n    return null;\n  }\n\n  return {\n    label: i18n.t('Events'),\n    elements: Object.entries(eventCountsResponse).map(([key, count]) => ({\n      label: translatedTimeLabelFromIntProperty(key),\n      count\n    }))\n  };\n};\n\nclass DataStatistics extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      loading: true,\n      error: null,\n      tables: null\n    });\n\n    _defineProperty(this, \"loadDataStatistics\", async () => {\n      const d2 = await getD2Instance();\n      const api = d2.Api.getApi();\n\n      try {\n        const response = await api.get('dataSummary');\n        const tables = {\n          [OBJECT_COUNTS_KEY]: objectCountsTableFromResponse(response[OBJECT_COUNTS_KEY]),\n          [ACTIVE_USERS_KEY]: activeUsersTableFromResponse(response[ACTIVE_USERS_KEY]),\n          [USER_INVITATIONS_KEY]: userInvitationsTableFromResponse(response[USER_INVITATIONS_KEY]),\n          [DATA_VALUE_COUNT_KEY]: dataValueCountsTableFromResponse(response[DATA_VALUE_COUNT_KEY]),\n          [EVENT_COUNT_KEY]: eventCountsTableFromResponse(response[EVENT_COUNT_KEY])\n        };\n        this.setState({\n          loading: false,\n          tables\n        });\n      } catch (error) {\n        this.setState({\n          loading: false,\n          error: error.message || i18n.t('Error loading data statistics')\n        });\n      }\n    });\n  }\n\n  componentDidMount() {\n    this.loadDataStatistics();\n  }\n\n  renderTable(key) {\n    if (!this.state.tables[key]) {\n      return null;\n    }\n\n    return /*#__PURE__*/React.createElement(TableCard, {\n      key: key,\n      label: this.state.tables[key].label,\n      elements: this.state.tables[key].elements\n    });\n  }\n\n  renderTables() {\n    if (Object.keys(this.state.tables).length === 0) {\n      return /*#__PURE__*/React.createElement(\"em\", null, i18n.t('No data statistics to show.'));\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6\"\n    }, this.renderTable(OBJECT_COUNTS_KEY)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6\"\n    }, this.renderTable(USER_INVITATIONS_KEY), this.renderTable(DATA_VALUE_COUNT_KEY), this.renderTable(EVENT_COUNT_KEY), this.renderTable(ACTIVE_USERS_KEY)));\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(PageHeader, {\n      sectionKey: this.props.sectionKey,\n      title: i18nKeys.dataStatistics.title\n    }), this.state.error ? /*#__PURE__*/React.createElement(NoticeBox, {\n      error: true\n    }, this.state.error) : this.state.loading ? /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null)) : this.renderTables());\n  }\n\n}\n\n_defineProperty(DataStatistics, \"propTypes\", {\n  sectionKey: PropTypes.string.isRequired\n});\n\nexport default DataStatistics;","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\n/* eslint-disable react/sort-prop-types */\n\nclass TreeView extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"handleClick\", e => {\n      if (this.props.onClick) {\n        this.props.onClick(e);\n      }\n\n      if (e !== undefined) {\n        e.stopPropagation();\n      }\n    });\n\n    this.state = {\n      collapsed: !props.initiallyExpanded,\n      hasBeenExpanded: props.initiallyExpanded\n    };\n  }\n\n  toggleCollapsed() {\n    this.setState(state => ({\n      collapsed: !state.collapsed,\n      hasBeenExpanded: true\n    }), () => {\n      if (!this.state.collapsed && typeof this.props.onExpand === 'function') {\n        this.props.onExpand();\n      }\n    });\n  }\n\n  UNSAFE_componentWillReceiveProps(newProps) {\n    // When initiallyExpanded status changed and the tree is collapsed we fire a toggleEvent to open it up\n    if (newProps.initiallyExpanded && this.state.collapsed) {\n      this.toggleCollapsed();\n    }\n  }\n\n  render() {\n    const styles = {\n      tree: {\n        marginLeft: 16,\n        whiteSpace: 'nowrap'\n      },\n      itemLabel: {\n        display: 'inline-block',\n        position: 'relative'\n      },\n      arrow: {\n        display: 'inline-block',\n        position: 'absolute',\n        left: -16,\n        top: -1,\n        width: 11,\n        height: 16,\n        paddingLeft: 4,\n        textAlign: 'center',\n        cursor: 'pointer'\n      },\n      arrowSymbol: {\n        transition: 'transform 150ms ease-out',\n        transform: this.state.collapsed ? '' : 'rotate(90deg)',\n        position: 'absolute'\n      },\n      clickTarget: {\n        cursor: this.props.onClick && 'pointer'\n      },\n      children: {\n        position: 'relative',\n        marginLeft: 16,\n        height: this.state.collapsed ? 0 : 'inherit'\n      }\n    };\n    const label = /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.itemLabel\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"arrow\",\n      style: styles.arrow,\n      onClick: this.toggleCollapsed.bind(this)\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.arrowSymbol\n    }, this.props.arrowSymbol)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"label\",\n      onClick: this.handleClick,\n      style: styles.clickTarget\n    }, this.props.label));\n    styles.children.display = this.state.collapsed ? 'none' : 'block'; // Render children if not collapsed, or (persistent and has been expanded)\n\n    const children = (!this.state.collapsed || this.props.persistent && this.state.hasBeenExpanded) && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"children\",\n      style: styles.children\n    }, this.props.children);\n    const className = \"tree-view \".concat(this.props.className);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: className,\n      style: Object.assign(styles.tree, this.props.style)\n    }, label, children);\n  }\n\n}\n\nTreeView.propTypes = {\n  label: PropTypes.node,\n  children: PropTypes.node,\n  persistent: PropTypes.bool,\n  initiallyExpanded: PropTypes.bool,\n  arrowSymbol: PropTypes.node,\n  style: PropTypes.object,\n  className: PropTypes.string,\n  onExpand: PropTypes.func,\n  onClick: PropTypes.func\n};\nTreeView.defaultProps = {\n  persistent: false,\n  initiallyExpanded: false,\n  arrowSymbol: '▸',\n  style: {}\n};\nexport default TreeView;","import LinearProgress from 'material-ui/LinearProgress';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport TreeView from './TreeView.component';\n/* eslint-disable react/sort-prop-types */\n\n/* eslint-disable max-params */\n\nconst styles = {\n  progress: {\n    position: 'absolute',\n    display: 'inline-block',\n    width: '100%',\n    left: -8\n  },\n  progressBar: {\n    height: 2,\n    backgroundColor: 'transparent'\n  },\n  spacer: {\n    position: 'relative',\n    display: 'inline-block',\n    width: '1.2rem',\n    height: '1rem'\n  },\n  label: {\n    display: 'inline-block',\n    outline: 'none'\n  },\n  ouContainer: {\n    borderColor: 'transparent',\n    borderStyle: 'solid',\n    borderWidth: '1px',\n    borderRightWidth: 0,\n    borderRadius: '3px 0 0 3px',\n    background: 'transparent',\n    paddingLeft: 2,\n    outline: 'none'\n  },\n  currentOuContainer: {\n    background: 'rgba(0,0,0,0.05)',\n    borderColor: 'rgba(0,0,0,0.1)'\n  },\n  memberCount: {\n    fontSize: '0.75rem',\n    marginLeft: 4\n  }\n};\n\nclass OrgUnitTree extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      children: props.root.children === false || Array.isArray(props.root.children) && props.root.children.length === 0 ? [] : undefined,\n      loading: false\n    };\n\n    if ('toArray' in props.root.children && !props.root.children.hasUnloadedData) {\n      this.state.children = props.root.children.toArray() // Sort here since the API returns nested children in random order\n      .sort((a, b) => a.displayName.localeCompare(b.displayName));\n    }\n\n    this.loadChildren = this.loadChildren.bind(this);\n    this.handleSelectClick = this.handleSelectClick.bind(this);\n  }\n\n  componentDidMount() {\n    if (this.props.initiallyExpanded.some(ou => ou.includes(\"/\".concat(this.props.root.id)))) {\n      this.loadChildren();\n    }\n  }\n\n  UNSAFE_componentWillReceiveProps(newProps) {\n    if (newProps.initiallyExpanded.some(ou => ou.includes(\"/\".concat(newProps.root.id))) || newProps.idsThatShouldBeReloaded.includes(newProps.root.id)) {\n      this.loadChildren();\n    }\n  }\n\n  setChildState(children) {\n    if (this.props.onChildrenLoaded) {\n      this.props.onChildrenLoaded(children);\n    }\n\n    this.setState({\n      children: children.toArray().sort((a, b) => a.displayName.localeCompare(b.displayName)),\n      loading: false\n    });\n  }\n\n  loadChildren() {\n    if (this.state.children === undefined && !this.state.loading || this.props.idsThatShouldBeReloaded.indexOf(this.props.root.id) >= 0) {\n      this.setState({\n        loading: true\n      });\n      const root = this.props.root; // d2.ModelCollectionProperty.load takes a second parameter `forceReload` and will just return\n      // the current valueMap unless either `this.hasUnloadedData` or `forceReload` are true\n\n      root.children.load({\n        fields: 'id,displayName,children::isNotEmpty,path,parent'\n      }, this.props.forceReloadChildren).then(children => {\n        this.setChildState(children);\n      });\n    }\n  }\n\n  handleSelectClick(e) {\n    if (this.props.onSelectClick) {\n      this.props.onSelectClick(e, this.props.root);\n    }\n\n    e.stopPropagation();\n  }\n\n  shouldIncludeOrgUnit(orgUnit) {\n    if (!this.props.orgUnitsPathsToInclude || this.props.orgUnitsPathsToInclude.length === 0) {\n      return true;\n    }\n\n    return !!this.props.orgUnitsPathsToInclude.some(ou => ou.includes(\"/\".concat(orgUnit.id)));\n  }\n\n  renderChild(orgUnit, expandedProp) {\n    if (this.shouldIncludeOrgUnit(orgUnit)) {\n      return /*#__PURE__*/React.createElement(OrgUnitTree, {\n        key: orgUnit.id,\n        root: orgUnit,\n        selected: this.props.selected,\n        initiallyExpanded: expandedProp,\n        onSelectClick: this.props.onSelectClick,\n        currentRoot: this.props.currentRoot,\n        onChangeCurrentRoot: this.props.onChangeCurrentRoot,\n        labelStyle: this.props.labelStyle,\n        selectedLabelStyle: this.props.selectedLabelStyle,\n        arrowSymbol: this.props.arrowSymbol,\n        idsThatShouldBeReloaded: this.props.idsThatShouldBeReloaded,\n        hideCheckboxes: this.props.hideCheckboxes,\n        onChildrenLoaded: this.props.onChildrenLoaded,\n        hideMemberCount: this.props.hideMemberCount,\n        orgUnitsPathsToInclude: this.props.orgUnitsPathsToInclude,\n        forceReloadChildren: this.props.forceReloadChildren\n      });\n    }\n\n    return null;\n  }\n\n  renderChildren() {\n    // If initiallyExpanded is an array, remove the current root id and pass the rest on\n    // If it's a string, pass it on unless it's the current root id\n    const expandedProp = Array.isArray(this.props.initiallyExpanded) ? this.props.initiallyExpanded.filter(id => id !== this.props.root.id) : this.props.initiallyExpanded !== this.props.root.id && this.props.initiallyExpanded || [];\n\n    if (Array.isArray(this.state.children) && this.state.children.length > 0) {\n      return this.state.children.map(orgUnit => this.renderChild(orgUnit, expandedProp));\n    }\n\n    if (this.state.loading) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        style: styles.progress\n      }, /*#__PURE__*/React.createElement(LinearProgress, {\n        style: styles.progressBar\n      }));\n    }\n\n    return null;\n  }\n\n  render() {\n    const currentOu = this.props.root; // True if this OU has children = is not a leaf node\n\n    const hasChildren = this.state.children === undefined || Array.isArray(this.state.children) && this.state.children.length > 0; // True if a click handler exists\n\n    const isSelectable = !!this.props.onSelectClick;\n    const pathRegEx = new RegExp(\"/\".concat(currentOu.id, \"$\"));\n    const memberRegEx = new RegExp(\"/\".concat(currentOu.id));\n    const isSelected = this.props.selected && this.props.selected.some(ou => pathRegEx.test(ou)); // True if this OU is the current root\n\n    const isCurrentRoot = this.props.currentRoot && this.props.currentRoot.id === currentOu.id; // True if this OU should be expanded by default\n\n    const isInitiallyExpanded = this.props.initiallyExpanded.some(ou => ou.includes(\"/\".concat(currentOu.id))); // True if this OU can BECOME the current root, which means that:\n    // 1) there is a change root handler\n    // 2) this OU is not already the current root\n    // 3) this OU has children (is not a leaf node)\n\n    const canBecomeCurrentRoot = this.props.onChangeCurrentRoot && !isCurrentRoot && hasChildren;\n    const memberCount = this.props.selected !== undefined ? this.props.selected.filter(ou => memberRegEx.test(ou)).length : currentOu.memberCount; // Hard coded styles for OU name labels - can be overridden with the selectedLabelStyle and labelStyle props\n\n    const labelStyle = Object.assign({}, styles.label, {\n      fontWeight: isSelected ? 500 : 300,\n      color: isSelected ? 'orange' : 'inherit',\n      cursor: canBecomeCurrentRoot ? 'pointer' : 'default'\n    }, isSelected ? this.props.selectedLabelStyle : this.props.labelStyle); // Styles for this OU and OUs contained within it\n\n    const ouContainerStyle = Object.assign({}, styles.ouContainer, isCurrentRoot ? styles.currentOuContainer : {}); // Wrap the change root click handler in order to stop event propagation\n\n    const setCurrentRoot = e => {\n      e.stopPropagation();\n      this.props.onChangeCurrentRoot(currentOu);\n    };\n\n    const label = /*#__PURE__*/React.createElement(\"div\", {\n      style: labelStyle,\n      onClick: canBecomeCurrentRoot && setCurrentRoot || isSelectable && this.handleSelectClick,\n      role: \"button\",\n      tabIndex: 0\n    }, isSelectable && !this.props.hideCheckboxes && /*#__PURE__*/React.createElement(\"input\", {\n      type: \"checkbox\",\n      readOnly: true,\n      disabled: !isSelectable,\n      checked: isSelected,\n      onClick: this.handleSelectClick\n    }), currentOu.displayName, hasChildren && !this.props.hideMemberCount && !!memberCount && /*#__PURE__*/React.createElement(\"span\", {\n      style: styles.memberCount\n    }, \"(\", memberCount, \")\"));\n\n    if (hasChildren) {\n      return /*#__PURE__*/React.createElement(TreeView, {\n        label: label,\n        onExpand: this.loadChildren,\n        persistent: true,\n        initiallyExpanded: isInitiallyExpanded,\n        arrowSymbol: this.props.arrowSymbol,\n        className: \"orgunit with-children\",\n        style: ouContainerStyle\n      }, this.renderChildren());\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      onClick: isSelectable && this.handleSelectClick,\n      className: \"orgunit without-children\",\n      style: ouContainerStyle,\n      role: \"button\",\n      tabIndex: 0\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.spacer\n    }), label);\n  }\n\n}\n\nfunction orgUnitPathPropValidator(propValue, key, compName, location, propFullName) {\n  if (!/(\\/[a-zA-Z][a-zA-Z0-9]{10})+/.test(propValue[key])) {\n    return new Error(\"Invalid org unit path `\".concat(propValue[key], \"` supplied to `\").concat(compName, \".\").concat(propFullName, \"`\"));\n  }\n\n  return undefined;\n}\n\nOrgUnitTree.propTypes = {\n  /**\n   * The root OrganisationUnit of the tree\n   *\n   * If the root OU is known to have no children, the `children` property of the root OU should be either\n   * `false` or an empty array. If the children property is undefined, the children will be fetched from\n   * the server when the tree is expanded.\n   */\n  root: PropTypes.object.isRequired,\n\n  /**\n   * An array of paths of selected OUs\n   *\n   * The path of an OU is the UIDs of the OU and all its parent OUs separated by slashes (/)\n   */\n  selected: PropTypes.arrayOf(orgUnitPathPropValidator),\n\n  /**\n   * An array of OU paths that will be expanded automatically as soon as they are encountered\n   *\n   * The path of an OU is the UIDs of the OU and all its parent OUs separated by slashes (/)\n   */\n  initiallyExpanded: PropTypes.arrayOf(orgUnitPathPropValidator),\n\n  /**\n   * onSelectClick callback, which is triggered when a click triggers the selection of an organisation unit\n   *\n   * The onSelectClick callback will receive two arguments: The original click event, and the OU that was clicked\n   */\n  onSelectClick: PropTypes.func,\n\n  /**\n   * onChangeCurrentRoot callback, which is triggered when the change current root label is clicked. Setting this also\n   * enables the display of the change current root label\n   *\n   * the onChangeCurrentRoot callback will receive two arguments: The original click event, and the organisation unit\n   * model object that was selected as the new root\n   */\n  onChangeCurrentRoot: PropTypes.func,\n\n  /**\n   * Organisation unit model representing the current root\n   */\n  currentRoot: PropTypes.object,\n\n  /**\n   * onChildrenLoaded callback, which is triggered when the children of this root org unit have been loaded\n   *\n   * The callback receives one argument: A D2 ModelCollection object that contains all the newly loaded org units\n   */\n  onChildrenLoaded: PropTypes.func,\n\n  /**\n   * Custom styling for OU labels\n   */\n  labelStyle: PropTypes.object,\n\n  /**\n   * Custom styling for the labels of selected OUs\n   */\n  selectedLabelStyle: PropTypes.object,\n\n  /**\n   * An array of organisation unit IDs that should be reloaded from the API\n   */\n  idsThatShouldBeReloaded: PropTypes.arrayOf(PropTypes.string),\n\n  /**\n   * Custom arrow symbol\n   */\n  arrowSymbol: PropTypes.string,\n\n  /**\n   * If true, don't display checkboxes next to org unit labels\n   */\n  hideCheckboxes: PropTypes.bool,\n\n  /**\n   * if true, don't display the selected member count next to org unit labels\n   */\n  hideMemberCount: PropTypes.bool,\n\n  /**\n   * Array of paths of Organisation Units to include on tree. If not defined or empty, all children from root to leafs will be shown\n   */\n  orgUnitsPathsToInclude: PropTypes.array,\n\n  /**\n   * If true `root.children.load` (a method on d2.ModelCollectionProperty) will be called with forceReload set to true, which is required\n   * for dynamic OrgUnitTrees, i.e. in cases where parent-child relations are updated\n   */\n  forceReloadChildren: PropTypes.bool\n};\nOrgUnitTree.defaultProps = {\n  selected: [],\n  initiallyExpanded: [],\n  onSelectClick: undefined,\n  onChangeCurrentRoot: undefined,\n  currentRoot: undefined,\n  onChildrenLoaded: undefined,\n  labelStyle: {},\n  selectedLabelStyle: {},\n  idsThatShouldBeReloaded: [],\n  arrowSymbol: undefined,\n  hideCheckboxes: false,\n  hideMemberCount: false,\n  orgUnitsPathsToInclude: null,\n  forceReloadChildren: false\n};\nexport default OrgUnitTree;","import { is53WeekISOYear, getFirstDateOfWeek } from 'd2/period/helpers';\nimport DatePicker from 'material-ui/DatePicker';\nimport MenuItem from 'material-ui/MenuItem';\nimport SelectField from 'material-ui/SelectField';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nconst styles = {\n  datePicker: {\n    width: '100%'\n  },\n  year: {\n    width: 95,\n    marginRight: 16\n  },\n  month: {\n    width: 125\n  },\n  week: {\n    width: 105\n  },\n  biWeek: {\n    width: 200\n  },\n  biMonth: {\n    width: 200\n  },\n  quarter: {\n    width: 200\n  },\n  sixMonth: {\n    width: 200\n  },\n  line: {\n    marginTop: 0\n  }\n};\n\nconst getYear = date => new Date(date).getFullYear().toString();\n\nconst getTwoDigitMonth = date => {\n  const month = new Date(date).getMonth() + 1; // Month is 0 indexed\n\n  return \"0\".concat(month).slice(-2);\n};\n\nconst getTwoDigitDay = date => {\n  const day = new Date(date).getDate();\n  return \"0\".concat(day).slice(-2);\n};\n\nconst formattedDate = date => \"\".concat(getYear(date)).concat(getTwoDigitMonth(date)).concat(getTwoDigitDay(date));\n\nconst getWeekYear = date => {\n  // Create a new date object for the thursday of this week\n  const target = new Date(date);\n  target.setDate(target.getDate() - (date.getDay() + 6) % 7 + 3);\n  return target.getFullYear();\n};\n\nconst isWeekValid = (date, week) => // It's not possible to have a week 53 in a 52 week year\n!is53WeekISOYear(date) && Number(week) !== 53;\n\nconst biWeekToWeek = biWeekStr => parseInt(biWeekStr) * 2 - 1;\n\nclass PeriodPicker extends React.Component {\n  constructor(props, context) {\n    super(props, context);\n    this.state = {};\n  }\n\n  getTranslation(key) {\n    return this.props.d2.i18n.getTranslation(key);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.periodType !== prevProps.periodType) {\n      this.handleChange();\n    }\n  }\n\n  getPeriod() {\n    const week = this.props.periodType === 'BiWeekly' && this.state.biWeek ? biWeekToWeek(this.state.biWeek) : this.state.week;\n    const date = this.state.year && week && getFirstDateOfWeek(this.state.year, week);\n\n    switch (this.props.periodType) {\n      case 'Daily':\n        return this.state.date && formattedDate(this.state.date);\n\n      case 'Weekly':\n        if (date) {\n          this.setState({\n            invalidWeek: !isWeekValid(date, this.state.week)\n          });\n        }\n\n        return date && isWeekValid(date, this.state.week) && \"\".concat(getWeekYear(date), \"W\").concat(this.state.week);\n\n      case 'WeeklyWednesday':\n        if (date) {\n          this.setState({\n            invalidWeek: !isWeekValid(date, this.state.week)\n          });\n        }\n\n        return date && isWeekValid(date, this.state.week) && \"\".concat(getWeekYear(date), \"WedW\").concat(this.state.week);\n\n      case 'WeeklyThursday':\n        if (date) {\n          this.setState({\n            invalidWeek: !isWeekValid(date, this.state.week)\n          });\n        }\n\n        return date && isWeekValid(date, this.state.week) && \"\".concat(getWeekYear(date), \"ThuW\").concat(this.state.week);\n\n      case 'WeeklySaturday':\n        if (date) {\n          this.setState({\n            invalidWeek: !isWeekValid(date, this.state.week)\n          });\n        }\n\n        return date && isWeekValid(date, this.state.week) && \"\".concat(getWeekYear(date), \"SatW\").concat(this.state.week);\n\n      case 'WeeklySunday':\n        if (date) {\n          this.setState({\n            invalidWeek: !isWeekValid(date, this.state.week)\n          });\n        }\n\n        return date && isWeekValid(date, this.state.week) && \"\".concat(getWeekYear(date), \"SunW\").concat(this.state.week);\n\n      case 'BiWeekly':\n        if (date) {\n          this.setState({\n            invalidBiWeek: !isWeekValid(date, biWeekToWeek(this.state.biWeek))\n          });\n        }\n\n        return this.state.year && this.state.biWeek && \"\".concat(this.state.year, \"BiW\").concat(this.state.biWeek);\n\n      case 'Monthly':\n        return this.state.year && this.state.month && \"\".concat(this.state.year).concat(this.state.month);\n\n      case 'BiMonthly':\n        return this.state.year && this.state.biMonth && \"\".concat(this.state.year, \"0\").concat(this.state.biMonth, \"B\");\n\n      case 'Quarterly':\n        return this.state.year && this.state.quarter && \"\".concat(this.state.year, \"Q\").concat(this.state.quarter);\n\n      case 'SixMonthly':\n        return this.state.year && this.state.sixMonth && \"\".concat(this.state.year, \"S\").concat(this.state.sixMonth);\n\n      case 'SixMonthlyApril':\n        return this.state.year && this.state.sixMonth && \"\".concat(this.state.year, \"AprilS\").concat(this.state.sixMonth);\n\n      case 'SixMonthlyNov':\n        return this.state.year && this.state.sixMonth && \"\".concat(this.state.year, \"NovS\").concat(this.state.sixMonth);\n\n      case 'Yearly':\n        return this.state.year;\n\n      case 'FinancialApril':\n        return this.state.year && \"\".concat(this.state.year, \"April\");\n\n      case 'FinancialJuly':\n        return this.state.year && \"\".concat(this.state.year, \"July\");\n\n      case 'FinancialOct':\n        return this.state.year && \"\".concat(this.state.year, \"Oct\");\n\n      default:\n        return false;\n    }\n  }\n\n  handleChange() {\n    if (this.getPeriod()) {\n      this.props.onPickPeriod(this.getPeriod());\n    }\n  }\n\n  renderOptionPicker(name, options) {\n    const changeState = (e, i, value) => this.setState({\n      [name]: value\n    }, this.handleChange);\n\n    const isInvalid = name === 'week' && this.state.invalidWeek || name === 'biWeek' && this.state.invalidBiWeek;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: 'inline-block'\n      },\n      \"data-test\": \"period-picker-option-\".concat(name)\n    }, /*#__PURE__*/React.createElement(SelectField, {\n      value: this.state[name],\n      onChange: changeState,\n      style: styles[name],\n      floatingLabelText: this.getTranslation(name),\n      floatingLabelStyle: isInvalid ? {\n        color: 'red'\n      } : {}\n    }, Object.keys(options).sort().map(value => /*#__PURE__*/React.createElement(MenuItem, {\n      key: value,\n      value: value,\n      primaryText: /[^0-9]/.test(options[value]) && name !== 'biWeek' ? this.getTranslation(options[value]) : options[value]\n    }))));\n  }\n\n  renderYearPicker() {\n    const years = {};\n    const currentYear = new Date().getFullYear();\n\n    for (let year = 2014; year < currentYear + 5; year++) {\n      years[year] = year;\n    }\n\n    return this.renderOptionPicker('year', years);\n  }\n\n  renderMonthPicker() {\n    const months = {\n      '01': 'jan',\n      '02': 'feb',\n      '03': 'mar',\n      '04': 'apr',\n      '05': 'may',\n      '06': 'jun',\n      '07': 'jul',\n      '08': 'aug',\n      '09': 'sep',\n      10: 'oct',\n      11: 'nov',\n      12: 'dec'\n    };\n    return this.renderOptionPicker('month', months);\n  }\n\n  renderWeekPicker() {\n    const weeks = {};\n    const weekLimit = 53;\n\n    for (let week = 1; week <= weekLimit; week++) {\n      weeks[\"0\".concat(week).substr(-2)] = week;\n    }\n\n    return this.renderOptionPicker('week', weeks);\n  }\n\n  renderBiWeekPicker() {\n    const biWeeks = {};\n    const biWeekLimit = 27;\n    const prefix = this.getTranslation('bi_week');\n\n    for (let biWeek = 1; biWeek <= biWeekLimit; biWeek++) {\n      biWeeks[\"0\".concat(biWeek).substr(-2)] = \"\".concat(prefix, \" \").concat(biWeek);\n    }\n\n    return this.renderOptionPicker('biWeek', biWeeks);\n  }\n\n  renderBiMonthPicker() {\n    const biMonths = {\n      1: 'jan-feb',\n      2: 'mar-apr',\n      3: 'may-jun',\n      4: 'jul-aug',\n      5: 'sep-oct',\n      6: 'nov-dec'\n    };\n    return this.renderOptionPicker('biMonth', biMonths);\n  }\n\n  renderQuarterPicker() {\n    const quarters = {\n      1: 'Q1',\n      2: 'Q2',\n      3: 'Q3',\n      4: 'Q4'\n    };\n    return this.renderOptionPicker('quarter', quarters);\n  }\n\n  render() {\n    const setDateState = (nothing, date) => {\n      const year = getYear(date);\n      const month = getTwoDigitMonth(date);\n      this.setState({\n        date,\n        year,\n        month\n      }, this.handleChange);\n    };\n\n    switch (this.props.periodType) {\n      case 'Daily':\n        return /*#__PURE__*/React.createElement(DatePicker, {\n          floatingLabelText: this.getTranslation('day'),\n          onChange: setDateState,\n          autoOk: true,\n          container: \"inline\",\n          style: styles.datePicker\n        });\n\n      case 'Weekly':\n      case 'WeeklyWednesday':\n      case 'WeeklyThursday':\n      case 'WeeklySaturday':\n      case 'WeeklySunday':\n        return /*#__PURE__*/React.createElement(\"div\", {\n          style: styles.line\n        }, this.renderYearPicker(), this.renderWeekPicker());\n\n      case 'BiWeekly':\n        return /*#__PURE__*/React.createElement(\"div\", {\n          style: styles.line\n        }, this.renderYearPicker(), this.renderBiWeekPicker());\n\n      case 'Monthly':\n        return /*#__PURE__*/React.createElement(\"div\", {\n          style: styles.line\n        }, this.renderYearPicker(), this.renderMonthPicker());\n\n      case 'BiMonthly':\n        return /*#__PURE__*/React.createElement(\"div\", {\n          style: styles.line\n        }, this.renderYearPicker(), this.renderBiMonthPicker());\n\n      case 'Quarterly':\n        return /*#__PURE__*/React.createElement(\"div\", {\n          style: styles.line\n        }, this.renderYearPicker(), this.renderQuarterPicker());\n\n      case 'SixMonthly':\n        return /*#__PURE__*/React.createElement(\"div\", {\n          style: styles.line\n        }, this.renderYearPicker(), this.renderOptionPicker('sixMonth', {\n          1: 'jan-jun',\n          2: 'jul-dec'\n        }));\n\n      case 'SixMonthlyApril':\n        return /*#__PURE__*/React.createElement(\"div\", {\n          style: styles.line\n        }, this.renderYearPicker(), this.renderOptionPicker('sixMonth', {\n          1: 'apr-sep',\n          2: 'oct-mar'\n        }));\n\n      case 'SixMonthlyNov':\n        return /*#__PURE__*/React.createElement(\"div\", {\n          style: styles.line\n        }, this.renderYearPicker(), this.renderOptionPicker('sixMonth', {\n          1: 'nov-apr',\n          2: 'may-oct'\n        }));\n\n      case 'Yearly':\n      case 'FinancialApril':\n      case 'FinancialJuly':\n      case 'FinancialOct':\n        return /*#__PURE__*/React.createElement(\"div\", {\n          style: styles.line\n        }, this.renderYearPicker());\n\n      default:\n        return null;\n    }\n  }\n\n}\n\nPeriodPicker.propTypes = {\n  d2: PropTypes.object.isRequired,\n  periodType: PropTypes.oneOf(['Daily', 'Weekly', 'WeeklyWednesday', 'WeeklyThursday', 'WeeklySaturday', 'WeeklySunday', 'BiWeekly', 'Monthly', 'BiMonthly', 'Quarterly', 'SixMonthly', 'SixMonthlyApril', 'SixMonthlyNov', 'Yearly', 'FinancialApril', 'FinancialJuly', 'FinancialOct']).isRequired,\n  onPickPeriod: PropTypes.func.isRequired\n};\nexport default PeriodPicker;","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport i18n from '@dhis2/d2-i18n';\nimport { NoticeBox } from '@dhis2/ui';\nimport OrgUnitSelectAll from 'd2-ui/lib/org-unit-select/OrgUnitSelectAll.component';\nimport OrgUnitSelectByGroup from 'd2-ui/lib/org-unit-select/OrgUnitSelectByGroup.component';\nimport OrgUnitSelectByLevel from 'd2-ui/lib/org-unit-select/OrgUnitSelectByLevel.component';\nimport SelectField from 'd2-ui/lib/select-field/SelectField';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport styles from './AddLockExceptionForm.module.css';\nimport OrgUnitTree from './OrgUnitTree';\nimport PeriodPicker from './PeriodPicker';\nconst d2UiSelectStyleOverride = {\n  minWidth: 360,\n  marginRight: 20\n};\n\nclass AddLockExceptionForm extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"handleDataSetChange\", async dataSet => {\n      const dataSetId = dataSet.id;\n\n      if (this.state.dataSet !== null && dataSetId === this.state.dataSet.id) {\n        return;\n      }\n\n      this.props.updateSelectedDataSetId(dataSetId);\n      this.setState({\n        rootWithMembers: null,\n        selected: [],\n        dataSet\n      });\n      const {\n        d2\n      } = this.props;\n\n      try {\n        const [rootWithDataSetMembers, dataSetMembers] = await Promise.all([d2.models.organisationUnits.list({\n          paging: false,\n          level: 1,\n          fields: 'id,displayName,path,children::isNotEmpty,memberCount',\n          memberCollection: 'dataSets',\n          memberObject: dataSetId\n        }), d2.models.dataSets.get(dataSetId, {\n          paging: false,\n          fields: 'organisationUnits[id,path]'\n        })]);\n        const rootWithMembers = rootWithDataSetMembers.toArray()[0];\n        this.setState({\n          rootWithMembers,\n          selected: [],\n          orgUnitPaths: dataSetMembers.organisationUnits.toArray().map(ou => ou.path)\n        });\n      } catch (error) {\n        this.setState({\n          error: i18n.t('Error loading data for data set')\n        });\n      }\n    });\n\n    _defineProperty(this, \"handlePeriodChange\", periodId => {\n      this.props.updateSelectedPeriodId(periodId);\n    });\n\n    _defineProperty(this, \"handleSelectionUpdate\", newSelection => {\n      this.setState({\n        selected: newSelection\n      });\n      this.props.updateSelectedOrgUnits(this.state.selected);\n    });\n\n    _defineProperty(this, \"handleOrgUnitClick\", (event, orgUnit) => {\n      if (this.state.selected.includes(orgUnit.path)) {\n        const selected = this.state.selected;\n        selected.splice(selected.indexOf(orgUnit.path), 1);\n        this.setState({\n          selected\n        });\n      } else {\n        const selected = this.state.selected;\n        selected.push(orgUnit.path);\n        this.setState({\n          selected\n        });\n      }\n\n      this.props.updateSelectedOrgUnits(this.state.selected);\n    });\n\n    _defineProperty(this, \"handleChangeRoot\", currentRoot => {\n      this.setState({\n        currentRoot\n      });\n    });\n\n    this.state = {\n      selected: [],\n      dataSet: null,\n      orgUnitPaths: null,\n      error: null\n    };\n    this.fixD2Translations();\n  }\n\n  getChildContext() {\n    return {\n      d2: this.props.d2\n    };\n  }\n\n  fixD2Translations() {\n    Object.assign(this.props.d2.i18n.translations, {\n      period: i18n.t('Period'),\n      data_set: i18n.t('Data set'),\n      organisation_unit: i18n.t('Organisation unit'),\n      organisation_unit_group: i18n.t('Organisation unit group'),\n      organisation_unit_level: i18n.t('Organisation unit level'),\n      select: i18n.t('Select'),\n      deselect: i18n.t('Deselect'),\n      select_all: i18n.t('Select All Org Units'),\n      deselect_all: i18n.t('Deselect All Org Units'),\n      name: i18n.t('Name'),\n      show: i18n.t('Show details'),\n      remove: i18n.t('Remove'),\n      actions: i18n.t('Actions'),\n      week: i18n.t('week'),\n      month: i18n.t('month'),\n      year: i18n.t('year'),\n      biMonth: i18n.t('bi monthly'),\n      day: i18n.t('day'),\n      jan: i18n.t('jan'),\n      feb: i18n.t('feb'),\n      mar: i18n.t('mar'),\n      apr: i18n.t('apr'),\n      may: i18n.t('may'),\n      jun: i18n.t('jun'),\n      jul: i18n.t('jul'),\n      aug: i18n.t('aug'),\n      sep: i18n.t('sep'),\n      oct: i18n.t('oct'),\n      nov: i18n.t('nov'),\n      dec: i18n.t('dec'),\n      'jan-feb': i18n.t('jan-feb'),\n      'mar-apr': i18n.t('mar-apr'),\n      'may-jun': i18n.t('may-jun'),\n      'jul-aug': i18n.t('jul-aug'),\n      'sep-oct': i18n.t('sep-oct'),\n      'nov-dec': i18n.t('nov-dec'),\n      quarter: i18n.t('quarter'),\n      Q1: i18n.t('Q1'),\n      Q2: i18n.t('Q2'),\n      Q3: i18n.t('Q3'),\n      Q4: i18n.t('Q4'),\n      sixMonth: i18n.t('six monthly'),\n      'jan-jun': i18n.t('jan-jun'),\n      'jul-dec': i18n.t('jul-dec'),\n      'apr-sep': i18n.t('apr-sep'),\n      'oct-mar': i18n.t('oct-mar')\n    });\n  }\n\n  renderOrganisationUnitSelectionCard() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.organisationUnitSelectionCard\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.organisationUnitTree,\n      \"data-test\": \"add-lock-exception-modal-org-unit-tree\"\n    }, this.state.rootWithMembers ? /*#__PURE__*/React.createElement(OrgUnitTree, {\n      root: this.state.rootWithMembers,\n      selected: this.state.selected,\n      currentRoot: this.state.currentRoot,\n      initiallyExpanded: [\"/\".concat(this.state.rootWithMembers.id)],\n      memberCollection: \"dataSets\",\n      memberObject: this.state.dataSet.id,\n      onSelectClick: this.handleOrgUnitClick,\n      onChangeCurrentRoot: this.handleChangeRoot,\n      orgUnitsPathsToInclude: this.state.orgUnitPaths\n    }) : i18n.t('Loading organisation units tree...')), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.right\n    }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"div\", null, this.state.currentRoot ? i18n.t('For organisation units within {{organisationUnitName}}:', {\n      organisationUnitName: this.state.currentRoot.displayName\n    }) : i18n.t('For all organisation units:')), /*#__PURE__*/React.createElement(OrgUnitSelectByLevel, {\n      levels: this.props.levels,\n      selected: this.state.selected,\n      currentRoot: this.state.currentRoot,\n      onUpdateSelection: this.handleSelectionUpdate\n    }), /*#__PURE__*/React.createElement(OrgUnitSelectByGroup, {\n      groups: this.props.groups,\n      selected: this.state.selected,\n      currentRoot: this.state.currentRoot,\n      onUpdateSelection: this.handleSelectionUpdate\n    }), /*#__PURE__*/React.createElement(OrgUnitSelectAll, {\n      selected: this.state.selected,\n      currentRoot: this.state.currentRoot,\n      onUpdateSelection: this.handleSelectionUpdate\n    }))));\n  }\n\n  render() {\n    const dataSetItems = this.props.dataSets.map(dataSet => ({\n      id: dataSet.id,\n      name: dataSet.displayName,\n      periodType: dataSet.periodType.name\n    }));\n    let dataSetSelectLabel = i18n.t('Select a data set');\n    let dataSetSelectValue = null;\n\n    if (this.state.dataSet) {\n      dataSetSelectLabel = i18n.t('Data set');\n      dataSetSelectValue = this.state.dataSet.id;\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.selectsContainer\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      \"data-test\": \"add-lock-exception-modal-select-data-set\"\n    }, /*#__PURE__*/React.createElement(SelectField, {\n      style: d2UiSelectStyleOverride,\n      label: dataSetSelectLabel,\n      items: dataSetItems,\n      onChange: this.handleDataSetChange,\n      value: dataSetSelectValue\n    })), this.state.dataSet && /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(PeriodPicker, {\n      d2: this.props.d2,\n      periodType: this.state.dataSet.periodType,\n      onPickPeriod: this.handlePeriodChange\n    }))), this.state.dataSet && (this.state.error ? /*#__PURE__*/React.createElement(NoticeBox, {\n      error: true\n    }, this.state.error) : this.renderOrganisationUnitSelectionCard()));\n  }\n\n}\n\n_defineProperty(AddLockExceptionForm, \"propTypes\", {\n  d2: PropTypes.object.isRequired,\n  dataSets: PropTypes.array.isRequired,\n  groups: PropTypes.oneOfType([PropTypes.object, PropTypes.array]).isRequired,\n  levels: PropTypes.oneOfType([PropTypes.object, PropTypes.array]).isRequired,\n  updateSelectedDataSetId: PropTypes.func.isRequired,\n  updateSelectedOrgUnits: PropTypes.func.isRequired,\n  updateSelectedPeriodId: PropTypes.func.isRequired\n});\n\n_defineProperty(AddLockExceptionForm, \"childContextTypes\", {\n  d2: PropTypes.object\n});\n\nexport default AddLockExceptionForm;","import { useAlert } from '@dhis2/app-runtime';\nimport { useD2 } from '@dhis2/app-runtime-adapter-d2';\nimport i18n from '@dhis2/d2-i18n';\nimport { ButtonStrip, Button, CircularLoader } from '@dhis2/ui';\nimport Dialog from 'material-ui/Dialog';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport AddLockExceptionForm from './AddLockExceptionForm';\n\nconst AddLockExceptionModal = ({\n  levels,\n  groups,\n  dataSets,\n  onAdd,\n  onClose\n}) => {\n  const successAlert = useAlert(i18n.t('Lock exception added'), {\n    success: true\n  });\n  const errorAlert = useAlert(({\n    error\n  }) => i18n.t('Error adding lock exception: {{error}}', {\n    error,\n    nsSeparator: null\n  }), {\n    critical: true\n  });\n  const [isLoading, setIsLoading] = useState(false);\n  const [selectedOrgUnits, setSelectedOrgUnits] = useState([]);\n  const [selectedDataSetId, setSelectedDataSetId] = useState(null);\n  const [selectedPeriodId, setSelectedPeriodId] = useState(null);\n  const {\n    d2\n  } = useD2();\n\n  const handleAdd = async () => {\n    setIsLoading(true);\n\n    try {\n      await onAdd({\n        selectedOrgUnits,\n        selectedDataSetId,\n        selectedPeriodId\n      });\n      successAlert.show();\n      onClose();\n    } catch (error) {\n      errorAlert.show({\n        error\n      });\n    }\n\n    setIsLoading(false);\n  };\n\n  const isAddActionDisabled = isLoading || !(selectedOrgUnits.length > 0 && selectedDataSetId && selectedPeriodId); // TODO: Need to use material UI Dialog component instead of @dhis2/ui Modal\n  // component due to z-index issues - z-index of select fields used by d2-ui\n  // organisation selection components is less than that of @dhis2/ui modal\n  // and so appear behind\n\n  return /*#__PURE__*/React.createElement(Dialog, {\n    title: i18n.t('Add lock exception'),\n    actions: /*#__PURE__*/React.createElement(\"div\", {\n      \"data-test\": \"add-lock-exception-modal-actions\"\n    }, /*#__PURE__*/React.createElement(ButtonStrip, {\n      end: true\n    }, /*#__PURE__*/React.createElement(Button, {\n      disabled: isLoading,\n      onClick: onClose\n    }, i18n.t('Cancel')), /*#__PURE__*/React.createElement(Button, {\n      primary: true,\n      disabled: isAddActionDisabled,\n      onClick: handleAdd\n    }, isLoading ? /*#__PURE__*/React.createElement(React.Fragment, null, i18n.t('Adding lock exception...'), /*#__PURE__*/React.createElement(CircularLoader, {\n      small: true\n    })) : i18n.t('Add lock exception')))),\n    open: true,\n    contentStyle: {\n      maxWidth: '80%'\n    },\n    bodyStyle: {\n      overflowY: 'scroll'\n    },\n    onRequestClose: onClose\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    \"data-test\": \"add-lock-exception-modal\"\n  }, /*#__PURE__*/React.createElement(AddLockExceptionForm, {\n    d2: d2,\n    levels: levels,\n    groups: groups,\n    dataSets: dataSets,\n    updateSelectedOrgUnits: setSelectedOrgUnits,\n    updateSelectedDataSetId: setSelectedDataSetId,\n    updateSelectedPeriodId: setSelectedPeriodId\n  })));\n};\n\nAddLockExceptionModal.propTypes = {\n  dataSets: PropTypes.any.isRequired,\n  groups: PropTypes.any.isRequired,\n  levels: PropTypes.any.isRequired,\n  onAdd: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired\n};\nexport default AddLockExceptionModal;","import i18n from '@dhis2/d2-i18n';\nimport { Button, Table, TableHead, TableRowHead, TableCellHead, TableBody, TableRow, TableCell } from '@dhis2/ui';\nimport FontIcon from 'material-ui/FontIcon';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nconst columnLabels = {\n  dataSet: i18n.t('Data set'),\n  period: i18n.t('Period'),\n  organisationUnit: i18n.t('Organisation unit')\n};\n\nconst LockExceptionsTable = ({\n  columns,\n  rows,\n  atBatchDeletionPage,\n  onRemoveLockException\n}) => /*#__PURE__*/React.createElement(Table, null, /*#__PURE__*/React.createElement(TableHead, null, /*#__PURE__*/React.createElement(TableRowHead, null, columns.map(column => /*#__PURE__*/React.createElement(TableCellHead, {\n  key: column\n}, columnLabels[column])), /*#__PURE__*/React.createElement(TableCellHead, null))), /*#__PURE__*/React.createElement(TableBody, null, rows.map((row, index) => /*#__PURE__*/React.createElement(TableRow, {\n  key: index\n}, columns.map(column => /*#__PURE__*/React.createElement(TableCell, {\n  key: column\n}, row[column])), /*#__PURE__*/React.createElement(TableCell, null, /*#__PURE__*/React.createElement(Button, {\n  small: true,\n  secondary: true,\n  onClick: () => onRemoveLockException(row)\n}, /*#__PURE__*/React.createElement(\"span\", {\n  title: atBatchDeletionPage ? i18n.t('Batch delete lock exceptions') : i18n.t('Remove lock exception')\n}, /*#__PURE__*/React.createElement(FontIcon, {\n  className: \"material-icons\"\n}, \"delete\"))))))));\n\nLockExceptionsTable.propTypes = {\n  atBatchDeletionPage: PropTypes.bool.isRequired,\n  columns: PropTypes.array.isRequired,\n  rows: PropTypes.array.isRequired,\n  onRemoveLockException: PropTypes.func.isRequired\n};\nexport default LockExceptionsTable;","import { useAlert } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Modal, ModalTitle, ModalContent, ModalActions, ButtonStrip, Button, CircularLoader } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\n\nconst RemoveLockExceptionModal = ({\n  onRemove,\n  onClose\n}) => {\n  const successAlert = useAlert(i18n.t('Lock exception removed'), {\n    success: true\n  });\n  const errorAlert = useAlert(({\n    error\n  }) => i18n.t('Error removing lock exception: {{error}}', {\n    error,\n    nsSeparator: null\n  }), {\n    critical: true\n  });\n  const [isLoading, setIsLoading] = useState(false);\n\n  const handleRemove = async () => {\n    setIsLoading(true);\n\n    try {\n      await onRemove();\n      successAlert.show();\n      onClose();\n    } catch (error) {\n      errorAlert.show({\n        error\n      });\n    }\n\n    setIsLoading(false);\n  };\n\n  return /*#__PURE__*/React.createElement(Modal, {\n    onClose: onClose\n  }, /*#__PURE__*/React.createElement(ModalTitle, null, i18n.t('Remove lock exception')), /*#__PURE__*/React.createElement(ModalContent, null, i18n.t('Are you sure you want to remove this lock exception?')), /*#__PURE__*/React.createElement(ModalActions, null, /*#__PURE__*/React.createElement(ButtonStrip, null, /*#__PURE__*/React.createElement(Button, {\n    disabled: isLoading,\n    onClick: onClose\n  }, i18n.t('No, cancel')), /*#__PURE__*/React.createElement(Button, {\n    destructive: true,\n    disabled: isLoading,\n    onClick: handleRemove\n  }, isLoading ? /*#__PURE__*/React.createElement(React.Fragment, null, i18n.t('Removing lock exception...'), /*#__PURE__*/React.createElement(CircularLoader, {\n    small: true\n  })) : i18n.t('Yes, remove lock exception')))));\n};\n\nRemoveLockExceptionModal.propTypes = {\n  onClose: PropTypes.func.isRequired,\n  onRemove: PropTypes.func.isRequired\n};\nexport default RemoveLockExceptionModal;","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport i18n from '@dhis2/d2-i18n';\nimport { CenteredContent, CircularLoader, NoticeBox, Button, Pagination, ButtonStrip } from '@dhis2/ui';\nimport classnames from 'classnames';\nimport { getInstance as getD2Instance } from 'd2';\nimport FontIcon from 'material-ui/FontIcon';\nimport IconButton from 'material-ui/IconButton';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport PageHeader from '../../components/PageHeader/PageHeader';\nimport { i18nKeys } from '../../i18n-keys';\nimport AddLockExceptionModal from './AddLockExceptionModal';\nimport styles from './LockException.module.css';\nimport LockExceptionsTable from './LockExceptionsTable';\nimport RemoveLockExceptionModal from './RemoveLockExceptionModal';\n\nclass LockException extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      loading: false,\n      loaded: false,\n      error: null,\n      pager: LockException.initialPager,\n      atBatchDeletionPage: false,\n      levels: null,\n      groups: null,\n      dataSets: [],\n      addLockExceptionModal: {\n        isVisible: false\n      },\n      removeLockExceptionModal: {\n        isVisible: false,\n        lockException: null\n      }\n    });\n\n    _defineProperty(this, \"loadLockExceptionsForPager\", async (pager, {\n      userAction\n    }) => {\n      if (!userAction && (this.state.loading || this.state.loaded)) {\n        return;\n      }\n\n      this.setState({\n        atBatchDeletionPage: false,\n        loaded: false,\n        loading: true,\n        error: null\n      });\n      const d2 = await getD2Instance();\n      const api = d2.Api.getApi();\n      const url = \"lockExceptions?page=\".concat(pager.page, \"&pageSize=\").concat(pager.pageSize) + '&fields=name,' + 'period[id,displayName],' + 'organisationUnit[id,displayName],' + 'dataSet[id,displayName]' + '&order=name:asc';\n\n      try {\n        const response = await api.get(url);\n        this.setState({\n          loaded: true,\n          loading: false,\n          lockExceptions: this.prepareLockExceptionsResponseToDataTable(response.lockExceptions),\n          pager: response.pager\n        });\n      } catch (error) {\n        const messageError = error && error.message ? error.message : i18n.t('Error loading lock exceptions');\n        this.setState({\n          loaded: true,\n          loading: false,\n          error: messageError\n        });\n      }\n    });\n\n    _defineProperty(this, \"loadLockExceptionCombinations\", async () => {\n      const d2 = await getD2Instance();\n      const api = d2.Api.getApi();\n      const url = 'lockExceptions/combinations?fields=name,period[id,displayName],dataSet[id,displayName]';\n      this.setState({\n        atBatchDeletionPage: true,\n        loaded: false,\n        loading: true\n      });\n\n      try {\n        const response = await api.get(url);\n        this.setState({\n          loaded: true,\n          loading: false,\n          atBatchDeletionPage: true,\n          lockExceptions: this.prepareLockExceptionsResponseToDataTable(response.lockExceptions)\n        });\n      } catch (error) {\n        const messageError = error && error.message ? error.message : i18n.t('An unexpected error happened during operation');\n        this.setState({\n          loaded: true,\n          loading: false,\n          error: messageError\n        });\n      }\n    });\n\n    _defineProperty(this, \"handlePageChange\", page => {\n      const pager = { ...this.state.pager,\n        page\n      };\n      this.loadLockExceptionsForPager(pager, {\n        userAction: true\n      });\n    });\n\n    _defineProperty(this, \"handlePageSizeChange\", pageSize => {\n      const pager = { ...this.state.pager,\n        pageSize\n      };\n      this.loadLockExceptionsForPager(pager, {\n        userAction: true\n      });\n    });\n\n    _defineProperty(this, \"backToLockExceptions\", () => {\n      this.loadLockExceptionsForPager(this.state.pager, {\n        userAction: true\n      });\n    });\n\n    _defineProperty(this, \"goToBatchDeletionPage\", () => {\n      this.loadLockExceptionCombinations();\n    });\n\n    _defineProperty(this, \"handleShowRemoveLockExceptionModal\", lockException => {\n      this.setState({\n        removeLockExceptionModal: {\n          isVisible: true,\n          lockException\n        }\n      });\n    });\n\n    _defineProperty(this, \"handleCloseRemoveLockExceptionModal\", () => {\n      this.setState({\n        removeLockExceptionModal: {\n          isVisible: false,\n          lockException: null\n        }\n      });\n    });\n\n    _defineProperty(this, \"handleRemoveLockException\", async lockException => {\n      const d2 = await getD2Instance();\n      const api = d2.Api.getApi();\n      let url = \"lockExceptions?pe=\".concat(lockException.periodId, \"&ds=\").concat(lockException.dataSetId);\n\n      if (lockException.organisationUnitId) {\n        url += \"&ou=\".concat(lockException.organisationUnitId);\n      }\n\n      await api.delete(url);\n\n      if (this.state.atBatchDeletionPage) {\n        this.setState({\n          lockExceptions: this.state.lockExceptions.filter(le => le.periodId !== lockException.periodId || le.dataSetId !== lockException.dataSetId)\n        });\n      } else {\n        this.loadLockExceptionsForPager(LockException.initialPager, {\n          userAction: true\n        });\n      }\n    });\n\n    _defineProperty(this, \"handleShowAddLockExceptionModal\", async () => {\n      if (this.state.levels && this.state.groups && this.state.dataSets.length > 0) {\n        this.setState({\n          addLockExceptionModal: {\n            isVisible: true\n          }\n        });\n        return;\n      }\n\n      const d2 = await getD2Instance();\n\n      try {\n        const [levels, groups, dataSets] = await Promise.all([d2.models.organisationUnitLevel.list({\n          paging: false,\n          fields: 'id,level,displayName',\n          order: 'level:asc'\n        }), d2.models.organisationUnitGroup.list({\n          paging: false,\n          fields: 'id,displayName'\n        }), d2.models.dataSet.list({\n          paging: false,\n          fields: 'id,displayName,periodType'\n        })]);\n        this.setState({\n          addLockExceptionModal: {\n            isVisible: true\n          },\n          levels,\n          groups,\n          dataSets: dataSets.toArray()\n        });\n      } catch (error) {\n        const messageError = error && error.message ? error.message : i18n.t('An unexpected error happened during operation');\n        this.setState({\n          loading: false,\n          error: messageError\n        });\n      }\n    });\n\n    _defineProperty(this, \"handleCloseAddLockExceptionModal\", () => {\n      this.setState({\n        addLockExceptionModal: {\n          isVisible: false\n        }\n      });\n    });\n\n    _defineProperty(this, \"handleAddLockException\", async ({\n      selectedOrgUnits,\n      selectedDataSetId,\n      selectedPeriodId\n    }) => {\n      const orgUnitIds = selectedOrgUnits.map(orgUnitPath => {\n        const splitOrgUnitPath = orgUnitPath.split('/');\n        return splitOrgUnitPath[splitOrgUnitPath.length - 1];\n      });\n      const formData = new FormData();\n      formData.append('ou', \"[\".concat(orgUnitIds.join(','), \"]\"));\n      formData.append('pe', selectedPeriodId);\n      formData.append('ds', selectedDataSetId);\n      const d2 = await getD2Instance();\n      const api = d2.Api.getApi();\n      await api.post('lockExceptions', formData);\n      this.loadLockExceptionsForPager(LockException.initialPager, {\n        userAction: false\n      });\n    });\n  }\n\n  prepareLockExceptionsResponseToDataTable(lockExceptionResponse) {\n    return lockExceptionResponse.map(({\n      dataSet,\n      period,\n      organisationUnit\n    }) => {\n      const row = {\n        period: period.displayName,\n        periodId: period.id,\n        dataSet: dataSet.displayName,\n        dataSetId: dataSet.id\n      };\n\n      if (!this.state.atBatchDeletionPage) {\n        row.organisationUnit = organisationUnit.displayName;\n        row.organisationUnitId = organisationUnit.id;\n      }\n\n      return row;\n    });\n  }\n\n  dataTableColumns() {\n    if (this.state.atBatchDeletionPage) {\n      return ['dataSet', 'period'];\n    }\n\n    return ['organisationUnit', 'dataSet', 'period'];\n  }\n\n  renderHeader() {\n    if (this.state.atBatchDeletionPage) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.headerContainer\n      }, /*#__PURE__*/React.createElement(IconButton, {\n        onClick: this.backToLockExceptions\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        title: i18n.t('Go back to all lock exceptions')\n      }, /*#__PURE__*/React.createElement(FontIcon, {\n        className: classnames('material-icons', styles.backArrowIcon)\n      }, \"arrow_back\"))), /*#__PURE__*/React.createElement(\"h1\", {\n        className: styles.header\n      }, /*#__PURE__*/React.createElement(\"span\", null, i18n.t('Lock Exception')), /*#__PURE__*/React.createElement(\"span\", {\n        className: styles.headerDivider\n      }, \" | \"), /*#__PURE__*/React.createElement(\"span\", {\n        className: styles.subHeader\n      }, i18n.t('Batch Deletion'))));\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: classnames(styles.headerContainer, styles.flexSpaceBetween)\n    }, /*#__PURE__*/React.createElement(PageHeader, {\n      sectionKey: this.props.sectionKey,\n      title: i18nKeys.lockException.title\n    }), /*#__PURE__*/React.createElement(ButtonStrip, null, /*#__PURE__*/React.createElement(Button, {\n      primary: true,\n      onClick: this.handleShowAddLockExceptionModal,\n      disabled: this.areActionsDisabled()\n    }, i18n.t('Add lock exception')), /*#__PURE__*/React.createElement(Button, {\n      onClick: this.goToBatchDeletionPage,\n      disabled: this.areActionsDisabled()\n    }, i18n.t('Batch deletion'))));\n  }\n\n  areActionsDisabled() {\n    return this.state.loading;\n  }\n\n  componentDidMount() {\n    this.loadLockExceptionsForPager(LockException.initialPager, {\n      userAction: false\n    });\n  }\n\n  renderPagination() {\n    if (this.areActionsDisabled() || this.state.atBatchDeletionPage) {\n      return null;\n    }\n\n    const paginationProps = { ...this.state.pager,\n      onPageSizeChange: this.handlePageSizeChange,\n      onPageChange: this.handlePageChange\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.pagination\n    }, /*#__PURE__*/React.createElement(Pagination, paginationProps));\n  }\n\n  renderTable() {\n    var _this$state$lockExcep;\n\n    return ((_this$state$lockExcep = this.state.lockExceptions) === null || _this$state$lockExcep === void 0 ? void 0 : _this$state$lockExcep.length) > 0 ? /*#__PURE__*/React.createElement(\"div\", null, this.renderPagination(), /*#__PURE__*/React.createElement(LockExceptionsTable, {\n      columns: this.dataTableColumns(),\n      rows: this.state.lockExceptions,\n      onRemoveLockException: this.handleShowRemoveLockExceptionModal,\n      atBatchDeletionPage: this.state.atBatchDeletionPage\n    }), this.renderPagination()) : /*#__PURE__*/React.createElement(\"em\", null, i18n.t('No lock exceptions to show.'));\n  }\n\n  renderAddLockExceptionModal() {\n    if (this.state.addLockExceptionModal.isVisible) {\n      return /*#__PURE__*/React.createElement(AddLockExceptionModal, {\n        levels: this.state.levels,\n        groups: this.state.groups,\n        dataSets: this.state.dataSets,\n        onAdd: this.handleAddLockException,\n        onClose: this.handleCloseAddLockExceptionModal\n      });\n    }\n  }\n\n  renderRemoveLockExceptionModal() {\n    if (this.state.removeLockExceptionModal.isVisible) {\n      return /*#__PURE__*/React.createElement(RemoveLockExceptionModal, {\n        onRemove: () => this.handleRemoveLockException(this.state.removeLockExceptionModal.lockException),\n        onClose: this.handleCloseRemoveLockExceptionModal\n      });\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.lockExceptions\n    }, this.renderHeader(), this.state.error ? /*#__PURE__*/React.createElement(NoticeBox, {\n      error: true\n    }, this.state.error) : this.state.loading ? /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null)) : this.renderTable(), this.renderAddLockExceptionModal(), this.renderRemoveLockExceptionModal());\n  }\n\n}\n\n_defineProperty(LockException, \"initialPager\", {\n  pageSize: 20,\n  page: 1,\n  total: 0,\n  pageCount: 1\n});\n\n_defineProperty(LockException, \"propTypes\", {\n  sectionKey: PropTypes.string.isRequired\n});\n\nexport default LockException;","import { Checkbox } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { i18nKeys } from '../../i18n-keys';\nimport styles from './Checkboxes.module.css';\n\nconst Checkboxes = ({\n  checkboxes,\n  toggleCheckbox,\n  disabled\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  className: styles.checkboxes\n}, Object.entries(checkboxes).map(([key, checked]) => /*#__PURE__*/React.createElement(Checkbox, {\n  key: key,\n  className: styles.checkbox,\n  label: i18nKeys.maintenance.checkboxes[key],\n  checked: checked,\n  onChange: () => toggleCheckbox(key),\n  disabled: disabled\n})));\n\nCheckboxes.propTypes = {\n  checkboxes: PropTypes.object.isRequired,\n  disabled: PropTypes.bool.isRequired,\n  toggleCheckbox: PropTypes.func.isRequired\n};\nexport default Checkboxes;","import { useState } from 'react';\nimport { i18nKeys } from '../../i18n-keys';\nexport const useCheckboxes = () => {\n  const [checkboxes, setCheckboxes] = useState(() => {\n    const checkboxes = {};\n\n    for (const key of Object.keys(i18nKeys.maintenance.checkboxes)) {\n      checkboxes[key] = false;\n    }\n\n    return checkboxes;\n  });\n\n  const toggleCheckbox = key => {\n    setCheckboxes({ ...checkboxes,\n      [key]: !checkboxes[key]\n    });\n  };\n\n  return {\n    checkboxes,\n    toggleCheckbox\n  };\n};","import { useDataMutation, useAlert } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Card, Button, CircularLoader } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport PageHeader from '../../components/PageHeader/PageHeader';\nimport { i18nKeys } from '../../i18n-keys';\nimport Checkboxes from './Checkboxes';\nimport styles from './Maintenance.module.css';\nimport { useCheckboxes } from './use-checkboxes';\nconst mutation = {\n  resource: 'maintenance',\n  type: 'create',\n  params: params => params\n};\n\nconst Maintenance = ({\n  sectionKey\n}) => {\n  const {\n    checkboxes,\n    toggleCheckbox\n  } = useCheckboxes();\n  const successAlert = useAlert(i18n.t('Maintenance done'), {\n    success: true\n  });\n  const errorAlert = useAlert(({\n    error\n  }) => error.message, {\n    critical: true\n  });\n  const [mutate, {\n    loading\n  }] = useDataMutation(mutation, {\n    onComplete: () => successAlert.show(),\n    onError: error => errorAlert.show({\n      error\n    })\n  });\n\n  const handlePerformMaintenance = async () => {\n    const params = {};\n\n    for (const [key, checked] of Object.entries(checkboxes)) {\n      if (checked) {\n        params[key] = true;\n      }\n    }\n\n    mutate(params);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(PageHeader, {\n    sectionKey: sectionKey,\n    title: i18nKeys.maintenance.title\n  }), /*#__PURE__*/React.createElement(Card, {\n    className: styles.card\n  }, /*#__PURE__*/React.createElement(Checkboxes, {\n    checkboxes: checkboxes,\n    toggleCheckbox: toggleCheckbox,\n    disabled: loading\n  }), /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    disabled: loading || !Object.values(checkboxes).some(checked => checked),\n    onClick: handlePerformMaintenance\n  }, loading ? /*#__PURE__*/React.createElement(React.Fragment, null, i18n.t('Performing maintenance...'), /*#__PURE__*/React.createElement(CircularLoader, {\n    small: true\n  })) : i18n.t('Perform maintenance'))));\n};\n\nMaintenance.propTypes = {\n  sectionKey: PropTypes.string.isRequired\n};\nexport default Maintenance;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport { useAlert } from '@dhis2/app-runtime';\nimport React from 'react';\nexport const withAlerts = Component => {\n  return function ComponentWithAlerts(props) {\n    const alert = useAlert(({\n      message\n    }) => message, options => options);\n    return /*#__PURE__*/React.createElement(Component, _extends({}, props, {\n      alert: alert\n    }));\n  };\n};","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport i18n from '@dhis2/d2-i18n';\nimport { CenteredContent, CircularLoader, NoticeBox, OrganisationUnitTree, ButtonStrip, Button, Card } from '@dhis2/ui';\nimport { getInstance as getD2Instance } from 'd2';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport PageHeader from '../../components/PageHeader/PageHeader';\nimport { i18nKeys } from '../../i18n-keys';\nimport { withAlerts } from '../../with-alerts';\nimport styles from './MinMaxValueGeneration.module.css';\nconst MIN_MAX_VALUE_ENDPOINT = '/minMaxValues';\n\nconst organisationIdFromPath = path => {\n  const last = array => array[array.length - 1];\n\n  return last(path.split('/'));\n};\n\nclass MinMaxValueGeneration extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      loading: true,\n      error: null,\n      selectedOrganisationUnit: null,\n      dataSets: null,\n      roots: null,\n      dataSetsSelectedCount: 0\n    });\n\n    _defineProperty(this, \"isFormValid\", () => {\n      return this.state.dataSetsSelectedCount > 0 && this.state.selectedOrganisationUnit !== null;\n    });\n\n    _defineProperty(this, \"loadData\", async () => {\n      const d2 = await getD2Instance();\n\n      try {\n        const [rootsResponse, dataSetsResponse] = await Promise.all([d2.models.organisationUnits.list({\n          paging: false,\n          level: 1,\n          fields: 'id'\n        }), d2.models.dataSet.list({\n          paging: false,\n          fields: 'id,displayName'\n        })]);\n        this.setState({\n          roots: rootsResponse.toArray(),\n          dataSets: dataSetsResponse.toArray()\n        });\n      } catch (error) {\n        this.setState({\n          error: i18n.t('Error loading data')\n        });\n      }\n\n      this.setState({\n        loading: false\n      });\n    });\n\n    _defineProperty(this, \"dataSetsSelectRef\", ref => {\n      this.dataSetsSelect = ref;\n    });\n\n    _defineProperty(this, \"dataSetsSelectClick\", () => {\n      this.setState({\n        dataSetsSelectedCount: this.dataSetsSelect.selectedOptions.length\n      });\n    });\n\n    _defineProperty(this, \"getDataSetIds\", () => Array.from(this.dataSetsSelect.selectedOptions).map(({\n      value\n    }) => value));\n\n    _defineProperty(this, \"handleOrganisationUnitChange\", ({\n      path,\n      checked\n    }) => {\n      if (checked) {\n        this.setState({\n          selectedOrganisationUnit: {\n            path,\n            id: organisationIdFromPath(path)\n          }\n        });\n      } else {\n        this.setState({\n          selectedOrganisationUnit: null\n        });\n      }\n    });\n\n    _defineProperty(this, \"handleGenerateMinMaxValue\", async () => {\n      this.props.alert.show({\n        message: i18n.t('Generating min-max values...'),\n        success: true\n      });\n      const d2 = await getD2Instance();\n      const api = d2.Api.getApi();\n\n      try {\n        await api.post(MIN_MAX_VALUE_ENDPOINT, {\n          organisationUnit: this.state.selectedOrganisationUnit.id,\n          dataSets: this.getDataSetIds()\n        });\n        this.props.alert.show({\n          message: i18n.t('Min-max values generated'),\n          success: true\n        });\n      } catch (error) {\n        this.props.alert.show({\n          message: i18n.t('Error generating min-max values'),\n          critical: true\n        });\n      }\n    });\n\n    _defineProperty(this, \"handleRemoveMinMaxValue\", async () => {\n      this.props.alert.show({\n        message: i18n.t('Removing min-max values...'),\n        success: true\n      });\n      const dataSetIds = this.getDataSetIds();\n      const d2 = await getD2Instance();\n      const api = d2.Api.getApi();\n\n      try {\n        await api.delete(\"\".concat(MIN_MAX_VALUE_ENDPOINT, \"/\").concat(this.state.selectedOrganisationUnit.id, \"?ds=\").concat(dataSetIds));\n        this.props.alert.show({\n          message: i18n.t('Min-max values removed'),\n          success: true\n        });\n      } catch (error) {\n        this.props.alert.show({\n          message: i18n.t('Error removing min-max values'),\n          critical: true\n        });\n      }\n    });\n  }\n\n  componentDidMount() {\n    this.loadData();\n  }\n\n  isUserInteractionDisabled() {\n    return this.state.loading || this.state.dataSets == null || this.state.roots === null;\n  }\n\n  renderForm() {\n    return /*#__PURE__*/React.createElement(Card, {\n      className: styles.card\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.container\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.left\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.label\n    }, i18n.t('Data set')), /*#__PURE__*/React.createElement(\"select\", {\n      multiple: true,\n      onClick: this.dataSetsSelectClick,\n      className: styles.select,\n      ref: this.dataSetsSelectRef\n    }, this.state.dataSets.map(item => /*#__PURE__*/React.createElement(\"option\", {\n      key: item.id,\n      value: item.id,\n      className: styles.options\n    }, item.displayName)))), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.right\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.label\n    }, i18n.t('Organisation unit')), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.tree\n    }, /*#__PURE__*/React.createElement(OrganisationUnitTree, {\n      roots: this.state.roots.map(r => r.id),\n      singleSelection: true,\n      selected: this.state.selectedOrganisationUnit ? [this.state.selectedOrganisationUnit.path] : [],\n      onChange: this.handleOrganisationUnitChange\n    })))), /*#__PURE__*/React.createElement(ButtonStrip, null, /*#__PURE__*/React.createElement(Button, {\n      primary: true,\n      onClick: this.handleGenerateMinMaxValue,\n      disabled: !this.isFormValid()\n    }, i18n.t('Generate min-max values')), /*#__PURE__*/React.createElement(Button, {\n      destructive: true,\n      onClick: this.handleRemoveMinMaxValue,\n      disabled: !this.isFormValid()\n    }, i18n.t('Remove min-max values'))));\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(PageHeader, {\n      sectionKey: this.props.sectionKey,\n      title: i18nKeys.minMaxValueGeneration.title\n    }), this.state.error ? /*#__PURE__*/React.createElement(NoticeBox, {\n      error: true\n    }, this.state.error) : this.state.loading ? /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null)) : this.renderForm());\n  }\n\n}\n\n_defineProperty(MinMaxValueGeneration, \"propTypes\", {\n  alert: PropTypes.object.isRequired,\n  sectionKey: PropTypes.string.isRequired\n});\n\nexport default withAlerts(MinMaxValueGeneration);","export const RESOURCE_TABLES_ENDPOINT = 'resourceTables';\nexport const PULL_INTERVAL = 5000;\nexport const RESOURCE_TABLES_TASK_SUMMARY_ENDPOINT = 'system/tasks/RESOURCE_TABLE';","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport i18n from '@dhis2/d2-i18n';\nimport { Card, Button, NoticeBox } from '@dhis2/ui';\nimport { getInstance as getD2Instance } from 'd2';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport NotificationsTable from '../../components/notifications-table/NotificationsTable';\nimport PageHeader from '../../components/PageHeader/PageHeader';\nimport { i18nKeys } from '../../i18n-keys';\nimport { PULL_INTERVAL, RESOURCE_TABLES_ENDPOINT, RESOURCE_TABLES_TASK_SUMMARY_ENDPOINT } from '../resource-tables/resource-tables.conf';\nimport styles from './ResourceTables.module.css';\nconst tables = [{\n  key: 'organisationUnitStructure',\n  name: '_orgunitstructure'\n}, {\n  key: 'organistionUnitCategoryOptionCombo',\n  name: '_orgunitstructure'\n}, {\n  key: 'categoryOptionGroupSetStructure',\n  name: '_categoryoptiongroupsetstructure'\n}, {\n  key: 'dataElementGroupSetStructure',\n  name: '_dataelementgroupsetstructure'\n}, {\n  key: 'indicatorGroupSetStructure',\n  name: '_indicatorgroupsetstructure'\n}, {\n  key: 'organisationUnitGroupSetStructure',\n  name: '_organisationunitgroupsetstructure'\n}, {\n  key: 'categoryStructure',\n  name: '_categorystructure'\n}, {\n  key: 'dataElementCategoryOptionComboName',\n  name: '_categoryoptioncomboname'\n}, {\n  key: 'dataElementStructure',\n  name: '_dataelementstructure'\n}, {\n  key: 'periodStructure',\n  name: '_periodstructure'\n}, {\n  key: 'dataPeriodStructure',\n  name: '_dateperiodstructure'\n}, {\n  key: 'dataElementCategoryOptionCombinations',\n  name: '_dataelementcategoryoptioncombo'\n}];\n\nclass ResourceTable extends Component {\n  constructor() {\n    super();\n\n    _defineProperty(this, \"startTaskProgressPolling\", () => {\n      this.intervalId = setInterval(() => {\n        this.requestTaskProgress();\n      }, PULL_INTERVAL);\n    });\n\n    _defineProperty(this, \"initResourceTablesGeneration\", async () => {\n      const d2 = await getD2Instance();\n      const api = d2.Api.getApi();\n      this.setLoadingPageState();\n\n      try {\n        const {\n          response\n        } = await api.post(RESOURCE_TABLES_ENDPOINT);\n\n        if (response) {\n          this.setState({\n            taskId: response.id\n          }, this.startTaskProgressPolling);\n        }\n      } catch (error) {\n        this.setLoadedPageWithErrorState(error);\n      }\n    });\n\n    _defineProperty(this, \"requestTaskSummary\", async () => {\n      const d2 = await getD2Instance();\n      const api = d2.Api.getApi();\n\n      try {\n        const taskSummaryResponse = await api.get(RESOURCE_TABLES_TASK_SUMMARY_ENDPOINT);\n        const taskId = this.getActiveTaskIdFromSummary(taskSummaryResponse);\n\n        if (taskId) {\n          this.setLoadingPageState();\n          this.setState({\n            taskId,\n            notifications: this.getUpdatedNotifications(taskSummaryResponse[taskId])\n          }, this.startTaskProgressPolling);\n        }\n      } catch (error) {\n        this.setLoadedPageWithErrorState(error);\n      }\n    });\n\n    _defineProperty(this, \"requestTaskProgress\", async () => {\n      const d2 = await getD2Instance();\n      const api = d2.Api.getApi();\n\n      try {\n        const taskNotifications = await api.get(\"\".concat(RESOURCE_TABLES_TASK_SUMMARY_ENDPOINT, \"/\").concat(this.state.taskId));\n        const completed = this.isTaskCompleted(taskNotifications);\n\n        if (completed) {\n          this.stopTaskProgressPolling();\n          this.unsetLoadingPageState();\n        }\n\n        this.setState({\n          notifications: this.getUpdatedNotifications(taskNotifications)\n        });\n      } catch (error) {\n        this.setLoadedPageWithErrorState(error);\n      }\n    });\n\n    this.state = {\n      taskId: null,\n      notifications: [],\n      loading: false,\n      error: null\n    };\n  }\n\n  componentWillUnmount() {\n    this.stopTaskProgressPolling();\n  }\n  /*\n   * Polling\n   */\n\n\n  stopTaskProgressPolling() {\n    clearInterval(this.intervalId);\n    this.intervalId = null;\n  }\n  /*\n   * State utilities\n   */\n\n\n  setLoadingPageState() {\n    this.setState({\n      loading: true,\n      error: null,\n      notifications: []\n    });\n  }\n\n  unsetLoadingPageState() {\n    this.setState({\n      loading: false\n    });\n  }\n\n  setLoadedPageWithErrorState(error) {\n    const messageError = error !== null && error !== void 0 && error.message ? error.message : i18nKeys.resourcetables.unexpectedError;\n    this.stopTaskProgressPolling();\n    this.setState({\n      error: messageError,\n      loading: false\n    });\n  }\n  /*\n   * API requests\n   */\n\n\n  /*\n   * Task notification helpers\n   */\n  getUpdatedNotifications(taskNotifications = []) {\n    // Notification table needs to be updated when new tasks are added\n    if (taskNotifications.length <= this.state.notifications.length) {\n      return this.state.notifications;\n    }\n\n    const lastIndex = taskNotifications.length - 1; // Reverse to sort oldest-newest\n    // Assumption: all tasks are completed, apart from the last one,\n    // which is the in-progress task.\n    // Exception is when the most recent task comes back as completed\n    // this indicates the entire process is done, so we respect that completed status.\n\n    return taskNotifications.reverse().map((x, i) => ({ ...x,\n      completed: x.completed || i < lastIndex\n    }));\n  }\n\n  getActiveTaskIdFromSummary(taskSummaryResponse) {\n    const {\n      taskId\n    } = Object.entries(taskSummaryResponse).reduce((currLatestTask, [taskId, taskNotifications]) => {\n      // First notification is last array item, so it's timestamp represents the task start\n      const firstTaskNotification = taskNotifications[taskNotifications.length - 1];\n      const time = new Date(firstTaskNotification.time);\n\n      if (!this.isTaskCompleted(taskNotifications) && time > currLatestTask.time) {\n        return {\n          taskId,\n          time\n        };\n      }\n\n      return currLatestTask;\n    }, {\n      taskId: null,\n      time: new Date(0)\n    });\n    return taskId;\n  }\n\n  isTaskCompleted(taskNotifications) {\n    // First array item is most recent notification, which can be used to\n    // read the completed prop for the entire task\n    return taskNotifications[0].completed;\n  }\n\n  render() {\n    var _this$state$notificat;\n\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(PageHeader, {\n      title: i18nKeys.resourceTables.title,\n      sectionKey: this.props.sectionKey\n    }), /*#__PURE__*/React.createElement(Card, {\n      className: styles.card\n    }, this.state.error && /*#__PURE__*/React.createElement(NoticeBox, {\n      className: styles.noticeBox,\n      error: true\n    }, this.state.error), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.description\n    }, tables.map(table => /*#__PURE__*/React.createElement(\"div\", {\n      key: table.key\n    }, i18nKeys.resourceTables.tables[table.key], /*#__PURE__*/React.createElement(\"span\", {\n      title: \"Table name\",\n      className: styles.tableName\n    }, \"(\", table.name, \")\")))), /*#__PURE__*/React.createElement(Button, {\n      primary: true,\n      onClick: this.initResourceTablesGeneration,\n      disabled: this.state.loading\n    }, i18n.t('Generate tables'))), ((_this$state$notificat = this.state.notifications) === null || _this$state$notificat === void 0 ? void 0 : _this$state$notificat.length) > 0 && /*#__PURE__*/React.createElement(Card, {\n      className: styles.card\n    }, /*#__PURE__*/React.createElement(NotificationsTable, {\n      notifications: this.state.notifications,\n      animateIncomplete: true\n    })));\n  }\n\n}\n\n_defineProperty(ResourceTable, \"propTypes\", {\n  sectionKey: PropTypes.string.isRequired\n});\n\nexport default ResourceTable;","import { i18nKeys } from '../i18n-keys';\nimport Analytics from './analytics/Analytics';\nimport DataIntegrity from './data-integrity/DataIntegrity';\nimport DataStatistics from './data-statistics/DataStatistics';\nimport LockException from './lock-exception/LockException';\nimport Maintenance from './maintenance/Maintenance';\nimport MinMaxValueGeneration from './min-max-value-generation/MinMaxValueGeneration';\nimport ResourceTables from './resource-tables/ResourceTables';\nexport const sections = [{\n  key: 'dataIntegrity',\n  path: '/data-integrity',\n  component: DataIntegrity,\n  info: {\n    label: i18nKeys.dataIntegrity.label,\n    icon: 'link',\n    description: i18nKeys.dataIntegrity.description,\n    actionText: i18nKeys.dataIntegrity.actionText,\n    docs: 'dataAdmin_dataIntegrity'\n  }\n}, {\n  key: 'maintenance',\n  path: '/maintenance',\n  component: Maintenance,\n  info: {\n    label: i18nKeys.maintenance.label,\n    icon: 'settings',\n    description: i18nKeys.maintenance.description,\n    actionText: i18nKeys.maintenance.actionText,\n    docs: 'data_admin_maintenance'\n  }\n}, {\n  key: 'resourceTables',\n  path: '/resourceTables',\n  component: ResourceTables,\n  info: {\n    label: i18nKeys.resourceTables.label,\n    icon: 'view_list',\n    description: i18nKeys.resourceTables.description,\n    actionText: i18nKeys.resourceTables.actionText,\n    docs: 'dataAdmin_resourceTables'\n  }\n}, {\n  key: 'analytics',\n  path: '/analytics',\n  component: Analytics,\n  info: {\n    label: i18nKeys.analytics.label,\n    icon: 'multiline_chart',\n    description: i18nKeys.analytics.description,\n    actionText: i18nKeys.analytics.actionText,\n    docs: 'generate_analytics_tables'\n  }\n}, {\n  key: 'statistics',\n  path: '/data-statistics',\n  component: DataStatistics,\n  info: {\n    label: i18nKeys.dataStatistics.label,\n    icon: 'timeline',\n    description: i18nKeys.dataStatistics.description,\n    actionText: i18nKeys.dataStatistics.actionText,\n    docs: 'dataAdmin_dataStatistics'\n  }\n}, {\n  key: 'lock',\n  path: '/lock-exception',\n  component: LockException,\n  info: {\n    label: i18nKeys.lockException.label,\n    icon: 'lock',\n    description: i18nKeys.lockException.description,\n    actionText: i18nKeys.lockException.actionText,\n    docs: 'dataAdmin_lockException'\n  }\n}, {\n  key: 'minMax',\n  path: '/min-max-value-generation',\n  component: MinMaxValueGeneration,\n  info: {\n    label: i18nKeys.minMaxValueGeneration.label,\n    icon: 'compare_arrows',\n    description: i18nKeys.minMaxValueGeneration.description,\n    actionText: i18nKeys.minMaxValueGeneration.actionText,\n    docs: 'dataAdmin_minMaxValueGeneration'\n  }\n}];\nexport const getDocsKeyForSection = sectionKey => {\n  var _sections$find;\n\n  return ((_sections$find = sections.find(section => section.key === sectionKey)) === null || _sections$find === void 0 ? void 0 : _sections$find.info.docs) || '';\n};","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport classNames from 'classnames';\nimport FontIcon from 'material-ui/FontIcon';\nimport { GridTile } from 'material-ui/GridList';\nimport PropTypes from 'prop-types';\nimport React, { PureComponent } from 'react';\nimport { Link } from 'react-router-dom';\nimport styles from './GridSection.module.css';\n\nclass GridSection extends PureComponent {\n  render() {\n    return /*#__PURE__*/React.createElement(Link, {\n      to: this.props.section.path\n    }, /*#__PURE__*/React.createElement(GridTile, {\n      key: this.props.section.key,\n      className: classNames('section', styles.gridElement)\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: classNames('row', styles.gridTitleBar)\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: classNames('section-title', styles.gridTitleDescription)\n    }, this.props.section.info.label), /*#__PURE__*/React.createElement(FontIcon, {\n      className: classNames('material-icons', 'icon', styles.gridIcon)\n    }, this.props.section.info.icon)), /*#__PURE__*/React.createElement(\"span\", {\n      className: classNames('section-description', 'row', styles.gridDescription)\n    }, this.props.section.info.description), /*#__PURE__*/React.createElement(\"span\", {\n      className: classNames('section-action-text', 'row', styles.gridActionText)\n    }, this.props.section.info.actionText)));\n  }\n\n}\n\n_defineProperty(GridSection, \"propTypes\", {\n  section: PropTypes.shape({\n    info: PropTypes.shape({\n      actionText: PropTypes.string,\n      description: PropTypes.string,\n      icon: PropTypes.string,\n      label: PropTypes.string\n    }),\n    key: PropTypes.string,\n    path: PropTypes.string\n  }).isRequired\n});\n\nexport default GridSection;","import classNames from 'classnames';\nimport React from 'react';\nimport { sections } from '../sections.conf';\nimport GridSection from './grid-section/GridSection';\nimport styles from './Home.module.css';\nimport './grid.css';\n\nconst Home = () => {\n  const gridElements = sections.map(section => /*#__PURE__*/React.createElement(\"div\", {\n    key: section.key,\n    className: classNames('col-sm-12 col-md-6 col-lg-4', styles.gridContainer)\n  }, /*#__PURE__*/React.createElement(GridSection, {\n    key: section.key,\n    section: section\n  })));\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: \"grid-list-id\",\n    className: \"row\"\n  }, gridElements);\n};\n\nexport default Home;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from 'react';\nimport { Switch, Route, Redirect } from 'react-router-dom';\nimport Home from '../../pages/home/Home';\nimport { sections } from '../../pages/sections.conf';\n\nconst Routes = () => /*#__PURE__*/React.createElement(Switch, null, /*#__PURE__*/React.createElement(Route, {\n  exact: true,\n  path: \"/\",\n  component: Home\n}), sections.map(section => /*#__PURE__*/React.createElement(Route, {\n  key: section.key,\n  path: section.path,\n  component: props => /*#__PURE__*/React.createElement(section.component, _extends({\n    sectionKey: section.key\n  }, props))\n})), /*#__PURE__*/React.createElement(Redirect, {\n  from: \"*\",\n  to: \"/\"\n}));\n\nexport default Routes;","import { PropTypes } from '@dhis2/prop-types';\nimport { Menu, MenuItem } from '@dhis2/ui';\nimport React from 'react';\nimport { useHistory, useRouteMatch } from 'react-router-dom';\nimport { sections } from '../../pages/sections.conf';\nimport styles from './Sidebar.module.css';\n\nconst SidebarItem = ({\n  label,\n  path\n}) => {\n  const history = useHistory();\n  const isActive = !!useRouteMatch(path);\n\n  const navigateToPath = () => history.push(path);\n\n  return /*#__PURE__*/React.createElement(MenuItem, {\n    className: styles.sidebarItem,\n    onClick: navigateToPath,\n    active: isActive,\n    label: label\n  });\n};\n\nSidebarItem.propTypes = {\n  label: PropTypes.string.isRequired,\n  path: PropTypes.string.isRequired\n};\n\nconst Sidebar = () => /*#__PURE__*/React.createElement(Menu, null, sections.map(section => /*#__PURE__*/React.createElement(SidebarItem, {\n  key: section.key,\n  label: section.info.label,\n  path: section.path\n})));\n\nexport default Sidebar;","import { blue100, blue700, grey100, grey400, orange500, orangeA200, darkBlack, white } from 'material-ui/styles/colors';\nimport getMuiTheme from 'material-ui/styles/getMuiTheme';\nimport Spacing from 'material-ui/styles/spacing';\nimport { fade } from 'material-ui/utils/colorManipulator';\nconst theme = {\n  spacing: Spacing,\n  fontFamily: 'Roboto, sans-serif',\n  palette: {\n    primary1Color: '#004ba0',\n    primary2Color: blue700,\n    primary3Color: blue100,\n    accent1Color: orange500,\n    accent2Color: grey100,\n    accent3Color: orangeA200,\n    textColor: darkBlack,\n    alternateTextColor: white,\n    canvasColor: white,\n    borderColor: grey400,\n    disabledColor: fade(darkBlack, 0.3)\n  }\n};\nconst muiTheme = getMuiTheme(theme);\nexport default muiTheme;","import { useD2 } from '@dhis2/app-runtime-adapter-d2';\nimport { CssVariables } from '@dhis2/ui';\nimport { MuiThemeProvider } from 'material-ui/styles';\nimport React from 'react';\nimport { HashRouter } from 'react-router-dom';\nimport styles from './App.module.css';\nimport Routes from './components/Routes/Routes';\nimport Sidebar from './components/Sidebar/Sidebar';\nimport muiTheme from './theme';\nimport 'material-design-icons-iconfont';\nimport './locales';\n\nconst App = () => {\n  const {\n    d2\n  } = useD2();\n\n  if (!d2) {\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(HashRouter, null, /*#__PURE__*/React.createElement(CssVariables, {\n    spacers: true,\n    colors: true\n  }), /*#__PURE__*/React.createElement(MuiThemeProvider, {\n    muiTheme: muiTheme\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.sidebar\n  }, /*#__PURE__*/React.createElement(Sidebar, null)), /*#__PURE__*/React.createElement(\"main\", {\n    className: styles.content\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.contentWrapper\n  }, /*#__PURE__*/React.createElement(Routes, null))))));\n};\n\nexport default App;"],"sourceRoot":""}