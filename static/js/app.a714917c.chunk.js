(this["webpackJsonp@dhis2/app-shell"]=this["webpackJsonp@dhis2/app-shell"]||[]).push([[135],{417:function(e,t,a){e.exports={uppercase:"Page_uppercase__1jIso",gridContainer:"Page_gridContainer__-51DT",formControl:"Page_formControl__3fSiU",cardContainer:"Page_cardContainer__1Dt3b"}},513:function(e,t,a){e.exports={header:"DataStatistics_header__2TZYM",card:"DataStatistics_card__-usL2",maxWith:"DataStatistics_maxWith__eTiig",statisticsTable:"DataStatistics_statisticsTable__2Btwb"}},755:function(e){e.exports=JSON.parse('{"Data set":"\u062d\u0632\u0645\u0629 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a","Period":"\u0627\u0644\u0641\u062a\u0631\u0629 \u0627\u0644\u0632\u0645\u0646\u064a\u0629","Organisation unit":"\u0627\u0644\u0648\u062d\u062f\u0629 \u0627\u0644\u062a\u0646\u0638\u064a\u0645\u064a\u0629"}')},756:function(e){e.exports=JSON.parse("{}")},757:function(e){e.exports=JSON.parse('{"Data set":"","Period":"","Organisation unit":"\u0627\u0644\u0648\u062d\u062f\u0629 \u0627\u0644\u062a\u0646\u0638\u064a\u0645\u064a\u0629"}')},758:function(e){e.exports=JSON.parse("{}")},759:function(e){e.exports=JSON.parse("{}")},760:function(e){e.exports=JSON.parse('{"Data set":"","Period":"\u0645\u0627\u0648\u0629","Organisation unit":"\u064a\u0629\u0643\u0629\u064a \u0631\u064a\u0643\u062e\u0631\u0627\u0648"}')},761:function(e){e.exports=JSON.parse('{"Data set":"Datov\xe1 sada","Period":"Obdob\xed","Organisation unit":"Organiza\u010dn\xed jednotka"}')},762:function(e){e.exports=JSON.parse('{"Data set":"Data set","Period":"","Organisation unit":"Organisation unit"}')},763:function(e){e.exports=JSON.parse('{"Data Integrity":"","Run data integrity checks and unveil anomalies and problems in the meta data setup.":"","Check Data Integrity":"","Performing data integrity checks...":"","An unexpected error happened during data integrity checks":"","RUN INTEGRITY CHECKS":"","Data elements without data set":"","Data elements without groups":"","Data elements violating exclusive group sets":"","Data elements assigned to data sets with different period types":"","Data sets not assigned to organisation units":"","Indicators with identical formulas":"","Indicators without groups":"","Invalid indicator numerators":"","Invalid indicator denominators":"","Indicators violating exclusive group sets":"","Organisation units with cyclic references":"","Orphaned organisation units":"","Organisation units without groups":"","Organisation units violating exclusive group sets":"","Organisation unit groups without group sets":"","Validation rules without groups":"","Invalid validation rule left side expressions":"","Invalid validation rule right side expressions":"","Invalid program indicator expressions":"","Invalid program indicator filters":"","There are data elements in the form, but not in the form or sections":"","Invalid category combinations":"","Duplicate periods":"","Program rules with no condition":"","Program rules with no action":"","Program rules with no priority":"","Program rule variables with no data element":"","Program rule variables with no attribute":"","Program rule actions with no data object":"","Program rule actions with no notification":"","Program rule actions with no section id":"","Program rule actions with no stage id":"","Program indicators wit no expression":"","Maintenance":"","Perform maintenance tasks and generate resource database tables for the organisation unit hierarchy and group set structure.":"","Perform Maintenance":"","PERFORM MAINTENANCE":"","Performing Maintenance...":"","Maintenance done":"","An unexpected error happened during maintenance":"","Clear analytics tables":"","Analyze analytics tables":"","Remove zero data values":"","Permanently remove soft deleted data values":"","Permanently remove soft deleted events":"","Permanently remove soft deleted enrollments":"","Permanently remove soft deleted tracked entity instances":"","Prune periods":"","Remove expired invitations":"","Drop SQL views":"","Create SQL views":"","Update category option combinations":"","Update organisation unit paths":"","Clear application cache":"","Reload apps":"","Resource Tables":"","Generate resource database tables for the organisation unit hierarchy and group set structure among others.":"","Generate Resource Tables":"","GENERATE TABLES":"","Resource Tables generated":"","An unexpected error happened during operation":"","Organisation unit structure":"","Organisation unit category option combo":"","Category option group set structure":"","Data element group set structure":"","Indicator group set structure":"","Organisation unit group set structure":"","Category structure":"","Data element category option combo name":"","Data element structure":"","Period structure":"","Date period structure":"","Data element category option combinations":"","Data Statistics":"","Browse the number of objects in the database, like data elements, indicators, data sets and data values.":"","Overview Data Statistics":"","Loading Data Statistics...":"","It was not possible to load Data Statistics":"","No data to show.":"","Object type":"","Last hour":"","Today":"","Last":"","days":"","Users logged in":"","User account invitations":"","Pending invitations":"","Expired invitations":"","Data values":"","Events":"","Indicators":"","Periods":"","Organisation units":"","Validation rules":"","Programs":"","Data elements":"","Organisation unit groups":"","Pivot tables":"","Indicator types":"","Data sets":"","User groups":"","Users":"","Maps":"","Indicator groups":"","Charts":"","Data element groups":"","Dashboards":"","Lock Exception Management":"","Lock Exception":"","Batch Deletion":"","Add new lock exception":"","Add or remove exceptions to the the standard rules for locking of data entry forms.":"","BATCH DELETION":"","CANCEL":"","ADD":"","Loading Lock Exceptions...":"","Adding Lock Exception...":"","Lock Exception removed":"","Lock Exception Added":"","Are you sure?":"","CONFIRM":"","Select a Data Set":"","Updating Organisation Units Tree...":"","For organisation units within":"","Period":"","Data Set":"","Organisation Unit":"","Organisation Unit Group":"","Organisation Unit Level":"","Select":"","Deselect":"","Select All Org Units":"","Deselect All Org Units":"","Name":"","Show Details":"","Remove":"","Actions":"","of":"","week":"","month":"","year":"","bi monthly":"","day":"","jan":"","feb":"","mar":"","apr":"","may":"","jun":"","jul":"","aug":"","sep":"","oct":"","nov":"","dec":"","jan-feb":"","mar-apr":"","may-jun":"","jul-aug":"","sep-oct":"","nov-dec":"","quarter":"","Q1":"","Q2":"","Q3":"","Q4":"","six monthly":"","jan-jun":"","jul-dec":"","apr-sep":"","oct-mar":"","Min-Max Value Generation":"","Generate min-max values which can be used for data validation during data entry and validation processes.":"","Generate Min-Max Value":"","It was not possible to load data":"","Doing Min Max generation...":"","Removing Min Max generation...":"","Min Max generation done":"","Min Max removal done":"","Loading data sets":"","Organisation Unit Selection":"","Generate":"","Analytics tables management":"","Analytics Tables":"","The data mart is a set of tables in the DHIS database which is used by all reporting and analysis tools to retrieve data from.":"","Analytics tables update":"","START EXPORT":"","Skip generation of aggregate data and completeness data":"","Skip generation of resource tables":"","Skip generation of event data":"","Skip generation of enrollment data":"","Analytics Tables Update":"","Number of last years of data to include":"","[ All ]":"","Settings":"","Search apps":"","Profile":"","Account":"","Help":"","Log out":"","About DHIS 2":"","Manage my apps":"","No results found":"","Interpretations":"","Messages":"","Data set":"","Organisation unit":""}')},764:function(e){e.exports=JSON.parse('{"Data set":"Set de Datos\\\\:","Period":"Periodo","Organisation unit":"Unidad organizativa"}')},765:function(e){e.exports=JSON.parse('{"Data set":"Ensemble de donn\xe9es","Period":"P\xe9riode","Organisation unit":"Unit\xe9 d\'organisation"}')},766:function(e){e.exports=JSON.parse('{"Data set":"Data set","Period":"Periode","Organisation unit":"Unit organisasi"}')},767:function(e){e.exports=JSON.parse('{"Data set":"Data set","Period":"\u1780\u17c6\u17a1\u17bb\u1784\u1796\u17c1\u179b","Organisation unit":"\u1795\u17d2\u1793\u17c2\u1780\u200b\u1793\u17c3\u200b\u17a2\u1784\u17d2\u1782\u1780\u17b6\u179a"}')},768:function(e){e.exports=JSON.parse('{"Data set":"Data set\\\\:","Period":"\u0e8a\u0ec8\u0ea7\u0e87\u0ec0\u0ea7\u0ea5\u0eb2","Organisation unit":"\u200b\u0eab\u0ebb\u0ea7\u200b\u0edc\u0ec8\u0ea7\u0e8d\u200b\u0e81\u0eb2\u0e99\u200b\u0e88\u0eb1\u0e94\u200b\u0e95\u0eb1\u0ec9\u0e87"}')},769:function(e){e.exports=JSON.parse("{}")},770:function(e){e.exports=JSON.parse('{"Data set":"Dataset","Period":"\u1021\u1001\u103b\u102d\u1014\u103a\u1000\u102c\u101c","Organisation unit":"Organisation unit"}')},771:function(e){e.exports=JSON.parse('{"Data set":"Datasett","Period":"Periode","Organisation unit":"Organisasjonsenhet"}')},772:function(e){e.exports=JSON.parse("{}")},773:function(e){e.exports=JSON.parse('{"Data set":"\u062f \u0645\u0627\u0644\u0648\u0645\u0627\u062a\u0648 (\u0689\u0627\u067c\u0627) \u067c\u0648\u0644\u06ab\u0647","Period":"\u062f\u0648\u0631\u0647","Organisation unit":"\u0648\u0627\u062d\u062f \u0633\u0627\u0632\u0645\u0627\u0646"}')},774:function(e){e.exports=JSON.parse('{"Data set":"\u062f \u0645\u0627\u0644\u0648\u0645\u0627\u062a\u0648 (\u0689\u0627\u067c\u0627) \u067c\u0648\u0644\u06ab\u0647","Period":"\u0645\u0639\u06cc\u0627\u062f","Organisation unit":"\u062f \u0633\u0627\u0632\u0645\u0627\u0646 \u0648\u0627\u062d\u062f"}')},775:function(e){e.exports=JSON.parse('{"Data set":"Ficha","Period":"Per\xedodo","Organisation unit":"Unidade organizacional"}')},776:function(e){e.exports=JSON.parse('{"Data set":"Conjunto de dados","Period":"Per\xedodo","Organisation unit":"Unidade organizacional"}')},777:function(e){e.exports=JSON.parse('{"Data set":"\u041d\u0430\u0431\u043e\u0440 \u0434\u0430\u043d\u043d\u044b\u0445","Period":"\u041f\u0435\u0440\u0438\u043e\u0434","Organisation unit":"\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u0430\u044f \u0435\u0434\u0438\u043d\u0438\u0446\u0430"}')},778:function(e){e.exports=JSON.parse("{}")},779:function(e){e.exports=JSON.parse('{"Data set":"datam\xe4ngd","Period":"Period","Organisation unit":"Organisationsenhet"}')},780:function(e){e.exports=JSON.parse('{"Data set":"Pakote dadus","Period":"Per\xedodu","Organisation unit":"Unidade organizasional"}')},781:function(e){e.exports=JSON.parse('{"Data set":"\u041c\u0430\u04b7\u043c\u04ef\u0438 \u0438\u0442\u0442\u0438\u043b\u043e\u043e\u0442","Period":"\u0414\u0430\u0432\u0440\u0430","Organisation unit":"\u0412\u043e\u04b3\u0438\u0434\u0438 \u0441\u043e\u0445\u0442\u043e\u0440\u04e3"}')},782:function(e){e.exports=JSON.parse('{"Data set":"\u041d\u0430\u0431\u0456\u0440 \u0434\u0430\u043d\u0438\u0445","Period":"\u041f\u0435\u0440\u0456\u043e\u0434","Organisation unit":"\u041e\u0440\u0433\u0430\u043d\u0456\u0437\u0430\u0446\u0456\u0439\u043d\u0438\u0439 \u043f\u0456\u0434\u0440\u043e\u0437\u0434\u0456\u043b"}')},783:function(e){e.exports=JSON.parse('{"Data set":"\u0688\u06cc\u0679\u0627 \u0633\u06cc\u0679","Period":"\u0645\u062f\u062a","Organisation unit":"\u062a\u0646\u0638\u06cc\u0645 \u06cc\u0648\u0646\u0679"}')},784:function(e){e.exports=JSON.parse('{"Data set":"\u041c\u0430\u044a\u043b\u0443\u043c\u043e\u0442\u043b\u0430\u0440 \u0442\u045e\u043f\u043b\u0430\u043c\u0438","Period":"\u0414\u0430\u0432\u0440","Organisation unit":"\u0422\u0430\u0448\u043a\u0438\u043b\u0438\u0439 \u0431\u045e\u043b\u0438\u043c"}')},785:function(e){e.exports=JSON.parse('{"Data Administration":"\u041c\u0430\u044a\u043b\u0443\u043c\u043e\u0442\u043b\u0430\u0440\u043d\u0438 \u0431\u043e\u0448\u049b\u0430\u0440\u0438\u0448"}')},786:function(e){e.exports=JSON.parse('{"Data set":"Ma\u02bclumotlar to\u02bcplami","Period":"davr","Organisation unit":"\u0422\u0430\u0448\u043a\u0438\u043b\u0438\u0439 \u0431\u0438\u0440\u043b\u0438\u043a"}')},787:function(e){e.exports=JSON.parse('{"Data set":"T\u1eadp d\u1eef li\u1ec7u","Period":"Th\u1eddi \u0111i\u1ec3m","Organisation unit":"\u0110\u01a1n v\u1ecb"}')},788:function(e){e.exports=JSON.parse('{"Data set":"\u6570\u636e\u96c6","Period":"\u671f\u95f4","Organisation unit":"\u673a\u6784"}')},789:function(e){e.exports=JSON.parse('{"Data set":"\u6570\u636e\u96c6","Period":"\u5468\u671f","Organisation unit":"\u673a\u6784"}')},790:function(e,t,a){},791:function(e,t,a){e.exports={card:"DataIntegrityCard_card__KV-D9"}},792:function(e,t,a){e.exports={header:"DataIntegrity_header__1yaU5"}},921:function(e,t,a){e.exports={selectsContainer:"AddLockExceptionForm_selectsContainer__1FfO9",organisationUnitTreeContainer:"AddLockExceptionForm_organisationUnitTreeContainer__Qmc3a",left:"AddLockExceptionForm_left__3rBtP",right:"AddLockExceptionForm_right__3MHtt",ouLabel:"AddLockExceptionForm_ouLabel__2ajXK",organisationUnitTreeCard:"AddLockExceptionForm_organisationUnitTreeCard__308i8"}},923:function(e,t,a){},924:function(e,t,a){e.exports={pagination:"LockException_pagination__386cw",header:"LockException_header__3DHeL",lockExceptionsTable:"LockException_lockExceptionsTable__23sTj",headerContainer:"LockException_headerContainer__3IVXu",lockExceptionsTableHeader:"LockException_lockExceptionsTableHeader__2Prp0",lockExceptionDialog:"LockException_lockExceptionDialog__3Facz",actionButton:"LockException_actionButton__3hfk_",marginForAddButton:"LockException_marginForAddButton__3L837",backArrowIcon:"LockException_backArrowIcon__3o-BP",headerDivider:"LockException_headerDivider__98yTN",subHeader:"LockException_subHeader__3h-v4"}},925:function(e,t,a){e.exports={card:"MinMaxValueGeneration_card__3HhUq",header:"MinMaxValueGeneration_header__3aa-o",container:"MinMaxValueGeneration_container__1KXr1",label:"MinMaxValueGeneration_label__Zpg4R",left:"MinMaxValueGeneration_left___Z-17",right:"MinMaxValueGeneration_right__3Nvgn",tree:"MinMaxValueGeneration_tree__1LuaX",select:"MinMaxValueGeneration_select__3RB4a",options:"MinMaxValueGeneration_options__XH-P_",actionButton:"MinMaxValueGeneration_actionButton__3X2MH"}},926:function(e,t,a){e.exports={description:"ResourceTables_description__3ojib",tableName:"ResourceTables_tableName__3eEPw"}},927:function(e,t,a){e.exports={gridElement:"GridSection_gridElement__dFN30",gridTitleBar:"GridSection_gridTitleBar__iuWB9",gridTitleDescription:"GridSection_gridTitleDescription__OBU6O",gridIcon:"GridSection_gridIcon__1BcuZ",gridDescription:"GridSection_gridDescription__3BQ6R",gridActionText:"GridSection_gridActionText__2cTCc"}},933:function(e,t,a){e.exports={gridContainer:"Home_gridContainer__3mcNn"}},934:function(e,t,a){},935:function(e,t,a){e.exports={contentArea:"App_contentArea__2j2HG",contentWrapper:"App_contentWrapper__Hgvg2",leftBar:"App_leftBar__2dvPA",maxWith:"App_maxWith__1Prsh",centered:"App_centered__3iqgB"}},936:function(e,t,a){},997:function(e,t,a){"use strict";a.r(t);var n=a(938),i=a(7),s=a(570),o=a(0),r=a.n(o),l=a(338),c=a(6),d=a(647),p=a(994),u=a(290),h=a(754),g=a(1),m=a.n(g),b=a(276),y=a(755),k=a(756),S=a(757),x=a(758),E=a(759),v=a(760),f=a(761),C=a(762),P=a(763),T=a(764),D=a(765),I=a(766),w=a(767),A=a(768),O=a(769),N=a(770),R=a(771),M=a(772),_=a(773),U=a(774),L=a(775),j=a(776),W=a(777),G=a(778),B=a(779),F=a(780),V=a(781),q=a(782),J=a(783),Q=a(784),H=a(785),z=a(786),Y=a(787),K=a(788),X=a(789);const Z="default";c.a.addResources("ar",Z,y),c.a.addResources("ar_EG",Z,k),c.a.addResources("ar_IQ",Z,S),c.a.addResources("ar_SD",Z,x),c.a.addResources("bn",Z,E),c.a.addResources("ckb",Z,v),c.a.addResources("cs",Z,f),c.a.addResources("da",Z,C),c.a.addResources("en",Z,P),c.a.addResources("es",Z,T),c.a.addResources("fr",Z,D),c.a.addResources("id",Z,I),c.a.addResources("km",Z,w),c.a.addResources("lo",Z,A),c.a.addResources("mn",Z,O),c.a.addResources("my",Z,N),c.a.addResources("nb",Z,R),c.a.addResources("ne",Z,M),c.a.addResources("prs",Z,_),c.a.addResources("ps",Z,U),c.a.addResources("pt",Z,L),c.a.addResources("pt_BR",Z,j),c.a.addResources("ru",Z,W),c.a.addResources("rw",Z,G),c.a.addResources("sv",Z,B),c.a.addResources("tet",Z,F),c.a.addResources("tg",Z,V),c.a.addResources("uk",Z,q),c.a.addResources("ur",Z,J),c.a.addResources("uz",Z,Q),c.a.addResources("uz_Cyrl",Z,H),c.a.addResources("uz_Latn",Z,z),c.a.addResources("vi",Z,Y),c.a.addResources("zh",Z,K),c.a.addResources("zh_CN",Z,X);var $=c.a;const ee={dataIntegrity:{title:$.t("Data Integrity"),label:$.t("Data Integrity"),description:$.t("Run data integrity checks and unveil anomalies and problems in the meta data setup."),actionText:$.t("Check Data Integrity"),performing:$.t("Performing data integrity checks..."),unexpectedError:$.t("An unexpected error happened during data integrity checks"),actionButton:$.t("RUN INTEGRITY CHECKS"),dataElementsWithoutDataSet:{label:$.t("Data elements without data set")},dataElementsWithoutGroups:{label:$.t("Data elements without groups")},dataElementsViolatingExclusiveGroupSets:{label:$.t("Data elements violating exclusive group sets")},dataElementsAssignedToDataSetsWithDifferentPeriodTypes:{label:$.t("Data elements assigned to data sets with different period types")},dataSetsNotAssignedToOrganisationUnits:{label:$.t("Data sets not assigned to organisation units")},indicatorsWithIdenticalFormulas:{label:$.t("Indicators with identical formulas")},indicatorsWithoutGroups:{label:$.t("Indicators without groups")},invalidIndicatorNumerators:{label:$.t("Invalid indicator numerators")},invalidIndicatorDenominators:{label:$.t("Invalid indicator denominators")},indicatorsViolatingExclusiveGroupSets:{label:$.t("Indicators violating exclusive group sets")},organisationUnitsWithCyclicReferences:{label:$.t("Organisation units with cyclic references")},orphanedOrganisationUnits:{label:$.t("Orphaned organisation units")},organisationUnitsWithoutGroups:{label:$.t("Organisation units without groups")},organisationUnitsViolatingExclusiveGroupSets:{label:$.t("Organisation units violating exclusive group sets")},organisationUnitGroupsWithoutGroupSets:{label:$.t("Organisation unit groups without group sets")},validationRulesWithoutGroups:{label:$.t("Validation rules without groups")},invalidValidationRuleLeftSideExpressions:{label:$.t("Invalid validation rule left side expressions")},invalidValidationRuleRightSideExpressions:{label:$.t("Invalid validation rule right side expressions")},invalidProgramIndicatorExpressions:{label:$.t("Invalid program indicator expressions")},invalidProgramIndicatorFilters:{label:$.t("Invalid program indicator filters")},dataElementsInDataSetNotInForm:{label:$.t("There are data elements in the form, but not in the form or sections")},invalidCategoryCombos:{label:$.t("Invalid category combinations")},duplicatePeriods:{label:$.t("Duplicate periods")},programRulesWithNoCondition:{label:$.t("Program rules with no condition")},programRulesWithNoAction:{label:$.t("Program rules with no action")},programRulesWithNoPriority:{label:$.t("Program rules with no priority")},programRuleVariablesWithNoDataElement:{label:$.t("Program rule variables with no data element")},programRuleVariablesWithNoAttribute:{label:$.t("Program rule variables with no attribute")},programRuleActionsWithNoDataObject:{label:$.t("Program rule actions with no data object")},programRuleActionsWithNoNotification:{label:$.t("Program rule actions with no notification")},programRuleActionsWithNoSectionId:{label:$.t("Program rule actions with no section id")},programRuleActionsWithNoStageId:{label:$.t("Program rule actions with no stage id")},programIndicatorsWithNoExpression:{label:$.t("Program indicators wit no expression")}},maintenance:{title:$.t("Maintenance"),label:$.t("Maintenance"),description:$.t("Perform maintenance tasks and generate resource database tables for the organisation unit hierarchy and group set structure."),actionText:$.t("Perform Maintenance"),actionButton:$.t("PERFORM MAINTENANCE"),performing:$.t("Performing Maintenance..."),actionPerformed:$.t("Maintenance done"),unexpectedError:$.t("An unexpected error happened during maintenance"),analyticsTableClear:$.t("Clear analytics tables"),analyticsTableAnalyze:$.t("Analyze analytics tables"),zeroDataValueRemoval:$.t("Remove zero data values"),softDeletedDataValueRemoval:$.t("Permanently remove soft deleted data values"),softDeletedEventRemoval:$.t("Permanently remove soft deleted events"),softDeletedEnrollmentRemoval:$.t("Permanently remove soft deleted enrollments"),softDeletedTrackedEntityInstanceRemoval:$.t("Permanently remove soft deleted tracked entity instances"),periodPruning:$.t("Prune periods"),expiredInvitationsClear:$.t("Remove expired invitations"),sqlViewsDrop:$.t("Drop SQL views"),sqlViewsCreate:$.t("Create SQL views"),categoryOptionComboUpdate:$.t("Update category option combinations"),ouPathsUpdate:$.t("Update organisation unit paths"),cacheClear:$.t("Clear application cache"),appReload:$.t("Reload apps")},resourceTables:{title:$.t("Resource Tables"),label:$.t("Resource Tables"),description:$.t("Generate resource database tables for the organisation unit hierarchy and group set structure among others."),actionText:$.t("Generate Resource Tables"),actionButton:$.t("GENERATE TABLES"),actionPerformed:$.t("Resource Tables generated"),unexpectedError:$.t("An unexpected error happened during operation"),organisationUnitStructure:$.t("Organisation unit structure"),organistionUnitCategoryOptionCombo:$.t("Organisation unit category option combo"),categoryOptionGroupSetStructure:$.t("Category option group set structure"),dataElementGroupSetStructure:$.t("Data element group set structure"),indicatorGroupSetStructure:$.t("Indicator group set structure"),organisationUnitGroupSetStructure:$.t("Organisation unit group set structure"),categoryStructure:$.t("Category structure"),dataElementCategoryOptionComboName:$.t("Data element category option combo name"),dataElementStructure:$.t("Data element structure"),periodStructure:$.t("Period structure"),dataPeriodStructure:$.t("Date period structure"),dataElementCategoryOptionCombinations:$.t("Data element category option combinations")},dataStatistics:{title:$.t("Data Statistics"),label:$.t("Data Statistics"),description:$.t("Browse the number of objects in the database, like data elements, indicators, data sets and data values."),actionText:$.t("Overview Data Statistics"),loadingMessage:$.t("Loading Data Statistics..."),errorMessage:$.t("It was not possible to load Data Statistics"),noDataMessage:$.t("No data to show."),objectType:$.t("Object type"),lastHour:$.t("Last hour"),today:$.t("Today"),last:$.t("Last"),days:$.t("days"),usersLoggedIn:$.t("Users logged in"),userAccountInvitations:$.t("User account invitations"),pedingInvitations:$.t("Pending invitations"),expiredInvitations:$.t("Expired invitations"),dataValues:$.t("Data values"),events:$.t("Events"),objects:{indicator:$.t("Indicators"),period:$.t("Periods"),programStageInstance:$.t("Events"),organisationUnit:$.t("Organisation units"),validationRule:$.t("Validation rules"),dataValue:$.t("Data values"),program:$.t("Programs"),dataElement:$.t("Data elements"),organisationUnitGroup:$.t("Organisation unit groups"),reportTable:$.t("Pivot tables"),indicatorType:$.t("Indicator types"),dataSet:$.t("Data sets"),userGroup:$.t("User groups"),user:$.t("Users"),map:$.t("Maps"),indicatorGroup:$.t("Indicator groups"),chart:$.t("Charts"),dataElementGroup:$.t("Data element groups"),dashboard:$.t("Dashboards")}},lockException:{title:$.t("Lock Exception Management"),batchDeletionHeader:$.t("Lock Exception"),batchDeletionSubHeader:$.t("Batch Deletion"),addLockExceptionFormTitle:$.t("Add new lock exception"),label:$.t("Lock Exception"),description:$.t("Add or remove exceptions to the the standard rules for locking of data entry forms."),actionText:$.t("Lock Exception Management"),actionButton:$.t("BATCH DELETION"),cancelButton:$.t("CANCEL"),addButton:$.t("ADD"),noDataMessage:$.t("No data to show."),loadingMessage:$.t("Loading Lock Exceptions..."),addingMessage:$.t("Adding Lock Exception..."),removedMessage:$.t("Lock Exception removed"),addedMessage:$.t("Lock Exception Added"),confirmDeleteMessage:$.t("Are you sure?"),confirmButton:$.t("CONFIRM"),selectADataSet:$.t("Select a Data Set"),updatingTree:$.t("Updating Organisation Units Tree..."),organisationUnitsWithin:$.t("For organisation units within"),period:$.t("Period"),dataSet:$.t("Data Set"),organisationUnit:$.t("Organisation Unit"),organisationUnitGroup:$.t("Organisation Unit Group"),organisationUnitLevel:$.t("Organisation Unit Level"),select:$.t("Select"),deselect:$.t("Deselect"),selectAll:$.t("Select All Org Units"),deselectAll:$.t("Deselect All Org Units"),name:$.t("Name"),show:$.t("Show Details"),remove:$.t("Remove"),actions:$.t("Actions"),ofPage:$.t("of"),week:$.t("week"),month:$.t("month"),year:$.t("year"),biMonth:$.t("bi monthly"),day:$.t("day"),jan:$.t("jan"),feb:$.t("feb"),mar:$.t("mar"),apr:$.t("apr"),may:$.t("may"),jun:$.t("jun"),jul:$.t("jul"),aug:$.t("aug"),sep:$.t("sep"),oct:$.t("oct"),nov:$.t("nov"),dec:$.t("dec"),janFeb:$.t("jan-feb"),marApr:$.t("mar-apr"),mayJun:$.t("may-jun"),julAug:$.t("jul-aug"),sepOct:$.t("sep-oct"),novDec:$.t("nov-dec"),quarter:$.t("quarter"),Q1:$.t("Q1"),Q2:$.t("Q2"),Q3:$.t("Q3"),Q4:$.t("Q4"),sixMonth:$.t("six monthly"),janJun:$.t("jan-jun"),julDec:$.t("jul-dec"),aprSep:$.t("apr-sep"),octMar:$.t("oct-mar"),selectOrganisationUnits:$.t("For all organisation units:")},minMaxValueGeneration:{title:$.t("Min-Max Value Generation"),label:$.t("Min-Max Value Generation"),description:$.t("Generate min-max values which can be used for data validation during data entry and validation processes."),actionText:$.t("Generate Min-Max Value"),notPossibleToLoadMessage:$.t("It was not possible to load data"),performingMessage:$.t("Doing Min Max generation..."),removingMessage:$.t("Removing Min Max generation..."),minMaxGenerationDone:$.t("Min Max generation done"),minMaxRemovalDone:$.t("Min Max removal done"),dataSet:$.t("Data Set"),loadingDataSetsMessage:$.t("Loading data sets"),organisationUnitSelect:$.t("Organisation Unit Selection"),updatingTree:$.t("Updating Organisation Units Tree..."),actionButton:$.t("Generate"),removeButton:$.t("Remove")},analytics:{title:$.t("Analytics tables management"),label:$.t("Analytics Tables"),description:$.t("The data mart is a set of tables in the DHIS database which is used by all reporting and analysis tools to retrieve data from."),actionText:$.t("Analytics tables update"),actionButton:$.t("START EXPORT"),skipAggregate:$.t("Skip generation of aggregate data and completeness data"),skipResourceTables:$.t("Skip generation of resource tables"),skipEvents:$.t("Skip generation of event data"),skipEnrollment:$.t("Skip generation of enrollment data"),analyticsTablesUpdateHeader:$.t("Analytics Tables Update"),lastYearsLabel:$.t("Number of last years of data to include"),allLastYears:$.t("[ All ]"),unexpectedError:$.t("An unexpected error happened during maintenance")},messages:{unexpectedError:$.t("An unexpected error happened during operation")},d2UiComponents:{settings:$.t("Settings"),app_search_placeholder:$.t("Search apps"),profile:$.t("Profile"),account:$.t("Account"),help:$.t("Help"),log_out:$.t("Log out"),about_dhis2:$.t("About DHIS 2"),manage_my_apps:$.t("Manage my apps"),no_results_found:$.t("No results found"),interpretations:$.t("Interpretations"),messages:$.t("Messages")}};var te=a(5),ae=a.n(te),ne=a(297);const ie="#8ac542",se="#000000",oe="#ff0000",re="check",le={iconStyle:{fontSize:14},rowStyle:{fontSize:14,height:48},evenRowStyle:{backgroundColor:"#fafafa"},timeColumnStyle:{width:"20%"},messageColumnStyle:{width:"80%"},successStyle:{color:ie,iconColor:ie,fontWeight:"bold"},errorStyle:{color:oe,iconColor:oe,fontWeight:"bold"},infoStyle:{color:se,iconColor:ie}},ce={};ce.SUCCESS={color:ie,icon:re,row:Object.assign({},le.rowStyle,le.successStyle)},ce.ERROR={color:oe,icon:"error",row:Object.assign({},le.rowStyle,le.errorStyle)},ce.INFO={color:se,icon:re,iconColor:ie,row:Object.assign({},le.rowStyle,le.infoStyle)};const de=ce;a(790);var pe=({notifications:e,animateIncomplete:t})=>{const a=(e,a)=>{return r.a.createElement(ne.n,{key:a,displayBorder:!1,style:Object.assign({},de[e.level].row,(a+1)%2===0?le.evenRowStyle:{})},r.a.createElement(ne.o,{style:le.timeColumnStyle},(n=e.time)?"".concat(n.slice(0,10)," ").concat(n.slice(11,19)):""),r.a.createElement(ne.o,{style:le.messageColumnStyle},e.message," ",(e=>{const a=de[e.level];return a&&a.icon&&e.completed?r.a.createElement(ne.e,{className:"material-icons",style:le.iconStyle,color:a.iconColor},a.icon):t&&!e.completed?r.a.createElement("span",{className:"notification-icon-busy"},"..."):null})(e)));var n};return e&&e.length>0?r.a.createElement(ne.l,{selectable:!1},r.a.createElement(ne.m,{displayRowCheckbox:!1},e.map(a))):null};const ue=({major:e,minor:t,snapshot:a})=>a?"master":"".concat(e,".").concat(t);function he(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ge extends o.PureComponent{render(){const{d2:e}=this.context,{lng:t,sectionDocsKey:a}=this.props;return r.a.createElement(ne.g,{className:"helper-icon",iconStyle:{color:"#276696"},href:"".concat("https://docs.dhis2.org","/").concat(ue(e.system.version),"/").concat(t,"/user/html/").concat(a,".html"),target:"_blank",rel:"noopener noreferrer",tooltip:$.t("Open user guide"),tooltipPosition:"bottom-center",iconClassName:"material-icons"},"help")}}he(ge,"propTypes",{sectionDocsKey:m.a.string.isRequired,lng:m.a.string}),he(ge,"defaultProps",{lng:"en"}),he(ge,"contextTypes",{d2:m.a.object});var me=ge;const be="system/tasks/ANALYTICS_TABLE",ye=[{key:-1,value:-1,displayName:ee.analytics.allLastYears}];for(let za=1;za<=10;za++)ye.push({key:za,value:za,displayName:za});const ke=ye,Se=[{key:"skipAggregate",label:ee.analytics.skipAggregate},{key:"skipResourceTables",label:ee.analytics.skipResourceTables},{key:"skipEvents",label:ee.analytics.skipEvents},{key:"skipEnrollment",label:ee.analytics.skipEnrollment}];function xe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ee extends o.Component{UNSAFE_componentWillMount(){this.pageMounted=!0,this.context.currentSection!==this.props.sectionKey&&this.context.updateAppState({currentSection:this.props.sectionKey})}componentWillUnmount(){this.pageMounted=!1}isPageMounted(){return this.pageMounted}}xe(Ee,"propTypes",{sectionKey:m.a.string.isRequired}),xe(Ee,"contextTypes",{d2:m.a.object,loading:m.a.bool,currentSection:m.a.string,updateAppState:m.a.func});var ve=Ee,fe=a(417),Ce=a.n(fe);function Pe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Te=class extends ve{constructor(){super(),Pe(this,"startTaskProgressPolling",(()=>{this.intervalId=setInterval((()=>{this.requestTaskProgress()}),5e3)})),Pe(this,"initAnalyticsTablesGeneration",(()=>{const e=this.context.d2.Api.getApi(),t=this.buildFormData();this.setLoadingPageState(),e.post("resourceTables/analytics",t).then((({response:e})=>{this.isPageMounted()&&e&&this.setState({taskId:e.id},this.startTaskProgressPolling)})).catch((e=>{this.isPageMounted()&&this.setLoadedPageWithErrorState(e)}))})),Pe(this,"requestTaskProgress",(()=>{this.context.d2.Api.getApi().get("".concat(be,"/").concat(this.state.taskId)).then((e=>{this.isTaskCompleted(e)&&(this.stopTaskProgressPolling(),this.unsetLoadingPageState()),this.setState({notifications:this.getUpdatedNotifications(e)})})).catch((e=>{this.isPageMounted()&&this.setLoadedPageWithErrorState(e)}))})),Pe(this,"onChangeLastYears",((e,t,a)=>{this.setState({lastYears:a})})),Pe(this,"toggleCheckbox",((e,t)=>()=>{const a=Object.assign({},e),n=a[t].checked;a[t].checked=!n,this.setState({checkboxes:a})})),Pe(this,"renderCheckbox",(e=>r.a.createElement(ne.f,{key:e.key,className:ae()("col-xs-12 col-md-6",Ce.a.formControl)},r.a.createElement(ne.c,{label:$.t(e.label),checked:this.state.checkboxes[e.key].checked,onCheck:this.toggleCheckbox(this.state.checkboxes,e.key),labelStyle:{color:"#000000"},iconStyle:{fill:"#000000"},disabled:this.areActionsDisabled()}))));const e={};for(let t=0;t<Se.length;t++){e[Se[t].key]={checked:!1}}this.state={checkboxes:e,lastYears:-1,taskId:null,notifications:[]},this.intervalId=null}componentDidMount(){this.requestTaskSummary()}componentWillUnmount(){super.componentWillUnmount(),this.stopTaskProgressPolling()}stopTaskProgressPolling(){clearInterval(this.intervalId),this.intervalId=null}setLoadingPageState(){this.setState({notifications:[]}),this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:u.c},pageState:{loading:!0}})}unsetLoadingPageState(){this.context.updateAppState({showSnackbar:!1,snackbarConf:{type:u.c},pageState:{loading:!1}})}setLoadedPageWithErrorState(e){console.error(e);const t=e&&e.message?e.message:$.t(ee.analytics.unexpectedError);this.stopTaskProgressPolling(),this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:u.b,message:t},pageState:{loading:!1}})}requestTaskSummary(){this.context.d2.Api.getApi().get(be).then((e=>{if(!this.isPageMounted())return;const t=this.getActiveTaskIdFromSummary(e);t&&(this.setLoadingPageState(),this.setState({taskId:t,notifications:this.getUpdatedNotifications(e[t])},this.startTaskProgressPolling))})).catch((e=>{this.isPageMounted()&&this.setLoadedPageWithErrorState(e)}))}getUpdatedNotifications(e=[]){if(e.length<=this.state.notifications.length)return this.state.notifications;const t=e.length-1;return e.reverse().map(((e,a)=>({...e,completed:e.completed||a<t})))}getActiveTaskIdFromSummary(e){const{taskId:t}=Object.entries(e).reduce(((e,[t,a])=>{const n=a[a.length-1],i=new Date(n.time);return!this.isTaskCompleted(a)&&i>e.time?{taskId:t,time:i}:e}),{taskId:null,time:new Date(0)});return t}isTaskCompleted(e){return e[0].completed}areActionsDisabled(){return this.props.loading}buildFormData(){let e=null;const t=Object.keys(this.state.checkboxes);for(let a=0;a<t.length;a++){const n=t[a],i=this.state.checkboxes[n].checked;e=e||new FormData,e.append(n,i)}return-1!==this.state.lastYears&&e.append("lastYears",this.state.lastYears),e}render(){const e=Se.map(this.renderCheckbox);return r.a.createElement("div",null,r.a.createElement("h1",null,$.t(ee.analytics.title),r.a.createElement(me,{sectionDocsKey:va(this.props.sectionKey)})),r.a.createElement(ne.a,{className:Ce.a.cardContainer},r.a.createElement(ne.b,null,r.a.createElement("h4",{className:Ce.a.uppercase},ee.analytics.analyticsTablesUpdateHeader),r.a.createElement("div",{className:ae()(Ce.a.gridContainer,"row")},e,r.a.createElement(ne.j,{disabled:this.areActionsDisabled(),className:"col-xs-12 col-md-6",floatingLabelText:$.t(ee.analytics.lastYearsLabel),onChange:this.onChangeLastYears,value:this.state.lastYears,fullWidth:!0},ke.map((e=>r.a.createElement(ne.h,{key:e.key,value:e.value,primaryText:$.t(e.displayName)}))))),r.a.createElement(ne.i,{id:"startExportBtnId",primary:!0,label:$.t(ee.analytics.actionButton),onClick:this.initAnalyticsTablesGeneration,disabled:this.areActionsDisabled()}))),(this.state.notifications||[]).length>0&&r.a.createElement(ne.a,{className:Ce.a.cardContainer},r.a.createElement(ne.b,null,r.a.createElement(pe,{notifications:this.state.notifications,animateIncomplete:!0}))))}},De=a(307),Ie=a(791),we=a.n(Ie);function Ae(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Oe={errorColor:"#ff5722",noErrorColor:"#1c9d17",titleStyle:{fontSize:14,fontWeight:"normal"},iconStyle:{color:"#1c9d17",cursor:"auto"},noPaddingTop:{paddingTop:0}};class Ne extends o.PureComponent{render(){let e=!0,t=Oe.errorColor,a="keyboard_arrow_down",n="keyboard_arrow_up",i=null;Array.isArray(this.props.content)?this.props.content.length?i=r.a.createElement(De.CardText,{style:Oe.noPaddingTop,expandable:e},r.a.createElement("div",{id:"elementDescription"},this.props.content.map((e=>r.a.createElement("p",{key:e},Array.isArray(e)?e.join(", "):e))))):(e=!1,t=Oe.noErrorColor,a="done",n="done"):i=r.a.createElement(De.CardText,{style:Oe.noPaddingTop,expandable:e},r.a.createElement("div",{id:"elementDescription"},Object.keys(this.props.content).map((e=>r.a.createElement("span",{key:e},r.a.createElement("h4",null,e),r.a.createElement("p",null,Array.isArray(this.props.content[e])?this.props.content[e].join(", "):this.props.content[e]))))));const s=r.a.createElement(ne.e,{className:"material-icons"},a),o=r.a.createElement(ne.e,{className:"material-icons"},n);return r.a.createElement(De.Card,{id:this.props.cardId,className:we.a.card},r.a.createElement(De.CardHeader,{title:$.t(this.props.title),titleColor:t,titleStyle:Oe.titleStyle,actAsExpander:e,showExpandableButton:!0,closeIcon:s,openIcon:o,iconStyle:e?{}:Oe.iconStyle}),i)}}Ae(Ne,"propTypes",{cardId:m.a.string.isRequired,title:m.a.string.isRequired,content:m.a.oneOfType([m.a.array,m.a.object])}),Ae(Ne,"defaultProps",{content:[]});var Re=Ne;const Me=ee.dataIntegrity.title,_e=[{key:"dataElementsWithoutDataSet",label:ee.dataIntegrity.dataElementsWithoutDataSet.label,text:ee.dataIntegrity.dataElementsWithoutDataSet.text},{key:"dataElementsWithoutGroups",label:ee.dataIntegrity.dataElementsWithoutGroups.label,text:ee.dataIntegrity.dataElementsWithoutGroups.text},{key:"dataElementsViolatingExclusiveGroupSets",label:ee.dataIntegrity.dataElementsViolatingExclusiveGroupSets.label,text:ee.dataIntegrity.dataElementsViolatingExclusiveGroupSets.label},{key:"dataElementsAssignedToDataSetsWithDifferentPeriodTypes",label:ee.dataIntegrity.dataElementsAssignedToDataSetsWithDifferentPeriodTypes.label,text:ee.dataIntegrity.dataElementsAssignedToDataSetsWithDifferentPeriodTypes.text},{key:"dataSetsNotAssignedToOrganisationUnits",label:ee.dataIntegrity.dataSetsNotAssignedToOrganisationUnits.label,text:ee.dataIntegrity.dataSetsNotAssignedToOrganisationUnits.text},{key:"indicatorsWithIdenticalFormulas",label:ee.dataIntegrity.indicatorsWithIdenticalFormulas.label,text:ee.dataIntegrity.indicatorsWithIdenticalFormulas.text},{key:"indicatorsWithoutGroups",label:ee.dataIntegrity.indicatorsWithoutGroups.label,text:ee.dataIntegrity.indicatorsWithoutGroups.text},{key:"invalidIndicatorNumerators",label:ee.dataIntegrity.invalidIndicatorNumerators.label,text:ee.dataIntegrity.invalidIndicatorNumerators.text},{key:"invalidIndicatorDenominators",label:ee.dataIntegrity.invalidIndicatorDenominators.label,text:ee.dataIntegrity.invalidIndicatorDenominators.text},{key:"indicatorsViolatingExclusiveGroupSets",label:ee.dataIntegrity.indicatorsViolatingExclusiveGroupSets.label,text:ee.dataIntegrity.indicatorsViolatingExclusiveGroupSets.text},{key:"organisationUnitsWithCyclicReferences",label:ee.dataIntegrity.organisationUnitsWithCyclicReferences.label,text:ee.dataIntegrity.organisationUnitsWithCyclicReferences.text},{key:"orphanedOrganisationUnits",label:ee.dataIntegrity.orphanedOrganisationUnits.label,text:ee.dataIntegrity.orphanedOrganisationUnits.text},{key:"organisationUnitsWithoutGroups",label:ee.dataIntegrity.organisationUnitsWithoutGroups.label,text:ee.dataIntegrity.organisationUnitsWithoutGroups.text},{key:"organisationUnitsViolatingExclusiveGroupSets",label:ee.dataIntegrity.organisationUnitsViolatingExclusiveGroupSets.label,text:ee.dataIntegrity.organisationUnitsViolatingExclusiveGroupSets.text},{key:"organisationUnitGroupsWithoutGroupSets",label:ee.dataIntegrity.organisationUnitGroupsWithoutGroupSets.label,text:ee.dataIntegrity.organisationUnitGroupsWithoutGroupSets.text},{key:"validationRulesWithoutGroups",label:ee.dataIntegrity.validationRulesWithoutGroups.label,text:ee.dataIntegrity.validationRulesWithoutGroups.text},{key:"invalidValidationRuleLeftSideExpressions",label:ee.dataIntegrity.invalidValidationRuleLeftSideExpressions.label,text:ee.dataIntegrity.invalidValidationRuleLeftSideExpressions.text},{key:"invalidValidationRuleRightSideExpressions",label:ee.dataIntegrity.invalidValidationRuleRightSideExpressions.label,text:ee.dataIntegrity.invalidValidationRuleRightSideExpressions.text},{key:"invalidProgramIndicatorExpressions",label:ee.dataIntegrity.invalidProgramIndicatorExpressions.label},{key:"invalidProgramIndicatorFilters",label:ee.dataIntegrity.invalidProgramIndicatorFilters.label},{key:"dataElementsInDataSetNotInForm",label:ee.dataIntegrity.dataElementsInDataSetNotInForm.label},{key:"invalidCategoryCombos",label:ee.dataIntegrity.invalidCategoryCombos.label},{key:"duplicatePeriods",label:ee.dataIntegrity.duplicatePeriods.label},{key:"programRulesWithNoCondition",label:ee.dataIntegrity.programRulesWithNoCondition.label},{key:"programRulesWithNoAction",label:ee.dataIntegrity.programRulesWithNoAction.label},{key:"programRulesWithNoPriority",label:ee.dataIntegrity.programRulesWithNoPriority.label},{key:"programRuleVariablesWithNoDataElement",label:ee.dataIntegrity.programRuleVariablesWithNoDataElement.label},{key:"programRuleVariablesWithNoAttribute",label:ee.dataIntegrity.programRuleVariablesWithNoAttribute.label},{key:"programRuleActionsWithNoDataObject",label:ee.dataIntegrity.programRuleActionsWithNoDataObject.label},{key:"programRuleActionsWithNoNotification",label:ee.dataIntegrity.programRuleActionsWithNoNotification.label},{key:"programRuleActionsWithNoSectionId",label:ee.dataIntegrity.programRuleActionsWithNoSectionId.label},{key:"programRuleActionsWithNoStageId",label:ee.dataIntegrity.programRuleActionsWithNoStageId.label},{key:"programIndicatorsWithNoExpression",label:ee.dataIntegrity.programIndicatorsWithNoExpression.label}];var Ue=a(792),Le=a.n(Ue);var je=class extends ve{constructor(...e){var t,a,n;super(...e),n=()=>{const e=this.context.d2.Api.getApi();this.setLoadingPageState(),e.post("dataIntegrity").then((e=>{if(this.isPageMounted()&&e){const t=e.response.id;this.intervalId=setInterval((()=>{this.requestTaskSummary(t)}),5e3)}})).catch((e=>{this.isPageMounted()&&this.setLoadedPageWithErrorState(e)}))},(a="initDataIntegrityCheck")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n}componentWillUnmount(){super.componentWillUnmount(),this.cancelPullingRequests()}cancelPullingRequests(){this.intervalId&&clearInterval(this.intervalId)}setLoadingPageState(){this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:u.c,message:$.t(ee.dataIntegrity.performing)},currentSection:this.props.sectionKey,pageState:{loaded:!1,loading:!0}})}setLoadedPageWithErrorState(e){const t=e&&e.message?e.message:$.t(ee.dataIntegrity.unexpectedError);this.cancelPullingRequests(),this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:u.b,message:t},currentSection:this.props.sectionKey,pageState:{loaded:!0,loading:!1}})}requestTaskSummary(e){const t=this.context.d2.Api.getApi(),a="".concat("system/taskSummaries/DATA_INTEGRITY","/").concat(e);t.get(a).then((e=>{this.isPageMounted()&&e&&(this.cancelPullingRequests(),this.context.updateAppState({showSnackbar:!1,currentSection:this.props.sectionKey,pageState:{loaded:!0,cards:e,loading:!1}}))})).catch((e=>{this.isPageMounted()&&this.setLoadedPageWithErrorState(e)}))}render(){const e=r.a.createElement(ne.i,{id:"runDataIntegrityChecksBtnId",label:$.t(ee.dataIntegrity.actionButton),onClick:this.initDataIntegrityCheck,primary:!0,disabled:this.props.loading});let t=[];if(this.props.cards){const e=Object.keys(this.props.cards);if(t=e.map((e=>{const t=_e.find((t=>t.key===e));return t?r.a.createElement(Re,{cardId:"errorElement-".concat(e),key:e,title:t.label,content:this.props.cards[e]}):null})),this.props.loaded){const a=_e.filter((t=>e.indexOf(t.key)<0)).map((e=>r.a.createElement(Re,{cardId:"noErrorElement-".concat(e.key),key:e.key,title:e.label,content:[]})));t.push(a)}}return r.a.createElement("div",null,r.a.createElement("h1",{className:Le.a.header},$.t(Me),r.a.createElement(me,{sectionDocsKey:va(this.props.sectionKey)})),t&&t.length>0?t:e)}},We=a(513),Ge=a.n(We),Be=a(409);var Fe,Ve,qe,Je=e=>r.a.createElement("span",null,new Intl.NumberFormat(c.a.language).format(e.value));class Qe extends o.PureComponent{render(){const e=this.props.elements.map((e=>r.a.createElement(Be.TableRow,{key:e.label,className:"data-statistics-table-row"},r.a.createElement(Be.TableRowColumn,null,e.label),r.a.createElement(Be.TableRowColumn,null,r.a.createElement(Je,{value:e.count})))));return r.a.createElement(Be.Table,{selectable:!1,className:Ge.a.statisticsTable},r.a.createElement(Be.TableHeader,{className:"data-statistics-table-header",displaySelectAll:!1,adjustForCheckbox:!1,enableSelectAll:!1},r.a.createElement(Be.TableRow,null,r.a.createElement(Be.TableHeaderColumn,null,this.props.label))),r.a.createElement(Be.TableBody,{displayRowCheckbox:!1,stripedRows:!1},e))}}Fe=Qe,Ve="propTypes",qe={elements:m.a.array.isRequired,label:m.a.string.isRequired},Ve in Fe?Object.defineProperty(Fe,Ve,{value:qe,enumerable:!0,configurable:!0,writable:!0}):Fe[Ve]=qe;var He=Qe;function ze(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Ye="expired",Ke=({label:e,elements:t})=>r.a.createElement(De.Card,{className:ae()(Ge.a.card,"data-statistics-table")},r.a.createElement(He,{label:e,elements:t}));class Xe extends ve{constructor(...e){super(...e),ze(this,"hasTables",(()=>this.props.tables&&this.props.tables.constructor===Object&&Object.keys(this.props.tables).length>0))}componentDidMount(){this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:u.c,message:$.t(ee.dataStatistics.loadingMessage)},pageState:{loaded:!1,tables:{},loading:!0}});this.context.d2.Api.getApi().get("dataSummary").then((e=>{if(this.isPageMounted()){const t={};t.objectCounts=Xe.objectCountsTableObjectToShowFromServerResponse(e.objectCounts),t.activeUsers=Xe.activeUsersTableObjectToShowFromServerResponse(e.activeUsers),t.userInvitations=Xe.userInvitationsTableObjectToShowFromServerResponse(e.userInvitations),t.dataValueCount=Xe.dataValueCountsTableObjectToShowFromServerResponse(e.dataValueCount),t.eventCount=Xe.eventCountsTableObjectToShowFromServerResponse(e.eventCount),this.context.updateAppState({showSnackbar:!1,pageState:{loaded:!0,tables:t,loading:!1}})}})).catch((()=>{this.isPageMounted()&&this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:u.b,message:$.t(ee.dataStatistics.errorMessage)},pageState:{loaded:!0,tables:{},loading:!1}})}))}render(){const e=r.a.createElement(De.Card,{style:{display:this.props.loading?"none":"block"}},r.a.createElement(De.CardText,null,$.t(ee.dataStatistics.noDataMessage)));return r.a.createElement("div",null,r.a.createElement("h1",{className:Ge.a.header},$.t(ee.dataStatistics.title),r.a.createElement(me,{sectionDocsKey:va(this.props.sectionKey)})),this.hasTables()?r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},this.props.tables.objectCounts&&r.a.createElement(Ke,{label:this.props.tables.objectCounts.label,elements:this.props.tables.objectCounts.elements}),this.props.tables.activeUsers&&r.a.createElement(Ke,{label:this.props.tables.activeUsers.label,elements:this.props.tables.activeUsers.elements})),r.a.createElement("div",{className:"col-md-6"},this.props.tables.userInvitations&&r.a.createElement(Ke,{label:this.props.tables.userInvitations.label,elements:this.props.tables.userInvitations.elements}),this.props.tables.dataValueCount&&r.a.createElement(Ke,{label:this.props.tables.dataValueCount.label,elements:this.props.tables.dataValueCount.elements}),this.props.tables.eventCount&&r.a.createElement(Ke,{label:this.props.tables.eventCount.label,elements:this.props.tables.eventCount.elements}))):e)}}ze(Xe,"objectCountsTableObjectToShowFromServerResponse",(e=>{if(e){const t=Object.keys(e),a={label:$.t(ee.dataStatistics.objectType),elements:[]};for(let n=0;n<t.length;n++){const i=t[n];a.elements.push({label:$.t(ee.dataStatistics.objects[i]),count:e[i]})}return a}return{}})),ze(Xe,"translatedTimeLabelFromIntProperty",(e=>{let t=$.t(ee.dataStatistics.lastHour);if(1===e)t=$.t(ee.dataStatistics.today);else if(e>0){const a=$.t(ee.dataStatistics.last),n=$.t(ee.dataStatistics.days);t="".concat(a," ").concat(e," ").concat(n)}return t})),ze(Xe,"activeUsersTableObjectToShowFromServerResponse",(e=>{if(e){const t=Object.keys(e),a={label:$.t(ee.dataStatistics.usersLoggedIn),elements:[]};for(let n=0;n<t.length;n++){const i=t[n];a.elements.push({label:Xe.translatedTimeLabelFromIntProperty(parseInt(i,10)),count:e[i]})}return a}return{}})),ze(Xe,"userInvitationsTableObjectToShowFromServerResponse",(e=>{if(e){const t={label:$.t(ee.dataStatistics.userAccountInvitations),elements:[]};return Object.hasOwnProperty.call(e,"all")&&t.elements.push({label:$.t(ee.dataStatistics.pedingInvitations),count:e.all}),Object.hasOwnProperty.call(e,Ye)&&t.elements.push({label:$.t(ee.dataStatistics.expiredInvitations),count:e.expired}),t}return{}})),ze(Xe,"dataValueCountsTableObjectToShowFromServerResponse",(e=>{if(e){const t=Object.keys(e),a={label:$.t(ee.dataStatistics.dataValues),elements:[]};for(let n=0;n<t.length;n++){const i=t[n];a.elements.push({label:Xe.translatedTimeLabelFromIntProperty(parseInt(i,10)),count:e[i]})}return a}return{}})),ze(Xe,"eventCountsTableObjectToShowFromServerResponse",(e=>{if(e){const t=Object.keys(e),a={label:$.t(ee.dataStatistics.events),elements:[]};for(let n=0;n<t.length;n++){const i=t[n];a.elements.push({label:Xe.translatedTimeLabelFromIntProperty(parseInt(i,10)),count:e[i]})}return a}return{}}));var Ze=Xe,$e=a(329),et=a.n($e),tt=a(318),at=a.n(tt),nt=a(400),it=a.n(nt),st=a(299),ot=a.n(st),rt=a(298),lt=a.n(rt),ct=a(351),dt=a.n(ct),pt=a(793),ut=a.n(pt),ht=a(794),gt=a(795),mt=a(796),bt=a(995),yt=a(488),kt=a.n(yt),St=a(349),xt=a.n(St),Et=a(921),vt=a.n(Et),ft=a(402),Ct=a.n(ft);class Pt extends r.a.Component{constructor(e){super(e),this.state={collapsed:!e.initiallyExpanded,hasBeenExpanded:e.initiallyExpanded},this.handleClick=this.handleClick.bind(this)}toggleCollapsed(){this.setState((e=>({collapsed:!e.collapsed,hasBeenExpanded:!0})),(()=>{this.state.collapsed||"function"!==typeof this.props.onExpand||this.props.onExpand()}))}UNSAFE_componentWillReceiveProps(e){e.initiallyExpanded&&this.state.collapsed&&this.toggleCollapsed()}handleClick(e){this.props.onClick&&this.props.onClick(e),void 0!==e&&e.stopPropagation()}render(){const e={tree:{marginLeft:16,whiteSpace:"nowrap"},itemLabel:{display:"inline-block",position:"relative"},arrow:{display:"inline-block",position:"absolute",left:-16,top:-1,width:11,height:16,paddingLeft:4,textAlign:"center",cursor:"pointer"},arrowSymbol:{transition:"transform 150ms ease-out",transform:this.state.collapsed?"":"rotate(90deg)",position:"absolute"},clickTarget:{cursor:this.props.onClick&&"pointer"},children:{position:"relative",marginLeft:16,height:this.state.collapsed?0:"inherit"}},t=r.a.createElement("div",{style:e.itemLabel},r.a.createElement("div",{className:"arrow",style:e.arrow,onClick:this.toggleCollapsed.bind(this)},r.a.createElement("div",{style:e.arrowSymbol},this.props.arrowSymbol)),r.a.createElement("div",{className:"label",onClick:this.handleClick,style:e.clickTarget},this.props.label));e.children.display=this.state.collapsed?"none":"block";const a=(!this.state.collapsed||this.props.persistent&&this.state.hasBeenExpanded)&&r.a.createElement("div",{className:"children",style:e.children},this.props.children),n="tree-view ".concat(this.props.className);return r.a.createElement("div",{className:n,style:Object.assign(e.tree,this.props.style)},t,a)}}Pt.defaultProps={persistent:!1,initiallyExpanded:!1,arrowSymbol:"\u25b8",style:{}};var Tt=Pt;const Dt={progress:{position:"absolute",display:"inline-block",width:"100%",left:-8},progressBar:{height:2,backgroundColor:"transparent"},spacer:{position:"relative",display:"inline-block",width:"1.2rem",height:"1rem"},label:{display:"inline-block",outline:"none"},ouContainer:{borderColor:"transparent",borderStyle:"solid",borderWidth:"1px",borderRightWidth:0,borderRadius:"3px 0 0 3px",background:"transparent",paddingLeft:2,outline:"none"},currentOuContainer:{background:"rgba(0,0,0,0.05)",borderColor:"rgba(0,0,0,0.1)"},memberCount:{fontSize:"0.75rem",marginLeft:4}};class It extends r.a.Component{constructor(e){super(e),this.state={children:!1===e.root.children||Array.isArray(e.root.children)&&0===e.root.children.length?[]:void 0,loading:!1},"toArray"in e.root.children&&!e.root.children.hasUnloadedData&&(this.state.children=e.root.children.toArray().sort(((e,t)=>e.displayName.localeCompare(t.displayName)))),this.loadChildren=this.loadChildren.bind(this),this.handleSelectClick=this.handleSelectClick.bind(this)}componentDidMount(){this.props.initiallyExpanded.some((e=>e.includes("/".concat(this.props.root.id))))&&this.loadChildren()}UNSAFE_componentWillReceiveProps(e){(e.initiallyExpanded.some((t=>t.includes("/".concat(e.root.id))))||e.idsThatShouldBeReloaded.includes(e.root.id))&&this.loadChildren()}setChildState(e){this.props.onChildrenLoaded&&this.props.onChildrenLoaded(e),this.setState({children:e.toArray().sort(((e,t)=>e.displayName.localeCompare(t.displayName))),loading:!1})}loadChildren(){if(void 0===this.state.children&&!this.state.loading||this.props.idsThatShouldBeReloaded.indexOf(this.props.root.id)>=0){this.setState({loading:!0});this.props.root.children.load({fields:"id,displayName,children::isNotEmpty,path,parent"},this.props.forceReloadChildren).then((e=>{this.setChildState(e)}))}}handleSelectClick(e){this.props.onSelectClick&&this.props.onSelectClick(e,this.props.root),e.stopPropagation()}shouldIncludeOrgUnit(e){return!this.props.orgUnitsPathsToInclude||0===this.props.orgUnitsPathsToInclude.length||!!this.props.orgUnitsPathsToInclude.some((t=>t.includes("/".concat(e.id))))}renderChild(e,t){return this.shouldIncludeOrgUnit(e)?r.a.createElement(It,{key:e.id,root:e,selected:this.props.selected,initiallyExpanded:t,onSelectClick:this.props.onSelectClick,currentRoot:this.props.currentRoot,onChangeCurrentRoot:this.props.onChangeCurrentRoot,labelStyle:this.props.labelStyle,selectedLabelStyle:this.props.selectedLabelStyle,arrowSymbol:this.props.arrowSymbol,idsThatShouldBeReloaded:this.props.idsThatShouldBeReloaded,hideCheckboxes:this.props.hideCheckboxes,onChildrenLoaded:this.props.onChildrenLoaded,hideMemberCount:this.props.hideMemberCount,orgUnitsPathsToInclude:this.props.orgUnitsPathsToInclude,forceReloadChildren:this.props.forceReloadChildren}):null}renderChildren(){const e=Array.isArray(this.props.initiallyExpanded)?this.props.initiallyExpanded.filter((e=>e!==this.props.root.id)):this.props.initiallyExpanded!==this.props.root.id&&this.props.initiallyExpanded||[];return Array.isArray(this.state.children)&&this.state.children.length>0?this.state.children.map((t=>this.renderChild(t,e))):this.state.loading?r.a.createElement("div",{style:Dt.progress},r.a.createElement(Ct.a,{style:Dt.progressBar})):null}render(){const e=this.props.root,t=void 0===this.state.children||Array.isArray(this.state.children)&&this.state.children.length>0,a=!!this.props.onSelectClick,n=new RegExp("/".concat(e.id,"$")),i=new RegExp("/".concat(e.id)),s=this.props.selected&&this.props.selected.some((e=>n.test(e))),o=this.props.currentRoot&&this.props.currentRoot.id===e.id,l=this.props.initiallyExpanded.some((t=>t.includes("/".concat(e.id)))),c=this.props.onChangeCurrentRoot&&!o&&t,d=void 0!==this.props.selected?this.props.selected.filter((e=>i.test(e))).length:e.memberCount,p=Object.assign({},Dt.label,{fontWeight:s?500:300,color:s?"orange":"inherit",cursor:c?"pointer":"default"},s?this.props.selectedLabelStyle:this.props.labelStyle),u=Object.assign({},Dt.ouContainer,o?Dt.currentOuContainer:{}),h=r.a.createElement("div",{style:p,onClick:c&&(t=>{t.stopPropagation(),this.props.onChangeCurrentRoot(e)})||a&&this.handleSelectClick,role:"button",tabIndex:0},a&&!this.props.hideCheckboxes&&r.a.createElement("input",{type:"checkbox",readOnly:!0,disabled:!a,checked:s,onClick:this.handleSelectClick}),e.displayName,t&&!this.props.hideMemberCount&&!!d&&r.a.createElement("span",{style:Dt.memberCount},"(",d,")"));return t?r.a.createElement(Tt,{label:h,onExpand:this.loadChildren,persistent:!0,initiallyExpanded:l,arrowSymbol:this.props.arrowSymbol,className:"orgunit with-children",style:u},this.renderChildren()):r.a.createElement("div",{onClick:a&&this.handleSelectClick,className:"orgunit without-children",style:u,role:"button",tabIndex:0},r.a.createElement("div",{style:Dt.spacer}),h)}}It.defaultProps={selected:[],initiallyExpanded:[],onSelectClick:void 0,onChangeCurrentRoot:void 0,currentRoot:void 0,onChildrenLoaded:void 0,labelStyle:{},selectedLabelStyle:{},idsThatShouldBeReloaded:[],arrowSymbol:void 0,hideCheckboxes:!1,hideMemberCount:!1,orgUnitsPathsToInclude:null,forceReloadChildren:!1};var wt=It,At=a(922),Ot=a(396),Nt=a.n(Ot),Rt=a(306),Mt=a.n(Rt),_t=a(330),Ut=a.n(_t);const Lt={datePicker:{width:"100%"},year:{width:95,marginRight:16},month:{width:125},week:{width:105},biWeek:{width:200},biMonth:{width:200},quarter:{width:200},sixMonth:{width:200},line:{marginTop:0}},jt=e=>new Date(e).getFullYear().toString(),Wt=e=>{const t=new Date(e).getMonth()+1;return"0".concat(t).slice(-2)},Gt=e=>"".concat(jt(e)).concat(Wt(e)).concat((e=>{const t=new Date(e).getDate();return"0".concat(t).slice(-2)})(e)),Bt=e=>{const t=new Date(e);return t.setDate(t.getDate()-(e.getDay()+6)%7+3),t.getFullYear()},Ft=(e,t)=>!Object(At.is53WeekISOYear)(e)&&53!==Number(t),Vt=e=>2*parseInt(e)-1;class qt extends r.a.Component{constructor(e,t){super(e,t),this.state={};const a=t.d2.i18n;this.getTranslation=a.getTranslation.bind(a)}componentDidUpdate(e){this.props.periodType!==e.periodType&&this.handleChange()}getPeriod(){const e="BiWeekly"===this.props.periodType&&this.state.biWeek?Vt(this.state.biWeek):this.state.week,t=this.state.year&&e&&Object(At.getFirstDateOfWeek)(this.state.year,e);switch(this.props.periodType){case"Daily":return this.state.date&&Gt(this.state.date);case"Weekly":return t&&this.setState({invalidWeek:!Ft(t,this.state.week)}),t&&Ft(t,this.state.week)&&"".concat(Bt(t),"W").concat(this.state.week);case"WeeklyWednesday":return t&&this.setState({invalidWeek:!Ft(t,this.state.week)}),t&&Ft(t,this.state.week)&&"".concat(Bt(t),"WedW").concat(this.state.week);case"WeeklyThursday":return t&&this.setState({invalidWeek:!Ft(t,this.state.week)}),t&&Ft(t,this.state.week)&&"".concat(Bt(t),"ThuW").concat(this.state.week);case"WeeklySaturday":return t&&this.setState({invalidWeek:!Ft(t,this.state.week)}),t&&Ft(t,this.state.week)&&"".concat(Bt(t),"SatW").concat(this.state.week);case"WeeklySunday":return t&&this.setState({invalidWeek:!Ft(t,this.state.week)}),t&&Ft(t,this.state.week)&&"".concat(Bt(t),"SunW").concat(this.state.week);case"BiWeekly":return t&&this.setState({invalidBiWeek:!Ft(t,Vt(this.state.biWeek))}),this.state.year&&this.state.biWeek&&"".concat(this.state.year,"BiW").concat(this.state.biWeek);case"Monthly":return this.state.year&&this.state.month&&"".concat(this.state.year).concat(this.state.month);case"BiMonthly":return this.state.year&&this.state.biMonth&&"".concat(this.state.year,"0").concat(this.state.biMonth,"B");case"Quarterly":return this.state.year&&this.state.quarter&&"".concat(this.state.year,"Q").concat(this.state.quarter);case"SixMonthly":return this.state.year&&this.state.sixMonth&&"".concat(this.state.year,"S").concat(this.state.sixMonth);case"SixMonthlyApril":return this.state.year&&this.state.sixMonth&&"".concat(this.state.year,"AprilS").concat(this.state.sixMonth);case"SixMonthlyNov":return this.state.year&&this.state.sixMonth&&"".concat(this.state.year,"NovS").concat(this.state.sixMonth);case"Yearly":return this.state.year;case"FinancialApril":return this.state.year&&"".concat(this.state.year,"April");case"FinancialJuly":return this.state.year&&"".concat(this.state.year,"July");case"FinancialOct":return this.state.year&&"".concat(this.state.year,"Oct");default:return!1}}handleChange(){this.getPeriod()&&this.props.onPickPeriod(this.getPeriod())}renderOptionPicker(e,t){const a="week"===e&&this.state.invalidWeek||"biWeek"===e&&this.state.invalidBiWeek;return r.a.createElement(Ut.a,{value:this.state[e],onChange:(t,a,n)=>this.setState({[e]:n},this.handleChange),style:Lt[e],floatingLabelText:this.getTranslation(e),floatingLabelStyle:a?{color:"red"}:{}},Object.keys(t).sort().map((a=>r.a.createElement(Mt.a,{key:a,value:a,primaryText:/[^0-9]/.test(t[a])&&"biWeek"!==e?this.getTranslation(t[a]):t[a]}))))}renderYearPicker(){const e={},t=(new Date).getFullYear();for(let a=2014;a<t+5;a++)e[a]=a;return this.renderOptionPicker("year",e)}renderMonthPicker(){return this.renderOptionPicker("month",{"01":"jan","02":"feb","03":"mar","04":"apr","05":"may","06":"jun","07":"jul","08":"aug","09":"sep",10:"oct",11:"nov",12:"dec"})}renderWeekPicker(){const e={};for(let t=1;t<=53;t++)e["0".concat(t).substr(-2)]=t;return this.renderOptionPicker("week",e)}renderBiWeekPicker(){const e={},t=this.getTranslation("bi_week");for(let a=1;a<=27;a++)e["0".concat(a).substr(-2)]="".concat(t," ").concat(a);return this.renderOptionPicker("biWeek",e)}renderBiMonthPicker(){return this.renderOptionPicker("biMonth",{1:"jan-feb",2:"mar-apr",3:"may-jun",4:"jul-aug",5:"sep-oct",6:"nov-dec"})}renderQuarterPicker(){return this.renderOptionPicker("quarter",{1:"Q1",2:"Q2",3:"Q3",4:"Q4"})}render(){const e=(e,t)=>{const a=jt(t),n=Wt(t);this.setState({date:t,year:a,month:n},this.handleChange)};switch(this.props.periodType){case"Daily":return r.a.createElement(Nt.a,{floatingLabelText:this.getTranslation("day"),onChange:e,autoOk:!0,container:"inline",style:Lt.datePicker});case"Weekly":case"WeeklyWednesday":case"WeeklyThursday":case"WeeklySaturday":case"WeeklySunday":return r.a.createElement("div",{style:Lt.line},this.renderYearPicker(),this.renderWeekPicker());case"BiWeekly":return r.a.createElement("div",{style:Lt.line},this.renderYearPicker(),this.renderBiWeekPicker());case"Monthly":return r.a.createElement("div",{style:Lt.line},this.renderYearPicker(),this.renderMonthPicker());case"BiMonthly":return r.a.createElement("div",{style:Lt.line},this.renderYearPicker(),this.renderBiMonthPicker());case"Quarterly":return r.a.createElement("div",{style:Lt.line},this.renderYearPicker(),this.renderQuarterPicker());case"SixMonthly":return r.a.createElement("div",{style:Lt.line},this.renderYearPicker(),this.renderOptionPicker("sixMonth",{1:"jan-jun",2:"jul-dec"}));case"SixMonthlyApril":return r.a.createElement("div",{style:Lt.line},this.renderYearPicker(),this.renderOptionPicker("sixMonth",{1:"apr-sep",2:"oct-mar"}));case"SixMonthlyNov":return r.a.createElement("div",{style:Lt.line},this.renderYearPicker(),this.renderOptionPicker("sixMonth",{1:"nov-apr",2:"may-oct"}));case"Yearly":case"FinancialApril":case"FinancialJuly":case"FinancialOct":return r.a.createElement("div",{style:Lt.line},this.renderYearPicker());default:return null}}}qt.contextTypes={d2:m.a.object.isRequired};var Jt=qt;function Qt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Ht={minWidth:360,marginRight:20};class zt extends o.Component{constructor(){super(),this.state={selected:[],dataSet:null,orgUnitPaths:null},this.onDataSetChange=this.onDataSetChange.bind(this),this.onPeriodChange=this.onPeriodChange.bind(this),this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.handleOrgUnitClick=this.handleOrgUnitClick.bind(this),this.changeRoot=this.changeRoot.bind(this)}onDataSetChange(e){const t=this.context.d2,a=e.id;null!==this.state.dataSet&&a===this.state.dataSet.id||(this.props.updateSeletedDataSetId(a),this.setState({rootWithMembers:null,selected:[],dataSet:e}),Promise.all([t.models.organisationUnits.list({paging:!1,level:1,fields:"id,displayName,path,children::isNotEmpty,memberCount",memberCollection:"dataSets",memberObject:a}),t.models.dataSets.get(a,{paging:!1,fields:"organisationUnits[id,path]"})]).then((([e,t])=>{const a=e.toArray()[0];this.setState({rootWithMembers:a,selected:[],orgUnitPaths:t.organisationUnits.toArray().map((e=>e.path))})})).catch((e=>{console.error(e)})))}onPeriodChange(e){this.props.updateSelectedPeriodId(e)}handleSelectionUpdate(e){this.setState({selected:e}),this.props.updateSelectedOrgUnits(this.state.selected)}handleOrgUnitClick(e,t){if(this.state.selected.includes(t.path)){const e=this.state.selected;e.splice(e.indexOf(t.path),1),this.setState({selected:e})}else{const e=this.state.selected;e.push(t.path),this.setState({selected:e})}this.props.updateSelectedOrgUnits(this.state.selected)}changeRoot(e){this.setState({currentRoot:e})}render(){const e=this.props.dataSets.map((e=>({id:e.id,name:e.displayName,periodType:e.periodType})));let t=$.t(ee.lockException.selectADataSet),a=null;return this.state.dataSet&&(t=$.t(ee.lockException.dataSet),a=this.state.dataSet.id),r.a.createElement("div",{id:"addLockExceptionFormId"},r.a.createElement("div",{className:vt.a.selectsContainer},r.a.createElement(bt.a,{style:Ht,label:t,items:e,onChange:this.onDataSetChange,value:a}),this.state.dataSet&&r.a.createElement("span",{id:"idPeriodPicker"},r.a.createElement(Jt,{periodType:this.state.dataSet.periodType,onPickPeriod:this.onPeriodChange}))),this.state.dataSet?r.a.createElement(kt.a,{className:vt.a.organisationUnitTreeCard},r.a.createElement(xt.a,{className:vt.a.organisationUnitTreeContainer},r.a.createElement("div",{className:vt.a.left},this.state.rootWithMembers?r.a.createElement(wt,{root:this.state.rootWithMembers,selected:this.state.selected,currentRoot:this.state.currentRoot,initiallyExpanded:["/".concat(this.state.rootWithMembers.id)],memberCollection:"dataSets",memberObject:this.state.dataSet.id,onSelectClick:this.handleOrgUnitClick,onChangeCurrentRoot:this.changeRoot,orgUnitsPathsToInclude:this.state.orgUnitPaths}):r.a.createElement("span",null,$.t(ee.lockException.updatingTree))),r.a.createElement("div",{className:vt.a.right},r.a.createElement("div",null,this.state.currentRoot?r.a.createElement("div",null,$.t(ee.lockException.organisationUnitsWithin)," ",r.a.createElement("span",{className:vt.a.ouLabel},this.state.currentRoot.displayName),":"):r.a.createElement("div",null,$.t(ee.lockException.selectOrganisationUnits)),r.a.createElement(mt.a,{levels:this.props.levels,selected:this.state.selected,currentRoot:this.state.currentRoot,onUpdateSelection:this.handleSelectionUpdate}),r.a.createElement(gt.a,{groups:this.props.groups,selected:this.state.selected,currentRoot:this.state.currentRoot,onUpdateSelection:this.handleSelectionUpdate}),r.a.createElement(ht.a,{selected:this.state.selected,currentRoot:this.state.currentRoot,onUpdateSelection:this.handleSelectionUpdate}))))):null)}}Qt(zt,"propTypes",{dataSets:m.a.array.isRequired,groups:m.a.oneOfType([m.a.object,m.a.array]).isRequired,levels:m.a.oneOfType([m.a.object,m.a.array]).isRequired,updateSelectedOrgUnits:m.a.func.isRequired,updateSelectedPeriodId:m.a.func.isRequired,updateSeletedDataSetId:m.a.func.isRequired}),Qt(zt,"contextTypes",{d2:m.a.object});var Yt=zt,Kt=(a(923),a(924)),Xt=a.n(Kt);function Zt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const $t={dialog:{maxWidth:"80%"},addButton:{position:"fixed",bottom:"1.5rem",right:"1.5rem"}},ea={dataSet:$.t("Data set"),period:$.t("Period"),organisationUnit:$.t("Organisation unit")},ta=({columns:e,rows:t,onRemoveLockException:a})=>r.a.createElement(i.r,null,r.a.createElement(i.v,null,r.a.createElement(i.x,null,e.map((e=>r.a.createElement(i.u,{key:e},ea[e]))),r.a.createElement(i.u,null))),r.a.createElement(i.s,null,t.map(((t,n)=>r.a.createElement(i.w,{key:n},e.map((e=>r.a.createElement(i.t,{key:e},t[e]))),r.a.createElement(i.t,null,r.a.createElement(i.c,{small:!0,secondary:!0,onClick:a.bind(null,t)},r.a.createElement(ot.a,{className:"material-icons"},"delete"))))))));class aa extends ve{constructor(e,t){super(e,t),Zt(this,"handlePageChange",(e=>{const t={...this.props.pager,page:e};this.loadLockExceptionsForPager(t,!0)})),Zt(this,"handlePageSizeChange",(e=>{const t={...this.props.pager,pageSize:e};this.loadLockExceptionsForPager(t,!0)})),Zt(this,"removeLockException",(e=>{this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:u.a,message:$.t(ee.lockException.confirmDeleteMessage),action:$.t(ee.lockException.confirmButton),onActionClick:()=>{let t="lockExceptions?pe=".concat(e.periodId,"&ds=").concat(e.dataSetId);e.organisationUnitId&&(t+="&ou=".concat(e.organisationUnitId)),this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:u.c,message:$.t(ee.lockException.loadingMessage)},pageState:{...this.props,loading:!0}});this.context.d2.Api.getApi().delete(t).then((()=>{if(this.isPageMounted()){const t={...this.props,loading:!1};this.props.atBatchDeletionPage?(t.lockExceptions=this.props.lockExceptions.filter((t=>t.periodId!==e.periodId||t.dataSetId!==e.dataSetId)),this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:u.d,message:$.t(ee.lockException.removedMessage)},pageState:t})):(this.deleteInProgress=!0,this.loadLockExceptionsForPager(aa.initialPager,!0))}})).catch((e=>{if(console.error(e),this.isPageMounted()){const t=e&&e.message?e.message:$.t(ee.messages.unexpectedError);this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:u.b,message:t},pageState:{...this.props,loading:!1}})}}))}}})})),this.state={selectedOrgUnits:[],selectedDataSetId:null,selectedPeriodId:null,showAddDialogOpen:!1,levels:null,groups:null,dataSets:[]},this.updateSelectedOrgUnits=this.updateSelectedOrgUnits.bind(this),this.updateSeletedDataSetId=this.updateSeletedDataSetId.bind(this),this.updateSelectedPeriodId=this.updateSelectedPeriodId.bind(this),this.showLockExceptionFormDialog=this.showLockExceptionFormDialog.bind(this),this.closeLockExceptionFormDialog=this.closeLockExceptionFormDialog.bind(this),this.addLockException=this.addLockException.bind(this),this.backToLockExceptions=this.backToLockExceptions.bind(this),this.goToBatchDeletionPage=this.goToBatchDeletionPage.bind(this);const a=t.d2;Object.assign(a.i18n.translations,{period:$.t(ee.lockException.period),data_set:$.t(ee.lockException.dataSet),organisation_unit:$.t(ee.lockException.organisationUnit),organisation_unit_group:$.t(ee.lockException.organisationUnitGroup),organisation_unit_level:$.t(ee.lockException.organisationUnitLevel),select:$.t(ee.lockException.select),deselect:$.t(ee.lockException.deselect),select_all:$.t(ee.lockException.selectAll),deselect_all:$.t(ee.lockException.deselectAll),name:$.t(ee.lockException.name),show:$.t(ee.lockException.show),remove:$.t(ee.lockException.remove),actions:$.t(ee.lockException.actions),of_page:$.t(ee.lockException.ofPage),week:$.t(ee.lockException.week),month:$.t(ee.lockException.month),year:$.t(ee.lockException.year),biMonth:$.t(ee.lockException.biMonth),day:$.t(ee.lockException.day),jan:$.t(ee.lockException.jan),feb:$.t(ee.lockException.feb),mar:$.t(ee.lockException.mar),apr:$.t(ee.lockException.apr),may:$.t(ee.lockException.may),jun:$.t(ee.lockException.jun),jul:$.t(ee.lockException.jul),aug:$.t(ee.lockException.aug),sep:$.t(ee.lockException.sep),oct:$.t(ee.lockException.oct),nov:$.t(ee.lockException.nov),dec:$.t(ee.lockException.dec),"jan-feb":$.t(ee.lockException.janFeb),"mar-apr":$.t(ee.lockException.marApr),"may-jun":$.t(ee.lockException.mayJun),"jul-aug":$.t(ee.lockException.julAug),"sep-oct":$.t(ee.lockException.sepOct),"nov-dec":$.t(ee.lockException.novDec),quarter:$.t(ee.lockException.quarter),Q1:$.t(ee.lockException.Q1),Q2:$.t(ee.lockException.Q2),Q3:$.t(ee.lockException.Q3),Q4:$.t(ee.lockException.Q4),sixMonth:$.t(ee.lockException.sixMonth),"jan-jun":$.t(ee.lockException.janJun),"jul-dec":$.t(ee.lockException.julDec),"apr-sep":$.t(ee.lockException.aprSep),"oct-mar":$.t(ee.lockException.octMar)})}prepareLockExceptionsResponseToDataTable(e){return e.map((e=>{const t={};return this.props.atBatchDeletionPage||(t.organisationUnit=e.organisationUnit.displayName,t.organisationUnitId=e.organisationUnit.id),t.period=e.period.displayName,t.periodId=e.period.id,t.dataSet=e.dataSet.displayName,t.dataSetId=e.dataSet.id,t}))}dataTableColumns(){return this.props.atBatchDeletionPage?["dataSet","period"]:["organisationUnit","dataSet","period"]}header(){return this.props.atBatchDeletionPage?r.a.createElement("div",{className:Xt.a.headerContainer},r.a.createElement("h1",{className:Xt.a.header},r.a.createElement(lt.a,{onClick:this.backToLockExceptions},r.a.createElement(ot.a,{className:ae()("material-icons",Xt.a.backArrowIcon)},"arrow_back")),r.a.createElement("span",null,$.t(ee.lockException.batchDeletionHeader)),r.a.createElement("span",{className:Xt.a.headerDivider}," | "),r.a.createElement("span",{className:Xt.a.subHeader},$.t(ee.lockException.batchDeletionSubHeader)))):r.a.createElement("div",{className:Xt.a.headerContainer},r.a.createElement("h1",{className:Xt.a.header},$.t(ee.lockException.title),r.a.createElement(me,{sectionDocsKey:va(this.props.sectionKey)})),r.a.createElement("div",null,r.a.createElement(i.c,{className:Xt.a.actionButton,onClick:this.goToBatchDeletionPage,primary:!0,disabled:this.areActionsDisabled()},$.t(ee.lockException.actionButton))))}areActionsDisabled(){return this.props.loading}addLockExceptionEnabled(){return this.state.selectedOrgUnits.length>0&&this.state.selectedDataSetId&&this.state.selectedPeriodId}componentDidMount(){this.loadLockExceptionsForPager(aa.initialPager)}loadLockExceptionsForPager(e,t){const a=this.context.d2.Api.getApi(),n="lockExceptions?page=".concat(e.page,"&pageSize=").concat(e.pageSize)+"&fields=name,period[id,displayName],organisationUnit[id,displayName],dataSet[id,displayName]&order=name:asc";(t||!this.props.loading&&!this.props.loaded)&&(this.context.updateAppState(this.deleteInProgress||this.addInProgress?{atBatchDeletionPage:!1,loaded:!1,loading:!0}:{showSnackbar:!0,snackbarConf:{type:u.c,message:$.t(ee.lockException.loading)},pageState:{atBatchDeletionPage:!1,loaded:!1,loading:!0}}),a.get(n).then((e=>{if(this.isPageMounted()){let t;this.deleteInProgress?(t={showSnackbar:!0,snackbarConf:{type:u.d,message:$.t(ee.lockException.removedMessage)}},this.deleteInProgress=!1):this.addInProgress?(t={showSnackbar:!0,snackbarConf:{type:u.d,message:$.t(ee.lockException.addedMessage)}},this.addInProgress=!1):t={showSnackbar:!1},this.context.updateAppState({...t,pageState:{loaded:!0,lockExceptions:this.prepareLockExceptionsResponseToDataTable(e.lockExceptions),pager:e.pager,loading:!1}})}})).catch((e=>{if(this.isPageMounted()){const t=e&&e.message?e.message:$.t(ee.messages.unexpectedError);this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:u.b,message:t},pageState:{loaded:!0,loading:!1}})}})))}loadLockExceptionCombinations(){const e=this.context.d2.Api.getApi(),t=this.props.pager;this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:u.c,message:$.t(ee.lockException.loadingMessage)},pageState:{atBatchDeletionPage:!0,loaded:!1,loading:!0,pager:t}}),e.get("lockExceptions/combinations?fields=name, period[id,displayName], dataSet[id,displayName]").then((e=>{this.isPageMounted()&&this.context.updateAppState({showSnackbar:!1,pageState:{loaded:!0,atBatchDeletionPage:!0,lockExceptions:this.prepareLockExceptionsResponseToDataTable(e.lockExceptions),loading:!1,pager:t}})})).catch((e=>{if(this.isPageMounted()){const t=e&&e.message?e.message:$.t(ee.messages.unexpectedError);this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:u.b,message:t},pageState:{loaded:!0,loading:!1}})}}))}updateSelectedOrgUnits(e){this.setState({selectedOrgUnits:e})}updateSeletedDataSetId(e){this.setState({selectedDataSetId:e})}updateSelectedPeriodId(e){this.setState({selectedPeriodId:e})}backToLockExceptions(){this.loadLockExceptionsForPager(this.props.pager,!0)}goToBatchDeletionPage(){this.loadLockExceptionCombinations()}showLockExceptionFormDialog(){const e=this.context.d2;this.state.levels&&this.state.groups&&this.state.dataSets.length>0?this.setState({showAddDialogOpen:!0}):Promise.all([e.models.organisationUnitLevel.list({paging:!1,fields:"id,level,displayName",order:"level:asc"}),e.models.organisationUnitGroup.list({paging:!1,fields:"id,displayName"}),e.models.dataSet.list({paging:!1,fields:"id,displayName,periodType"})]).then((([e,t,a])=>{this.isPageMounted()&&this.setState({showAddDialogOpen:!0,levels:e,groups:t,dataSets:a.toArray()})})).catch((e=>{if(this.isPageMounted()){const t=e&&e.message?e.message:$.t(ee.messages.unexpectedError);this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:u.b,message:t},pageState:{...this.props,loading:!1}})}}))}closeLockExceptionFormDialog(){this.setState({showAddDialogOpen:!1,selectedOrgUnits:[],selectedDataSetId:null,selectedPeriodId:null})}addLockException(){if(this.addLockExceptionEnabled()){const e=this.context.d2.Api.getApi(),t=this.state.selectedOrgUnits.map((e=>{const t=e.split("/");return t[t.length-1]})),a=new FormData;a.append("ou","[".concat(t.join(","),"]")),a.append("pe",this.state.selectedPeriodId),a.append("ds",this.state.selectedDataSetId),this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:u.c,message:$.t(ee.lockException.addingMessage)},pageState:{loading:!0}}),e.post("lockExceptions",a).then((()=>{this.isPageMounted()&&(this.context.updateAppState({pageState:{loaded:!1,loading:!1}}),this.addInProgress=!0,this.loadLockExceptionsForPager(aa.initialPager,!1),this.closeLockExceptionFormDialog())})).catch((e=>{if(this.isPageMounted()){const t=e&&e.message?e.message:$.t(ee.messages.unexpectedError);this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:u.b,message:t},pageState:{...this.props,loading:!1}})}}))}}render(){const e={...this.props.pager,onPageSizeChange:this.handlePageSizeChange,onPageChange:this.handlePageChange},t=[r.a.createElement(at.a,{key:"cancel-button",className:Xt.a.actionButton,label:$.t(ee.lockException.cancelButton),onClick:this.closeLockExceptionFormDialog}),r.a.createElement(dt.a,{key:"add-button",className:Xt.a.actionButton,primary:!0,label:$.t(ee.lockException.addButton),onClick:this.addLockException,disabled:!this.addLockExceptionEnabled()})];return r.a.createElement("div",{className:Xt.a.lockExceptionsTable},this.header(),this.props.lockExceptions&&this.props.lockExceptions.length?r.a.createElement("div",null,!this.areActionsDisabled()&&!this.props.atBatchDeletionPage&&r.a.createElement("div",{className:Xt.a.pagination},r.a.createElement(i.q,e)),r.a.createElement(ta,{columns:this.dataTableColumns(),rows:this.props.lockExceptions,onRemoveLockException:this.removeLockException}),!this.areActionsDisabled()&&!this.props.atBatchDeletionPage&&r.a.createElement("div",{className:ae()(Xt.a.pagination,Xt.a.marginForAddButton)},r.a.createElement(i.q,e))):r.a.createElement(De.Card,{style:{display:this.props.loading?"none":"block"}},r.a.createElement(De.CardText,null,$.t(ee.lockException.noDataMessage))),this.state.levels&&this.state.groups&&this.state.dataSets.length>0&&r.a.createElement(et.a,{title:$.t(ee.lockException.addLockExceptionFormTitle),actions:t,modal:!1,open:this.state.showAddDialogOpen,contentStyle:$t.dialog,onRequestClose:this.closeLockExceptionFormDialog},r.a.createElement(Yt,{levels:this.state.levels,groups:this.state.groups,dataSets:this.state.dataSets,updateSelectedOrgUnits:this.updateSelectedOrgUnits,updateSeletedDataSetId:this.updateSeletedDataSetId,updateSelectedPeriodId:this.updateSelectedPeriodId})),!this.props.atBatchDeletionPage&&!this.areActionsDisabled()&&r.a.createElement(it.a,{id:"addExceptionButtonId",style:$t.addButton,onClick:this.showLockExceptionFormDialog},r.a.createElement(ut.a,null)))}}Zt(aa,"initialPager",{pageSize:20,page:1,total:0,pageCount:1});var na=aa,ia=a(327),sa=a.n(ia),oa=a(350);const ra=ee.maintenance.title,la=[{key:"analyticsTableClear",label:ee.maintenance.analyticsTableClear},{key:"analyticsTableAnalyze",label:ee.maintenance.analyticsTableAnalyze},{key:"zeroDataValueRemoval",label:ee.maintenance.zeroDataValueRemoval},{key:"softDeletedDataValueRemoval",label:ee.maintenance.softDeletedDataValueRemoval},{key:"softDeletedEventRemoval",label:ee.maintenance.softDeletedEventRemoval},{key:"softDeletedEnrollmentRemoval",label:ee.maintenance.softDeletedEnrollmentRemoval},{key:"softDeletedTrackedEntityInstanceRemoval",label:ee.maintenance.softDeletedTrackedEntityInstanceRemoval},{key:"periodPruning",label:ee.maintenance.periodPruning},{key:"expiredInvitationsClear",label:ee.maintenance.expiredInvitationsClear},{key:"sqlViewsDrop",label:ee.maintenance.sqlViewsDrop},{key:"sqlViewsCreate",label:ee.maintenance.sqlViewsCreate},{key:"categoryOptionComboUpdate",label:ee.maintenance.categoryOptionComboUpdate},{key:"ouPathsUpdate",label:ee.maintenance.ouPathsUpdate},{key:"cacheClear",label:ee.maintenance.cacheClear},{key:"appReload",label:ee.maintenance.appReload}];var ca=class extends ve{constructor(){super(),function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(this,"performMaintenance",(()=>{const e=this.context.d2.Api.getApi(),t=this.buildFormData();t&&(this.setLoadingPageState(),e.post("maintenance",t).then((()=>{this.isPageMounted()&&this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:u.d,message:$.t(ee.maintenance.actionPerformed)},pageState:{loading:!1}})})).catch((e=>{this.isPageMounted()&&this.setLoadedPageWithErrorState(e)})))}));const e={};for(const t of Object.values(la))e[t.key]={checked:!1};this.state={checkboxes:e}}setLoadingPageState(){this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:u.c,message:$.t(ee.maintenance.performing)},pageState:{loading:!0}})}setLoadedPageWithErrorState(e){const t=e&&e.message?e.message:$.t(ee.maintenance.unexpectedError);this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:u.b,message:t},pageState:{loading:!1}})}selectedCheckboxesCount(){let e=0;const t=Object.keys(this.state.checkboxes);for(let a=0;a<t.length;a++){const n=t[a];this.state.checkboxes[n].checked&&(e+=1)}return e}areActionsDisabled(){return this.props.loading}buildFormData(){let e=null;const t=Object.keys(this.state.checkboxes);for(let a=0;a<t.length;a++){const n=t[a],i=this.state.checkboxes[n].checked;e=e||new FormData,e.append(n,i)}return e}render(){const e=Object.assign({},this.state.checkboxes),t=la.map((t=>{const a=e[t.key].checked;return r.a.createElement(oa.GridTile,{key:t.key,className:Ce.a.formControl},r.a.createElement(sa.a,{label:$.t(t.label),checked:a,onCheck:()=>{e[t.key].checked=!a,this.setState({checkboxes:e})},labelStyle:{color:"#000000"},iconStyle:{fill:"#000000"},disabled:this.areActionsDisabled()}))}));return r.a.createElement("div",null,r.a.createElement("h1",null,$.t(ra),r.a.createElement(me,{sectionDocsKey:va(this.props.sectionKey)})),r.a.createElement(De.Card,{id:"maintenanceContentContainerId"},r.a.createElement(De.CardText,null,r.a.createElement("div",null,t),r.a.createElement(dt.a,{id:"performMaintenanceBtnId",label:$.t(ee.maintenance.actionButton),onClick:this.performMaintenance,primary:!0,disabled:this.areActionsDisabled()||0===this.selectedCheckboxesCount()}))))}},da=a(925),pa=a.n(da);function ua(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const ha="/minMaxValues",ga=e=>{return(t=e.split("/"))[t.length-1];var t};var ma=class extends ve{constructor(){super(),ua(this,"isFormValid",(()=>this.state.dataSetsSelectedCount>0&&this.state.selected.length>0)),ua(this,"dataSetsSelectRef",(e=>{this.dataSetsSelect=e})),ua(this,"dataSetsSelectClick",(()=>{this.setState({dataSetsSelectedCount:this.dataSetsSelect.selectedOptions.length})})),ua(this,"handleOrgUnitChange",(({path:e,checked:t})=>{t?this.setState({selected:[e]}):this.setState({selected:[]})})),ua(this,"handleGenerateMinMaxValue",(()=>{const e=ga(this.state.selected[0]),t=Array.from(this.dataSetsSelect.selectedOptions).map((({value:e})=>e));this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:u.c,message:$.t(ee.minMaxValueGeneration.performingMessage)},pageState:{loading:!0}});this.context.d2.Api.getApi().post(ha,{organisationUnit:e,dataSets:t}).then((()=>{this.isPageMounted()&&this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:u.d,message:$.t(ee.minMaxValueGeneration.minMaxGenerationDone)},pageState:{loading:!1}})})).catch((()=>{this.isPageMounted()&&this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:u.b,message:$.t(ee.messages.unexpectedError)},pageState:{loading:!1}})}))})),ua(this,"handleRemoveMinMaxValue",(()=>{const e=ga(this.state.selected[0]),t=Array.from(this.dataSetsSelect.selectedOptions).map((({value:e})=>e));this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:u.c,message:$.t(ee.minMaxValueGeneration.removingMessage)},pageState:{loading:!0}});this.context.d2.Api.getApi().delete("".concat(ha,"/").concat(e,"?ds=").concat(t)).then((()=>{this.isPageMounted()&&this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:u.d,message:$.t(ee.minMaxValueGeneration.minMaxRemovalDone)},pageState:{loading:!1}})})).catch((()=>{this.isPageMounted()&&this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:u.b,message:$.t(ee.messages.unexpectedError)},pageState:{loading:!1}})}))})),this.state={selected:[],dataSets:null,roots:null,dataSetsSelectedCount:0}}componentDidMount(){this.loadData()}isUserInteractionDisabled(){return this.props.loading||null==this.state.dataSets||null===this.state.roots}loadData(){const e=this.context.d2;null!=this.state.dataSets&&null!=this.state.roots||Promise.all([e.models.organisationUnits.list({paging:!1,level:1,fields:"id"}),e.models.dataSet.list({paging:!1,fields:"id,displayName"})]).then((([e,t])=>{this.isPageMounted()&&this.setState({roots:e.toArray(),dataSets:t.toArray()})})).catch((()=>{this.isPageMounted()&&this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:u.b,message:$.t(ee.minMaxValueGeneration.notPossibleToLoadMessage)},pageState:{loading:!1}})}))}render(){return r.a.createElement("div",null,r.a.createElement("h1",{className:pa.a.header},$.t(ee.minMaxValueGeneration.title),r.a.createElement(me,{sectionDocsKey:va(this.props.sectionKey)})),r.a.createElement(i.d,{className:pa.a.card},r.a.createElement("div",{className:pa.a.container},this.state.dataSets?r.a.createElement("div",{className:pa.a.left},r.a.createElement("div",{className:pa.a.label},$.t(ee.minMaxValueGeneration.dataSet)),r.a.createElement("select",{multiple:!0,onClick:this.dataSetsSelectClick,disabled:this.isUserInteractionDisabled(),className:pa.a.select,ref:this.dataSetsSelectRef},this.state.dataSets.map((e=>r.a.createElement("option",{key:e.id,value:e.id,className:pa.a.options},e.displayName))))):r.a.createElement("div",{className:pa.a.left},r.a.createElement("span",null,$.t(ee.minMaxValueGeneration.loadingDataSetsMessage))),this.state.roots?r.a.createElement("div",{className:pa.a.right},r.a.createElement("div",{className:pa.a.label},$.t(ee.minMaxValueGeneration.organisationUnitSelect)),r.a.createElement("div",{className:pa.a.tree},r.a.createElement(i.p,{className:pa.a.tree,roots:this.state.roots.map((e=>e.id)),selected:this.state.selected,onChange:this.handleOrgUnitChange}))):r.a.createElement("div",{className:pa.a.right},r.a.createElement("span",null,$.t(ee.minMaxValueGeneration.updatingTree)))),r.a.createElement(i.c,{primary:!0,className:pa.a.actionButton,onClick:this.handleGenerateMinMaxValue,disabled:this.isUserInteractionDisabled()||!this.isFormValid()},$.t(ee.minMaxValueGeneration.actionButton)),r.a.createElement(i.c,{secondary:!0,onClick:this.handleRemoveMinMaxValue,disabled:this.isUserInteractionDisabled()||!this.isFormValid()},$.t(ee.minMaxValueGeneration.removeButton))))}};const ba="system/tasks/RESOURCE_TABLE";var ya=a(926),ka=a.n(ya);function Sa(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var xa=class extends ve{constructor(){super(),Sa(this,"startTaskProgressPolling",(()=>{this.intervalId=setInterval((()=>{this.requestTaskProgress()}),5e3)})),Sa(this,"isAnalyzingTables",(()=>this.state.intervalId)),Sa(this,"startsPooling",(()=>setInterval((()=>{this.requestTaskSummary()}),5e3))),Sa(this,"isJobInProgress",(e=>e.every((e=>!e.completed)))),Sa(this,"initResourceTablesGeneration",(()=>{const e=this.context.d2.Api.getApi();this.setLoadingPageState(),e.post("resourceTables").then((({response:e})=>{this.isPageMounted()&&e&&this.setState({taskId:e.id},this.startTaskProgressPolling)})).catch((e=>{this.isPageMounted()&&this.setLoadedPageWithErrorState(e)}))})),Sa(this,"requestTaskProgress",(()=>{this.context.d2.Api.getApi().get("".concat(ba,"/").concat(this.state.taskId)).then((e=>{this.isTaskCompleted(e)&&(this.stopTaskProgressPolling(),this.unsetLoadingPageState()),this.setState({notifications:this.getUpdatedNotifications(e)})})).catch((e=>{this.isPageMounted()&&this.setLoadedPageWithErrorState(e)}))})),this.state={taskId:null,notifications:[]}}componentDidMount(){this.requestTaskSummary()}componentWillUnmount(){super.componentWillUnmount(),this.stopTaskProgressPolling()}stopTaskProgressPolling(){clearInterval(this.intervalId),this.intervalId=null}setLoadingPageState(){this.setState({notifications:[]}),this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:u.c},pageState:{loading:!0}})}unsetLoadingPageState(){this.context.updateAppState({showSnackbar:!1,snackbarConf:{type:u.c},pageState:{loading:!1}})}setLoadedPageWithErrorState(e){console.error(e);const t=e&&e.message?e.message:$.t(ee.resourcetables.unexpectedError);this.stopTaskProgressPolling(),this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:u.b,message:t},pageState:{loading:!1}})}requestTaskSummary(){this.context.d2.Api.getApi().get(ba).then((e=>{if(!this.isPageMounted())return;const t=this.getActiveTaskIdFromSummary(e);t&&(this.setLoadingPageState(),this.setState({taskId:t,notifications:this.getUpdatedNotifications(e[t])},this.startTaskProgressPolling))})).catch((e=>{this.isPageMounted()&&this.setLoadedPageWithErrorState(e)}))}getUpdatedNotifications(e=[]){if(e.length<=this.state.notifications.length)return this.state.notifications;const t=e.length-1;return e.reverse().map(((e,a)=>({...e,completed:e.completed||a<t})))}getActiveTaskIdFromSummary(e){const{taskId:t}=Object.entries(e).reduce(((e,[t,a])=>{const n=a[a.length-1],i=new Date(n.time);return!this.isTaskCompleted(a)&&i>e.time?{taskId:t,time:i}:e}),{taskId:null,time:new Date(0)});return t}isTaskCompleted(e){return e[0].completed}render(){return r.a.createElement("div",null,r.a.createElement("h1",null,$.t(ee.resourceTables.title),r.a.createElement(me,{sectionDocsKey:va(this.props.sectionKey)})),r.a.createElement(De.Card,{className:Ce.a.cardContainer},r.a.createElement(De.CardText,null,r.a.createElement("div",{className:ka.a.description},r.a.createElement("div",null,$.t(ee.resourceTables.organisationUnitStructure)," ",r.a.createElement("span",{className:ka.a.tableName},"(_orgunitstructure)")),r.a.createElement("div",null,$.t(ee.resourceTables.organistionUnitCategoryOptionCombo)," ",r.a.createElement("span",{className:ka.a.tableName},"(_orgunitstructure)")),r.a.createElement("div",null,$.t(ee.resourceTables.categoryOptionGroupSetStructure)," ",r.a.createElement("span",{className:ka.a.tableName},"(_categoryoptiongroupsetstructure)")),r.a.createElement("div",null,$.t(ee.resourceTables.dataElementGroupSetStructure)," ",r.a.createElement("span",{className:ka.a.tableName},"(_dataelementgroupsetstructure)")),r.a.createElement("div",null,$.t(ee.resourceTables.indicatorGroupSetStructure)," ",r.a.createElement("span",{className:ka.a.tableName},"(_indicatorgroupsetstructure)")),r.a.createElement("div",null,$.t(ee.resourceTables.organisationUnitGroupSetStructure)," ",r.a.createElement("span",{className:ka.a.tableName},"(_organisationunitgroupsetstructure)")),r.a.createElement("div",null,$.t(ee.resourceTables.categoryStructure)," ",r.a.createElement("span",{className:ka.a.tableName},"(_categorystructure)")),r.a.createElement("div",null,$.t(ee.resourceTables.dataElementCategoryOptionComboName)," ",r.a.createElement("span",{className:ka.a.tableName},"(_categoryoptioncomboname)")),r.a.createElement("div",null,$.t(ee.resourceTables.dataElementStructure)," ",r.a.createElement("span",{className:ka.a.tableName},"(_dataelementstructure)")),r.a.createElement("div",null,$.t(ee.resourceTables.periodStructure)," ",r.a.createElement("span",{className:ka.a.tableName},"(_periodstructure)")),r.a.createElement("div",null,$.t(ee.resourceTables.dataPeriodStructure)," ",r.a.createElement("span",{className:ka.a.tableName},"(_dateperiodstructure)")),r.a.createElement("div",null,$.t(ee.resourceTables.dataElementCategoryOptionCombinations)," ",r.a.createElement("span",{className:ka.a.tableName},"(_dataelementcategoryoptioncombo)"))),r.a.createElement(ne.i,{id:"generateTablesBtnId",primary:!0,label:$.t(ee.resourceTables.actionButton),onClick:this.initResourceTablesGeneration,disabled:this.props.loading}))),(this.state.notifications||[]).length>0&&r.a.createElement(De.Card,{className:Ce.a.cardContainer},r.a.createElement(De.CardText,null,r.a.createElement(pe,{notifications:this.state.notifications,animateIncomplete:!0}))))}};const Ea=[{key:"dataIntegrity",path:"/data-integrity",component:je,info:{label:ee.dataIntegrity.label,icon:"link",description:ee.dataIntegrity.description,actionText:ee.dataIntegrity.actionText,docs:"dataAdmin_dataIntegrity"}},{key:"maintenance",path:"/maintenance",component:ca,info:{label:ee.maintenance.label,icon:"settings",description:ee.maintenance.description,actionText:ee.maintenance.actionText,docs:"data_admin_maintenance"}},{key:"resourceTables",path:"/resourceTables",component:xa,info:{label:ee.resourceTables.label,icon:"view_list",description:ee.resourceTables.description,actionText:ee.resourceTables.actionText,docs:"dataAdmin_resourceTables"}},{key:"analytics",path:"/analytics",component:Te,info:{label:ee.analytics.label,icon:"multiline_chart",description:ee.analytics.description,actionText:ee.analytics.actionText,docs:"generate_analytics_tables"}},{key:"statistics",path:"/data-statistics",component:Ze,info:{label:ee.dataStatistics.label,icon:"timeline",description:ee.dataStatistics.description,actionText:ee.dataStatistics.actionText,docs:"dataAdmin_dataStatistics"}},{key:"lock",path:"/lock-exception",component:na,info:{label:ee.lockException.label,icon:"lock",description:ee.lockException.description,actionText:ee.lockException.actionText,docs:"dataAdmin_lockException"}},{key:"minMax",path:"/min-max-value-generation",component:ma,info:{label:ee.minMaxValueGeneration.label,icon:"compare_arrows",description:ee.minMaxValueGeneration.description,actionText:ee.minMaxValueGeneration.actionText,docs:"dataAdmin_minMaxValueGeneration"}}],va=e=>{for(let t=0;t<Ea.length;t++){const a=Ea[t];if(a.key===e)return a.info.docs}return""};var fa=a(927),Ca=a.n(fa);class Pa extends o.PureComponent{render(){return r.a.createElement(l.b,{to:this.props.section.path},r.a.createElement(oa.GridTile,{key:this.props.section.key,className:ae()("section",Ca.a.gridElement)},r.a.createElement("div",{className:ae()("row",Ca.a.gridTitleBar)},r.a.createElement("span",{className:ae()("section-title",Ca.a.gridTitleDescription)},this.props.section.info.label),r.a.createElement(ot.a,{className:ae()("material-icons","icon",Ca.a.gridIcon)},this.props.section.info.icon)),r.a.createElement("span",{className:ae()("section-description","row",Ca.a.gridDescription)},$.t(this.props.section.info.description)),r.a.createElement("span",{className:ae()("section-action-text","row",Ca.a.gridActionText)},$.t(this.props.section.info.actionText))))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Pa,"propTypes",{section:m.a.shape({info:m.a.shape({actionText:m.a.string,description:m.a.string,icon:m.a.string,label:m.a.string}),key:m.a.string,path:m.a.string}).isRequired});var Ta=Pa,Da=a(933),Ia=a.n(Da);a(934);var wa=()=>{const e=Ea.map((e=>r.a.createElement("div",{key:e.key,className:ae()("col-sm-12 col-md-6 col-lg-4",Ia.a.gridContainer)},r.a.createElement(Ta,{key:e.key,section:e}))));return r.a.createElement("div",{id:"grid-list-id",className:"row"},e)};class Aa extends o.PureComponent{render(){return r.a.createElement("div",null,r.a.createElement("h3",null,"No match for ",r.a.createElement("code",null,this.props.location.pathname)))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Aa,"propTypes",{location:m.a.object.isRequired});var Oa=Aa;function Na(){return(Na=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}const Ra=({pageState:e})=>{const t=Ea.map((t=>r.a.createElement(b.a,{key:t.key,exact:!0,path:t.path,render:()=>{const a=t.component;return r.a.createElement(a,Na({sectionKey:t.key},e))}})));return t.push(r.a.createElement(b.a,{key:"home",exact:!0,path:"/",render:()=>r.a.createElement(wa,{sectionKey:"home"})})),t.push(r.a.createElement(b.a,{key:"no-match-route",component:Oa})),r.a.createElement("main",null,r.a.createElement(b.c,null,t))};Ra.defaultProps={pageState:{}};var Ma=Ra,_a=a(935),Ua=a.n(_a);a(936);function La(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ja extends o.PureComponent{constructor(e){super(e),La(this,"updateAppState",(e=>{e.currentSection&&!e.pageState&&this.state.currentSection!==e.currentSection?this.setState({...e,pageState:void 0,showSnackbar:!1}):this.setState(e)})),(e=>{if(e){const t={},a=Object.keys(ee.d2UiComponents);for(let e=0;e<a.length;e++){const n=a[e];t[n]=$.t(ee.d2UiComponents[n])}Object.assign(e.i18n.translations,t)}})(e.d2),this.state={currentSection:"",showSnackbar:!1,snackbarConf:{type:"",message:""}}}getChildContext(){return{d2:this.props.d2,showSnackbar:this.state.showSnackbar,snackbarConf:this.state.snackbarConf,currentSection:this.state.currentSection,updateAppState:this.updateAppState}}showLoadingProgress(){return this.state.snackbarConf.type===u.c&&this.state.showSnackbar}render(){const e=Ea.map((e=>Object.assign(e,{icon:e.info.icon,label:c.a.t(e.info.label),containerElement:r.a.createElement(l.b,{to:e.path})}))),t=this.showLoadingProgress()?r.a.createElement("div",{className:Ua.a.centered},r.a.createElement(d.a,null)):r.a.createElement(p.a,{show:this.state.showSnackbar,conf:this.state.snackbarConf});return r.a.createElement("div",null,r.a.createElement(h.a,{sections:e,currentSection:this.state.currentSection,onChangeSection:()=>null}),r.a.createElement("div",{className:Ua.a.contentWrapper},r.a.createElement("div",{className:Ua.a.contentArea},r.a.createElement(Ma,{pageState:this.state.pageState}))),t)}}La(ja,"childContextTypes",{d2:m.a.object,currentSection:m.a.string,showSnackbar:m.a.bool,snackbarConf:m.a.shape({duration:m.a.number,message:m.a.string,type:m.a.string}),updateAppState:m.a.func}),La(ja,"propTypes",{d2:m.a.object});var Wa=Object(b.f)(ja),Ga=a(315),Ba=a(344),Fa=a.n(Ba),Va=a(345),qa=a.n(Va),Ja=a(289);const Qa={spacing:qa.a,fontFamily:"Roboto, sans-serif",palette:{primary1Color:"#004ba0",primary2Color:Ga.blue700,primary3Color:Ga.blue100,accent1Color:Ga.orange500,accent2Color:Ga.grey100,accent3Color:Ga.orangeA200,textColor:Ga.darkBlack,alternateTextColor:Ga.white,canvasColor:Ga.white,borderColor:Ga.grey400,disabledColor:Object(Ja.fade)(Ga.darkBlack,.3)}};var Ha=Fa()(Qa);a(937);t.default=()=>{const{d2:e}=Object(n.a)();return e?r.a.createElement(r.a.Fragment,null,r.a.createElement(i.h,{spacers:!0,colors:!0}),r.a.createElement(s.MuiThemeProvider,{muiTheme:Ha},r.a.createElement(l.a,null,r.a.createElement(Wa,{d2:e})))):null}}}]);
//# sourceMappingURL=app.a714917c.chunk.js.map