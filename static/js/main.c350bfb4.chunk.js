(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{124:function(e,t,a){e.exports={gridElement:"GridSection_gridElement__3DOqL",gridTitleBar:"GridSection_gridTitleBar__2-OEV",gridTitleDescription:"GridSection_gridTitleDescription__1jy96",gridIcon:"GridSection_gridIcon__1INTx",gridDescription:"GridSection_gridDescription__1NNso",gridActionText:"GridSection_gridActionText__1S-Gc"}},125:function(e,t,a){e.exports={selectsContainer:"AddLockExceptionForm_selectsContainer__oGoGJ",organisationUnitTreeContainer:"AddLockExceptionForm_organisationUnitTreeContainer__1ihnJ",left:"AddLockExceptionForm_left__Bdizi",right:"AddLockExceptionForm_right__1Fbau",ouLabel:"AddLockExceptionForm_ouLabel__85FLn",organisationUnitTreeCard:"AddLockExceptionForm_organisationUnitTreeCard__2UJ2-"}},1625:function(e,t,a){},1628:function(e,t,a){},1631:function(e,t,a){},1632:function(e,t,a){},1633:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(28),s=a.n(i),r=a(111),c=a(139),l=a(780),d=a(15),u=a.n(d),p=a(17),g=a.n(p),m=a(49),h=a.n(m),b=(a(871),a(872),a(873),a(874),a(875),a(876),a(877),a(878),a(879),a(880),a(881),a(882),a(883),a(884),a(885),a(886),a(663)),y=a(664),k=a(665),f=a(666),S=a(667),v=a(668),E=a(669),x=a(670),C=a(671),O=a(672),I=a(673),P=a(674),T=a(675),A=a(676),R=a(677),j=a(678),_=a(679),D=a(680),w=a(681),N=a(682),M=a(683),U=a(684),L=a(685),W=a(686),G=a(687),V=a(688),B=a(689),F=a(690),q=a(691),H=a(692),z=a(693),J=a(694),K=a(695),Q=a(696),Y=a(697),Z=a(698),X=a(699),$=a(700),ee=a(701),te=a(702),ae=a(703),ne=a(704),oe=a(705),ie=a(706),se=a(707),re=a(708),ce=a(709),le=a(710),de=a(711),ue=a(712),pe=a(713),ge="data-admin-app";h.a.locale("en"),g.a.addResources("am",ge,b),g.a.addResources("ar",ge,y),g.a.addResources("ar_EG",ge,k),g.a.addResources("ar_IQ",ge,f),g.a.addResources("ar_SD",ge,S),g.a.addResources("bn",ge,v),g.a.addResources("ckb",ge,E),g.a.addResources("cs",ge,x),g.a.addResources("da",ge,C),g.a.addResources("en",ge,O),g.a.addResources("en_US",ge,I),g.a.addResources("es",ge,P),g.a.addResources("es_419",ge,T),g.a.addResources("es_US",ge,A),g.a.addResources("fr",ge,R),g.a.addResources("hi_IN",ge,j),g.a.addResources("id",ge,_),g.a.addResources("ka",ge,D),g.a.addResources("km",ge,w),g.a.addResources("ko_KR",ge,N),g.a.addResources("lo",ge,M),g.a.addResources("ml",ge,U),g.a.addResources("mn",ge,L),g.a.addResources("my",ge,W),g.a.addResources("nb",ge,G),g.a.addResources("ne",ge,V),g.a.addResources("nl",ge,B),g.a.addResources("or",ge,F),g.a.addResources("pl",ge,q),g.a.addResources("prs",ge,H),g.a.addResources("ps",ge,z),g.a.addResources("pt",ge,J),g.a.addResources("pt_BR",ge,K),g.a.addResources("ro",ge,Q),g.a.addResources("ru",ge,Y),g.a.addResources("rw",ge,Z),g.a.addResources("sv",ge,X),g.a.addResources("sw_TZ",ge,$),g.a.addResources("tet",ge,ee),g.a.addResources("tg",ge,te),g.a.addResources("ti",ge,ae),g.a.addResources("tl",ge,ne),g.a.addResources("uk",ge,oe),g.a.addResources("ur",ge,ie),g.a.addResources("uz",ge,se),g.a.addResources("uz_Cyrl",ge,re),g.a.addResources("uz_Latn",ge,ce),g.a.addResources("vi",ge,le),g.a.addResources("zh",ge,de),g.a.addResources("zh_CN",ge,ue),g.a.addResources("zh_HK",ge,pe),g.a.setDefaultNamespace(ge),g.a.changeLanguage("en");var me=g.a,he={dataIntegrity:{title:"Data Integrity",label:"Data Integrity",description:"Run data integrity checks and unveil anomalies and problems in the meta data setup.",actionText:"Check Data Integrity",performing:"Performing data integrity checks...",unexpectedError:"An unexpected error happened during data integrity checks",actionButton:"RUN INTEGRITY CHECKS",dataElementsWithoutDataSet:{label:"Data elements without data set"},dataElementsWithoutGroups:{label:"Data elements without groups"},dataElementsViolatingExclusiveGroupSets:{label:"Data elements violating exclusive group sets"},dataElementsAssignedToDataSetsWithDifferentPeriodTypes:{label:"Data elements assigned to data sets with different period types"},dataSetsNotAssignedToOrganisationUnits:{label:"Data sets not assigned to organisation units"},indicatorsWithIdenticalFormulas:{label:"Indicators with identical formulas"},indicatorsWithoutGroups:{label:"Indicators without groups"},invalidIndicatorNumerators:{label:"Invalid indicator numerators"},invalidIndicatorDenominators:{label:"Invalid indicator denominators"},indicatorsViolatingExclusiveGroupSets:{label:"Indicators violating exclusive group sets"},organisationUnitsWithCyclicReferences:{label:"Organisation units with cyclic references"},orphanedOrganisationUnits:{label:"Orphaned organisation units"},organisationUnitsWithoutGroups:{label:"Organisation units without groups"},organisationUnitsViolatingExclusiveGroupSets:{label:"Organisation units violating exclusive group sets"},organisationUnitGroupsWithoutGroupSets:{label:"Organisation unit groups without group sets"},validationRulesWithoutGroups:{label:"Validation rules without groups"},invalidValidationRuleLeftSideExpressions:{label:"Invalid validation rule left side expressions"},invalidValidationRuleRightSideExpressions:{label:"Invalid validation rule right side expressions"},invalidProgramIndicatorExpressions:{label:"Invalid program indicator expressions"},invalidProgramIndicatorFilters:{label:"Invalid program indicator filters"},dataElementsInDataSetNotInForm:{label:"There are data elements in the form, but not in the form or sections"},invalidCategoryCombos:{label:"Invalid category combinations"},duplicatePeriods:{label:"Duplicate periods"},programRulesWithNoCondition:{label:"Program rules with no condition"},programRulesWithNoAction:{label:"Program rules with no action"},programRulesWithNoPriority:{label:"Program rules with no priority"},programRuleVariablesWithNoDataElement:{label:"Program rule variables with no data element"},programRuleVariablesWithNoAttribute:{label:"Program rule variables with no attribute"},programRuleActionsWithNoDataObject:{label:"Program rule actions with no data object"},programRuleActionsWithNoNotification:{label:"Program rule actions with no notification"},programRuleActionsWithNoSectionId:{label:"Program rule actions with no section id"},programRuleActionsWithNoStageId:{label:"Program rule actions with no stage id"}},maintenance:{title:"Maintenance",label:"Maintenance",description:"Perform maintenance tasks and generate resource database tables for the organisation unit hierarchy and group set structure.",actionText:"Perform Maintenance",actionButton:"PERFORM MAINTENANCE",performing:"Performing Maintenance...",actionPerformed:"Maintenance done",unexpectedError:"An unexpected error happened during maintenance",analyticsTableClear:"Clear analytics tables",analyticsTableAnalyze:"Analyze analytics tables",zeroDataValueRemoval:"Remove zero data values",softDeletedDataValueRemoval:"Permanently remove soft deleted data values",softDeletedEventRemoval:"Permanently remove soft deleted events",softDeletedEnrollmentRemoval:"Permanently remove soft deleted enrollments",softDeletedTrackedEntityInstanceRemoval:"Permanently remove soft deleted tracked entity instances",periodPruning:"Prune periods",expiredInvitationsClear:"Remove expired invitations",sqlViewsDrop:"Drop SQL views",sqlViewsCreate:"Create SQL views",categoryOptionComboUpdate:"Update category option combinations",ouPathsUpdate:"Update organisation unit paths",cacheClear:"Clear application cache",appReload:"Reload apps"},resourceTables:{title:"Resource Tables",label:"Resource Tables",description:"Generate resource database tables for the organisation unit hierarchy and group set structure among others.",actionText:"Generate Resource Tables",actionButton:"GENERATE TABLES",actionPerformed:"Resource Tables generated",unexpectedError:"An unexpected error happened during operation",organisationUnitStructure:"Organisation unit structure",organistionUnitCategoryOptionCombo:"Organisation unit category option combo",categoryOptionGroupSetStructure:"Category option group set structure",dataElementGroupSetStructure:"Data element group set structure",indicatorGroupSetStructure:"Indicator group set structure",organisationUnitGroupSetStructure:"Organisation unit group set structure",categoryStructure:"Category structure",dataElementCategoryOptionComboName:"Data element category option combo name",dataElementStructure:"Data element structure",periodStructure:"Period structure",dataPeriodStructure:"Date period structure",dataElementCategoryOptionCombinations:"Data element category option combinations"},dataStatistics:{title:"Data Statistics",label:"Data Statistics",description:"Browse the number of objects in the database, like data elements, indicators, data sets and data values.",actionText:"Overview Data Statistics",loadingMessage:"Loading Data Statistics...",errorMessage:"It was not possible to load Data Statistics",noDataMessage:"No data to show.",objectType:"Object type",lastHour:"Last hour",today:"Today",last:"Last",days:"days",usersLoggedIn:"Users logged in",userAccountInvitations:"User account invitations",pedingInvitations:"Pending invitations",expiredInvitations:"Expired invitations",dataValues:"Data values",events:"Events",objects:{indicator:"Indicators",period:"Periods",programStageInstance:"Events",organisationUnit:"Organisation units",validationRule:"Validation rules",dataValue:"Data values",program:"Programs",dataElement:"Data elements",organisationUnitGroup:"Organisation unit groups",reportTable:"Pivot tables",indicatorType:"Indicator types",dataSet:"Data sets",userGroup:"User groups",user:"Users",map:"Maps",indicatorGroup:"Indicator groups",chart:"Charts",dataElementGroup:"Data element groups",dashboard:"Dashboards"}},lockException:{title:"Lock Exception Management",batchDeletionHeader:"Lock Exception",batchDeletionSubHeader:"Batch Deletion",addLockExceptionFormTitle:"Add new lock exception",label:"Lock Exception",description:"Add or remove exceptions to the the standard rules for locking of data entry forms.",actionText:"Lock Exception Management",actionButton:"BATCH DELETION",cancelButton:"CANCEL",addButton:"ADD",noDataMessage:"No data to show.",loadingMessage:"Loading Lock Exceptions...",addingMessage:"Adding Lock Exception...",removedMessage:"Lock Exception removed",addedMessage:"Lock Exception Added",confirmDeleteMessage:"Are you sure?",confirmButton:"CONFIRM",selectADataSet:"Select a Data Set",updatingTree:"Updating Organisation Units Tree...",organisationUnitsWithin:"For organisation units within",period:"Period",dataSet:"Data Set",organisationUnit:"Organisation Unit",organisationUnitGroup:"Organisation Unit Group",organisationUnitLevel:"Organisation Unit Level",select:"Select",deselect:"Deselect",selectAll:"Select All Org Units",deselectAll:"Deselect All Org Units",name:"Name",show:"Show Details",remove:"Remove",actions:"Actions",ofPage:"of",week:"week",month:"month",year:"year",biMonth:"bi monthly",day:"day",jan:"jan",feb:"feb",mar:"mar",apr:"apr",may:"may",jun:"jun",jul:"jul",aug:"aug",sep:"sep",oct:"oct",nov:"nov",dec:"dec",janFeb:"jan-feb",marApr:"mar-apr",mayJun:"may-jun",julAug:"jul-aug",sepOct:"sep-oct",novDec:"nov-dec",quarter:"quarter",Q1:"Q1",Q2:"Q2",Q3:"Q3",Q4:"Q4",sixMonth:"six monthly",janJun:"jan-jun",julDec:"jul-dec",aprSep:"apr-sep",octMar:"oct-mar",selectOrganisationUnits:"For all organisation units:"},minMaxValueGeneration:{title:"Min-Max Value Generation",label:"Min-Max Value Generation",description:"Generate min-max values which can be used for data validation during data entry and validation processes.",actionText:"Generate Min-Max Value",notPossibleToLoadMessage:"It was not possible to load data",warningMessage:"Select Data set and Organisation Unit",performingMessage:"Doing Min Max generation...",removingMessage:"Removing Min Max generation...",minMaxGenerationDone:"Min Max generation done",minMaxRemovalDone:"Min Max removal done",dataSet:"Data Set",loadingDataSetsMessage:"Loading data sets",organisationUnitSelect:"Organisation Unit Selection",updatingTree:"Updating Organisation Units Tree...",actionButton:"GENERATE",removeButton:"REMOVE"},analytics:{title:"Analytics tables management",label:"Analytics Tables",description:"The data mart is a set of tables in the DHIS database which is used by all reporting and analysis tools to retrieve data from. ",actionText:"Analytics tables update",actionButton:"START EXPORT",skipAggregate:"Skip generation of aggregate data and completeness data",skipResourceTables:"Skip generation of resource tables",skipEvents:"Skip generation of event data",skipEnrollment:"Skip generation of enrollment data",analyticsTablesUpdateHeader:"Analytics Tables Update",lastYearsLabel:"Number of last years of data to include",allLastYears:"[ All ]",unexpectedError:"An unexpected error happened during maintenance"},messages:{unexpectedError:"An unexpected error happened during operation"},d2UiComponents:{settings:"Settings",app_search_placeholder:"Search apps",profile:"Profile",account:"Account",help:"Help",log_out:"Log out",about_dhis2:"About DHIS 2",manage_my_apps:"Manage my apps",no_results_found:"No results found",interpretations:"Interpretations",messages:"Messages"}},be=function(e){var t=e.keyUiLocale;(function(e){var t=["ar","fa","ur"],a=t.map(function(e){return"".concat(e,"-")});return t.includes(e)||a.filter(function(t){return e.startsWith(t)}).length>0})(t)&&document.body.setAttribute("dir","rtl"),me.changeLanguage(t)},ye=function(e){if(e){for(var t={},a=Object.keys(he.d2UiComponents),n=0;n<a.length;n++){var o=a[n];t[o]=me.t(he.d2UiComponents[o])}Object.assign(e.i18n.translations,t)}},ke=a(39),fe=a(30),Se=a(31),ve=a(32),Ee=a(24),xe=a(23),Ce=a(33),Oe=a(1),Ie=a.n(Oe),Pe=a(123),Te=a(778),Ae=a(764),Re=a(782),je=a(14),_e=a(765),De=a(11),we=a.n(De),Ne=a(138),Me=a(36),Ue=a.n(Me),Le=a(124),We=a.n(Le),Ge=function(e){function t(){return Object(fe.a)(this,t),Object(ve.a)(this,Object(Ee.a)(t).apply(this,arguments))}return Object(Ce.a)(t,e),Object(Se.a)(t,[{key:"render",value:function(){return o.a.createElement(r.b,{to:this.props.section.path},o.a.createElement(Ne.GridTile,{key:this.props.section.key,className:we()("section",We.a.gridElement)},o.a.createElement("div",{className:we()("row",We.a.gridTitleBar)},o.a.createElement("span",{className:we()("section-title",We.a.gridTitleDescription)},this.props.section.info.label),o.a.createElement(Ue.a,{className:we()("material-icons","icon",We.a.gridIcon)},this.props.section.info.icon)),o.a.createElement("span",{className:we()("section-description","row",We.a.gridDescription)},me.t(this.props.section.info.description)),o.a.createElement("span",{className:we()("section-action-text","row",We.a.gridActionText)},me.t(this.props.section.info.actionText))))}}]),t}(n.PureComponent),Ve=a(142),Be=a(25),Fe=he.dataIntegrity.title,qe=[{key:"dataElementsWithoutDataSet",label:he.dataIntegrity.dataElementsWithoutDataSet.label,text:he.dataIntegrity.dataElementsWithoutDataSet.text},{key:"dataElementsWithoutGroups",label:he.dataIntegrity.dataElementsWithoutGroups.label,text:he.dataIntegrity.dataElementsWithoutGroups.text},{key:"dataElementsViolatingExclusiveGroupSets",label:he.dataIntegrity.dataElementsViolatingExclusiveGroupSets.label,text:he.dataIntegrity.dataElementsViolatingExclusiveGroupSets.label},{key:"dataElementsAssignedToDataSetsWithDifferentPeriodTypes",label:he.dataIntegrity.dataElementsAssignedToDataSetsWithDifferentPeriodTypes.label,text:he.dataIntegrity.dataElementsAssignedToDataSetsWithDifferentPeriodTypes.text},{key:"dataSetsNotAssignedToOrganisationUnits",label:he.dataIntegrity.dataSetsNotAssignedToOrganisationUnits.label,text:he.dataIntegrity.dataSetsNotAssignedToOrganisationUnits.text},{key:"indicatorsWithIdenticalFormulas",label:he.dataIntegrity.indicatorsWithIdenticalFormulas.label,text:he.dataIntegrity.indicatorsWithIdenticalFormulas.text},{key:"indicatorsWithoutGroups",label:he.dataIntegrity.indicatorsWithoutGroups.label,text:he.dataIntegrity.indicatorsWithoutGroups.text},{key:"invalidIndicatorNumerators",label:he.dataIntegrity.invalidIndicatorNumerators.label,text:he.dataIntegrity.invalidIndicatorNumerators.text},{key:"invalidIndicatorDenominators",label:he.dataIntegrity.invalidIndicatorDenominators.label,text:he.dataIntegrity.invalidIndicatorDenominators.text},{key:"indicatorsViolatingExclusiveGroupSets",label:he.dataIntegrity.indicatorsViolatingExclusiveGroupSets.label,text:he.dataIntegrity.indicatorsViolatingExclusiveGroupSets.text},{key:"organisationUnitsWithCyclicReferences",label:he.dataIntegrity.organisationUnitsWithCyclicReferences.label,text:he.dataIntegrity.organisationUnitsWithCyclicReferences.text},{key:"orphanedOrganisationUnits",label:he.dataIntegrity.orphanedOrganisationUnits.label,text:he.dataIntegrity.orphanedOrganisationUnits.text},{key:"organisationUnitsWithoutGroups",label:he.dataIntegrity.organisationUnitsWithoutGroups.label,text:he.dataIntegrity.organisationUnitsWithoutGroups.text},{key:"organisationUnitsViolatingExclusiveGroupSets",label:he.dataIntegrity.organisationUnitsViolatingExclusiveGroupSets.label,text:he.dataIntegrity.organisationUnitsViolatingExclusiveGroupSets.text},{key:"organisationUnitGroupsWithoutGroupSets",label:he.dataIntegrity.organisationUnitGroupsWithoutGroupSets.label,text:he.dataIntegrity.organisationUnitGroupsWithoutGroupSets.text},{key:"validationRulesWithoutGroups",label:he.dataIntegrity.validationRulesWithoutGroups.label,text:he.dataIntegrity.validationRulesWithoutGroups.text},{key:"invalidValidationRuleLeftSideExpressions",label:he.dataIntegrity.invalidValidationRuleLeftSideExpressions.label,text:he.dataIntegrity.invalidValidationRuleLeftSideExpressions.text},{key:"invalidValidationRuleRightSideExpressions",label:he.dataIntegrity.invalidValidationRuleRightSideExpressions.label,text:he.dataIntegrity.invalidValidationRuleRightSideExpressions.text},{key:"invalidProgramIndicatorExpressions",label:he.dataIntegrity.invalidProgramIndicatorExpressions.label},{key:"invalidProgramIndicatorFilters",label:he.dataIntegrity.invalidProgramIndicatorFilters.label},{key:"dataElementsInDataSetNotInForm",label:he.dataIntegrity.dataElementsInDataSetNotInForm.label},{key:"invalidCategoryCombos",label:he.dataIntegrity.invalidCategoryCombos.label},{key:"duplicatePeriods",label:he.dataIntegrity.duplicatePeriods.label},{key:"programRulesWithNoCondition",label:he.dataIntegrity.programRulesWithNoCondition.label},{key:"programRulesWithNoAction",label:he.dataIntegrity.programRulesWithNoAction.label},{key:"programRulesWithNoPriority",label:he.dataIntegrity.programRulesWithNoPriority.label},{key:"programRuleVariablesWithNoDataElement",label:he.dataIntegrity.programRuleVariablesWithNoDataElement.label},{key:"programRuleVariablesWithNoAttribute",label:he.dataIntegrity.programRuleVariablesWithNoAttribute.label},{key:"programRuleActionsWithNoDataObject",label:he.dataIntegrity.programRuleActionsWithNoDataObject.label},{key:"programRuleActionsWithNoNotification",label:he.dataIntegrity.programRuleActionsWithNoNotification.label},{key:"programRuleActionsWithNoSectionId",label:he.dataIntegrity.programRuleActionsWithNoSectionId.label},{key:"programRuleActionsWithNoStageId",label:he.dataIntegrity.programRuleActionsWithNoStageId.label}],He=function(e){function t(){return Object(fe.a)(this,t),Object(ve.a)(this,Object(Ee.a)(t).apply(this,arguments))}return Object(Ce.a)(t,e),Object(Se.a)(t,[{key:"componentWillMount",value:function(){this.pageMounted=!0,this.context.currentSection!==this.props.sectionKey&&this.context.updateAppState({currentSection:this.props.sectionKey})}},{key:"componentWillUnmount",value:function(){this.pageMounted=!1}},{key:"isPageMounted",value:function(){return this.pageMounted}}]),t}(n.Component);He.contextTypes={d2:Ie.a.object,loading:Ie.a.bool,currentSection:Ie.a.string,updateAppState:Ie.a.func};var ze=He,Je=a(38),Ke=a(768),Qe=a.n(Ke),Ye={errorColor:"#ff5722",noErrorColor:"#1c9d17",titleStyle:{fontSize:14,fontWeight:"normal"},iconStyle:{color:"#1c9d17",cursor:"auto"},noPaddingTop:{paddingTop:0}},Ze=function(e){function t(){return Object(fe.a)(this,t),Object(ve.a)(this,Object(Ee.a)(t).apply(this,arguments))}return Object(Ce.a)(t,e),Object(Se.a)(t,[{key:"render",value:function(){var e=this,t=!0,a=Ye.errorColor,n="keyboard_arrow_down",i="keyboard_arrow_up",s=null;Array.isArray(this.props.content)?this.props.content.length?s=o.a.createElement(Je.CardText,{style:Ye.noPaddingTop,expandable:t},o.a.createElement("div",{id:"elementDescription"},this.props.content.map(function(e){return o.a.createElement("p",{key:e},Array.isArray(e)?e.join(", "):e)}))):(t=!1,a=Ye.noErrorColor,n="done",i="done"):s=o.a.createElement(Je.CardText,{style:Ye.noPaddingTop,expandable:t},o.a.createElement("div",{id:"elementDescription"},Object.keys(this.props.content).map(function(t){return o.a.createElement("span",{key:t},o.a.createElement("h4",null,t),o.a.createElement("p",null,Array.isArray(e.props.content[t])?e.props.content[t].join(", "):e.props.content[t]))})));var r=o.a.createElement(Be.f,{className:"material-icons"},n),c=o.a.createElement(Be.f,{className:"material-icons"},i);return o.a.createElement(Je.Card,{id:this.props.cardId,className:Qe.a.card},o.a.createElement(Je.CardHeader,{title:me.t(this.props.title),titleColor:a,titleStyle:Ye.titleStyle,actAsExpander:t,showExpandableButton:!0,closeIcon:r,openIcon:c,iconStyle:t?{}:Ye.iconStyle}),s)}}]),t}(n.PureComponent);Ze.defaultProps={content:[]};var Xe=Ze,$e=function(e){var t=e.major,a=e.minor;return e.snapshot?"master":"".concat(t,".").concat(a)},et=function(e){function t(){return Object(fe.a)(this,t),Object(ve.a)(this,Object(Ee.a)(t).apply(this,arguments))}return Object(Ce.a)(t,e),Object(Se.a)(t,[{key:"render",value:function(){var e=this.context.d2,t=this.props,a=t.lng,n=t.sectionDocsKey;return o.a.createElement(Be.h,{className:"helper-icon",iconStyle:{color:"#276696"},href:"".concat("https://docs.dhis2.org","/").concat($e(e.system.version),"/").concat(a,"/user/html/").concat(n,".html"),target:"_blank",rel:"noopener noreferrer",tooltip:me.t("Open user guide"),tooltipPosition:"bottom-center",iconClassName:"material-icons"},"help")}}]),t}(n.PureComponent);et.defaultProps={lng:"en"},et.contextTypes={d2:Ie.a.object};var tt=et,at=a(769),nt=a.n(at),ot=function(e){function t(){var e;return Object(fe.a)(this,t),(e=Object(ve.a)(this,Object(Ee.a)(t).call(this))).state={cards:null,intervalId:null,loaded:!1,loading:!1},e.initDataIntegrityCheck=e.initDataIntegrityCheck.bind(Object(xe.a)(e)),e}return Object(Ce.a)(t,e),Object(Se.a)(t,[{key:"componentWillReceiveProps",value:function(e){var a={};Object.keys(e).forEach(function(n){e.hasOwnProperty(n)&&t.STATE_PROPERTIES.includes(n)&&(a[n]=e[n])}),a!=={}&&this.setState(a)}},{key:"componentWillUnmount",value:function(){Object(Ve.a)(Object(Ee.a)(t.prototype),"componentWillUnmount",this).call(this),this.cancelPullingRequests()}},{key:"cancelPullingRequests",value:function(){clearInterval(this.state.intervalId)}},{key:"setLoadingPageState",value:function(){this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:je.c,message:me.t(he.dataIntegrity.performing)},currentSection:this.props.sectionKey,pageState:{loaded:!1,loading:!0}})}},{key:"setLoadedPageWithErrorState",value:function(e){var t=e&&e.message?e.message:me.t(he.dataIntegrity.unexpectedError);this.cancelPullingRequests(),this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:je.b,message:t},currentSection:this.props.sectionKey,pageState:{loaded:!0,loading:!1}})}},{key:"initDataIntegrityCheck",value:function(){var e=this,t=this.context.d2.Api.getApi();this.setLoadingPageState(),t.post("dataIntegrity").then(function(t){e.isPageMounted()&&t&&(e.state.jobId=t.response.id,e.state.intervalId=setInterval(function(){e.requestTaskSummary()},5e3))}).catch(function(t){e.isPageMounted()&&e.setLoadedPageWithErrorState(t)})}},{key:"requestTaskSummary",value:function(){var e=this,t=this.context.d2.Api.getApi(),a="".concat("system/taskSummaries/DATA_INTEGRITY","/").concat(this.state.jobId);t.get(a).then(function(t){e.isPageMounted()&&t&&(e.cancelPullingRequests(),e.context.updateAppState({showSnackbar:!1,currentSection:e.props.sectionKey,pageState:{loaded:!0,cards:t,loading:!1}}))}).catch(function(t){e.isPageMounted()&&e.setLoadedPageWithErrorState(t)})}},{key:"render",value:function(){var e=this,t=o.a.createElement(Be.j,{id:"runDataIntegrityChecksBtnId",label:me.t(he.dataIntegrity.actionButton),onClick:this.initDataIntegrityCheck,primary:!0,disabled:this.state.loading}),a=[];if(this.state.cards){var n=Object.keys(this.state.cards);if(a=n.map(function(t){return o.a.createElement(Xe,{cardId:"errorElement-".concat(t),key:t,title:qe.find(function(e){return e.key===t}).label,content:e.state.cards[t]})}),this.state.loaded){var i=qe.filter(function(e){return n.indexOf(e.key)<0}).map(function(e){return o.a.createElement(Xe,{cardId:"noErrorElement-".concat(e.key),key:e.key,title:e.label,content:[]})});a.push(i)}}return o.a.createElement("div",null,o.a.createElement("h1",{className:nt.a.header},me.t(Fe),o.a.createElement(tt,{sectionDocsKey:Ia(this.props.sectionKey)})),a&&a.length>0?a:t)}}]),t}(ze);ot.STATE_PROPERTIES=["cards","loaded","loading"];var it=ot,st=a(83),rt=a.n(st),ct=a(95),lt=a.n(ct),dt=he.maintenance.title,ut=[{key:"analyticsTableClear",label:he.maintenance.analyticsTableClear},{key:"analyticsTableAnalyze",label:he.maintenance.analyticsTableAnalyze},{key:"zeroDataValueRemoval",label:he.maintenance.zeroDataValueRemoval},{key:"softDeletedDataValueRemoval",label:he.maintenance.softDeletedDataValueRemoval},{key:"softDeletedEventRemoval",label:he.maintenance.softDeletedEventRemoval},{key:"softDeletedEnrollmentRemoval",label:he.maintenance.softDeletedEnrollmentRemoval},{key:"softDeletedTrackedEntityInstanceRemoval",label:he.maintenance.softDeletedTrackedEntityInstanceRemoval},{key:"periodPruning",label:he.maintenance.periodPruning},{key:"expiredInvitationsClear",label:he.maintenance.expiredInvitationsClear},{key:"sqlViewsDrop",label:he.maintenance.sqlViewsDrop},{key:"sqlViewsCreate",label:he.maintenance.sqlViewsCreate},{key:"categoryOptionComboUpdate",label:he.maintenance.categoryOptionComboUpdate},{key:"ouPathsUpdate",label:he.maintenance.ouPathsUpdate},{key:"cacheClear",label:he.maintenance.cacheClear},{key:"appReload",label:he.maintenance.appReload}],pt=a(76),gt=a.n(pt),mt=function(e){function t(){var e;Object(fe.a)(this,t),e=Object(ve.a)(this,Object(Ee.a)(t).call(this));for(var a={},n=0;n<ut.length;n++){a[ut[n].key]={checked:!1}}return e.state={intervalId:null,checkboxes:a,loading:!1},e.performMaintenance=e.performMaintenance.bind(Object(xe.a)(e)),e}return Object(Ce.a)(t,e),Object(Se.a)(t,[{key:"componentWillReceiveProps",value:function(e){var a={};Object.keys(e).forEach(function(n){e.hasOwnProperty(n)&&t.STATE_PROPERTIES.includes(n)&&(a[n]=e[n])}),a!=={}&&this.setState(a)}},{key:"setLoadingPageState",value:function(){this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:je.c,message:me.t(he.maintenance.performing)},pageState:{loading:!0}})}},{key:"setLoadedPageWithErrorState",value:function(e){var t=e&&e.message?e.message:me.t(he.maintenance.unexpectedError);this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:je.b,message:t},pageState:{loading:!1}})}},{key:"selectedCheckboxesCount",value:function(){for(var e=0,t=Object.keys(this.state.checkboxes),a=0;a<t.length;a++){var n=t[a];this.state.checkboxes[n].checked&&(e+=1)}return e}},{key:"areActionsDisabled",value:function(){return this.state.loading}},{key:"buildFormData",value:function(){for(var e=null,t=Object.keys(this.state.checkboxes),a=0;a<t.length;a++){var n=t[a],o=this.state.checkboxes[n].checked;(e=e||new FormData).append(n,o)}return e}},{key:"performMaintenance",value:function(){var e=this,t=this.context.d2.Api.getApi(),a=this.buildFormData();a&&(this.setLoadingPageState(),t.post("maintenance",a).then(function(){e.isPageMounted()&&e.context.updateAppState({showSnackbar:!0,snackbarConf:{type:je.d,message:me.t(he.maintenance.actionPerformed)},pageState:{loading:!1}})}).catch(function(t){e.isPageMounted()&&e.setLoadedPageWithErrorState(t)}))}},{key:"render",value:function(){var e=this,t=Object.assign({},this.state.checkboxes),a=ut.map(function(a){var n=t[a.key].checked;return o.a.createElement(Ne.GridTile,{key:a.key,className:we()("col-xs-12 col-md-6 col-lg-4",gt.a.formControl)},o.a.createElement(lt.a,{label:me.t(a.label),checked:n,onCheck:function(){t[a.key].checked=!n,e.setState({checkboxes:t})},labelStyle:{color:"#000000"},iconStyle:{fill:"#000000"},disabled:e.areActionsDisabled()}))});return o.a.createElement("div",null,o.a.createElement("h1",null,me.t(dt),o.a.createElement(tt,{sectionDocsKey:Ia(this.props.sectionKey)})),o.a.createElement(Je.Card,{id:"maintenanceContentContainerId"},o.a.createElement(Je.CardText,null,o.a.createElement("div",{className:we()(gt.a.gridContainer,"row")},a),o.a.createElement(rt.a,{id:"performMaintenanceBtnId",label:me.t(he.maintenance.actionButton),onClick:this.performMaintenance,primary:!0,disabled:this.areActionsDisabled()||0===this.selectedCheckboxesCount()}))))}}]),t}(ze);mt.STATE_PROPERTIES=["checkboxes","loading"];var ht=mt,bt={iconStyle:{fontSize:14},rowStyle:{fontSize:14,height:48},evenRowStyle:{backgroundColor:"#fafafa"},timeColumnStyle:{width:"20%"},messageColumnStyle:{width:"80%"},successStyle:{color:"#8ac542",iconColor:"#8ac542",fontWeight:"bold"},errorStyle:{color:"#ff0000",iconColor:"#ff0000",fontWeight:"bold"},infoStyle:{color:"#000000",iconColor:"#8ac542"}},yt={};yt.SUCCESS={color:"#8ac542",icon:"check",row:Object.assign({},bt.rowStyle,bt.successStyle)},yt.ERROR={color:"#ff0000",icon:"error",row:Object.assign({},bt.rowStyle,bt.errorStyle)},yt.INFO={color:"#000000",icon:"check",iconColor:"#8ac542",row:Object.assign({},bt.rowStyle,bt.infoStyle)};var kt=yt,ft=(a(1625),function(e){var t=e.notifications,a=e.animateIncomplete;return t&&t.length>0?o.a.createElement(Be.m,{selectable:!1},o.a.createElement(Be.n,{displayRowCheckbox:!1},t.map(function(e,t){return o.a.createElement(Be.o,{key:t,displayBorder:!1,style:Object.assign({},kt[e.level].row,(t+1)%2===0?bt.evenRowStyle:{})},o.a.createElement(Be.p,{style:bt.timeColumnStyle},(n=e.time)?"".concat(n.slice(0,10)," ").concat(n.slice(11,19)):""),o.a.createElement(Be.p,{style:bt.messageColumnStyle},e.message," ",function(e){var t=kt[e.level];return t&&t.icon&&e.completed?o.a.createElement(Be.f,{className:"material-icons",style:bt.iconStyle,color:t.iconColor},t.icon):a&&!e.completed?o.a.createElement("span",{className:"notification-icon-busy"},"..."):null}(e)));var n}))):null}),St=5e3,vt=a(68),Et=a.n(vt),xt=function(e){function t(){var e;return Object(fe.a)(this,t),(e=Object(ve.a)(this,Object(Ee.a)(t).call(this))).isAnalyzingTables=function(){return e.state.intervalId},e.startsPooling=function(){return setInterval(function(){e.requestTaskSummary()},St)},e.isJobInProgress=function(e){return e.every(function(e){return!e.completed})},e.updateStateForInProgressJobAccordingTaskSummaryResponse=function(t){var a=(t||[]).reverse(),n=!e.isJobInProgress(a);n&&e.cancelPoollingRequests(),e.context.updateAppState({showSnackbar:!n,pageState:{notifications:n?a.map(function(e){return Object(ke.a)({},e,{completed:!0})}):a,loading:!n}})},e.verifyInProgressJobsForTaskSummaryResponseAndUpdateState=function(t){var a=t||[];if(t&&t.length&&e.isJobInProgress(a)){var n=e.startsPooling();e.context.updateAppState({showSnackbar:!0,snackbarConf:{type:je.c},pageState:{notifications:a.reverse(),loading:!0,intervalId:n}})}},e.state={loading:!1,notifications:[],intervalId:null},e.initResourceTablesGeneration=e.initResourceTablesGeneration.bind(Object(xe.a)(e)),e}return Object(Ce.a)(t,e),Object(Se.a)(t,[{key:"componentWillReceiveProps",value:function(e){var a={};Object.keys(e).forEach(function(n){e.hasOwnProperty(n)&&t.STATE_PROPERTIES.includes(n)&&(a[n]=e[n])}),a!=={}&&this.setState(a)}},{key:"componentDidMount",value:function(){this.requestTaskSummary()}},{key:"componentWillUnmount",value:function(){Object(Ve.a)(Object(Ee.a)(t.prototype),"componentWillUnmount",this).call(this),this.cancelPoollingRequests()}},{key:"cancelPoollingRequests",value:function(){clearInterval(this.state.intervalId)}},{key:"setLoadingPageState",value:function(){this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:je.c},pageState:{loading:!0,notifications:[]}})}},{key:"setLoadedPageWithErrorState",value:function(e){var t=e&&e.message?e.message:me.t(he.resourceTables.unexpectedError);this.cancelPoollingRequests(),this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:je.b,message:t},pageState:{loaded:!0,loading:!1}})}},{key:"initResourceTablesGeneration",value:function(){var e=this,t=this.context.d2.Api.getApi();this.setLoadingPageState(),t.post("resourceTables").then(function(t){if(e.isPageMounted()&&t){var a=setInterval(function(){e.requestTaskSummary()},St);e.setState({intervalId:a})}}).catch(function(t){e.isPageMounted()&&e.setLoadedPageWithErrorState(t)})}},{key:"requestTaskSummary",value:function(){var e=this;this.context.d2.Api.getApi().get("system/tasks/RESOURCE_TABLE").then(function(t){e.isPageMounted()&&(e.isAnalyzingTables()?e.updateStateForInProgressJobAccordingTaskSummaryResponse(t):e.verifyInProgressJobsForTaskSummaryResponseAndUpdateState(t))}).catch(function(t){e.isPageMounted()&&e.setLoadedPageWithErrorState(t)})}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h1",null,me.t(he.resourceTables.title),o.a.createElement(tt,{sectionDocsKey:Ia(this.props.sectionKey)})),o.a.createElement(Je.Card,{className:gt.a.cardContainer},o.a.createElement(Je.CardText,null,o.a.createElement("div",{className:Et.a.description},o.a.createElement("div",null,me.t(he.resourceTables.organisationUnitStructure)," ",o.a.createElement("span",{className:Et.a.tableName},"(_orgunitstructure)")),o.a.createElement("div",null,me.t(he.resourceTables.organistionUnitCategoryOptionCombo)," ",o.a.createElement("span",{className:Et.a.tableName},"(_orgunitstructure)")),o.a.createElement("div",null,me.t(he.resourceTables.categoryOptionGroupSetStructure)," ",o.a.createElement("span",{className:Et.a.tableName},"(_categoryoptiongroupsetstructure)")),o.a.createElement("div",null,me.t(he.resourceTables.dataElementGroupSetStructure)," ",o.a.createElement("span",{className:Et.a.tableName},"(_dataelementgroupsetstructure)")),o.a.createElement("div",null,me.t(he.resourceTables.indicatorGroupSetStructure)," ",o.a.createElement("span",{className:Et.a.tableName},"(_indicatorgroupsetstructure)")),o.a.createElement("div",null,me.t(he.resourceTables.organisationUnitGroupSetStructure)," ",o.a.createElement("span",{className:Et.a.tableName},"(_organisationunitgroupsetstructure)")),o.a.createElement("div",null,me.t(he.resourceTables.categoryStructure)," ",o.a.createElement("span",{className:Et.a.tableName},"(_categorystructure)")),o.a.createElement("div",null,me.t(he.resourceTables.dataElementCategoryOptionComboName)," ",o.a.createElement("span",{className:Et.a.tableName},"(_categoryoptioncomboname)")),o.a.createElement("div",null,me.t(he.resourceTables.dataElementStructure)," ",o.a.createElement("span",{className:Et.a.tableName},"(_dataelementstructure)")),o.a.createElement("div",null,me.t(he.resourceTables.periodStructure)," ",o.a.createElement("span",{className:Et.a.tableName},"(_periodstructure)")),o.a.createElement("div",null,me.t(he.resourceTables.dataPeriodStructure)," ",o.a.createElement("span",{className:Et.a.tableName},"(_dateperiodstructure)")),o.a.createElement("div",null,me.t(he.resourceTables.dataElementCategoryOptionCombinations)," ",o.a.createElement("span",{className:Et.a.tableName},"(_dataelementcategoryoptioncombo)"))),o.a.createElement(Be.j,{id:"generateTablesBtnId",primary:!0,label:me.t(he.resourceTables.actionButton),onClick:this.initResourceTablesGeneration,disabled:this.state.loading}))),this.state.notifications.length>0&&o.a.createElement(Je.Card,{className:gt.a.cardContainer},o.a.createElement(Je.CardText,null,o.a.createElement(ft,{notifications:this.state.notifications,animateIncomplete:!0}))))}}]),t}(ze);xt.STATE_PROPERTIES=["loading","notifications","intervalId"];var Ct=xt,Ot=a(84),It=function(e){return o.a.createElement("span",null,new Intl.NumberFormat(sessionStorage.getItem("uiLocale")).format(e.value))},Pt=a(185),Tt=a.n(Pt),At=function(e){function t(){return Object(fe.a)(this,t),Object(ve.a)(this,Object(Ee.a)(t).apply(this,arguments))}return Object(Ce.a)(t,e),Object(Se.a)(t,[{key:"render",value:function(){var e=this.props.elements.map(function(e){return o.a.createElement(Ot.TableRow,{key:e.label,className:"data-statistics-table-row"},o.a.createElement(Ot.TableRowColumn,null,e.label),o.a.createElement(Ot.TableRowColumn,null,o.a.createElement(It,{value:e.count})))});return o.a.createElement(Ot.Table,{selectable:!1,className:Tt.a.statisticsTable},o.a.createElement(Ot.TableHeader,{className:"data-statistics-table-header",displaySelectAll:!1,adjustForCheckbox:!1,enableSelectAll:!1},o.a.createElement(Ot.TableRow,null,o.a.createElement(Ot.TableHeaderColumn,null,this.props.label))),o.a.createElement(Ot.TableBody,{displayRowCheckbox:!1,stripedRows:!1},e))}}]),t}(n.PureComponent),Rt=function(e){var t=e.label,a=e.elements;return o.a.createElement(Je.Card,{className:we()(Tt.a.card,"data-statistics-table")},o.a.createElement(At,{label:t,elements:a}))},jt=function(e){function t(){var e;return Object(fe.a)(this,t),(e=Object(ve.a)(this,Object(Ee.a)(t).call(this))).hasTables=function(){return e.state.tables&&e.state.tables.constructor===Object&&Object.keys(e.state.tables).length>0},e.state={tables:{},loaded:!1,loading:!1},e}return Object(Ce.a)(t,e),Object(Se.a)(t,[{key:"componentDidMount",value:function(){var e=this,a=this.context.d2.Api.getApi();this.state.loading||this.state.loaded||(this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:je.c,message:me.t(he.dataStatistics.loadingMessage)},pageState:{loaded:!1,tables:{},loading:!0}}),a&&a.get("dataSummary").then(function(a){if(e.isPageMounted()){var n={};n.objectCounts=t.objectCountsTableObjectToShowFromServerResponse(a.objectCounts),n.activeUsers=t.activeUsersTableObjectToShowFromServerResponse(a.activeUsers),n.userInvitations=t.userInvitationsTableObjectToShowFromServerResponse(a.userInvitations),n.dataValueCount=t.dataValueCountsTableObjectToShowFromServerResponse(a.dataValueCount),n.eventCount=t.eventCountsTableObjectToShowFromServerResponse(a.eventCount),e.context.updateAppState({showSnackbar:!1,pageState:{loaded:!0,tables:n,loading:!1}})}}).catch(function(){e.isPageMounted()&&e.context.updateAppState({showSnackbar:!0,snackbarConf:{type:je.b,message:me.t(he.dataStatistics.errorMessage)},pageState:{loaded:!0,tables:{},loading:!1}})}))}},{key:"componentWillReceiveProps",value:function(e){var a={};Object.keys(e).forEach(function(n){e.hasOwnProperty(n)&&t.STATE_PROPERTIES.includes(n)&&(a[n]=e[n])}),a!=={}&&this.setState(a)}},{key:"render",value:function(){var e=o.a.createElement(Je.Card,{style:{display:this.state.loading?"none":"block"}},o.a.createElement(Je.CardText,null,me.t(he.dataStatistics.noDataMessage)));return o.a.createElement("div",null,o.a.createElement("h1",{className:Tt.a.header},me.t(he.dataStatistics.title),o.a.createElement(tt,{sectionDocsKey:Ia(this.props.sectionKey)})),this.hasTables()?o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-6"},this.state.tables.objectCounts&&o.a.createElement(Rt,{label:this.state.tables.objectCounts.label,elements:this.state.tables.objectCounts.elements}),this.state.tables.activeUsers&&o.a.createElement(Rt,{label:this.state.tables.activeUsers.label,elements:this.state.tables.activeUsers.elements})),o.a.createElement("div",{className:"col-md-6"},this.state.tables.userInvitations&&o.a.createElement(Rt,{label:this.state.tables.userInvitations.label,elements:this.state.tables.userInvitations.elements}),this.state.tables.dataValueCount&&o.a.createElement(Rt,{label:this.state.tables.dataValueCount.label,elements:this.state.tables.dataValueCount.elements}),this.state.tables.eventCount&&o.a.createElement(Rt,{label:this.state.tables.eventCount.label,elements:this.state.tables.eventCount.elements}))):e)}}]),t}(ze);jt.STATE_PROPERTIES=["tables","loaded","loading"],jt.objectCountsTableObjectToShowFromServerResponse=function(e){if(e){for(var t=Object.keys(e),a={label:me.t(he.dataStatistics.objectType),elements:[]},n=0;n<t.length;n++){var o=t[n];a.elements.push({label:me.t(he.dataStatistics.objects[o]),count:e[o]})}return a}return{}},jt.translatedTimeLabelFromIntProperty=function(e){var t=me.t(he.dataStatistics.lastHour);if(1===e)t=me.t(he.dataStatistics.today);else if(e>0){var a=me.t(he.dataStatistics.last),n=me.t(he.dataStatistics.days);t="".concat(a," ").concat(e," ").concat(n)}return t},jt.activeUsersTableObjectToShowFromServerResponse=function(e){if(e){for(var t=Object.keys(e),a={label:me.t(he.dataStatistics.usersLoggedIn),elements:[]},n=0;n<t.length;n++){var o=t[n];a.elements.push({label:jt.translatedTimeLabelFromIntProperty(parseInt(o,10)),count:e[o]})}return a}return{}},jt.userInvitationsTableObjectToShowFromServerResponse=function(e){if(e){var t={label:me.t(he.dataStatistics.userAccountInvitations),elements:[]};return e.hasOwnProperty("all")&&t.elements.push({label:me.t(he.dataStatistics.pedingInvitations),count:e.all}),e.hasOwnProperty("expired")&&t.elements.push({label:me.t(he.dataStatistics.expiredInvitations),count:e.expired}),t}return{}},jt.dataValueCountsTableObjectToShowFromServerResponse=function(e){if(e){for(var t=Object.keys(e),a={label:me.t(he.dataStatistics.dataValues),elements:[]},n=0;n<t.length;n++){var o=t[n];a.elements.push({label:jt.translatedTimeLabelFromIntProperty(parseInt(o,10)),count:e[o]})}return a}return{}},jt.eventCountsTableObjectToShowFromServerResponse=function(e){if(e){for(var t=Object.keys(e),a={label:me.t(he.dataStatistics.events),elements:[]},n=0;n<t.length;n++){var o=t[n];a.elements.push({label:jt.translatedTimeLabelFromIntProperty(parseInt(o,10)),count:e[o]})}return a}return{}};var _t=jt,Dt=a(141),wt=a(135),Nt=a.n(wt),Mt=a(82),Ut=a.n(Mt),Lt=a(73),Wt=a.n(Lt),Gt=a(136),Vt=a.n(Gt),Bt=a(234),Ft=a.n(Bt),qt=a(781),Ht=a(371),zt=a(364),Jt=a.n(zt),Kt=a(176),Qt=a.n(Kt),Yt=a(238),Zt=a(773),Xt=a(774),$t=a(775),ea=a(783),ta=a(776),aa=a(125),na=a.n(aa),oa={minWidth:360,marginRight:20},ia=function(e){function t(){var e;return Object(fe.a)(this,t),(e=Object(ve.a)(this,Object(Ee.a)(t).call(this))).state={selected:[],dataSet:null,orgUnitPaths:null},e.onDataSetChange=e.onDataSetChange.bind(Object(xe.a)(e)),e.onPeriodChange=e.onPeriodChange.bind(Object(xe.a)(e)),e.handleSelectionUpdate=e.handleSelectionUpdate.bind(Object(xe.a)(e)),e.handleOrgUnitClick=e.handleOrgUnitClick.bind(Object(xe.a)(e)),e.changeRoot=e.changeRoot.bind(Object(xe.a)(e)),e}return Object(Ce.a)(t,e),Object(Se.a)(t,[{key:"onDataSetChange",value:function(e){var t=this,a=this.context.d2,n=e.id;null!==this.state.dataSet&&n===this.state.dataSet.id||(this.props.updateSeletedDataSetId(n),this.setState({rootWithMembers:null,selected:[],dataSet:e}),Promise.all([a.models.organisationUnits.list({paging:!1,level:1,fields:"id,displayName,path,children::isNotEmpty,memberCount",memberCollection:"dataSets",memberObject:n}),a.models.dataSets.get(n,{paging:!1,fields:"organisationUnits[id,path]"})]).then(function(e){var a=Object(Dt.a)(e,2),n=a[0],o=a[1],i=n.toArray()[0];t.setState({rootWithMembers:i,selected:[],orgUnitPaths:o.organisationUnits.toArray().map(function(e){return e.path})})}).catch(function(e){if(t.isPageMounted()){var a=e&&e.message?e.message:me.t(he.messages.unexpectedError);t.context.updateAppState({showSnackbar:!0,loading:!1,snackbarConf:{type:je.b,message:a},pageState:Object(ke.a)({},t.state)})}}))}},{key:"onPeriodChange",value:function(e){this.props.updateSelectedPeriodId(e)}},{key:"handleSelectionUpdate",value:function(e){this.setState({selected:e}),this.props.updateSelectedOrgUnits(this.state.selected)}},{key:"handleOrgUnitClick",value:function(e,t){if(this.state.selected.includes(t.path)){var a=this.state.selected;a.splice(a.indexOf(t.path),1),this.setState({selected:a})}else{var n=this.state.selected;n.push(t.path),this.setState({selected:n})}this.props.updateSelectedOrgUnits(this.state.selected)}},{key:"changeRoot",value:function(e){this.setState({currentRoot:e})}},{key:"render",value:function(){var e=this.props.dataSets.map(function(e){return{id:e.id,name:e.displayName,periodType:e.periodType}}),t=me.t(he.lockException.selectADataSet),a=null;return this.state.dataSet&&(t=me.t(he.lockException.dataSet),a=this.state.dataSet.id),o.a.createElement("div",{id:"addLockExceptionFormId"},o.a.createElement("div",{className:na.a.selectsContainer},o.a.createElement(ea.a,{style:oa,label:t,items:e,onChange:this.onDataSetChange,value:a}),this.state.dataSet&&o.a.createElement("span",{id:"idPeriodPicker"},o.a.createElement(ta.a,{periodType:this.state.dataSet.periodType,onPickPeriod:this.onPeriodChange}))),this.state.dataSet?o.a.createElement(Jt.a,{className:na.a.organisationUnitTreeCard},o.a.createElement(Qt.a,{className:na.a.organisationUnitTreeContainer},o.a.createElement("div",{className:na.a.left},this.state.rootWithMembers?o.a.createElement(Yt.a,{root:this.state.rootWithMembers,selected:this.state.selected,currentRoot:this.state.currentRoot,initiallyExpanded:["/".concat(this.state.rootWithMembers.id)],memberCollection:"dataSets",memberObject:this.state.dataSet.id,onSelectClick:this.handleOrgUnitClick,onChangeCurrentRoot:this.changeRoot,orgUnitsPathsToInclude:this.state.orgUnitPaths}):o.a.createElement("span",null,me.t(he.lockException.updatingTree))),o.a.createElement("div",{className:na.a.right},o.a.createElement("div",null,this.state.currentRoot?o.a.createElement("div",null,me.t(he.lockException.organisationUnitsWithin)," ",o.a.createElement("span",{className:na.a.ouLabel},this.state.currentRoot.displayName),":"):o.a.createElement("div",null,me.t(he.lockException.selectOrganisationUnits)),o.a.createElement(Zt.a,{levels:this.props.levels,selected:this.state.selected,currentRoot:this.state.currentRoot,onUpdateSelection:this.handleSelectionUpdate}),o.a.createElement(Xt.a,{groups:this.props.groups,selected:this.state.selected,currentRoot:this.state.currentRoot,onUpdateSelection:this.handleSelectionUpdate}),o.a.createElement($t.a,{selected:this.state.selected,currentRoot:this.state.currentRoot,onUpdateSelection:this.handleSelectionUpdate}))))):null)}}]),t}(n.Component);ia.contextTypes={d2:Ie.a.object};var sa=ia,ra=function(e){var t=e.pageSize,a=e.total,n=e.pageCount,o=a-(a-(n-(n-e.page))*t),i=o;return"".concat(o-t+1," - ").concat(i>a?a:i)},ca=(a(1628),a(1629),a(1630),a(62)),la=a.n(ca),da={dialog:{maxWidth:"80%"},addButton:{position:"fixed",bottom:"1.5rem",right:"1.5rem"}},ua=function(e){function t(e,a){var n;Object(fe.a)(this,t),(n=Object(ve.a)(this,Object(Ee.a)(t).call(this,e,a))).state={lockExceptions:[],showAddDialogOpen:!1,selectedLockException:null,levels:null,groups:null,dataSets:[],selectedOrgUnits:[],selectedDataSetId:null,selectedPeriodId:null,pager:t.initialPager,loading:!1,loaded:!1,atBatchDeletionPage:!1},n.updateSelectedOrgUnits=n.updateSelectedOrgUnits.bind(Object(xe.a)(n)),n.updateSeletedDataSetId=n.updateSeletedDataSetId.bind(Object(xe.a)(n)),n.updateSelectedPeriodId=n.updateSelectedPeriodId.bind(Object(xe.a)(n)),n.removeLockException=n.removeLockException.bind(Object(xe.a)(n)),n.showLockExceptionFormDialog=n.showLockExceptionFormDialog.bind(Object(xe.a)(n)),n.closeLockExceptionFormDialog=n.closeLockExceptionFormDialog.bind(Object(xe.a)(n)),n.addLockException=n.addLockException.bind(Object(xe.a)(n)),n.backToLockExceptions=n.backToLockExceptions.bind(Object(xe.a)(n)),n.goToBatchDeletionPage=n.goToBatchDeletionPage.bind(Object(xe.a)(n)),n.onNextPageClick=n.onNextPageClick.bind(Object(xe.a)(n)),n.onPreviousPageClick=n.onPreviousPageClick.bind(Object(xe.a)(n));var o=a.d2;return Object.assign(o.i18n.translations,{period:me.t(he.lockException.period),data_set:me.t(he.lockException.dataSet),organisation_unit:me.t(he.lockException.organisationUnit),organisation_unit_group:me.t(he.lockException.organisationUnitGroup),organisation_unit_level:me.t(he.lockException.organisationUnitLevel),select:me.t(he.lockException.select),deselect:me.t(he.lockException.deselect),select_all:me.t(he.lockException.selectAll),deselect_all:me.t(he.lockException.deselectAll),name:me.t(he.lockException.name),show:me.t(he.lockException.show),remove:me.t(he.lockException.remove),actions:me.t(he.lockException.actions),of_page:me.t(he.lockException.ofPage),week:me.t(he.lockException.week),month:me.t(he.lockException.month),year:me.t(he.lockException.year),biMonth:me.t(he.lockException.biMonth),day:me.t(he.lockException.day),jan:me.t(he.lockException.jan),feb:me.t(he.lockException.feb),mar:me.t(he.lockException.mar),apr:me.t(he.lockException.apr),may:me.t(he.lockException.may),jun:me.t(he.lockException.jun),jul:me.t(he.lockException.jul),aug:me.t(he.lockException.aug),sep:me.t(he.lockException.sep),oct:me.t(he.lockException.oct),nov:me.t(he.lockException.nov),dec:me.t(he.lockException.dec),"jan-feb":me.t(he.lockException.janFeb),"mar-apr":me.t(he.lockException.marApr),"may-jun":me.t(he.lockException.mayJun),"jul-aug":me.t(he.lockException.julAug),"sep-oct":me.t(he.lockException.sepOct),"nov-dec":me.t(he.lockException.novDec),quarter:me.t(he.lockException.quarter),Q1:me.t(he.lockException.Q1),Q2:me.t(he.lockException.Q2),Q3:me.t(he.lockException.Q3),Q4:me.t(he.lockException.Q4),sixMonth:me.t(he.lockException.sixMonth),"jan-jun":me.t(he.lockException.janJun),"jul-dec":me.t(he.lockException.julDec),"apr-sep":me.t(he.lockException.aprSep),"oct-mar":me.t(he.lockException.octMar)}),n}return Object(Ce.a)(t,e),Object(Se.a)(t,[{key:"prepareLockExceptionsResponseToDataTable",value:function(e){var t=this;return e.map(function(e){var a={};return t.state.atBatchDeletionPage||(a.organisationUnit=e.organisationUnit.displayName,a.organisationUnitId=e.organisationUnit.id),a.period=e.period.displayName,a.periodId=e.period.id,a.dataSet=e.dataSet.displayName,a.dataSetId=e.dataSet.id,a})}},{key:"dataTableColumns",value:function(){return this.state.atBatchDeletionPage?["dataSet","period"]:["organisationUnit","dataSet","period"]}},{key:"header",value:function(){return this.state.atBatchDeletionPage?o.a.createElement("div",{className:la.a.headerContainer},o.a.createElement("h1",{className:la.a.header},o.a.createElement(Wt.a,{onClick:this.backToLockExceptions},o.a.createElement(Ue.a,{className:we()("material-icons",la.a.backArrowIcon)},"arrow_back")),o.a.createElement("span",null,me.t(he.lockException.batchDeletionHeader)),o.a.createElement("span",{className:la.a.headerDivider}," | "),o.a.createElement("span",{className:la.a.subHeader},me.t(he.lockException.batchDeletionSubHeader)))):o.a.createElement("div",{className:la.a.headerContainer},o.a.createElement("h1",{className:la.a.header},me.t(he.lockException.title),o.a.createElement(tt,{sectionDocsKey:Ia(this.props.sectionKey)})),o.a.createElement("div",null,o.a.createElement(rt.a,{className:la.a.actionButton,label:me.t(he.lockException.actionButton),onClick:this.goToBatchDeletionPage,primary:!0,disabled:this.areActionsDisabled()})))}},{key:"areActionsDisabled",value:function(){return this.state.loading}},{key:"addLockExceptionEnabled",value:function(){return this.state.selectedOrgUnits.length>0&&this.state.selectedDataSetId&&this.state.selectedPeriodId}},{key:"componentDidMount",value:function(){this.loadLockExceptionsForPager(this.state.pager)}},{key:"componentWillReceiveProps",value:function(e){var a={};Object.keys(e).forEach(function(n){e.hasOwnProperty(n)&&t.STATE_PROPERTIES.includes(n)&&(a[n]=e[n])}),a!=={}&&this.setState(a)}},{key:"loadLockExceptionsForPager",value:function(e,t){var a=this,n=this.context.d2.Api.getApi(),o="lockExceptions?page=".concat(e.page,"&pageSize=").concat(e.pageSize)+"&fields=name,period[id,displayName],organisationUnit[id,displayName],dataSet[id,displayName]&order=name:asc";(t||!this.state.loading&&!this.state.loaded)&&(this.context.updateAppState(this.state.deleteInProgress||this.state.addInProgress?{atBatchDeletionPage:!1,loaded:!1,loading:!0}:{showSnackbar:!0,snackbarConf:{type:je.c,message:me.t(he.lockException.loading)},pageState:{atBatchDeletionPage:!1,loaded:!1,loading:!0}}),n.get(o).then(function(e){var t;a.isPageMounted()&&(a.state.deleteInProgress?(t={showSnackbar:!0,snackbarConf:{type:je.d,message:me.t(he.lockException.removedMessage)}},a.state.deleteInProgress=!1):a.state.addInProgress?(t={showSnackbar:!0,snackbarConf:{type:je.d,message:me.t(he.lockException.addedMessage)}},a.state.addInProgress=!1):t={showSnackbar:!1},a.context.updateAppState(Object(ke.a)({},t,{pageState:{loaded:!0,lockExceptions:a.prepareLockExceptionsResponseToDataTable(e.lockExceptions),pager:e.pager,loading:!1}})))}).catch(function(e){if(a.isPageMounted()){var t=e&&e.message?e.message:me.t(he.messages.unexpectedError);a.context.updateAppState({showSnackbar:!0,snackbarConf:{type:je.b,message:t},pageState:{loaded:!0,loading:!1}})}}))}},{key:"loadLockExceptionCombinations",value:function(){var e=this,t=this.context.d2.Api.getApi();this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:je.c,message:me.t(he.lockException.loadingMessage)},pageState:{atBatchDeletionPage:!0,loaded:!1,loading:!0}}),t.get("lockExceptions/combinations?fields=name, period[id,displayName], dataSet[id,displayName]").then(function(t){e.isPageMounted()&&e.context.updateAppState({showSnackbar:!1,pageState:{loaded:!0,lockExceptions:e.prepareLockExceptionsResponseToDataTable(t.lockExceptions),loading:!1}})}).catch(function(t){if(e.isPageMounted()){var a=t&&t.message?t.message:me.t(he.messages.unexpectedError);e.context.updateAppState({showSnackbar:!0,snackbarConf:{type:je.b,message:a},pageState:{loaded:!0,loading:!1}})}})}},{key:"updateSelectedOrgUnits",value:function(e){this.setState({selectedOrgUnits:e})}},{key:"updateSeletedDataSetId",value:function(e){this.setState({selectedDataSetId:e})}},{key:"updateSelectedPeriodId",value:function(e){this.setState({selectedPeriodId:e})}},{key:"onNextPageClick",value:function(){var e=Object.assign({},this.state.pager);e.page+=1,this.loadLockExceptionsForPager(e,!0)}},{key:"onPreviousPageClick",value:function(){var e=Object.assign({},this.state.pager);e.page-=1,this.loadLockExceptionsForPager(e,!0)}},{key:"backToLockExceptions",value:function(){this.loadLockExceptionsForPager(this.state.pager,!0)}},{key:"goToBatchDeletionPage",value:function(){this.loadLockExceptionCombinations()}},{key:"removeLockException",value:function(e){var a=this;this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:je.a,message:me.t(he.lockException.confirmDeleteMessage),action:me.t(he.lockException.confirmButton),onActionClick:function(){var n=a.context.d2.Api.getApi(),o="lockExceptions?pe=".concat(e.periodId,"&ds=").concat(e.dataSetId);e.organisationUnitId&&(o+="&ou=".concat(e.organisationUnitId)),a.context.updateAppState({showSnackbar:!0,snackbarConf:{type:je.c,message:me.t(he.lockException.loadingMessage)},pageState:Object(ke.a)({},a.state,{loading:!0})}),n.delete(o).then(function(){if(a.isPageMounted()){var n=Object(ke.a)({},a.state,{loading:!1});a.state.atBatchDeletionPage?(n.lockExceptions=a.state.lockExceptions.filter(function(t){return t.periodId!==e.periodId||t.dataSetId!==e.dataSetId}),a.context.updateAppState({showSnackbar:!0,snackbarConf:{type:je.d,message:me.t(he.lockException.removedMessage)},pageState:n})):(a.state.deleteInProgress=!0,a.context.updateAppState({pageState:n}),a.loadLockExceptionsForPager(t.initialPager,!1))}}).catch(function(e){if(a.isPageMounted()){var t=e&&e.message?e.message:me.t(he.messages.unexpectedError);a.context.updateAppState({showSnackbar:!0,snackbarConf:{type:je.b,message:t},pageState:Object(ke.a)({},a.state,{loading:!1})})}})}}})}},{key:"showLockExceptionFormDialog",value:function(){var e=this,t=this.context.d2;this.state.levels&&this.state.groups&&this.state.dataSets.length>0?this.setState({showAddDialogOpen:!0}):Promise.all([t.models.organisationUnitLevel.list({paging:!1,fields:"id,level,displayName",order:"level:asc"}),t.models.organisationUnitGroup.list({paging:!1,fields:"id,displayName"}),t.models.dataSet.list({paging:!1,fields:"id,displayName,periodType"})]).then(function(t){var a=Object(Dt.a)(t,3),n=a[0],o=a[1],i=a[2];e.isPageMounted()&&e.setState({showAddDialogOpen:!0,levels:n,groups:o,dataSets:i.toArray()})}).catch(function(t){if(e.isPageMounted()){var a=t&&t.message?t.message:me.t(he.messages.unexpectedError);e.context.updateAppState({showSnackbar:!0,snackbarConf:{type:je.b,message:a},pageState:Object(ke.a)({},e.state,{loading:!1})})}})}},{key:"closeLockExceptionFormDialog",value:function(){this.setState({showAddDialogOpen:!1,selectedOrgUnits:[],selectedDataSetId:null,selectedPeriodId:null})}},{key:"addLockException",value:function(){var e=this;if(this.addLockExceptionEnabled()){var a=this.context.d2.Api.getApi(),n=this.state.selectedOrgUnits.map(function(e){var t=e.split("/");return t[t.length-1]}),o=new FormData;o.append("ou","[".concat(n.join(","),"]")),o.append("pe",this.state.selectedPeriodId),o.append("ds",this.state.selectedDataSetId),this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:je.c,message:me.t(he.lockException.addingMessage)},pageState:{showAddDialogOpen:!1,selectedOrgUnits:[],selectedDataSetId:null,selectedPeriodId:null,loading:!0}}),a.post("lockExceptions",o).then(function(){e.isPageMounted()&&(e.context.updateAppState({pageState:{loaded:!1,loading:!1}}),e.state.addInProgress=!0,e.loadLockExceptionsForPager(t.initialPager,!1))}).catch(function(t){if(e.isPageMounted()){var a=t&&t.message?t.message:me.t(he.messages.unexpectedError);e.context.updateAppState({showSnackbar:!0,snackbarConf:{type:je.b,message:a},pageState:Object(ke.a)({},e.state,{loading:!1})})}})}}},{key:"render",value:function(){var e=this,t=ra(this.state.pager),a={hasNextPage:function(){return e.state.pager.page<e.state.pager.pageCount},hasPreviousPage:function(){return e.state.pager.page>1},onNextPageClick:this.onNextPageClick,onPreviousPageClick:this.onPreviousPageClick,total:this.state.pager.total,currentlyShown:t},n=[o.a.createElement(Ut.a,{className:la.a.actionButton,label:me.t(he.lockException.cancelButton),onClick:this.closeLockExceptionFormDialog}),o.a.createElement(rt.a,{className:la.a.actionButton,primary:Boolean(!0),label:me.t(he.lockException.addButton),onClick:this.addLockException,disabled:!this.addLockExceptionEnabled()})];return o.a.createElement("div",{className:la.a.lockExceptionsTable},this.header(),this.state.lockExceptions&&this.state.lockExceptions.length?o.a.createElement("div",null,!this.areActionsDisabled()&&!this.state.atBatchDeletionPage&&o.a.createElement("div",{className:la.a.pagination},o.a.createElement(Ht.a,a)),o.a.createElement(qt.a,{columns:this.dataTableColumns(),rows:this.state.lockExceptions,contextMenuActions:{remove:this.removeLockException},contextMenuIcons:{remove:"delete"}}),!this.areActionsDisabled()&&!this.state.atBatchDeletionPage&&o.a.createElement("div",{className:we()(la.a.pagination,la.a.marginForAddButton)},o.a.createElement(Ht.a,a))):o.a.createElement(Je.Card,{style:{display:this.state.loading?"none":"block"}},o.a.createElement(Je.CardText,null,me.t(he.lockException.noDataMessage))),this.state.levels&&this.state.groups&&this.state.dataSets.length>0&&o.a.createElement(Nt.a,{title:me.t(he.lockException.addLockExceptionFormTitle),actions:n,modal:!1,open:this.state.showAddDialogOpen,contentStyle:da.dialog,onRequestClose:this.closeLockExceptionFormDialog},o.a.createElement(sa,{levels:this.state.levels,groups:this.state.groups,dataSets:this.state.dataSets,updateSelectedOrgUnits:this.updateSelectedOrgUnits,updateSeletedDataSetId:this.updateSeletedDataSetId,updateSelectedPeriodId:this.updateSelectedPeriodId})),!this.state.atBatchDeletionPage&&!this.areActionsDisabled()&&o.a.createElement(Vt.a,{id:"addExceptionButtonId",style:da.addButton,onClick:this.showLockExceptionFormDialog},o.a.createElement(Ft.a,null)))}}]),t}(ze);ua.STATE_PROPERTIES=["lockExceptions","showAddDialogOpen","selectedLockException","levels","groups","dataSets","selectedOrgUnits","selectedDataSetId","selectedPeriodId","pager","loading","atBatchDeletionPage"],ua.initialPager={pageSize:20,page:1,total:0,pageCount:1};var pa=ua,ga=a(63),ma=a.n(ga),ha=function(e){function t(){var e;return Object(fe.a)(this,t),(e=Object(ve.a)(this,Object(Ee.a)(t).call(this))).state={selected:[],dataSets:null,rootWithMember:null,loading:!1,dataSetsSelectedCount:1},e.handleOrgUnitClick=e.handleOrgUnitClick.bind(Object(xe.a)(e)),e.dataSetsSelectRef=e.dataSetsSelectRef.bind(Object(xe.a)(e)),e.dataSetsSelectClick=e.dataSetsSelectClick.bind(Object(xe.a)(e)),e.generateMinMaxValueClick=e.generateMinMaxValueClick.bind(Object(xe.a)(e)),e.removeMinMaxValueClick=e.removeMinMaxValueClick.bind(Object(xe.a)(e)),e}return Object(Ce.a)(t,e),Object(Se.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentWillReceiveProps",value:function(e){var a={};Object.keys(e).forEach(function(n){e.hasOwnProperty(n)&&t.STATE_PROPERTIES.includes(n)&&(a[n]=e[n])}),a!=={}&&this.setState(a)}},{key:"isUserInteractionDisabled",value:function(){return this.state.loading||null==this.state.dataSets||null===this.state.rootWithMembers}},{key:"isDataSetSelected",value:function(){return 0===this.state.dataSetsSelectedCount}},{key:"loadData",value:function(){var e=this,t=this.context.d2;null!=this.state.dataSets&&null!=this.state.rootWithMember||Promise.all([t.models.organisationUnits.list({paging:!1,level:1,fields:"id,displayName,path,children::isNotEmpty,memberCount"}),t.models.dataSet.list({paging:!1,fields:"id,displayName"})]).then(function(t){var a=Object(Dt.a)(t,2),n=a[0],o=a[1];if(e.isPageMounted()){var i=n.toArray(),s=i.map(function(e){return e.path});e.setState({rootWithMembers:i[0],dataSets:o.toArray(),selected:s})}}).catch(function(){e.isPageMounted()&&e.context.updateAppState({showSnackbar:!0,snackbarConf:{type:je.b,message:me.t(he.minMaxValueGeneration.notPossibleToLoadMessage)},pageState:Object(ke.a)({},e.state,{loading:!1})})})}},{key:"dataSetsSelectRef",value:function(e){this.dataSetsSelect=e}},{key:"dataSetsSelectClick",value:function(){this.setState({dataSetsSelectedCount:this.dataSetsSelect.selectedOptions.length})}},{key:"handleOrgUnitClick",value:function(e,t){this.state.selected.includes(t.path)||this.setState({selected:[t.path]})}},{key:"generateMinMaxValueClick",value:function(){var e=this;if(0!==this.dataSetsSelect.selectedOptions.length&&0!==this.state.selected.length){for(var t=this.context.d2.Api.getApi(),a=this.state.selected[0].split("/"),n=a[a.length-1],o=[],i=0;i<this.dataSetsSelect.selectedOptions.length;i++)o.push(this.dataSetsSelect.selectedOptions[i].value);this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:je.c,message:me.t(he.minMaxValueGeneration.performingMessage)},pageState:Object(ke.a)({},this.state,{loading:!0})}),t.post("/minMaxValues",{organisationUnit:n,dataSets:o}).then(function(){e.isPageMounted()&&e.context.updateAppState({showSnackbar:!0,snackbarConf:{type:je.d,message:me.t(he.minMaxValueGeneration.minMaxGenerationDone)},pageState:Object(ke.a)({},e.state,{loading:!1})})}).catch(function(){e.isPageMounted()&&e.context.updateAppState({showSnackbar:!0,snackbarConf:{type:je.b,message:me.t(he.messages.unexpectedError)},pageState:Object(ke.a)({},e.state,{loading:!1})})})}else this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:je.e,message:me.t(he.minMaxValueGeneration.warningMessage)},pageState:Object(ke.a)({},this.state,{loading:!1})})}},{key:"removeMinMaxValueClick",value:function(){var e=this;if(0!==this.dataSetsSelect.selectedOptions.length&&0!==this.state.selected.length){for(var t=this.context.d2.Api.getApi(),a=this.state.selected[0].split("/"),n=a[a.length-1],o=[],i=0;i<this.dataSetsSelect.selectedOptions.length;i++)o.push(this.dataSetsSelect.selectedOptions[i].value);this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:je.c,message:me.t(he.minMaxValueGeneration.removingMessage)},pageState:Object(ke.a)({},this.state,{loading:!0})}),t.delete("".concat("/minMaxValues","/").concat(n,"?ds=").concat(o)).then(function(){e.isPageMounted()&&e.context.updateAppState({showSnackbar:!0,snackbarConf:{type:je.d,message:me.t(he.minMaxValueGeneration.minMaxRemovalDone)},pageState:Object(ke.a)({},e.state,{loading:!1})})}).catch(function(){e.isPageMounted()&&e.context.updateAppState({showSnackbar:!0,snackbarConf:{type:je.b,message:me.t(he.messages.unexpectedError)},pageState:Object(ke.a)({},e.state,{loading:!1})})})}else this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:je.e,message:me.t(he.minMaxValueGeneration.warningMessage)},pageState:Object(ke.a)({},this.state,{loading:!1})})}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h1",{className:ma.a.header},me.t(he.minMaxValueGeneration.title),o.a.createElement(tt,{sectionDocsKey:Ia(this.props.sectionKey)})),o.a.createElement(Je.Card,null,o.a.createElement(Je.CardText,null,o.a.createElement("div",{className:ma.a.container},this.state.dataSets?o.a.createElement("div",{className:ma.a.left},o.a.createElement("div",{className:ma.a.label},me.t(he.minMaxValueGeneration.dataSet)),o.a.createElement("select",{multiple:!0,onClick:this.dataSetsSelectClick,disabled:this.isUserInteractionDisabled(),className:ma.a.select,ref:this.dataSetsSelectRef},this.state.dataSets.map(function(e){return o.a.createElement("option",{key:e.id,value:e.id,className:ma.a.options},e.displayName)}))):o.a.createElement("div",{className:ma.a.left},o.a.createElement("span",null,me.t(he.minMaxValueGeneration.loadingDataSetsMessage))),this.state.rootWithMembers?o.a.createElement("div",{className:ma.a.right},o.a.createElement("div",{className:ma.a.label},me.t(he.minMaxValueGeneration.organisationUnitSelect)),o.a.createElement("div",{className:ma.a.tree},o.a.createElement(Yt.a,{className:ma.a.tree,hideMemberCount:!0,root:this.state.rootWithMembers,selected:this.state.selected,initiallyExpanded:["/".concat(this.state.rootWithMembers.id)],onSelectClick:this.handleOrgUnitClick}))):o.a.createElement("div",{className:ma.a.right},o.a.createElement("span",null,me.t(he.minMaxValueGeneration.updatingTree)))),o.a.createElement(rt.a,{id:"generateMinMaxBtnId",className:ma.a.actionButton,primary:!0,label:me.t(he.minMaxValueGeneration.actionButton),onClick:this.generateMinMaxValueClick,disabled:this.isUserInteractionDisabled()||this.isDataSetSelected()}),o.a.createElement(Ut.a,{id:"removeMinMaxBtnId",className:ma.a.actionButton,secondary:!0,label:me.t(he.minMaxValueGeneration.removeButton),onClick:this.removeMinMaxValueClick,disabled:this.isUserInteractionDisabled()||this.isDataSetSelected()}))))}}]),t}(ze);ha.STATE_PROPERTIES=["selected","dataSets","rootWithMember","loading","dataSetsSelectedCount"];for(var ba=ha,ya=5e3,ka=-1,fa=[{key:ka,value:ka,displayName:he.analytics.allLastYears}],Sa=1;Sa<=10;Sa++)fa.push({key:Sa,value:Sa,displayName:Sa});var va=fa,Ea=[{key:"skipAggregate",label:he.analytics.skipAggregate},{key:"skipResourceTables",label:he.analytics.skipResourceTables},{key:"skipEvents",label:he.analytics.skipEvents},{key:"skipEnrollment",label:he.analytics.skipEnrollment}],xa=function(e){function t(){var e;Object(fe.a)(this,t),(e=Object(ve.a)(this,Object(Ee.a)(t).call(this))).isAnalyzingTables=function(){return!!e.state.intervalId},e.startsPooling=function(){return setInterval(function(){e.requestTaskSummary()},ya)},e.isJobInProgress=function(e){return e.every(function(e){return!e.completed})},e.updateStateForInProgressJobAccordingTaskSummaryResponse=function(t){var a=t||[],n=!e.isJobInProgress(a);n&&e.cancelPoollingRequests(),e.context.updateAppState({showSnackbar:!n,pageState:{notifications:e.getUpdatedNotifications(a),loading:!n}})},e.verifyInProgressJobsForTaskSummaryResponseAndUpdateState=function(t){if(t&&t.length&&e.isJobInProgress(t)){var a=e.startsPooling();e.context.updateAppState({showSnackbar:!0,snackbarConf:{type:je.c},pageState:{notifications:e.getUpdatedNotifications(t),loading:!0,intervalId:a}})}},e.toggleCheckbox=function(t,a){return function(){var n=Object.assign({},t),o=n[a].checked;n[a].checked=!o,e.setState({checkboxes:n})}},e.renderCheckbox=function(t){return o.a.createElement(Be.g,{key:t.key,className:we()("col-xs-12 col-md-6",gt.a.formControl)},o.a.createElement(Be.c,{label:me.t(t.label),checked:e.state.checkboxes[t.key].checked,onCheck:e.toggleCheckbox(e.state.checkboxes,t.key),labelStyle:{color:"#000000"},iconStyle:{fill:"#000000"},disabled:e.areActionsDisabled()}))};for(var a={},n=0;n<Ea.length;n++){a[Ea[n].key]={checked:!1}}return e.state={checkboxes:a,loading:!1,lastYears:ka,notifications:[],intervalId:null},e.initAnalyticsTablesGeneration=e.initAnalyticsTablesGeneration.bind(Object(xe.a)(e)),e.onChangeLastYears=e.onChangeLastYears.bind(Object(xe.a)(e)),e}return Object(Ce.a)(t,e),Object(Se.a)(t,[{key:"componentDidMount",value:function(){this.requestTaskSummary()}},{key:"componentWillReceiveProps",value:function(e){var a={};Object.keys(e).forEach(function(n){e.hasOwnProperty(n)&&t.STATE_PROPERTIES.includes(n)&&(a[n]=e[n])}),a!=={}&&this.setState(a)}},{key:"componentWillUnmount",value:function(){Object(Ve.a)(Object(Ee.a)(t.prototype),"componentWillUnmount",this).call(this),this.cancelPoollingRequests()}},{key:"cancelPoollingRequests",value:function(){clearInterval(this.state.intervalId)}},{key:"setLoadingPageState",value:function(){this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:je.c},pageState:{loading:!0,notifications:[]}})}},{key:"setLoadedPageWithErrorState",value:function(e){var t=e&&e.message?e.message:me.t(he.analytics.unexpectedError);this.cancelPoollingRequests(),this.context.updateAppState({showSnackbar:!0,snackbarConf:{type:je.b,message:t},pageState:{loading:!1}})}},{key:"areActionsDisabled",value:function(){return this.state.loading}},{key:"buildFormData",value:function(){for(var e=null,t=Object.keys(this.state.checkboxes),a=0;a<t.length;a++){var n=t[a],o=this.state.checkboxes[n].checked;(e=e||new FormData).append(n,o)}return this.state.lastYears!==ka&&e.append("lastYears",this.state.lastYears),e}},{key:"initAnalyticsTablesGeneration",value:function(){var e=this,t=this.context.d2.Api.getApi(),a=this.buildFormData();this.setLoadingPageState(),t.post("resourceTables/analytics",a).then(function(t){if(e.isPageMounted()&&t){var a=e.startsPooling();e.setState({intervalId:a})}}).catch(function(t){e.isPageMounted()&&e.setLoadedPageWithErrorState(t)})}},{key:"getUpdatedNotifications",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e.length<=this.state.notifications.length)return this.state.notifications;var t=e.length-1;return e.reverse().map(function(e,a){return Object(ke.a)({},e,{completed:e.completed||a<t})})}},{key:"requestTaskSummary",value:function(){var e=this;this.context.d2.Api.getApi().get("system/tasks/ANALYTICS_TABLE").then(function(t){e.isPageMounted()&&(e.isAnalyzingTables()?e.updateStateForInProgressJobAccordingTaskSummaryResponse(t):e.verifyInProgressJobsForTaskSummaryResponseAndUpdateState(t))}).catch(function(t){e.isPageMounted()&&e.setLoadedPageWithErrorState(t)})}},{key:"onChangeLastYears",value:function(e,t,a){this.setState({lastYears:a})}},{key:"render",value:function(){var e=Ea.map(this.renderCheckbox);return o.a.createElement("div",null,o.a.createElement("h1",null,me.t(he.analytics.title),o.a.createElement(tt,{sectionDocsKey:Ia(this.props.sectionKey)})),o.a.createElement(Be.a,{className:gt.a.cardContainer},o.a.createElement(Be.b,null,o.a.createElement("h4",{className:gt.a.uppercase},he.analytics.analyticsTablesUpdateHeader),o.a.createElement("div",{className:we()(gt.a.gridContainer,"row")},e,o.a.createElement(Be.k,{disabled:this.areActionsDisabled(),className:"col-xs-12 col-md-6",floatingLabelText:me.t(he.analytics.lastYearsLabel),onChange:this.onChangeLastYears,value:this.state.lastYears,fullWidth:!0},va.map(function(e){return o.a.createElement(Be.i,{key:e.key,value:e.value,primaryText:me.t(e.displayName)})}))),o.a.createElement(Be.j,{id:"startExportBtnId",primary:!0,label:me.t(he.analytics.actionButton),onClick:this.initAnalyticsTablesGeneration,disabled:this.areActionsDisabled()}))),this.state.notifications.length>0&&o.a.createElement(Be.a,{className:gt.a.cardContainer},o.a.createElement(Be.b,null,o.a.createElement(ft,{notifications:this.state.notifications,animateIncomplete:!0}))))}}]),t}(ze);xa.STATE_PROPERTIES=["checkboxes","loading","lastYears","notifications","intervalId"];var Ca=xa,Oa=[{key:"dataIntegrity",path:"/data-integrity",component:it,info:{label:he.dataIntegrity.label,icon:"link",description:he.dataIntegrity.description,actionText:he.dataIntegrity.actionText,docs:"dataAdmin_dataIntegrity"}},{key:"maintenance",path:"/maintenance",component:ht,info:{label:he.maintenance.label,icon:"settings",description:he.maintenance.description,actionText:he.maintenance.actionText,docs:"data_admin_maintenance"}},{key:"resourceTables",path:"/resourceTables",component:Ct,info:{label:he.resourceTables.label,icon:"view_list",description:he.resourceTables.description,actionText:he.resourceTables.actionText,docs:"dataAdmin_resourceTables"}},{key:"analytics",path:"/analytics",component:Ca,info:{label:he.analytics.label,icon:"multiline_chart",description:he.analytics.description,actionText:he.analytics.actionText,docs:"generate_analytics_tables"}},{key:"statistics",path:"/data-statistics",component:_t,info:{label:he.dataStatistics.label,icon:"timeline",description:he.dataStatistics.description,actionText:he.dataStatistics.actionText,docs:"dataAdmin_dataStatistics"}},{key:"lock",path:"/lock-exception",component:pa,info:{label:he.lockException.label,icon:"lock",description:he.lockException.description,actionText:he.lockException.actionText,docs:"dataAdmin_lockException"}},{key:"minMax",path:"/min-max-value-generation",component:ba,info:{label:he.minMaxValueGeneration.label,icon:"compare_arrows",description:he.minMaxValueGeneration.description,actionText:he.minMaxValueGeneration.actionText,docs:"dataAdmin_minMaxValueGeneration"}}],Ia=function(e){for(var t=0;t<Oa.length;t++){var a=Oa[t];if(a.key===e)return a.info.docs}return""},Pa=a(777),Ta=a.n(Pa),Aa=function(){var e=Oa.map(function(e){return o.a.createElement("div",{key:e.key,className:we()("col-sm-12 col-md-6 col-lg-4",Ta.a.gridContainer)},o.a.createElement(Ge,{key:e.key,section:e}))});return o.a.createElement("div",{id:"grid-list-id",className:"row"},e)},Ra=function(e){function t(){return Object(fe.a)(this,t),Object(ve.a)(this,Object(Ee.a)(t).apply(this,arguments))}return Object(Ce.a)(t,e),Object(Se.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h3",null,"No match for ",o.a.createElement("code",null,this.props.location.pathname)))}}]),t}(n.PureComponent),ja=function(e){var t=e.pageState,a=Oa.map(function(e){return o.a.createElement(Pe.a,{key:e.key,exact:!0,path:e.path,render:function(){var a=e.component;return o.a.createElement(a,Object.assign({sectionKey:e.key},t))}})});return a.push(o.a.createElement(Pe.a,{key:"home",exact:!0,path:"/",render:function(){return o.a.createElement(Aa,{sectionKey:"home"})}})),a.push(o.a.createElement(Pe.a,{key:"no-match-route",component:Ra})),o.a.createElement("main",null,o.a.createElement(Pe.c,null,a))};ja.defaultProps={pageState:{}};var _a=ja,Da=(a(1631),a(240)),wa=a.n(Da),Na=function(e){function t(e,a){var n;return Object(fe.a)(this,t),n=Object(ve.a)(this,Object(Ee.a)(t).call(this,e)),ye(a.d2),n.state={currentSection:"",showSnackbar:!1,snackbarConf:{type:"",message:""}},n.updateAppState=n.updateAppState.bind(Object(xe.a)(n)),n}return Object(Ce.a)(t,e),Object(Se.a)(t,[{key:"getChildContext",value:function(){return{showSnackbar:this.state.showSnackbar,snackbarConf:this.state.snackbarConf,currentSection:this.state.currentSection,updateAppState:this.updateAppState}}},{key:"updateAppState",value:function(e){e.currentSection&&!e.pageState&&this.state.currentSection!==e.currentSection?this.setState(Object(ke.a)({},e,{pageState:void 0,showSnackbar:!1})):this.setState(e)}},{key:"showLoadingProgress",value:function(){return this.state.snackbarConf.type===je.c&&this.state.showSnackbar}},{key:"render",value:function(){var e=Oa.map(function(e){return Object.assign(e,{icon:e.info.icon,label:me.t(e.info.label),containerElement:o.a.createElement(r.b,{to:e.path})})}),t=this.showLoadingProgress()?o.a.createElement("div",{id:"circularLoadingId",className:wa.a.centered},o.a.createElement(_e.a,null)):o.a.createElement("span",{id:"feedbackSnackbarId"},o.a.createElement(Re.a,{show:this.state.showSnackbar,conf:this.state.snackbarConf}));return o.a.createElement("div",null,o.a.createElement(Te.a,{d2:this.context.d2}),o.a.createElement(Ae.a,{sections:e,currentSection:this.state.currentSection,onChangeSection:function(){return null}}),o.a.createElement("div",{className:wa.a.contentWrapper},o.a.createElement("div",{className:wa.a.contentArea},o.a.createElement(_a,{pageState:this.state.pageState}))),t)}}]),t}(n.PureComponent);Na.childContextTypes={showSnackbar:Ie.a.bool,snackbarConf:Ie.a.shape({type:Ie.a.string,message:Ie.a.string,duration:Ie.a.number}),currentSection:Ie.a.string,updateAppState:Ie.a.func},Na.contextTypes={d2:Ie.a.object};var Ma=Object(Pe.e)(Na),Ua=a(177),La=a.n(Ua),Wa=a(120),Ga=a.n(Wa),Va=a(35),Ba=a(72),Fa={spacing:La.a,fontFamily:"Roboto, sans-serif",palette:{primary1Color:"#004ba0",primary2Color:Va.blue700,primary3Color:Va.blue100,accent1Color:Va.orange500,accent2Color:Va.grey100,accent3Color:Va.orangeA200,textColor:Va.darkBlack,alternateTextColor:Va.white,canvasColor:Va.white,borderColor:Va.grey400,disabledColor:Object(Ba.fade)(Va.darkBlack,.3)}},qa=Ga()(Fa),Ha=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function za(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}a(1632);var Ja=Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_DHIS2_BASE_URL:"..",REACT_APP_DHIS2_AUTHORIZATION:""}),Ka=Ja.NODE_ENV,Qa=Ja.REACT_APP_DHIS2_BASE_URL,Ya="production"===Ka;u.a.setLevel(Ya?u.a.levels.INFO:u.a.levels.DEBUG),s.a.render(o.a.createElement(l.a,{muiTheme:qa,initConfig:{baseUrl:"".concat(Qa,"/api"),schemas:["organisationUnitLevel","organisationUnitGroup","organisationUnit","dataSet"]}},o.a.createElement(r.a,null,o.a.createElement(Ma,null))),document.getElementById("root")),Object(c.getUserSettings)().then(function(e){var t=e.keyUiLocale;sessionStorage.setItem("uiLocale",t||"en"),be(e)}),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat(".","/service-worker.js");Ha?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):za(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):za(t,e)})}}()},185:function(e,t,a){e.exports={header:"DataStatistics_header__p7foM",card:"DataStatistics_card__mDPJ-",maxWith:"DataStatistics_maxWith__2zNVC",statisticsTable:"DataStatistics_statisticsTable__2XTkA"}},240:function(e,t,a){e.exports={contentArea:"App_contentArea__Y_GhT",contentWrapper:"App_contentWrapper__32IM7",leftBar:"App_leftBar__1mpSD",maxWith:"App_maxWith__1vR49",centered:"App_centered__2lsYq"}},62:function(e,t,a){e.exports={header:"LockException_header__dyd3d",lockExceptionsTable:"LockException_lockExceptionsTable__1paHO",headerContainer:"LockException_headerContainer__3J2l-",lockExceptionsTableHeader:"LockException_lockExceptionsTableHeader__1jVaZ",lockExceptionDialog:"LockException_lockExceptionDialog__sTCQv",actionButton:"LockException_actionButton__GxV5Y",marginForAddButton:"LockException_marginForAddButton___jM6B",backArrowIcon:"LockException_backArrowIcon__bqYJA",headerDivider:"LockException_headerDivider__1Jmw9",subHeader:"LockException_subHeader__2eaI_"}},63:function(e,t,a){e.exports={header:"MinMaxValueGeneration_header__fUpSR",container:"MinMaxValueGeneration_container__1-7C3",label:"MinMaxValueGeneration_label__tiRs1",left:"MinMaxValueGeneration_left__2GQh_",right:"MinMaxValueGeneration_right__3ZlgU",tree:"MinMaxValueGeneration_tree__1ZHiH",select:"MinMaxValueGeneration_select__3vyVQ",options:"MinMaxValueGeneration_options__3UKne",actionButton:"MinMaxValueGeneration_actionButton__20YMs"}},663:function(e){e.exports={}},664:function(e){e.exports={}},665:function(e){e.exports={}},666:function(e){e.exports={}},667:function(e){e.exports={}},668:function(e){e.exports={}},669:function(e){e.exports={}},670:function(e){e.exports={}},671:function(e){e.exports={}},672:function(e){e.exports={}},673:function(e){e.exports={}},674:function(e){e.exports={}},675:function(e){e.exports={}},676:function(e){e.exports={}},677:function(e){e.exports={}},678:function(e){e.exports={}},679:function(e){e.exports={}},68:function(e,t,a){e.exports={description:"ResourceTables_description__2hLwQ",tableName:"ResourceTables_tableName__lXb9P"}},680:function(e){e.exports={}},681:function(e){e.exports={}},682:function(e){e.exports={}},683:function(e){e.exports={}},684:function(e){e.exports={}},685:function(e){e.exports={}},686:function(e){e.exports={}},687:function(e){e.exports={}},688:function(e){e.exports={}},689:function(e){e.exports={}},690:function(e){e.exports={}},691:function(e){e.exports={}},692:function(e){e.exports={}},693:function(e){e.exports={}},694:function(e){e.exports={}},695:function(e){e.exports={}},696:function(e){e.exports={}},697:function(e){e.exports={}},698:function(e){e.exports={}},699:function(e){e.exports={}},700:function(e){e.exports={}},701:function(e){e.exports={}},702:function(e){e.exports={}},703:function(e){e.exports={}},704:function(e){e.exports={}},705:function(e){e.exports={}},706:function(e){e.exports={}},707:function(e){e.exports={}},708:function(e){e.exports={}},709:function(e){e.exports={}},710:function(e){e.exports={}},711:function(e){e.exports={}},712:function(e){e.exports={}},713:function(e){e.exports={}},76:function(e,t,a){e.exports={uppercase:"Page_uppercase__3aXaa",gridContainer:"Page_gridContainer__m1quO",formControl:"Page_formControl__25tWj",cardContainer:"Page_cardContainer__15_ZW"}},768:function(e,t,a){e.exports={card:"DataIntegrityCard_card__2aV7f"}},769:function(e,t,a){e.exports={header:"DataIntegrity_header__14PbW"}},777:function(e,t,a){e.exports={gridContainer:"Home_gridContainer__2RzmA"}},784:function(e,t,a){e.exports=a(1633)}},[[784,1,2]]]);
//# sourceMappingURL=main.c350bfb4.chunk.js.map